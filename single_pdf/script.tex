\hypertarget{einfuxfchrung}{%
\chapter{Einführung}\label{einfuxfchrung}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Motivation\ der\ Vorlesung\ "Softwareentwicklung"\ und\ Beschreibung\ der\ Organisation\ der\ Veranstaltung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/00_Einfuehrung.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{zielstellung-der-veranstaltung}{%
\section{Zielstellung der
Veranstaltung}\label{zielstellung-der-veranstaltung}}

\includegraphics{https://media.giphy.com/media/3oKIP9M5hm5YxsG58I/giphy.gif}

\hypertarget{qualifikationsziele-kompetenzen}{%
\subsection{Qualifikationsziele /
Kompetenzen}\label{qualifikationsziele-kompetenzen}}

Studierende sollen \ldots{}

\begin{itemize}
\item
  die Konzepte objektorientierten und interaktiven Programmierung
  verstehen,
\item
  die Syntax und Semantik einer objektorientierten Programmiersprache
  beherrschen um Probleme kollaborativ bei verteilter Verantwortlichkeit
  von Klassen von einem Computer lösen lassen,
\item
  in der Lage sein, interaktive Programme unter Verwendung einer
  objektorientierten Klassenbibliothek zu erstellen.
\end{itemize}

{[}Auszug aus dem Modulhandbuch 2020{]}

\hypertarget{zielstellung-der-veranstaltung-1}{%
\subsection{Zielstellung der
Veranstaltung}\label{zielstellung-der-veranstaltung-1}}

\begin{quote}
\emph{Wir lernen effizient guten Code in einem kleinen Team zu
schreiben.}
\end{quote}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.45\columnwidth}\raggedright
Genereller Anspruch\strut
\end{minipage} & \begin{minipage}[b]{0.49\columnwidth}\raggedright
Spezifischer Anspruch\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.45\columnwidth}\raggedright
Verstehen verschiedener Programmierparadigmen UNABHÄNGIG von der
konkreten Programmiersprache\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
Objektorientierte (und funktionale) Programmierung am Beispiel von
C\#\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.45\columnwidth}\raggedright
praktische Einführung in die methodische Softwareentwicklung\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
Arbeit mit ausgewählten UML Diagrammen und Entwurfsmustern\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.45\columnwidth}\raggedright
Grundlagen der kooperativ/kollaborative Programmierung und
Projektentwicklung\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
Verwendung von Projektmanagementtools und einer Versionsverwaltung für
den Softwareentwicklungsprozess\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Obwohl Einstimmigkeit darüber besteht, dass kooperative Arbeit für
Ingenieure Grundlage der täglichen Arbeitswelt ist, bleibt die
Wissensvermittlung im Rahmen der Ausbildung nahezu aus.

\begin{quote}
\textbf{Frage:} \emph{Welche Probleme sehen Sie bei der Teamarbeit? }
\end{quote}

\begin{quote}
\textbf{Spezifisches Ziel:} Wir wollen Sie für die Konzepte und
Werkzeuge der kollaborativen Arbeit bei der Softwareentwicklung
``sensibilisieren''.

\begin{itemize}
\tightlist
\item
  Wer definiert die Feature, die unsere Lösung ausmachen?
\item
  Wie behalten wir bei synchronen Codeänderungen der Überblick?
\item
  Welchen Status hat die Erfüllung der Aufgabe X erreicht?
\item
  Wie können wir sicherstellen, dass Code in jedem Fall kompiliert und
  Grundfunktionalitäten korrekt ausführt?
\item
  \ldots{}
\end{itemize}
\end{quote}

\hypertarget{wozu-brauche-ich-das}{%
\subsection{Wozu brauche ich das?}\label{wozu-brauche-ich-das}}

\begin{quote}
Anhand der Veranstaltung entwickeln Sie ein ``Gefühl'' für guten und
schlechten Code und hinterfragen den Softwareentwicklungsprozess.
\end{quote}

\textbf{Beispiel 1: Mariner 1 Steuerprogramm-Bug (1962)}

\includegraphics{./img/00_Einleitung/Atlas_Agena_with_Mariner_1.jpg}\footnote{wikimedia,
  Autor: NASA,
  \href{https://de.wikipedia.org/wiki/Datei:Atlas_Agena_with_Mariner_1.jpg}{Link}}

Mariner 1 ging beim Start am 22. Juli 1962 durch ein fehlerhaftes
Steuerprogramm verloren, als die Trägerrakete vom Kurs abkam und 293
Sekunden nach dem Start gesprengt werden musste. Ein Entwickler hatte
einen Überstrich in der handgeschriebenen Spezifikation eines Programms
zur Steuerung des Antriebs übersehen und dadurch statt geglätteter
Messwerte Rohdaten verwendet, was zu einer fehlerhaften und potenziell
gefährlichen Fehlsteuerung des Antriebs führte.

\href{http://www.nfranze.de/download/Diplomarbeit_Nico_Franze.pdf}{Link
auf Beschreibung des Bugs}

\begin{quote}
\textbf{Potentieller Lösungsansatz}: Testen \& Dokumentation
\end{quote}

\textbf{Beispiel 2: Toll-Collect On-Board-Units (2003)}

Das Erfassungssystem für die Autobahngebühren für Lastkraftwagen sollte
ursprünglich zum 31. August 2003 gestartet werden. Nachdem die
organisatorischen und technischen Mängel offensichtlich geworden waren,
erfolgte eine mehrfache Restrukturierung. Seit 1. Januar 2006 läuft das
System, mit einer Verzögerung von über zwei Jahren, mit der vollen
Funktionalität. Eine Baustelle war die On-Board-Units (OBU), diese
konnte zunächst nicht in ausreichender Stückzahl geliefert und eingebaut
werden, da Schwierigkeiten mit der komplexen Software der Geräte
bestanden.

Die On-Board-Units des Systems

\begin{itemize}
\tightlist
\item
  reagierten nicht auf Eingaben
\item
  ließen sich nicht ausschalten
\item
  schalteten sich grundlos aus
\item
  zeigten unterschiedliche Mauthöhen auf identischen Strecken an
\item
  wiesen Autobahnstrecken fehlerhaft als mautfrei/mautpflichtig aus
\end{itemize}

\begin{quote}
\textbf{Potentieller Lösungsansatz}: Testen auf Integrationsebene,
Projektkoordination
\end{quote}

\hypertarget{organisatorisches}{%
\section{Organisatorisches}\label{organisatorisches}}

\includegraphics{https://media.giphy.com/media/uMaTkVdfhzlemBQD3g/giphy.gif}

\hypertarget{dozenten}{%
\subsection{Dozenten}\label{dozenten}}

\begin{longtable}[]{@{}ll@{}}
\toprule
Name & Email\tabularnewline
\midrule
\endhead
Sebastian Zug & sebastian.zug@informatik.tu-freiberg.de\tabularnewline
Galina Rudolf & galina.rudolf@informatik.tu-freiberg.de\tabularnewline
Nico Sonack & nico.sonack@student.tu-freiberg.de\tabularnewline
Felix Busch & Felix.Busch@student.tu-freiberg.de\tabularnewline
Anne Gierig & anne.gierich@student.tu-freiberg.de\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{ablauf}{%
\subsection{Ablauf}\label{ablauf}}

Jetzt wird es etwas komplizierter \ldots{} die Veranstaltung kombiniert
nämlich zwei Vorlesungen:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.10\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.22\columnwidth}\raggedright
\emph{Softwareentwicklung (SWE)}\strut
\end{minipage} & \begin{minipage}[b]{0.59\columnwidth}\raggedright
\emph{Einführung in die Softwareentwicklung (EiS)}\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.10\columnwidth}\raggedright
Hörerkreis\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
Fakultät 1 + interessierte Hörer\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
Fakultät 4 - Studiengang Engineering\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
Leistungspunkte\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
9\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
6\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
Vorlesungen\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
28 (2 Feiertage)\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
15 (bis 31. Mai 2021)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
Übungen\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
ab Mai 2 x wöchentlich\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
ab 25. April 8 Übungen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
zusätzliches Python Tutorial ab Juni\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
Prüfungsform\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
Klausur oder Projekt\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
maschinenbauspezifisches Software-Projekt (im Wintersemester
2021/22)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.10\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.22\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.59\columnwidth}\raggedright
Prüfungsvoraussetzung: Erfolgreiche Bearbeitung der finalen Aufgabe im
Sommersemester\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{quote}
\textbf{Ermunterung an unsere EiS-Hörer}: Nehmen Sie an der ganzen
Vorlesungsreihe teil. Den Einstieg haben Sie ja schon gelegt \ldots{}
\end{quote}

\hypertarget{struktur-der-vorlesungen}{%
\subsection{Struktur der Vorlesungen}\label{struktur-der-vorlesungen}}

\begin{longtable}[]{@{}llll@{}}
\toprule
Woche & Tag & Inhalt der Vorlesung & Bemerkung\tabularnewline
\midrule
\endhead
1 & 4. April & Organisation, Einführung von GitHub und LiaScript
&\tabularnewline
& 8. April & Softwareentwicklung als Prozess &\tabularnewline
2 & 11. April & Konzepte von Dotnet und C\# &\tabularnewline
& 15. April & \emph{Karfreitag} &\tabularnewline
3 & 18. April & \emph{Ostermontag} &\tabularnewline
& 22. April & Elemente der Sprache C\# (Datentypen) &\tabularnewline
4 & 25. April & Elemente der Sprache C\# (Forts. Datentypen)
&\tabularnewline
& 29. April & Elemente der Sprache C\# (Ein-/Ausgaben) &\tabularnewline
5 & 2. Mai & Programmfluss und Funktionen &\tabularnewline
& 6. Mai & Strukturen / Konzepte der OOP &\tabularnewline
6 & 9. Mai & Säulen Objektorientierter Programmierung &\tabularnewline
& 13. Mai & Klassenelemente in C\# / Vererbung &\tabularnewline
7 & 16. Mai & Klassenelemente in C\# / Vererbung &\tabularnewline
& 20. Mai & Versionsmanagement im Softwareentwicklungsprozess
&\tabularnewline
8 & 23. Mai & Git und Continuous integration in GitHub &\tabularnewline
& 27. Mai & UML Konzepte &\tabularnewline
9 & 30. Mai & UML Diagrammtypen & Ende EiS
Vorlesungsinhalte\tabularnewline
& 3. Juni & UML Anwendungsbeispiel &\tabularnewline
10 & 6. Juni & \emph{Pfingstmontag} &\tabularnewline
& 10. Juni & Testen &\tabularnewline
11 & 13. Juni & Dokumentation &\tabularnewline
& 17. Juni & Build Toolchains und ihr Einsatz &\tabularnewline
12 & 20. Juni & Generics &\tabularnewline
& 24. Juni & Container &\tabularnewline
13 & 27. Juni & Delegaten &\tabularnewline
& 1. Juli & Events &\tabularnewline
14 & 4. Juli & Threadkonzepte in C\# &\tabularnewline
& 8. Juli & Taskmodell &\tabularnewline
15 & 11. Juli & Language Integrated Query &\tabularnewline
& 15. Juli & Design Pattern &\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{durchfuxfchrung}{%
\subsection{Durchführung}\label{durchfuxfchrung}}

Die Vorlesung wurden im vergangenen Semester aufgezeichnet. Die Inhalte
finden sich unter

https://teach.informatik.tu-freiberg.de/b/seb-blv-unz-kxu

\begin{quote}
Diese Materialien können der Nachbereitung der Veranstaltung dienen,
ersetzen aber nicht den Besuch der Vorlesung.
\end{quote}

Die Vorlesung findet

\begin{itemize}
\tightlist
\item
  Montags, 11:00 - 12:30
\item
  Freitags, 9:15 - 10:45
\end{itemize}

im Audimax 1001 statt.

Die Materialien der Vorlesung sind als Open-Educational-Ressources
konzipiert und stehen unter Github bereit.

\begin{quote}
Wie können Sie sich einbringen?

\begin{itemize}
\item
  \textbf{Allgemeine theoretische Fragen/Antworten} \ldots{} Dabei
  können Sie sich über github/ das Opal-Forum in die Diskussion
  einbringen.
\item
  \textbf{Rückmeldungen/Verbesserungsvorschläge zu den
  Vorlesungsmaterialien} \ldots{} \emph{``Das versteht doch keine
  Mensch! Ich würde vorschlagen \ldots{}''} \ldots{} dann korrigieren
  Sie uns. Alle Materialien sind Open-Source. Senden Sie mir einen
  Pull-Request und werden Sie Mitautor.
\end{itemize}
\end{quote}

Die Übungen bestehen aus selbständig zu bearbeitenden Aufgaben, wobei
einzelne Lösungen im Detail besprochen werden. Wir werden die
Realisierung der Übungsaufgaben über die Plattform GitHub abwickeln.

\begin{quote}
Wie können Sie sich einbringen?

\begin{itemize}
\item
  \textbf{Allgemeine praktische Fragen/Antworten} \ldots{} in den
  genannten Foren bzw. in den Übungsveranstaltungen
\item
  \textbf{Eigene Lösungen} \ldots{} Präsentation der Implementierungen
  in den Übungen
\item
  \textbf{Individuelle Fragen} \ldots{} an die Übungsleiter per Mail
  oder in einer individuellen Session
\end{itemize}
\end{quote}

Für die Übungen werden wir Aufgaben vorbereiten, mit denen die Inhalte
der Vorlesung vertieft werden. Wir motivieren Sie sich dafür ein Gruppen
von 2 Studierenden zu organisieren.

\begin{verbatim}
                   .-.       .-.
 Einführung C#    (0-2)     ( 3 ) Einführung Git/ GitHub
                   '-'       '-'  Teamarbeit
                     \       /
                      \     /
                       v   v
                        .-.
                       ( 4 )  Objektorientierte Programmierung
                        '-'
                         |
                         v
                        .-.
  Alle Teilnehmer      ( 5 )  Basiselemente Objektorientierte Programmierung
                        '-'
 ::::::::::::::::::::::::|:::::::::::::::::::::::::::::::::::::::::::
                         v
  Informatiker          .-.
  Mathematiker         ( 6 )  Erweiterte OOP Konzepte, Generics
                        '-'   Entwurfsmuster
                         |
                         v
                        .-.
                       ( 7 )  Collections, Delegaten, Events
                        '-'
\end{verbatim}

\begin{longtable}[]{@{}lllllc@{}}
\toprule
\begin{minipage}[b]{0.04\columnwidth}\raggedright
Index\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright
C\#\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright
GitHub\strut
\end{minipage} & \begin{minipage}[b]{0.09\columnwidth}\raggedright
Teamarbeit\strut
\end{minipage} & \begin{minipage}[b]{0.54\columnwidth}\raggedright
Inhalte / Teilaufgaben\strut
\end{minipage} & \begin{minipage}[b]{0.06\columnwidth}\centering
Woche\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.04\columnwidth}\raggedright
0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
Basics\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Toolchain, Datentypen, Fehler, Ausdrücke,\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
5\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
1\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Kontrollfluss, Arrays\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
6\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
2\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
static Funktionen, Klasse und Struktur, Nullables\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
7\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
3\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
-\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Github am Beispiel von Markdown\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
8\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
4\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
OOP\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Einführungsbeispiel OOP,\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
9\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\emph{Anwendungsbeispiel:} Computersimulation\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
5\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
OOP\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Vererbung, virtuelle Methoden, Indexer, Überladene Operatoren,\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
10-11\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\emph{Anwendungsbeispiel:} Smartphone (Entwurf mit UML)\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
6\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
OOP\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Vererbung, abstract, virtuell, Generics\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
12-13\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\emph{Anwendungsbeispiel:} Zoo\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
7\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
OOP\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Genererische Collections, Delegaten, Events\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
14-15\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\emph{Anwendungsbeispiel:} ???????\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\centering
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{pruxfcfungen}{%
\subsection{Prüfungen}\label{pruxfcfungen}}

In der Klausur werden neben den Programmierfähigkeiten und dem
konzeptionellen Verständnis auch die Werkzeuge der Softwareentwicklung
adressiert!

\begin{itemize}
\item
  \textbf{Softwareentwicklung:} Konventionelle Klausur ODER
  Programmieraufgabe in Zweier-Team anhand einer selbstgewählten Aufgabe
\item
  \textbf{Einführung in die Softwareentwicklung:} Teamprojekt und
  Projektpräsentationen (im Wintersemester 2022/23) bei bestandener
  Prüfungsvorleistung in Form einer Teamaufgabe im Sommersemester
\end{itemize}

\begin{figure}
\centering
\includegraphics{./img/00_Einleitung/Klausur2020.png}
\caption{Klausurergebnisse Softwareentwicklung 2020}
\end{figure}

\hypertarget{zeitaufwand-und-engagement}{%
\subsection{Zeitaufwand und
Engagement}\label{zeitaufwand-und-engagement}}

Mit der Veranstaltung Softwareentwicklung verdienen Sie sich
\texttt{9\ CP}/\texttt{6\ CP}. Eine Hochrechnung mit der von der
Kultusministerkonferenz vorgegebenen Formel
\texttt{1\ CP\ =\ 30\ Zeitstunden} bedeutet, dass Sie dem Fach im Mittel
über dem Semester \texttt{270\ Stunden} widmen sollten \ldots{}
entsprechend bleibt neben den Vorlesungen und Übungen genügend Zeit für
die Vor- und Nachbereitung der Lehrveranstaltungen, die eigenständige
Lösung von Übungsaufgaben sowie die Prüfungsvorbereitung.

\begin{quote}
``Erzähle mir und ich vergesse. Zeige mir und ich erinnere. Lass es mich
tun und ich verstehe.''

-- \emph{(Konfuzius, chin. Phiolsoph 551-479 v. Chr.)}
\end{quote}

\textbf{Wie können Sie zum Gelingen der Veranstaltung beitragen?}

\begin{itemize}
\item
  Stellen Sie Fragen, seinen Sie kommunikativ!
\item
  Geben Sie uns Rückmeldungen in Bezug auf die Geschwindigkeit,
  Erklärmuster, etc.
\item
  Organisieren Sie sich in \emph{interdisziplinären} Arbeitsgruppen!
\item
  Lösen Sie sich von vermeindlichen Grundwahrheiten:

  \begin{itemize}
  \tightlist
  \item
    \emph{``in Python wäre ich drei mal schneller gewesen''}
  \item
    \emph{``VIM \ldots{} mehr Editor braucht kein Mensch!''}
  \end{itemize}
\end{itemize}

\hypertarget{literaturhinweise}{%
\subsection{Literaturhinweise}\label{literaturhinweise}}

\begin{quote}
Literaturhinweise werden zu verschiedenen Themen als Links oder
Referenzen in die Unterlagen integriert.
\end{quote}

Es existiert eine Vielzahl kommerzielle Angebote, die aber einzelne
Aspekte in freien Tutorial vorstellen. In der Regel gibt es keinen
geschlossenen Kurs sondern erfordert eine individuelle Suche nach
spezifischen Inhalten.

\begin{itemize}
\item
  \textbf{Online-Kurse:}

  \begin{itemize}
  \tightlist
  \item
    \href{https://docs.microsoft.com/de-de/dotnet/csharp/}{Leitfaden von
    Microsoft für C\# aber auch die Werkzeuge}
  \item
    \href{https://www.guru99.com/c-sharp-tutorial.html}{C\# Tutorial for
    Beginners: Learn in 7 Days} {[}englisch{]}
  \item
    \href{https://docs.microsoft.com/de-de/dotnet/csharp/tour-of-csharp/tutorials/}{Einsteiger
    Tutorials} {[}deutsch{]}
  \item
    \href{https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/concepts/}{Programmierkonzepte
    von C\#}
  \end{itemize}
\item
  \textbf{Video-Tutorials:}

  \begin{itemize}
  \tightlist
  \item
    !?\href{https://www.youtube.com/watch?v=GhQdlIFylQ8}{Umfangreicher
    C\# Kurs mit guten konzeptionellen Anmerkungen}
  \item
    !?\href{https://www.youtube.com/watch?v=gfkTfcpWqAY}{Einsteigerkurs
    als Ausgangspunkt für eine Tutorienreihe}
  \item
    !?\href{https://www.youtube.com/watch?v=l0aKBziWBH8}{Absoluter
    Einsteigerkurs}
  \end{itemize}

  \textbf{Algorithmen}

  \begin{itemize}
  \tightlist
  \item
    \href{http://www.rosettacode.org/wiki/Category:Programming_Tasks}{Codebeispiele}
  \end{itemize}
\item
  \textbf{Bücher:}

  \begin{itemize}
  \tightlist
  \item
    \href{https://www.oreilly.com/library/view/c-70-in/9781491987643/}{C\#
    7.0 in a Nutshell - \emph{J. Albahari, B. Albahari, O'Reilly 2017}}
  \item
    \href{https://dpunkt.de/produkt/kompaktkurs-c-7/}{Kompaktkurs C\# 7
    - \emph{H. Mössenböck, dpunkt.verlag}}
  \end{itemize}
\end{itemize}

\hypertarget{werkzeuge-der-veranstaltung}{%
\section{Werkzeuge der
Veranstaltung}\label{werkzeuge-der-veranstaltung}}

Was sind die zentralen Tools unserer Veranstaltung?

\begin{itemize}
\tightlist
\item
  \emph{Vorlesungstool} -\textgreater{} BigBlueButton für die
  Aufzeichnungen aus dem vergangenen Semester
  \href{https://www.youtube.com/watch?v=uYYnryIM0Uw}{Introduction}
\item
  \emph{Entwicklungsplattform} -\textgreater{}
  \href{https://github.com/}{GitHub}
\item
  \emph{Beschreibungssprache für Lerninhalte} -\textgreater{}
  \href{https://liascript.github.io/}{LiaScript}
\end{itemize}

\hypertarget{markdown}{%
\subsection{Markdown}\label{markdown}}

\begin{quote}
Markdown wurde von John Gruber und Aaron Swartz mit dem Ziel entworfen,
die Komplexität der Darstellung so weit zu reduzieren, dass schon der
Code sehr einfach lesbar ist. Als Auszeichnungselemente werden
entsprechend möglichst kompakte Darstellungen genutzt.
\end{quote}

Markdown ist eine Auszeichnungssprache für die Gliederung und
Formatierung von Texten und anderen Daten. Analog zu HTML oder LaTex
werden die Eigenschaften und Organisation von Textelementen (Zeichen,
Wörtern, Absätzen) beschrieben. Dazu werden entsprechende
``Schlüsselelemente'' verwendet um den Text zu strukturieren.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{# Überschrift}

\NormalTok{_eine **Hervorhebung** in kursiver Umgebung_}

\NormalTok{* }\FloatTok{Punkt 1}
\FloatTok{* Punkt 2}

\NormalTok{Und noch eine Zeile mit einer mathematischen Notation $a=cos(b)$!}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{markdown-example}{}
Überschrift

eine Hervorhebung in kursiver Umgebung

Punkt 1

Punkt 2

Und noch eine Zeile mit einer mathematischen Notation \(a=cos(b)\)!

Eine gute Einführung zu Markdown finden Sie zum Beispiel unter:

\begin{itemize}
\tightlist
\item
  \href{https://www.markdownguide.org/getting-started/}{MarkdownGuide}
\item
  \href{https://guides.github.com/features/mastering-markdown/}{GitHubMarkdownIntro}
\end{itemize}

Mit einem entsprechenden Editor und einigen Paketen macht das Ganze dann
auch Spaß

\begin{itemize}
\tightlist
\item
  Wichtigstes Element ist ein Previewer, der es Ihnen erlaubt ``online''
  die Korrektheit der Eingaben zu prüfen
\item
  Tools zur Unterstützung komplexerer Eingaben wie zum Beispiel der
  Tabellen (zum Beispiel für Atom mit
  \href{https://atom.io/packages/markdown-table-editor}{markdown-table-editor})
\item
  Visualisierungsmethoden, die schon bei der Eingabe unterstützen
\item
  Rechtschreibprüfung (!)
\end{itemize}

\hypertarget{vergleich-mit-html}{%
\subsubsection{Vergleich mit HTML}\label{vergleich-mit-html}}

Im Grunde wurde Markdown erfunden um nich umständlich HTML schreiben zu
müssen und wird zumeist in HTML übersetzt. Das dargestellte Beispiel
zeigt den gleichen Inhalt wie das Beispiel zuvor, es ist jedoch direkt
viel schwerer zu editieren, dafür bietet es weit mehr Möglichkeiten als
Markdown. Aus diesem Grund erlauben die meisten Markdown-Dialekte auch
die Nutzung von HTML.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<h1>}\NormalTok{Überschrift}\KeywordTok{</h1>}

\KeywordTok{<i>}\NormalTok{eine }\KeywordTok{<b>}\NormalTok{Hervorhebung}\KeywordTok{</b>}\NormalTok{ in kursiver Umgebung}\KeywordTok{</i>}

\KeywordTok{<ul>}
  \KeywordTok{<li>}\NormalTok{Punkt 1}\KeywordTok{</li>}
  \KeywordTok{<li>}\NormalTok{Punkt 2}\KeywordTok{</li>}
\KeywordTok{</ul>}

\NormalTok{Und noch eine Zeile mit einer mathematischen Notation}
\KeywordTok{<math}\OtherTok{ xmlns=}\StringTok{"http://www.w3.org/1998/Math/MathML"}\KeywordTok{>}
  \KeywordTok{<semantics>}
    \KeywordTok{<mrow>}
      \KeywordTok{<mi>}\NormalTok{a}\KeywordTok{</mi>}
      \KeywordTok{<mo>}\NormalTok{=}\KeywordTok{</mo>}
      \KeywordTok{<mi>}\NormalTok{c}\KeywordTok{</mi>}
      \KeywordTok{<mi>}\NormalTok{o}\KeywordTok{</mi>}
      \KeywordTok{<mi>}\NormalTok{s}\KeywordTok{</mi>}
      \KeywordTok{<mo}\OtherTok{ stretchy=}\StringTok{"false"}\KeywordTok{>}\NormalTok{(}\KeywordTok{</mo>}
      \KeywordTok{<mi>}\NormalTok{b}\KeywordTok{</mi>}
      \KeywordTok{<mo}\OtherTok{ stretchy=}\StringTok{"false"}\KeywordTok{>}\NormalTok{)}\KeywordTok{</mo>}
    \KeywordTok{</mrow>}
    \KeywordTok{<annotation}\OtherTok{ encoding=}\StringTok{"application/x-tex"}\KeywordTok{>}
\NormalTok{      a=cos(b)}
    \KeywordTok{</annotation>}
  \KeywordTok{</semantics>}
\KeywordTok{</math>}\NormalTok{!}
\end{Highlighting}
\end{Shaded}

\hypertarget{vergleich-mit-latex}{%
\subsubsection{Vergleich mit LaTex}\label{vergleich-mit-latex}}

Eine vergleichbare Ausgabe unter LaTex hätte einen deutlich größeren
Overhead, gleichzeitig eröffnet das Textsatzsystem (über einzubindende
Pakete) aber auch ein wesentlich größeres Spektrum an Möglichkeiten und
Features (automatisch erzeugte Numerierungen, komplexe Tabellen,
Diagramme), die Markdown nicht umsetzen kann.

\begin{Shaded}
\begin{Highlighting}[]
\BuiltInTok{\textbackslash{}documentclass}\NormalTok{[12pt]\{}\ExtensionTok{article}\NormalTok{\}}
\BuiltInTok{\textbackslash{}usepackage}\NormalTok{[latin1]\{}\ExtensionTok{inputenc}\NormalTok{\}}
\KeywordTok{\textbackslash{}begin}\NormalTok{\{}\ExtensionTok{document}\NormalTok{\}}
  \KeywordTok{\textbackslash{}section}\NormalTok{\{Überschrift\}}
  \FunctionTok{\textbackslash{}textit}\NormalTok{\{eine }\FunctionTok{\textbackslash{}emph}\NormalTok{\{Betonung\} in kursiver Umgebung\}}
  \KeywordTok{\textbackslash{}begin}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
    \FunctionTok{\textbackslash{}item}\NormalTok{ Punkt 1}
    \FunctionTok{\textbackslash{}item}\NormalTok{ Punkt 2}
  \KeywordTok{\textbackslash{}end}\NormalTok{\{}\ExtensionTok{itemize}\NormalTok{\}}
\NormalTok{  Und noch eine Zeile mit einer mathematischen Notation }\SpecialStringTok{$a=cos(b)$}\NormalTok{!}
\KeywordTok{\textbackslash{}end}\NormalTok{\{}\ExtensionTok{document}\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Das Ergebnis sieht dann wie folgt aus:

\begin{figure}
\centering
\includegraphics{./img/00_Einleitung/LatexScreenshot.png}
\caption{pdflatexScreenshoot}
\end{figure}

\hypertarget{liascript}{%
\subsubsection{\texorpdfstring{\textbf{LiaScript}}{LiaScript}}\label{liascript}}

Das Problem der meisten Markup-Sprachen und vor allem von Markdown ist,
dass die Inhalte nicht mehr nur für ein statisches Medium (Papier/PDF)
geschrieben werden. Warum sollte ein Lehrinhalt (vorallem in der
Informatik), der vorraning am Tablet/Smartphone/Notebook konsumiert wird
nicht interaktiv sein?

LiaScript erweitert Markdown um interaktive Elemente wie:

\begin{itemize}
\tightlist
\item
  Ausführbarer Code
\item
  Animationen \& Sprachausgaben
\item
  Visualisierung
\item
  Quizze \& Umfragen
\item
  Erweiterbarkeit durch JavaScript und Macros
\item
  \ldots{}
\end{itemize}

\textbf{Einbindung von PlantUML zur Generierung von UML-Diagrammen}

\begin{verbatim}
@startuml

abstract class AbstractList
abstract AbstractCollection
interface List
interface Collection

List <|-- AbstractList
Collection <|-- AbstractCollection

Collection <|- List
AbstractCollection <|- AbstractList
AbstractList <|-- ArrayList

class ArrayList {
  Object[] elementData
  size()
}

enum TimeUnit {
  DAYS
  HOURS
  MINUTES
}

annotation SuppressWarnings

@enduml
\end{verbatim}

@plantUML.eval(png)

\textbf{Ausführbarer C\# Code}

Wichtig für uns sind die ausführbaren Code-Blöcke, die ich in der
Vorlesung nutze, um Beispielimplementierungen zu evaluieren. Dabei
werden zwei Formen unterschieden:

\textbf{C\# 10 mit dotnet Unterstützung}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Text}\NormalTok{;}

\DataTypeTok{int}\NormalTok{ n;}
\NormalTok{Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"Number of primes: "}\NormalTok{);}
\NormalTok{n = }\DataTypeTok{int}\NormalTok{.}\FunctionTok{Parse}\NormalTok{(Console.}\FunctionTok{ReadLine}\NormalTok{());}

\NormalTok{ArrayList primes = }\KeywordTok{new} \FunctionTok{ArrayList}\NormalTok{();}
\NormalTok{primes.}\FunctionTok{Add}\NormalTok{(}\DecValTok{2}\NormalTok{);}

\KeywordTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{3}\NormalTok{; primes.}\FunctionTok{Count}\NormalTok{ < n; i++) \{}
    \DataTypeTok{bool}\NormalTok{ isPrime = }\KeywordTok{true}\NormalTok{;}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{int}\NormalTok{ num }\KeywordTok{in}\NormalTok{ primes) isPrime &= i % num != }\DecValTok{0}\NormalTok{;}
    \KeywordTok{if}\NormalTok{(isPrime) primes.}\FunctionTok{Add}\NormalTok{(i);}
\NormalTok{\}}

\NormalTok{Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"Primes: "}\NormalTok{);}
\KeywordTok{foreach}\NormalTok{(}\DataTypeTok{int}\NormalTok{ prime }\KeywordTok{in}\NormalTok{ primes) Console.}\FunctionTok{Write}\NormalTok{($}\StringTok{" \{prime\}"}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\textbf{C\# 8 mit mono}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{namespace}\NormalTok{ HelloWorld}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{  \{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Glück auf!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Frage:} Welche Unterschiede sehen Sie zwischen C\#8 und C\#10
Code schon jetzt?
\end{quote}

** Quellen \& Tools**

\begin{itemize}
\item
  Das Projekt: https://github.com/liascript/liascript
\item
  Die Webseite: https://liascript.github.io
\item
  Nützliches

  \begin{itemize}
  \tightlist
  \item
    \href{https://liascript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md\#1}{Dokumentation
    zu LiaScript}
  \item
    \href{https://www.youtube.com/channel/UCyiTe2GkW_u05HSdvUblGYg}{YouTube
    Kanal zu LiaScript}
  \end{itemize}
\item
  Editoren

  \begin{itemize}
  \item
    Für den \href{https://atom.io}{Atom}-Editor von GitHub exitieren
    derzeit zwei Plugins:

    \begin{enumerate}
    \def\labelenumi{\arabic{enumi}.}
    \item
      \href{https://atom.io/packages/liascript-preview}{liascript-preview}
    \item
      \href{https://atom.io/packages/liascript-snippets}{liascript-snippets}
    \end{enumerate}
  \item
    Für den Einsatz anderer Editoren eignet sich auch der
    \href{https://github.com/LiaScript/LiaScript-DevServer}{LiaScript-DevServer}
  \end{itemize}
\end{itemize}

\hypertarget{github}{%
\subsection{GitHub}\label{github}}

Der Kurs selbst wird als ``Projekt'' entwickelt. Neben den einzelnen
Vorlesungen finden Sie dort auch ein Wiki, Issues und die aggregierten
Inhalte als automatisch generiertes Skript.

Link zum GitHub des Kurses:
https://github.com/TUBAF-IfI-LiaScript/VL\_Softwareentwicklung

\begin{quote}
\textbf{Hinweise}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Mit den Features von GitHub machen wir uns nach und nach vertraut.
\item
  Natürlich bestehen neben Github auch alternative Umsetzungen für das
  Projektmanagement wie das Open Source Projekt GitLab oder weitere
  kommerzielle Tools BitBucket, Google Cloud Source Repositories etc.
\end{enumerate}
\end{quote}

\hypertarget{entwicklungsumgebungen}{%
\subsection{Entwicklungsumgebungen}\label{entwicklungsumgebungen}}

\textbf{Seien Sie neugierig und probieren Sie verschiedene Tools und
Editoren aus!}

\begin{itemize}
\item
  \href{https://atom.io}{Atom}

  !?\href{https://www.youtube.com/watch?v=EdBqjPSx8bA}{Tutorial}
\item
  \href{https://code.visualstudio.com/}{Visual Studio Code}

  !?\href{https://www.youtube.com/watch?v=rOzXt--TXLg}{Tutorial}
\item
  \href{https://www.vim.ort}{VIM/gVIM} /
  \href{https://neovim.io/}{neoVIM}

  !?\href{https://www.youtube.com/watch?v=qGl_Mb2C87c}{C\# Vim
  Development Setup}
\item
  weitere \ldots{}
\end{itemize}

\hypertarget{aufgaben}{%
\section{Aufgaben}\label{aufgaben}}

\begin{itemize}
\item
  {[} {]} Legen Sie sich einen GitHub Account an (sofern dies noch nicht
  geschehen ist).
\item
  {[} {]} Installieren Sie einen Editor Ihrer Wahl auf Ihrem Rechner,
  mit dem Sie Markdown-Dateien komfortabel bearbeiten können.
\item
  {[} {]} Nutzen Sie das Wiki der Vorlesung um Ihre neuen
  Markdown-Kenntnisse zu erproben und versuchen Sie sich an folgenden
  Problemen:
\item
  Recherchieren Sie weitere Softwarebugs. Dabei interessieren uns
  insbesondere solche, wo der konkrete Fehler direkt am Code
  nachvollzogen werden konnte.
\item
  Fügen Sie eine kurze Referenz auf Ihren Lieblingseditor ein und
  erklären Sie, warum Sie diesen anderen Systemen vorziehen. Ergänzen
  Sie Links auf Tutorials und Videos, die anderen nützlich sein können.
\end{itemize}

\hypertarget{softwareentwicklung-als-prozess}{%
\chapter{Softwareentwicklung als
Prozess}\label{softwareentwicklung-als-prozess}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Definition\ des\ Softwarebegriffes\ und\ der\ Herausforderungen}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/01_Software.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{softwareentwicklung}{%
\section{Softwareentwicklung}\label{softwareentwicklung}}

\hypertarget{begriffsdefinition}{%
\subsection{Begriffsdefinition}\label{begriffsdefinition}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Begriff\strut
\end{minipage} & \begin{minipage}[b]{0.82\columnwidth}\raggedright
Definitionsansatz\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Software als ``Medium''\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Software {[}ist{]} all das, was zum Funktionieren eines Computers
notwendig, aber nicht Hardware ist.}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Software ist sinnlich nicht wahrnehmbar \ldots{} . Sie ist komplex
und besteht aus umfangreichen Texten}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Software als Ziel\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Software macht den Computer nutzbar}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Software ermöglicht die Abbildung von Prozessen auf einem
Rechner}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Software als Prozess\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Software ist die Idee, die Lösung, die man sich für ein Problem
ausgedacht hat, das Verfahren, das helfen soll \ldots{}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\emph{Dabei sind Computerprogramme nicht nur als Beschreibung der
auszuführenden Funktionen \ldots{} Vereinbarung zur Nutzung, \ldots{}
Dokumentationsinhalte.}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{lebenszyklus-einer-software}{%
\subsection{Lebenszyklus einer
Software}\label{lebenszyklus-einer-software}}

\begin{quote}
Ein Software-Lebenszyklus beschreibt den gesamten Prozess der
Herstellung und des Betriebs Implementierung ausgehend von der
kundenseitigen Problemstellung über die Realisierung und den Betrieb bis
hin zur Ablösung der Software durch einen Nachfolger.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Problemstellung
\item
  Analyse Entwurf
\item
  Implementierung
\item
  Test
\item
  Markteinführung
\item
  Pflege/Wartung
\end{enumerate}

Welche Querbeziehungen (``Während der Tests wird erkannt, dass die
Implementierung Mängel aufweist.'') zwischen den einzelnen Stufen sehen
Sie?

\textbf{Welche Definitionen ergeben sich daraus für den
Entwicklungsprozess?}

\begin{quote}
``Unter dem Begriff Softwareentwicklung versteht man die Konzeption und
standardisierte Umsetzung von Softwareprojekten und die damit
verbundenen Prozesse.'' {[}\^{}Freund, S. 25{]}
\end{quote}

\ldots{} oder insbesondere auf große Projekte zielend

\begin{quote}
„Zielorientierte Bereitstellung und systematische Verwendung von
Prinzipien, Methoden und Werkzeugen für die arbeitsteilige,
ingenieurmäßige Entwicklung und Anwendung von umfangreichen
Softwaresystemen.`` {[}\^{}Balzert, S. 36{]}
\end{quote}

\hypertarget{methodische-ziele}{%
\subsection{Methodische Ziele}\label{methodische-ziele}}

\textbf{Was heißt das, ``ingenieurmäßig'' oder ``standardisiert''?}

Gemäß ISO 9126 gibt es die sechs folgenden Qualitätsmerkmale für
Softwareprodukte:

\includegraphics{./img/01_Software/ISO9126.png}

\footnote{Von Sae1962 - Eigenes Werk, CC BY-SA 4.0,
  https://commons.wikimedia.org/w/index.php?curid=52216179}

Nachfolger ISO 25010: Zusätzlich

\begin{itemize}
\tightlist
\item
  Kompatibilität
\item
  Sicherheit
\end{itemize}

Die Norm kann als eine Art Checkliste verstanden werden.

\hypertarget{und-warum-der-ganze-aufwand}{%
\section{Und warum der ganze
Aufwand?}\label{und-warum-der-ganze-aufwand}}

\hypertarget{komplexituxe4t-von-software}{%
\subsection{Komplexität von
Software}\label{komplexituxe4t-von-software}}

Steigende Komplexität der Softwareprodukte \ldots{}

\begin{longtable}[]{@{}lrl@{}}
\toprule
Projekt/Produkt & Lines of Code & Jahr\tabularnewline
\midrule
\endhead
Unix v 1.0 & 10.000 & 1971\tabularnewline
Win32/Smile Virus & 10.000 & 2002\tabularnewline
Space shuttle & 400.000 &\tabularnewline
Windows 3.1 & 2.300.000 & 1992\tabularnewline
HD DVD Player (XBox) & 4.500.000 & 2001\tabularnewline
Firefox & 9.900.000 & 2010\tabularnewline
Android & 12.000.000 &\tabularnewline
F-35 Flugzeug & 24.000.000 & 2013\tabularnewline
Facebook & 62.000.000 &\tabularnewline
Autonomes Fahrzeug & 100.000.000 &\tabularnewline
\bottomrule
\end{longtable}

Quelle unter anderem \footnote{Dragan Radovanovic, Kif Leswing, ``Google
  runs on 5000 times more code than the original space shuttle'', 2016,
  \href{https://www.weforum.org/agenda/2016/07/google-runs-on-5000-times-more-code-than-the-original-space-shuttle?utm_content=buffer45d4c\&utm_medium=social\&utm_source=twitter.com\&utm_campaign=buffer}{Link}}
und {[}\^{}McCandless{]}

Und wann entsteht der Aufwand? Wann muss ein Team Kosten in die
Entwicklung investieren?

\begin{longtable}[]{@{}lll@{}}
\toprule
Projektphase & & Relativer Kosteanteil\tabularnewline
\midrule
\endhead
Spezifikation und Architekturentwurf & Entwicklung & 16\%\tabularnewline
Detailentwurf und Kodierung & & 9\%\tabularnewline
Test & & 16\%\tabularnewline
Anpassung & Wartung & 12\%\tabularnewline
Erweiterung und Verbesserung & & 36\%\tabularnewline
Fehlerbehebung & & 12\%\tabularnewline
\bottomrule
\end{longtable}

Zahlwerte aus einem Diagramm in \footnote{Prof.~Dr.~Thorsten Lemburg,
  Einführung in die Softwareentwicklung,
  \href{https://wr.informatik.uni-hamburg.de/_media/teaching/wintersemester_2010_2011/siw-2011-lemburg-einfuehrung_in_die_softwareentwicklung-druckversion.pdf}{Link}}

\begin{quote}
\textbf{Merke:} Die Entwicklung kleiner Programme unterscheidet sich von
der Entwicklung großer Programme!
\end{quote}

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
Kriterium\strut
\end{minipage} & \begin{minipage}[b]{0.33\columnwidth}\raggedright
Kleine Programme\strut
\end{minipage} & \begin{minipage}[b]{0.44\columnwidth}\raggedright
Große Programme\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Zeilenzahl\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
bis zu ein paar 1000 Zeilen\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
Millionen von LOC\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Einsatz\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
``Eigengebrauch''\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
kommerzieller Einsatz von Dritten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Anforderungsanalyse\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
vage Idee\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
präzise Spezifikation\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Vorgehensmodell\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
unstrukturiert\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
strukturierter Entwicklungsprozesse\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Test und Validierung\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
unter Realbedingungen am Endprodukt\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
Systematische Prüfstrategie\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Komplexität\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
Überschaubare Zahl von Komponenten, Abhängigkeiten usw.\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
Hohe Komplexität, explizite Organisation in Struktureinheiten und
Modulen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Dokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
Fehlt in der Regel\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
zwingend erforlderlich, permanente Pflege\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Planung und Organisation\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
Kaum Planung und Projektorganisation\strut
\end{minipage} & \begin{minipage}[t]{0.44\columnwidth}\raggedright
zwingend erforderlich\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Darstellung entsprechen motiviert aus \footnote{Prof.~Dr.~Thorsten
  Lemburg, Einführung in die Softwareentwicklung - Seminar:
  Softwareentwicklung in der Wissenschaft,
  \href{https://wr.informatik.uni-hamburg.de/_media/teaching/wintersemester_2010_2011/siw-2011-lemburg-einfuehrung_in_die_softwareentwicklung-ausarbeitung.pdf}{Link}}.

{[}\^{}McCandless{]} David McCandless
{[}https://informationisbeautiful.net/visualizations/million-lines-of-code/){]}
(https://informationisbeautiful.net/visualizations/million-lines-of-code/)

\hypertarget{fehler-in-der-softwareentwicklung}{%
\subsection{Fehler in der
Softwareentwicklung}\label{fehler-in-der-softwareentwicklung}}

Die Zusammenfassung wurde durch die Ausführungen von \footnote{Prof.~Dr.~Thorsten
  Lemburg, Einführung in die Softwareentwicklung,
  \href{https://wr.informatik.uni-hamburg.de/_media/teaching/wintersemester_2010_2011/siw-2011-lemburg-einfuehrung_in_die_softwareentwicklung-druckversion.pdf}{Link}}
motiviert

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Management

  \begin{itemize}
  \tightlist
  \item
    Es wird mit der Codierung sofort angefangen.
  \item
    Eine Festlegung der Anforderungen/Qualitätsmerkmale fehlt
  \item
    Eine Abnahme der Phasenergebnisse erfolgt nicht
  \item
    Ein Vorgehensmodell fehlt, bzw. wird nicht verfolgt
  \item
    Die Schulung für die Software-Ersteller und -Anwender wird
    vernachlässigt oder als nicht notwendig angesehen
  \item
    Die Terminvorgaben sind unrealistisch und nicht koordiniert.
  \item
    Begriffe werden nicht definiert
  \end{itemize}
\item
  Architektur

  \begin{itemize}
  \tightlist
  \item
    Die Systemarchitektur ist nicht oder nur sehr umständlich
    erweiterbar (fehlende Datenkapselung, fehlende Modularität)
  \item
    Es wird ein unnützes Maß an Komplexität in den Entwurf integriert:
    ``\emph{Es könnte doch sein, dass \ldots{}}''
  \end{itemize}
\item
  Entwicklungfluss

  \begin{itemize}
  \tightlist
  \item
    Die Auswahl der Werkzeuge/Methoden ist unzureichend vorbereitet
  \item
    Es wird nicht systematisch bzw. unzureichend getestet.
  \item
    Standards und Richtlinien werden nicht beachtet.
  \end{itemize}
\item
  Dokumentation

  \begin{itemize}
  \tightlist
  \item
    Schlechte Namensvergabe wie z.B. File-, Klassen-, Methoden- und
    Variablennamen
  \item
    Die Dokumentation fehlt bzw. ist veraltet, unzureichend oder nicht
    adäquat
  \end{itemize}
\end{enumerate}

\hypertarget{konsequenzen-von-fehlern-im-prozess}{%
\subsection{Konsequenzen von Fehlern im
Prozess}\label{konsequenzen-von-fehlern-im-prozess}}

\begin{quote}
\textbf{Ariane Jungfernflug}
\end{quote}

V88 war die Startnummer des Erstflugs der europäischen
Schwerlast-Trägerrakete Ariane 5 am 4. Juni 1996. Die Rakete trug die
Seriennummer 501. Der Flug endete etwa 40 Sekunden nach dem Start, als
die Rakete nach einer Ausnahmesituation in der Software der
Steuereinheit plötzlich vom Kurs abkam und sich kurz darauf selbst
zerstörte. Vier Cluster-Forschungssatelliten zur Untersuchung des
Erdmagnetfelds gingen dabei verloren (Schaden 290 Millionen Euro).

\includegraphics{./img/01_Software/Ariane88.png} \footnote{Wikimedia,
  Autor Phrd, Fragment fallout zone of failed Ariane 501 launch.
  \href{http://www.esa.int/esapub/bulletin/bullet89/images/dalm89f4.gif,\%20https://commons.wikimedia.org/wiki/File:Ariane_501_Fallout_Zone.svg}{Link}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{-- Overflow is correctly handled for the vertical component}
\NormalTok{L_M_BV_}\DecValTok{32}\NormalTok{ := TBD.T_ENTIER_16S((}\FloatTok{1.0}\NormalTok{ / C_M_LSB_BH) *}
\NormalTok{                                   G_M_INFO_DERIVE(T_ALG.E_BH));}
\KeywordTok{if}\NormalTok{ L_M_BV_}\DecValTok{32}\NormalTok{ > }\DecValTok{32767} \KeywordTok{then}
\NormalTok{ P_M_DERIVE(T_ALG.E_BV) := }\DecValTok{16}\NormalTok{#7FFF#;      }\CommentTok{-- largest 16Bit number (Two's complement)}
\NormalTok{elseif L_M_BV_}\DecValTok{32}\NormalTok{ < }\DecValTok{-32768} \KeywordTok{then}
\NormalTok{ P_M_DERIVE(T_ALG.E_BV) := }\DecValTok{16}\NormalTok{#}\DecValTok{8000}\NormalTok{#;      }\CommentTok{-- smallest negative 16Bit number}
\KeywordTok{else}
\NormalTok{ P_M_DERIVE(T_ALG.E_BV) := UC_16S_EN_16NS(TBD.T_ENTIER_16S(L_M_BV_}\DecValTok{32}\NormalTok{));}
\KeywordTok{end if}\NormalTok{;}

\CommentTok{-- But not for the horizontal one}
\NormalTok{P_M_DERIVE(T_ALG.E_BH) := UC_16S_EN_16NS(TBD.T_ENTIER_16S}
\NormalTok{                                   ((}\FloatTok{1.0}\NormalTok{ / C_M_LSB_BH) *}
\NormalTok{                                   G_M_INFO_DERIVE(T_ALG.E_BH));}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Mars Rover}
\end{quote}

Mars Pathfinder war ein US-amerikanischer Mars-Lander, der 1996 von der
NASA eingesetzt wurde. Er brachte 1997 den ersten erfolgreichen
Mars-Rover Sojourner auf die Marsoberfläche.

\begin{figure}
\centering
\includegraphics{./img/01_Software/Mars_pathfinder_panorama_large.jpg}
\caption{Mars Rover}
\end{figure}

Nach dem Beginn der Aufzeichnung von meteorologischen Daten mit dem
Sojourner traten plötzlich scheinbar zufällige System-Zurücksetzungen
auf. Das Betriebssystem bootete neu, was mit einem Datenverlust einher
ging. Diese Fehler waren aber auch schon auf der Erde aufgetreten
\ldots{}

Durch Analyse des Logbuches zu diesem Zeitpunkt konnte festgestellt
werden, dass es bei der Programmierung von ``Sojourner'' ein Problem
gab. Dabei schlug die sogenannte
\href{https://de.wikipedia.org/wiki/Priorit\%C3\%A4tsinversion}{Prioritäten-Inversion}
zu, die sich zeigt, wenn mehrere Prozesse ein und die selbe Ressource
nutzen.

Weitere Informationen unter
\href{http://people.cs.ksu.edu/~hatcliff/842/Docs/Course-Overview/pathfinder-robotmag.pdf}{What
the media coudn't tell you about Mars Pathfinder}

\begin{quote}
\textbf{Aggressiver Gandhi}
\end{quote}

Der als friedlich bekannte Inder Mahatma Gandhi ist im Spiele
Civilization 5 dafür bekannt, besonders gerne nukleare Waffen zu nutzen.
Diese Affinität ist einen Programmierfehler im ersten Teil zuzuordnen,
in welchem der Agressionswert bestimmt, wie wahrscheinlich es ist, dass
der Herrscher eine atomare Waffe benutzt. Gandhi startet dort mit einem
Aggressionswert von 1, jedoch bekommt jede Demokratie bei Spielstart -2
Aggresionspunkte, was zu einem Wert von -1 führt. Binär betrachtet
entspricht das folgender 8 Bit Zahl:

1111 1111

Dieser Wert wird intern aber als ein unsigned char, also wie eine 8 Bit
vorzeichenlosen Ganzzahl behandelt. Dies führt dazu, dass nicht eine -1
gelesen wird, sondern der Maximalwert dieses Datentyps 255.

\hypertarget{und-im-kleinen}{%
\subsection{Und im Kleinen \ldots{}}\label{und-im-kleinen}}

Das folgende anschauliche Beispiel und die zugehörige Analyse ist durch
ein Beispiel der Vorlesung ``Software Engineering'' von
Prof.~Dr.~Schürr, (TU Darmstadt) motiviert.

\begin{quote}
\textbf{Achtung:} Das folgende Codebeispiel enthält eine Fülle von
Fehlern!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{#include }\ImportTok{<stdio.h>}

\DataTypeTok{FILE}\NormalTok{ *fp;}

\DataTypeTok{void}\NormalTok{ main()}
\NormalTok{\{}
\NormalTok{    fp = fopen(}\StringTok{"numbers.txt"}\NormalTok{, }\StringTok{"r"}\NormalTok{);}
    \DataTypeTok{int}\NormalTok{ a[}\DecValTok{10}\NormalTok{];}
    \DataTypeTok{int}\NormalTok{ num = }\DecValTok{0}\NormalTok{, l = }\DecValTok{0}\NormalTok{;}

    \ControlFlowTok{while}\NormalTok{(}\DecValTok{1}\NormalTok{)\{}
      \ControlFlowTok{if}\NormalTok{ (fscanf(fp, }\StringTok{"%d"}\NormalTok{, &num) == }\DecValTok{1}\NormalTok{) \{}
\NormalTok{          a[l] = num;}
\NormalTok{          l++;}
\NormalTok{      \} }\ControlFlowTok{else}\NormalTok{ \{}
          \ControlFlowTok{break}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{    \}}
    \ControlFlowTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{; i<l; i++)}
\NormalTok{        printf(}\StringTok{"%5i "}\NormalTok{,a[i]);}
\NormalTok{    printf(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}

    \DataTypeTok{int}\NormalTok{ aux;}
    \ControlFlowTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{2}\NormalTok{; i<l; i++)\{}
      \ControlFlowTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ j=l; j>i; j--)\{}
        \ControlFlowTok{if}\NormalTok{ (a[j-}\DecValTok{1}\NormalTok{] > a[j])\{}
\NormalTok{          aux = a[j-}\DecValTok{1}\NormalTok{];}
\NormalTok{          a[j-}\DecValTok{1}\NormalTok{] = a[j];}
\NormalTok{          a[j] = aux;}
\NormalTok{        \}}
\NormalTok{      \}}
\NormalTok{    \}}
    \ControlFlowTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{; i<l; i++)}
\NormalTok{        printf(}\StringTok{"%5i "}\NormalTok{,a[i]);}

\NormalTok{    printf(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Aus Maus!}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Aufgabe:} Lesen Sie den Code, erklären Sie die Aufgabe, die er
löst und identifizieren Sie Fehlerquellen.
\end{quote}

Welche Probleme sehen Sie im Hinblick auf die zuvor genannten
Qualitätsmerkmale

\begin{longtable}[]{@{}ll@{}}
\toprule
Aspekt & Bewertung\tabularnewline
\midrule
\endhead
Funktionalität & ?\tabularnewline
Zuverlässigkeit &\tabularnewline
Benutzbarkeit &\tabularnewline
Effizienz &\tabularnewline
Wartungsfreundlichkeit &\tabularnewline
Übertragbarkeit &\tabularnewline
\bottomrule
\end{longtable}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.20\columnwidth}\raggedright
Aspekt\strut
\end{minipage} & \begin{minipage}[b]{0.75\columnwidth}\raggedright
Bewertung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Funktionalität\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
feste Feldlänge, das Programm stürzt bei mehr als 10 Einträgen ab\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Zuverlässigkeit\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
keine Überprüfung der Existenz der Datei, kein Schließen der Datei\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Benutzbarkeit\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
im Programmcode enthaltene Dateinamen, feste Feldlänge\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Effizienz\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
quadratischer Aufwand der Sortierung\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Wartungsfreundlichkeit\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
fehlende Dokumentation, unverständliche Variablenbezeichner, redundante
Codeelemente\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
Übertragbarkeit\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{herausforderungen}{%
\section{Herausforderungen}\label{herausforderungen}}

\textbf{Warum ist Softwareentwicklung so herausfordernd}

\begin{itemize}
\tightlist
\item
  Die Größe der zu lösenden Probleme. Software ist nicht einfacher, als
  die Probleme, die sie löst. Je größer und schwieriger die Software,
  desto aufwendiger und schwieriger ist die Entwicklung.
\item
  Die Tatsache, dass Software ein immaterielles Produkt ist. Die
  Immaterialität macht das Arbeiten mit Software schwieriger als
  dasjenige mit materiellen Produkten vergleichbarer Komplexität, da die
  Risiken auch schwerer zu erkennen sind.
\item
  Sich permanent verändernde Ziele aufgrund der Evolution. Schon das
  Bestimmen und Erreichen fixierter Ziele bei der Entwicklung ist keine
  leichte Aufgabe. Sich verändernde Ziele machen das ganze nochmal um
  eine Größenordnung schwieriger.
\item
  Fehler infolge von Fehleinschätzungen zur Skalierung (``was im Kleinen
  geht, geht genauso im Großen''). Software-Entwicklung wird daher
  unbewusst meist als viel einfacher eingeschätzt, als sie tatsächlich
  ist. Dies führt zu unrealistischen Erwartungen und zu von Beginn an zu
  tiefen Kosten- und Terminschätzungen.
\item
  Funktionierende Einzelkomponenten stellen noch lange kein
  funktionierendes Gesamtsystem sicher.
\end{itemize}

\textbf{Der Faktor Mensch}

In einem Projekt stellt sich die Frage wie viele Personen involviert
sind und damit welche Komplexität der Entwicklungsfluss hat. In einem
Team von 3 Personen wird muss sichergestellt sein, dass eine Information
bei 2 Partnern ankommt. Die maximale Anzahl ergibt sich zu

\[N = \frac{n\cdot(n-1)}{2}\].

\begin{verbatim}
  ^
  | Kommunikationspfade           o
  |
  |
  |
  |                        o <- ab hier mehr Kommunikationspfade
  |                             als involvierte Personen
  |
  |                 o  <- bis hierher linear
  |          o
  +---o--------------------------------------->                               .
      1      2      3      4      5      6
\end{verbatim}

Grafik motiviert aus \footnote{Prof.~Dr.~Thorsten Lemburg, Einführung in
  die Softwareentwicklung - Seminar: Softwareentwicklung in der
  Wissenschaft,
  \href{https://wr.informatik.uni-hamburg.de/_media/teaching/wintersemester_2010_2011/siw-2011-lemburg-einfuehrung_in_die_softwareentwicklung-ausarbeitung.pdf}{Link}}

Hier ist eine koordinierte Interaktion und Kommunikation notwendig!

\hypertarget{ansuxe4tze-zur-strukturierung-der-aufgaben}{%
\section{Ansätze zur Strukturierung der
Aufgaben}\label{ansuxe4tze-zur-strukturierung-der-aufgaben}}

\emph{Erweitertes Wasserfallmodell}

\begin{verbatim}

 Anforderungen                          Problemanalyse, Systemspezifikation
   \
    Entwurf                             Grobentwurf, Feinentwurf
     \
      Umsetzung                         Implementierung, Integration
       \
        Überprüfung                     Testen des Systems
         \
          Betrieb und Wartung           Installation, Anpassung                .
\end{verbatim}

Eigenschaften des Wasserfallmodells:

\begin{itemize}
\tightlist
\item
  Aktivitäten sind in der vorgegebenen Reihenfolge und in der vollen
  Breite vollständig durchzuführen.
\item
  Am Ende jeder Aktivität steht ein fertiggestelltes Dokument, d.h. das
  Wasserfallmodell ist ein „dokumentgetriebenes`` Modell.
\item
  Der Entwicklungsablauf ist sequentiell und als Top-down-Verfahren
  realisiert.
\item
  Es ist einfach, verständlich und benötigt nur wenig Managementaufwand.
\end{itemize}

Vorteile:

\begin{itemize}
\tightlist
\item
  klare Abgrenzung der Phasen -- einfache Möglichkeiten der Planung und
  Kontrolle
\item
  bei stabilen Anforderungen und klarer Abschätzung von Kosten und
  Umfang ein sehr effektives Modell
\end{itemize}

Nachteile:

\begin{itemize}
\tightlist
\item
  Das Modell ist nur bei einfachen Projekten anwendbar -- Unflexibel
  gegenüber Änderungen und im Vorgehen
\item
  Frühes festschreiben der Anforderungen ist sehr problematisch und kann
  zu teuren Änderungen führen
\item
  Fehler werden eventuell erst sehr spät erkannt und müssen mit
  erheblichen Aufwand entfernt werden
\end{itemize}

\emph{V-Modell}

\begin{verbatim}
                         Szenarien
Anforderungen        ................>              Abnahmetest
   \ ^                                              / ^
    v \                  Testfälle                 v /
    Grobentwurf      ................>        Systemtest
      \ ^                                       / ^
       v \               Testfälle             v /
      Feinentwurf    ................>     Integrationstest
         \ ^                                 / ^
          v \            Testfälle          v /
        Modulimpl.   ................>    Modultest
            \ \                           / /
             \ +-------------------------+ /
              +---------------------------+                                    .
\end{verbatim}

Tätigkeitsbereiche des V-Modell: Softwareerstellung, Qualitätssicherung,
Konfigurationsmanagement, Projektmanagement

Vorteile:

\begin{itemize}
\tightlist
\item
  Integrierte und detaillierte Darstellung von den Tätigkeitsbereichen
\item
  Generisches Modell mit definierten Möglichkeiten zur Anpassung an
  projektspezifische Anforderungen
\item
  Gut geeignet für große Projekte
\end{itemize}

Nachteile:

\begin{itemize}
\tightlist
\item
  Für kleine und mittlere Softwareentwicklungen führt das V-Modell zu
  einem unnötigen Overhead
\item
  Die im V-Modell definierten Rollen (bis zu 25) sind für gängige
  Softwareentwicklungen nicht realistisch
\item
  explizite Werkzeuge notwendig
\end{itemize}

\begin{quote}
\textbf{Achtung:} Die Nachteile aus den sehr statisch ausgerichteten
Modellen lassen sich für größere Projekte kaum umsetzen. Modernere
Ansätze lösen den stringenten Ablauf auf und fokussieren einem
schnelleren Einsatz: \emph{Agile Softwareentwicklung}, \emph{Rational
Unified Process}, \emph{Spiralmodell} -
\href{https://www.dev-insider.de/was-ist-agile-softwareentwicklung-a-569187/}{Link}
\end{quote}

\hypertarget{ok-wir-brauchen-unterstuxfctzung}{%
\section{Ok, wir brauchen
Unterstützung}\label{ok-wir-brauchen-unterstuxfctzung}}

\begin{quote}
\emph{CASE is the use of computer-based support in the software
development process}
\end{quote}

\textbf{Klassifikation nach dem Einsatzzweck}

\begin{itemize}
\item
  Anforderungsanalyse

  \begin{itemize}
  \tightlist
  \item
    Spezifikation
  \item
    Modellierung
  \end{itemize}
\item
  Code-Erstellung (Editoren)

  \begin{itemize}
  \tightlist
  \item
    Editor, IDE
  \item
    Dokumentation
  \end{itemize}
\item
  Ausführung und Testen

  \begin{itemize}
  \tightlist
  \item
    Compiler, Interpreter
  \item
    IDE, Build-System
  \item
    Debugger
  \end{itemize}
\item
  Koordination Entwicklungsprozess

  \begin{itemize}
  \tightlist
  \item
    Projektverwaltung
  \item
    Code-Base Management und Versionierung
  \item
    Deployment
  \item
    Support
  \end{itemize}
\end{itemize}

\textbf{Grad der Integration verschiedener Funktionalitäten}

\begin{itemize}
\tightlist
\item
  Tools - einzelne Aktivitäten im Software Life-cycle
\item
  Workbenches - mehrere Werkzeuge
\item
  Integrated Development Environments - Kombination mehrerer Workbenches
  und Werkzeuge zur Unterstützung des kompletten Software Life-cycle
\end{itemize}

\begin{quote}
Texteditor vs.~Integrated Development Environment (IDE) \ldots{} worfür
soll ich mich entscheiden?
\end{quote}

\begin{itemize}
\tightlist
\item
  Analyse des Workflows und der Formen der Zusammenarbeit
\item
  Analyse der verwendeten Spezifikations und Modellierungstechniken,
  Programmiersprachen, etc.
\item
  Analyse der Komplexität des Vorhabens, der erforderlichen
  Unterstützung
\item
  Analyse der Rahmenbedingungen (Betriebssysteme, Kosten)
\end{itemize}

\hypertarget{aufgaben-1}{%
\section{Aufgaben}\label{aufgaben-1}}

\begin{itemize}
\tightlist
\item
  {[} {]} Betrachten Sie die Darstellung unter
  \href{https://www.programmwechsel.de/lustig/management/schaukel-baum.html}{Webseite
  Programmwechsel} und versuchen Sie die überspitzten Missverständnisse
  der einzelnen Protagonisten im Kontext eines Softwareprojektes zu
  stellen.
\item
  {[} {]} Korrigieren Sie das \texttt{allesFalsch.c} Beispiel,
  verbessern Sie die Lesbarkeit des Codes.
\end{itemize}

\hypertarget{net-und-einordnung-der-sprache-c}{%
\chapter{.NET und Einordnung der Sprache
C}\label{net-und-einordnung-der-sprache-c}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Basiskonzepte\ von\ C\#\ und\ dotnet}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/02_DotNet.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{einschub-programmierparadigmen}{%
\section{Einschub:
Programmierparadigmen}\label{einschub-programmierparadigmen}}

Ein Programmierparadigma bezeichnet die gedankliche, konzeptionelle
Grundstruktur die der Darstellung des Problems in Code zugrunde liegt.

Das Programmierparadigma:

\begin{itemize}
\tightlist
\item
  beschreibt den fundamentalen Programmierstil bzw. Eigenschaften von
  Programmiersprachen
\item
  unterscheidet sich durch die Repräsentation der statischen und
  dynamischen Programmelemente
\item
  beruht auf Sprache, aber auch auf individuellem Stil.
\end{itemize}

\begin{verbatim}

                         Programmierparadigmen
                                  |
                .-----------------+-----------------.
                |                                   |
    Imperative Programmierung         Deklarative Programmierung
                |                                   |
      .------------------.               .----------+---------.
      |                  |               |                    |
  Prozedural    Objektorientiert    Funktional             Logisch             .
\end{verbatim}

\begin{itemize}
\item
  \textbf{Imperative Programmierung} - Quellcode besteht aus einer Folge
  von Befehlen die in einer festen Reihenfolge abgearbeitet werden.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Prozedurale Programmierung} - Zerlegung von Programmen in
    überschaubare Teile, die durch eine definierte Schnittstelle
    aufrufbar sind (Kernkonzepte: Funktion, Prozedur, Routine,
    Unterprogramm)
  \item
    \textbf{Objektorientierte Programmierung} - Kapselung von Daten und
    Funktionen in einem Konzept
  \end{itemize}
\item
  \textbf{Deklarative Programmierung} - es wird kein Lösungsweg
  implementiert, sondern nur angegeben, was gesucht ist.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Funktionale Sprachen} - Abbildung der Algorithmen auf
    funktionale Darstellungen
  \item
    \textbf{Logische Sprachen} - Ableitung einer Lösung aus einer Menge
    von Fakten, Generierung einer Auswahl von Daten
  \end{itemize}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{% Prolog Text mit Fakten}
\NormalTok{mann(adam)}\KeywordTok{.}
\NormalTok{mann(tobias)}\KeywordTok{.}
\NormalTok{mann(frank)}\KeywordTok{.}
\NormalTok{frau(eva)}\KeywordTok{.}
\NormalTok{frau(daniela)}\KeywordTok{.}
\NormalTok{frau(ulrike)}\KeywordTok{.}
\NormalTok{vater(adam}\KeywordTok{,}\NormalTok{tobias)}\KeywordTok{.}
\NormalTok{vater(tobias}\KeywordTok{,}\NormalTok{frank)}\KeywordTok{.}
\NormalTok{vater(tobias}\KeywordTok{,}\NormalTok{ulrike)}\KeywordTok{.}
\NormalTok{mutter(eva}\KeywordTok{,}\NormalTok{tobias)}\KeywordTok{.}
\NormalTok{mutter(daniela}\KeywordTok{,}\NormalTok{frank)}\KeywordTok{.}
\NormalTok{mutter(daniela}\KeywordTok{,}\NormalTok{ulrike)}\KeywordTok{.}

\NormalTok{grossvater(}\DataTypeTok{X}\KeywordTok{,}\DataTypeTok{Y}\NormalTok{) }\KeywordTok{:-}
\NormalTok{     vater(}\DataTypeTok{X}\KeywordTok{,}\DataTypeTok{Z}\NormalTok{)}\KeywordTok{,}
\NormalTok{     vater(}\DataTypeTok{Z}\KeywordTok{,}\DataTypeTok{Y}\NormalTok{)}\KeywordTok{.}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grossvater(adam}\KeywordTok{,}\NormalTok{frank)}\KeywordTok{.}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\item
  \textbf{Weiter Konzepte} \ldots{} keine spezifische Zuordenbarkeit

  \begin{itemize}
  \tightlist
  \item
    \textbf{Strukturierte Programmierung} \ldots{} Verzicht bzw.
    Einschränkung des \texttt{Goto} Statements zugunsten von
    Kontrollstrukturen (Kernkonzepte: Verzweigungen, Schleifen)
  \item
    \textbf{Nebenläufig}, \textbf{Reflektiv}, \textbf{Generisch},
    \ldots{}
  \item
    \textbf{Aspektorientierte Programmierung},
  \end{itemize}
\end{itemize}

Viele Sprachen unterstützen verschiedene Elemente der Paradigmen, bzw.
entwickeln sich in dieser Richtung weiter.

\begin{longtable}[]{@{}lll@{}}
\toprule
Sprache & imperativ & deklarativ\tabularnewline
\midrule
\endhead
Pascal & prozedural &\tabularnewline
C & prozedural &\tabularnewline
Ada & objektorientiert &\tabularnewline
Java & objektorientiert &\tabularnewline
Python & objektorientiert, & funktional\tabularnewline
C\# & prozedural, objektorientiert & funktional\tabularnewline
C++ & prozedural, objektorientiert & funktional\tabularnewline
Haskell & & funktional\tabularnewline
Prolog & & Logisch\tabularnewline
SQL & & Logisch\tabularnewline
\bottomrule
\end{longtable}

Viele Paradigmen in einer Sprache am Beispiel eines Python Programmes
\ldots{} Berechnen Sie die Summe der Ziffern eines Arrays.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my_list }\OperatorTok{=} \BuiltInTok{range}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{10}\NormalTok{)}

\CommentTok{# imperative}
\NormalTok{result }\OperatorTok{=} \DecValTok{0}
\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ my_list:}
\NormalTok{    result }\OperatorTok{+=}\NormalTok{ x}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Result in imperative style      :"} \OperatorTok{+} \BuiltInTok{str}\NormalTok{(result))}

\CommentTok{# procedural}
\NormalTok{result }\OperatorTok{=} \DecValTok{0}
\KeywordTok{def}\NormalTok{ do_add(list_of_numbers):}
\NormalTok{    result }\OperatorTok{=} \DecValTok{0}
    \ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in}\NormalTok{ my_list:}
\NormalTok{        result }\OperatorTok{+=}\NormalTok{ x}
    \ControlFlowTok{return}\NormalTok{ result}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Result in procedural style      :"} \OperatorTok{+} \BuiltInTok{str}\NormalTok{(do_add(my_list)))}

\CommentTok{# object oriented}
\KeywordTok{class}\NormalTok{ MyClass(}\BuiltInTok{object}\NormalTok{):}
    \KeywordTok{def} \FunctionTok{__init__}\NormalTok{(}\VariableTok{self}\NormalTok{, any_list):}
        \VariableTok{self}\NormalTok{.any_list }\OperatorTok{=}\NormalTok{ any_list}
        \VariableTok{self}\NormalTok{.}\BuiltInTok{sum} \OperatorTok{=} \DecValTok{0}
    \KeywordTok{def}\NormalTok{ do_add(}\VariableTok{self}\NormalTok{):}
      \VariableTok{self}\NormalTok{.}\BuiltInTok{sum} \OperatorTok{=} \BuiltInTok{sum}\NormalTok{(}\VariableTok{self}\NormalTok{.any_list)}
\NormalTok{create_sum }\OperatorTok{=}\NormalTok{ MyClass(my_list)}
\NormalTok{create_sum.do_add()}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Result in object oriented style :"} \OperatorTok{+} \BuiltInTok{str}\NormalTok{(create_sum.}\BuiltInTok{sum}\NormalTok{))}

\CommentTok{# functional}
\ImportTok{import}\NormalTok{ functools}
\NormalTok{result }\OperatorTok{=}\NormalTok{ functools.}\BuiltInTok{reduce}\NormalTok{(}\KeywordTok{lambda}\NormalTok{ x, y: x }\OperatorTok{+}\NormalTok{ y, my_list)}
\BuiltInTok{print}\NormalTok{(}\StringTok{"Result in functional style      :"} \OperatorTok{+} \BuiltInTok{str}\NormalTok{(result))}
\end{Highlighting}
\end{Shaded}

@Pyodide.eval

\textbf{``Das ist ja alles gut und schön, aber ich ich bin C
Programmierer!''}

\begin{quote}
\textbf{Anti-Pattern ``Golden Hammer''}: \emph{If all you have is a
hammer, everything looks like a nail.}
\end{quote}

Lösungsansätze: * Individuell - Hinterfragen des Vorgehens und der
Intuition, bewusste Weiterentwicklung des eigenen Horizontes (ohne auf
jeden Zug aufzuspringen) * im Team - Teilen Sie Ihre Erfahrungen im Team
/ der Community, besetzen Sie Teams mit Mitarbeitern unterschiedlichen
Backgrounds (Technical Diversity)

Weitere Diskussion unter:
\url{https://sourcemaking.com/antipatterns/golden-hammer}

\hypertarget{warum-also-c}{%
\section{Warum also C\#?}\label{warum-also-c}}

C\# wurde unter dem Codenamen \emph{Cool} entwickelt, vor der
Veröffentlichung aber umbenannt. Der Name C Sharp leitet sich vom
Zeichen Kreuz (\#, englisch sharp) der Notenschrift ab, was dort für
eine Erhöhung des Grundtons um einen Halbton steht. C sharp ist also der
englische Begriff für den Ton \emph{cis} (siehe Anspielung auf C++)

C\#

\begin{itemize}
\tightlist
\item
  ist eine moderne und nur in überschaubarem Maße durch die eigene
  Entwicklung ``verschandelte'' Sprache
\item
  enthält Elemente vieler verschiedener Paradigmen
\item
  ist plattformunabhängig
\item
  bietet eine breite Sammlung von Bibliotheken
\item
  integriert Bibliotheken und Konzepte für die GUI-Programmierung
\item
  kann mit anderen Sprachen über .NET interagieren
\item
  unterstützt Multi-Processing problemlos
\item
  ist typsicher
\item
  \ldots{}
\end{itemize}

\hypertarget{historie-der-sprache-c}{%
\subsection{Historie der Sprache C}\label{historie-der-sprache-c}}

\begin{longtable}[]{@{}llll@{}}
\toprule
\begin{minipage}[b]{0.02\columnwidth}\raggedright
Jahr\strut
\end{minipage} & \begin{minipage}[b]{0.08\columnwidth}\raggedright
Version .NET\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright
Version C\#\strut
\end{minipage} & \begin{minipage}[b]{0.74\columnwidth}\raggedright
Ergänzungen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2002\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
1.0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
1.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2006\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
3.0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
2.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Generics, Anonyme Methoden, Iteratoren, Private setters, Delegates\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2007\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
3.5\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
3.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Implizit typisierte Variablen, Objekt- und Collection-Initialisierer,
Automatisch implementierte Properties, LINQ, Lambda Expressions\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2010\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
4.0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
4.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Dynamisches Binding, Benannte und optionale Argumente, Generische Co-
und Kontravarianz\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2012\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
4.5\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
5.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Asynchrone Methoden\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2015\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
4.6\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
6.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Exception Filters, Indizierte Membervariablen und Elementinitialisierer,
Mehrzeilige String-Ausdrücke, Implementierung von Methoden mittels
Lambda-Ausdruck\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2017\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
4.6.2/ .NET Core\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
7.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Mustervergleiche (Pattern matching), Binärliterale 0b\ldots{},
Tupel\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2019\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
.NET Core 3\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
8.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Standardimplementierungen in Schnittstellen, Switch Expressions,
statische lokale Funktionen, Index-Operatoren für Teilmengen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2020\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
.NET 5.0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
9.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Datensatztypen (Records), Eigenschafteninitialisierung, Anweisungen
außerhalb von Klassen, Verbesserungen beim Pattern Matching\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2021\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright
.NET 6.0\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
10.0\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Erforderliche Eigenschaften, Null-Parameter-Prüfung, globale
Using-Statements\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Die Sprache selbst ist unmittelbar mit der Ausführungsumgebung, dem .NET
Konzept verbunden und war ursprünglich stark auf Windows Applikationen
zugeschnitten.

\hypertarget{konzepte-und-einbettung}{%
\subsection{Konzepte und Einbettung}\label{konzepte-und-einbettung}}

.NET ist ein Sammelbegriff für mehrere von Microsoft/Dritten
herausgegebene Software-Plattformen, die der Entwicklung und Ausführung
von Anwendungsprogrammen dienen. Dabei erlebt die Plattform einen
permanenten Wandel. Die Bedeutung der einzelnen Teile und Technologien,
die .NET umfasst, hat sich im Laufe der Zeit gewandelt. Stand November
2020 spielen folgende Frameworks eine herausgehobene Rolle in der
Praxis:

\begin{itemize}
\tightlist
\item
  das nur unter Windows unterstützte klassische .NET Framework, das mit
  der Version 4.8 in der letzten Version vorliegt.
\item
  das als dessen Nachfolger positionierte, auf verschiedenen Plattformen
  unterstützte Framework .NET 5 (bei dem auch einige Techniken gekündigt
  wurden). Es wurde mehrere Jahre parallel unter der Bezeichnung .NET
  Core entwickelt.
\item
  die Plattform Mono und darauf basierende Techniken (von Microsoft
  meist als Xamarin bezeichnet). Diese unterstützt seit längerem .NET
  auf verschiedenen Plattformen (in der Vergangenheit jedoch oft
  unvollständig implementiert).
\end{itemize}

Mono ist eine alternative, ursprünglich unabhängige Implementierung von
Microsofts .NET Standards. Sie ermöglicht die Entwicklung von
plattformunabhängiger Software auf den Standards der Common Language
Infrastructure und der Programmiersprache C\#. Entstanden ist das
Mono-Projekt 2001 unter Führung von Miguel de Icaza von der Firma
Ximian, die 2003 von Novell aufgekauft wurde. Die Entwickler wurden 2011
in eine neue Firma namens Xamarin übernommen, die im Jahr 2016 eine
Microsoft-Tochtergesellschaft wurde. In der Folge wurde Microsoft
Hauptsponsor des Projektes.

Mono ``hinkt'' als Open Source Projekt der eigentlichen Entwicklung
etwas nach.

\begin{verbatim}
       .NET Core 3.1
       Teile von .NET Framework
       Teile von Mono
    +  neue Features
    ------------------                                                                                  .
       .NET 5.0
\end{verbatim}

Der Artikel in
\href{https://www.heise.de/developer/meldung/NET-5-Zweite-Preview-bringt-viel-Feinschliff-4696009.html}{heise}
fasst diesen Status gut zusammen.

Zum Vergleich sei auf eine Darstellung der \textbf{vor dem Erscheinen
von .NET 5} verwiesen:

\begin{longtable}[]{@{}llll@{}}
\toprule
Betriebssystem & .NET Framework & .NET Core & Xamarin\tabularnewline
\midrule
\endhead
Windows 7/8 & X & X &\tabularnewline
Windows 10 Desktop & X & X &\tabularnewline
Windows 10 Mobile Geräte & & & X\tabularnewline
Linux & & X &\tabularnewline
macOS & & X &\tabularnewline
iOS & & & X\tabularnewline
\bottomrule
\end{longtable}

Einen guten Überblick über das historische Nebeneinander gibt das Video
von Tim Corey (Achtung, die Darstellung greift den Stand von 2017 auf!)
\href{https://www.youtube.com/watch?v=Ph_jSGq6vIA}{Link}

\begin{quote}
.NET 6 ist als LTS-Version im November 2021 erscheinen und wird für 3
Jahre unterstützt.
\end{quote}

Ziel des .NET-Ökosystems ist die Erhöhung der Anwendungskompatibilität
zwischen verschiedenen Systemen und Plattformen. Programme, die das .NET
Framework verwenden, werden in der Regel so ausgeliefert, dass benötigte
Komponenten des Frameworks automatisch mit installiert werden.

\begin{verbatim}
 +--------------------------------------------------+
 |               .NET Anwendungen                   |
 +--------------------------------------------------+

 +--------------------------------------------------+
 |               Klassenbibliothek                  |
 +--------------------------------------------------+

 +--------------------------------------------------+
 |    Common Language Runtime (Laufzeitumgebung)    |
 +--------------------------------------------------+  

 +--------------------------------------------------+
 |     Betriebssystem (Windows, Linux, macOS)       |
 +--------------------------------------------------+                         .
\end{verbatim}

\begin{itemize}
\item
  die Laufzeitumgebung (CLR) implementiert die Ausführungsplattform des
  .NET Codes. Sie umfasst die Sicherheitsmechanismen, Versionierung,
  automatische Speicherbereinigung und vor allem die Entkopplung der
  Programmausführung vom Betriebssystem.
\item
  die Klassenbibliothek gliedern sich intern in Basisklassen und eigenen
  Bibliotheken für verschiedene Anwendungstypen:

  \begin{itemize}
  \tightlist
  \item
    ASP.NET \ldots{} ist ein Web Application Framework, mit dem sich
    dynamische Webseiten, Webanwendungen und Webservices entwickeln
    lassen.
  \item
    Windows Forms/ WPF \ldots{} ist ein GUI-Toolkit des Microsoft .NET
    Frameworks. Es ermöglicht die Erstellung grafischer
    Benutzeroberflächen (GUIs) für Windows.
  \item
    \ldots{}
  \end{itemize}
\end{itemize}

Die Open Source Community stand dem .NET Konzept kritisch gegenüber, da
eine ``unklare Lage'' im Hinblick auf die Lizenzen bestand. Aufgrund der
Gefahr durch Patentklagen seitens Microsoft warnte Richard Stallman
davor Mono in die Standardkonfiguration von Linuxdistributionen
aufzunehme. Ab 2013 änderte Microsoft aber seine Strategie und
veröffentlichte den Quellcode von .NET komplett als Open Source unter
einer MIT-Lizenz bzw. Apache-2.0-Lizenz.

\emph{Compilierung unter C} (zur Erinnerung und zum Vergleich)

\begin{verbatim}
Sourccode (.c, .cpp, .h)             |
                                     v
                                Preprocessing  Schritt 1: Präprozessor (cpp)
Erweiterer Sourcecode                |
                                     v
                                Compilation    Schritt 2: Compiler (gcc, g++)
Assembler Code (.s)                  |
                                     v
                                Assemblieren   Schritt 3: Assembler (as)
Maschinencode (.o, .obj)             |
                                     v
Statische Libs (.lib, .a)  ---->  Linken       Schritt 4: Linker (ld)
                                     |
Ausführbarer Maschinencode           v                                         .
\end{verbatim}

\emph{Build-Prozess mit C\#}

\begin{verbatim}
                 +--------+     +--------+      +--------+
Source Code      | VB     |     | C++    |      | C#     |
                 +--------+     +--------+      +--------+
                 |Compiler|     |Compiler|      |Compiler|--------------+
                 .--------.     .--------.      .--------.              |
                     |              |               |                   |
                     v              v               v                   |
Common           +--------+     +--------+      +--------+              |
Intermediate     |Assembly|     |Assembly|      |Assembly|              |
Language         +--------+     +--------+      +--------+              |
                     |              |               |                   |
                     v              v               v                   |
                 +---------------------------------------+              |
                 | Common Language Runtime JIT Compiler  |              |
                 +---------------------------------------+              |
                     |              |               |                   |
                     v              v               v                   |
              .- - - - - - - - - - - - - - - - - - - - - - .            v
              !  +--------+     +--------+      +--------+ !       +---------+
              !  |Managed |     |Managed |      |Managed | !       |Unmanaged|
              !  | Code   |     | Code   |      | Code   | !       | Code    |
              !  +--------+     +--------+      +--------+ !       +---------+
              ! Common Language Runtime Services           !
              .- - - - - - - - - - - - - - - - - - - - - - .

               +-------------------------------------------------------------+
               |            Operating System Services                        |
               +-------------------------------------------------------------+
\end{verbatim}

Die spezifischen Compiler der einzelnen .NET Sprachen (C\#. Visual
Basic, F\#) bilden den Quellcode auf einen Zwischencode ab. Die Common
Language Infrastructure (CLI) ist eine von ISO und ECMA standardisierte
offene Spezifikation (technischer Standard), die ausführbaren Code und
eine Laufzeitumgebung beschreibt.

\emph{Was passiert unter der Haube der CLR?}

Für die \emph{Managed Code Execution} stellt die CLR ein entsprechendes
Set von Komponenten bereit:

\begin{itemize}
\tightlist
\item
  Class Loader \ldots{} Einlesen der Assemblies in die CLR
  Ausführungsumgebung unter Beachtung der Sicherheits-, Versions-,
  Typinformationen usw.
\item
  Just-in-Time Compiler \ldots{} Abbildung der CIL auf den ausführbaren
  Maschinencode
\item
  Code Execution und Debugging
\item
  Garbage Collection \ldots{} der GC ist für die Bereinigung von
  Referenz-Objekten auf dem Heap verantwortlich und wird von der CLR zu
  nicht-deterministischen Zeitpunkten gestartet.
\end{itemize}

\begin{verbatim}
.assembly HalloWelt { }
.assembly extern mscorlib { }
.method public static void Main() cil managed
{
    .entrypoint
    .maxstack 1
    ldstr "Hallo Welt!"
    call void [mscorlib]System.Console::WriteLine(string)
    ret
}
\end{verbatim}

Ein Assembly umfasst: * das Assemblymanifest, das die Assemblymetadaten
enthält. * die Typmetadaten. * den CIL-Code * Links auf mögliche
Ressourcen.

Ein Assembly bildet:

\begin{itemize}
\tightlist
\item
  \textbf{bildet eine Sicherheitsgrenze} - Eine Assembly ist die
  Einheit, bei der Berechtigungen angefordert und erteilt werden.
\item
  \textbf{bildet eine Typgrenze} - Die Identität jedes Typs enthält den
  Namen der Assembly, in der dieser sich befindet. Wenn der Typ
  \texttt{MyType} in den Gültigkeitsbereich einer Assembly geladen wird,
  ist dieser nicht derselbe wie der Typ \texttt{MyType}, der in den
  Gültigkeitsbereich einer anderen Assembly geladen wurde.
\item
  \textbf{bildet eine Versionsgrenze} - Die Assembly ist die kleinste,
  in verschiedenen Versionen verwendbare Einheit in der Common Language
  Runtime. Alle Typen und Ressourcen in derselben Assembly bilden eine
  Einheit mit derselben Version.
\item
  \textbf{bildet eine Bereitstellungseinheit} - Beim Starten einer
  Anwendung müssen nur die von der Anwendung zu Beginn aufgerufenen
  Assemblys vorhanden sein. Andere Assemblys, z. B.
  Lokalisierungsressourcen oder Assemblys mit Hilfsklassen, können bei
  Bedarf abgerufen werden. Dadurch ist die Anwendung beim ersten
  Herunterladen einfach und schlank.
\end{itemize}

\hypertarget{abgrenzung-zu-java}{%
\subsection{Abgrenzung zu Java}\label{abgrenzung-zu-java}}

vgl. Vortrag von Mössenböck
(\href{https://www.dcl.hpi.uni-potsdam.de/teaching/componentVl05/slides/Net_VL2_01_Java-CS-Moessenboeck.pdf}{link})

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.39\columnwidth}\raggedright
Java\strut
\end{minipage} & \begin{minipage}[b]{0.38\columnwidth}\raggedright
C\#\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Veröffentlichung\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
1995\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
2001\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Plattform\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
(Java) Unix/Linux, Windows, MacOS, Android\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
(.NET) Windows, Linux, Android, iOS, MacOS\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
VM\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
Java-VM\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
CLR\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Zwischencode\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
Java-Bytecode\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
CIL\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
JIT\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
per Methoden\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
per Methode / gesamt\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Komponenten\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
Beans\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
Assemblies\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Versionierung\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Leitidee\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
Eine Sprache auf vielen Plattformen\strut
\end{minipage} & \begin{minipage}[t]{0.38\columnwidth}\raggedright
Viele Sprachen auf vielen Plattform\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{es-wird-konkret-hello-world}{%
\section{Es wird konkret \ldots{} Hello
World}\label{es-wird-konkret-hello-world}}

Die organisatorischen Schlüsselkonzepte in C\# sind: \textbf{Programme},
\textbf{Namespaces}, \textbf{Typen}, \textbf{Member} und
\textbf{Assemblys}. C\#-Programme bestehen aus mindestens einer
Quelldatei, von denen mindestens eine \texttt{Main} als einen
Methodennamen hat. Programme deklarieren Typen, die Member enthalten,
und können in Namespaces organisiert werden.

Wenn C\#-Programme kompiliert werden, werden sie physisch in Assemblys
verpackt. Assemblys haben unter Windows Betriebssystemen die Erweiterung
.exe oder .dll, je nachdem, ob sie Anwendungen oder Bibliotheken
implementieren.

\begin{verbatim}
                                     C# Plattformen
                                           |
             .-----------------------------+------------------------.
             |                             |                        |  
             |                             |                        |
   A) Vorlesungsmaterialien          B) Webseiten               C) Lokal
          interaktiv                       |
             |                             |
    .--------+---------.         .---------+---------.
    |                  |         |                   |
  mono (C#7)    dotnet (C#10)    |                   |
                                 |                   |
                          dotnetfiddle.net        repl.it
                             bis C#10               C#8                        .
\end{verbatim}

\emph{A) Vorlesungsmaterialien - LiaScript Umgebung}

Die LiaScript basierte Komplierung und Ausführung kann wie bereits
erläutert auf der Basis von mono und dem dotnet Framework umgesetzt
werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hello, world!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hello, world!"}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

\emph{B) Repl.it}

https://replit.com/

\emph{C) .NET Kommandozeile}

Das .NET Core Framework kann unter
\href{https://dotnet.microsoft.com/download/linux-package-manager/rhel/sdk-current}{.NET}
für verschiedene Betriebssystem heruntergeladen werden. Das SDK umfasst
sowohl die Bibliotheken, Laufzeitumgebung und Tools. An dieser Stelle
sei nur auf die \texttt{dotnet} Tools verwiesen, die anderen Werkzeuge
werden zu einem späteren Zeitpunk eingeführt.

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{>} \ExtensionTok{dotnet}\NormalTok{ new console}
\OperatorTok{>} \ExtensionTok{dotnet}\NormalTok{ build}
\OperatorTok{>} \ExtensionTok{dotnet}\NormalTok{ run}
\end{Highlighting}
\end{Shaded}

Aus dem Generieren eines neuen Konsolenprojektes ergibt sich ein
beeindruckender Baum von Projektdateien.

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{>} \ExtensionTok{dotnet}\NormalTok{ new console}

\OperatorTok{>} \ExtensionTok{tree}
\ExtensionTok{.}
\NormalTok{├── }\ExtensionTok{bin}
\NormalTok{│   └── }\ExtensionTok{Debug}
\NormalTok{│       └── }\ExtensionTok{net5.0}
\NormalTok{│           ├── }\ExtensionTok{ref}
\NormalTok{│           │   └── }\ExtensionTok{visual_studio_code.dll}
\NormalTok{│           ├── }\ExtensionTok{visual_studio_code}
\NormalTok{│           ├── }\ExtensionTok{visual_studio_code.deps.json}
\NormalTok{│           ├── }\ExtensionTok{visual_studio_code.dll}
\NormalTok{│           ├── }\ExtensionTok{visual_studio_code.pdb}
\NormalTok{│           ├── }\ExtensionTok{visual_studio_code.runtimeconfig.dev.json}
\NormalTok{│           └── }\ExtensionTok{visual_studio_code.runtimeconfig.json}
\NormalTok{├── }\ExtensionTok{obj}
\NormalTok{│   ├── }\ExtensionTok{Debug}
\NormalTok{│   │   └── }\ExtensionTok{net5.0}
\NormalTok{│   │       ├── }\ExtensionTok{apphost}
\NormalTok{│   │       ├── }\ExtensionTok{ref}
\NormalTok{│   │       │   └── }\ExtensionTok{visual_studio_code.dll}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.AssemblyInfo.cs}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.AssemblyInfoInputs.cache}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.assets.cache}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.csprojAssemblyReference.cache}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.csproj.CoreCompileInputs.cache}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.csproj.FileListAbsolute.txt}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.dll}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.GeneratedMSBuildEditorConfig.editorconfig}
\NormalTok{│   │       ├── }\ExtensionTok{visual_studio_code.genruntimeconfig.cache}
\NormalTok{│   │       └── }\ExtensionTok{visual_studio_code.pdb}
\NormalTok{│   ├── }\ExtensionTok{project.assets.json}
\NormalTok{│   ├── }\ExtensionTok{project.nuget.cache}
\NormalTok{│   ├── }\ExtensionTok{visual_studio_code.csproj.nuget.dgspec.json}
\NormalTok{│   ├── }\ExtensionTok{visual_studio_code.csproj.nuget.g.props}
\NormalTok{│   └── }\ExtensionTok{visual_studio_code.csproj.nuget.g.targets}
\NormalTok{├── }\ExtensionTok{Program.cs}
\NormalTok{└── }\ExtensionTok{visual_studio_code.csproj}
\end{Highlighting}
\end{Shaded}

\emph{C) .NET Visual Code}

Alternativ können Sie auch die Microsoft Visual Studio oder Visual Code
Suite nutzen. Diese kann man zum Beispiel auf unser gerade erstelltes
Projekt anwenden

https://code.visualstudio.com/docs/languages/csharp

\hypertarget{aufgaben-2}{%
\section{Aufgaben}\label{aufgaben-2}}

\begin{itemize}
\tightlist
\item
  {[} {]} Installieren Sie das .NET 6 auf Ihrem Rechner und erfreuen Sie
  sich an einem ersten ``Hello World''
\item
  {[} {]} Testen Sie mit einem Kommilitonen die Features von repl.it!
  Arbeiten Sie probeweise an einem gemeinsamen Dokument.
\item
  {[} {]} Legen Sie sich einen GitHub-Account an.
\end{itemize}

\hypertarget{c-grundlagen-i}{%
\chapter{C\# Grundlagen I}\label{c-grundlagen-i}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Einführung\ in\ die\ Basiselemente\ der\ Programmiersprache\ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/03_CsharpGrundlagenI.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{symbole}{%
\section{Symbole}\label{symbole}}

Woraus setzt sich ein C\# Programm zusammen?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{// Print Hello World message}
    \DataTypeTok{string}\NormalTok{ message = }\StringTok{"Glück auf"}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Freiberg"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Softwareentwickler"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\DataTypeTok{string}\NormalTok{ message = }\StringTok{"Glück auf"}\NormalTok{;}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Freiberg"}\NormalTok{);}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Softwareentwickler"}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

C\# Programme umfassen

\begin{itemize}
\tightlist
\item
  Schlüsselwörter der Sprache,
\item
  Variablennamen,
\item
  Zahlen,
\item
  Zeichen,
\item
  Zeichenketten,
\item
  Kommentare und
\item
  Operatoren.
\end{itemize}

Leerzeichen, Tabulatorsprünge oder Zeilenenden werden als Trennzeichen
zwischen diesen Elementen interpretiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System; }\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}\KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\CommentTok{// Print Hello World message}
\DataTypeTok{string}\NormalTok{ message = }\StringTok{"Glück auf"}\NormalTok{; Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Freiberg"}\NormalTok{);}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(message + }\StringTok{" Softwareentwickler"}\NormalTok{);\}\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{schluxfcsselwuxf6rter}{%
\subsection{Schlüsselwörter}\label{schluxfcsselwuxf6rter}}

\ldots{} C\# umfasst 77 Schlüsselwörter (C\# 7.0), die immer klein
geschrieben werden. Schlüsselwörter dürfen nicht als Namen verwendet
werden. Ein vorangestelltes \texttt{@} ermöglicht Ausnahmen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{var}
\KeywordTok{if}
\KeywordTok{operator}
\NormalTok{@class }\CommentTok{// class als Name !}
\end{Highlighting}
\end{Shaded}

Welche Schlüsselwörter sind das? (C\# 7.0)

abstract \textbar{} as \textbar{} base \textbar{} bool \textbar{} break
\textbar{} byte \textbar{}\\
case \textbar{} catch \textbar{} char \textbar{} checked
\textbar{}\texttt{class} \textbar{} const \textbar{}\\
continue \textbar{} decimal \textbar{} default \textbar{} delegate
\textbar{} do \textbar{} double \textbar{}\\
else \textbar{} enum \textbar{} event \textbar{} explicit \textbar{}
extern \textbar{} false \textbar{}\\
finally \textbar{} fixed \textbar{} float \textbar{} for \textbar{}
foreach \textbar{} goto \textbar{}\\
if \textbar{} implicit \textbar{} in \textbar{} int \textbar{} interface
\textbar{} internal \textbar{}\\
is \textbar{} lock \textbar{} long \textbar{}\texttt{namespace}
\textbar{} new \textbar{} null \textbar{}\\
object \textbar{} operator \textbar{} out \textbar{} override \textbar{}
params \textbar{} private \textbar{}\\
protected \textbar{} public \textbar{} readonly \textbar{} ref
\textbar{} return \textbar{} sbyte \textbar{}\\
sealed \textbar{} short \textbar{} sizeof \textbar{} stackalloc
\textbar{}\texttt{static} \textbar{} string \textbar{}\\
struct \textbar{} switch \textbar{} this \textbar{} throw \textbar{}
true \textbar{} try \textbar{}\\
typeof \textbar{} uint \textbar{} ulong \textbar{} unchecked \textbar{}
unsafe \textbar{} ushort \textbar{}\\
\texttt{using} \textbar{} virtual \textbar{}\texttt{void} \textbar{}
volatile \textbar{} while \textbar{} \textbar{}

Auf die Auführung der 40 kontextabhängigen Schlüsselwörter wie
\texttt{where} oder \texttt{ascending} wurde hier verzichtet.

Ist das viel oder wenig, welche Bedeutung hat die Zahl der
Schlüsselwörter?

\begin{longtable}[]{@{}lll@{}}
\toprule
Sprache & Schlüsselwörter & Bemerkung\tabularnewline
\midrule
\endhead
F\# & 98 & 64 + 8 from ocaml + 26 future\tabularnewline
C & 42 & C89 - 32, C99 - 37,\tabularnewline
C++ & 92 & C++11\tabularnewline
PHP & 49 &\tabularnewline
Java & 51 & Java 5.0 (48 without unused keywords const and
goto)\tabularnewline
JavaScript & 38 & reserved words + 8 words reserved in strict mode
only\tabularnewline
Python 3.7 & 35 &\tabularnewline
Python 2.7 & 31 &\tabularnewline
Smalltalk & 6 &\tabularnewline
\bottomrule
\end{longtable}

Weiterführende Links:

https://stackoverflow.com/questions/4980766/reserved-keywords-count-by-programming-language

oder

https://halyph.com/blog/2016/11/28/prog-lang-reserved-words.html

\hypertarget{variablennamen}{%
\subsection{Variablennamen}\label{variablennamen}}

Variablennamen repräsentieren Speicherbereiche, so dass keine explizite
Adressangabe durch den Programmier zu tätigen ist. Der Compiler
``kümmert'' sich um den Rest.

\begin{verbatim}
   Programm           Speicher

   i = 50;            |     ....     |
   |                  +--------------+
   .----------------->|      50      |
                      +--------------+
                      |     ....     |                                         .
\end{verbatim}

Variablennamen umfassen Buchstaben, Ziffern oder \texttt{\_}. Das erste
Zeichen eines Namens muss ein Buchstabe (des Unicode-Zeichensatzes) oder
ein \texttt{\_} sein. Der C\# Compiler ist \emph{case sensitive}
(Unterschied zwischen Groß- und Kleinschreibung, z.B.
\texttt{Test\ !=\ test}).

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{      var Δ = }\DecValTok{1}\NormalTok{;}
\NormalTok{      Δ++;}
\NormalTok{      System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(Δ);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Vergabe von Namen sollte sich an die Regeln der Klassenbibliothek
halten, damit bereits aus dem Namen der Typ ersichtlich wird:

\begin{itemize}
\tightlist
\item
  C\#-Community bevorzugt \emph{camel case} \texttt{MyNewClass} anstatt
  \emph{underscoring} \texttt{My\_new\_class}. (Eine engagierte
  Diskussion zu diesem Thema findet sich unter
  \href{https://whatheco.de/2011/02/10/camelcase-vs-underscores-scientific-showdown/}{Link})
\item
  außer bei lokalen Variablen und Parametern oder den Feldern einer
  Klasse, die nicht von außen sichtbar sind beginnen Namen mit großen
  Anfangsbuchstaben (diese Konvention wird als \emph{pascal case}
  bezeichnet)
\item
  Methoden ohne Rückgabewert sollten mit einem Verb beginnen
  \texttt{PrintResult()} alles andere mit einem Substantiv. Boolsche
  Ausdrücke auch mit einem Adjektiv \texttt{valid} oder \texttt{empty}.
\end{itemize}

\hypertarget{zahlen}{%
\subsection{Zahlen}\label{zahlen}}

Zahlenwerte können als

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
Format\strut
\end{minipage} & \begin{minipage}[b]{0.53\columnwidth}\raggedright
Variabilität\strut
\end{minipage} & \begin{minipage}[b]{0.25\columnwidth}\raggedright
Beispiel\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Ganzzahl\strut
\end{minipage} & \begin{minipage}[t]{0.53\columnwidth}\raggedright
Zahlensystem, Größe, vorzeichenbehaftet/vorzeichenlos\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
\texttt{1231}, \texttt{-23423}, \texttt{0x245}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Gleitkommazahl\strut
\end{minipage} & \begin{minipage}[t]{0.53\columnwidth}\raggedright
Größe\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
\texttt{234.234234}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

übergeben werden. Der C\# Compiler wertet die Ausdrücke und vergleicht
diese mit den vorgesehen Datentypen. Auf diese wird im Anschluss
eingegangen.

Eingabe von Zahlenwerten

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\BaseNTok{0xFF}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(0b1111_}\DecValTok{1111}\NormalTok{);  }\CommentTok{// ab C#7 unterstützt}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\DecValTok{100}\NormalTok{_}\DecValTok{000}\NormalTok{_}\DecValTok{000}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\FloatTok{1.3454E06}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

\hypertarget{zeichenketten}{%
\subsection{Zeichenketten}\label{zeichenketten}}

\ldots{} analog zu C werden konstante Zeichen mit einfachen Hochkommas
\texttt{\textquotesingle{}A\textquotesingle{}},
\texttt{\textquotesingle{}b\textquotesingle{}} und
Zeichenkettenkonstanten \texttt{"Bergakademie\ Freiberg"} mit doppelten
Hochkommas festgehalten. Es dürfen beliebige Zeichen bis auf die
jeweiligen Hochkommas oder das \texttt{\textbackslash{}} als
Escape-Zeichen (wenn diese nicht mit dem Escape Zeichen kombiniert sind)
eingeschlossen sein.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
   \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{   \{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Das ist ein ganzer Satz"}\NormalTok{);}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\CharTok{'e'}\NormalTok{);   }\CommentTok{// <- einzelnes Zeichen}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"A"}\NormalTok{ == }\CharTok{'A'}\NormalTok{);}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
   \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{   \{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(@}\StringTok{"Das ist ein ganz schön langer}
\NormalTok{                           Satz, der sich ohne die}
\NormalTok{                           Zeilenumbrüche blöd lesen}
\NormalTok{                           würde");}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Das ist ein ganz schön langer }\SpecialCharTok{\textbackslash{}n}\StringTok{Satz, der sich ohne die }\SpecialCharTok{\textbackslash{}n}\StringTok{Zeilenumbrüche blöd lesen }\SpecialCharTok{\textbackslash{}n}\StringTok{würde");}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Das ist ein ganz schön langer"}\NormalTok{ +}
                         \StringTok{"Satz, der sich ohne die"}\NormalTok{ +}
                         \StringTok{"Zeilenumbrüche blöd lesen"}\NormalTok{ +}
                         \StringTok{"würde");}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{kommentare}{%
\subsection{Kommentare}\label{kommentare}}

C\# unterscheidet zwischen \emph{single-line} und \emph{multi-line}
Kommentaren. Diese können mit XML-Tags versehen werden, um die
automatische Generierung einer Dokumentation zu unterstützen. Wir werden
zu einem späteren Zeitpunkt explizit auf die Kommentierung und
Dokumentation von Code eingehen.

Kommentare werden vor der Kompilierung aus dem Quellcode gelöscht.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\CommentTok{// <summary> Diese Klasse gibt einen konstanten Wert aus </summary>}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
      \CommentTok{// Das ist ein Kommentar}
\NormalTok{      System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hier passiert irgendwas ..."}\NormalTok{);}
      \CommentTok{/* Wenn man mal}
\CommentTok{         etwas mehr Platz}
\CommentTok{         braucht */}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

In einer der folgenden Veranstaltungen werden die Möglichkeiten der
Dokumentation explizit adressiert.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Code gut kommentieren (Zielgruppenorientierte Kommentierung)
\item
  Header-Kommentare als Einstiegspunkt
\item
  Gute Namensgebung für Variablen und Methoden
\item
  Community- und Sprach-Standards beachten
\item
  Dokumentationen schreiben
\item
  Dokumentation des Entwicklungsflusses
\end{enumerate}

\begin{quote}
\textbf{Merke:} Machen Sie sich auch in Ihren Programmcodes kurze
Notizen, diese sind hilfreich, um bereits gelöste Fragestellungen (in
der Prüfungsvorbereitung) nachvollziehen zu können.
\end{quote}

\hypertarget{datentypen-und-operatoren}{%
\section{Datentypen und Operatoren}\label{datentypen-und-operatoren}}

\begin{quote}
\textbf{Frage:} Warum nutzen einige Programmiersprachen eine
Typisierung, andere nicht?
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{number }\OperatorTok{=} \DecValTok{5}
\NormalTok{my_list }\OperatorTok{=} \BuiltInTok{list}\NormalTok{(}\BuiltInTok{range}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{10}\NormalTok{))}

\BuiltInTok{print}\NormalTok{(number)}
\BuiltInTok{print}\NormalTok{(my_list)}

\CommentTok{#number = "Tralla Trulla"}
\CommentTok{#print(number)}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Merke:} Datentypen definieren unter anderem den möglichen
``Inhalt'', Speichermechanismen (Größe, Organisation).
\end{quote}

Datentypen können sehr unterschiedlich strukturiert werden. Das
nachfolgende Schaubild realisiert dies auf 2 Ebenen (nach Mössenböck,
Kompaktkurs C\# 7 )

\begin{verbatim}
                                     C# Typen
                                         |
                       .------------------------------------.
                       |                                    |
                   Werttypen                           Referenztypen
                       |                                    |
         .-------+-----+---+--------.        .-------+---------+-------.
         |       |         |        |        |       |         |       |
     Vordefi-  Enumer-  Structs   Tupel   Klassen  Inter    Arrays  Delegates
 nierte Typen  ation                     (String) -faces
         |
         |      ...............................................................
         |                           Benutzerdefinierte Typen
         |
         .----+------+-----------+-------------.
         |           |           |             |
     Character    Ganzzahl   Gleitkommazahl   Bool
                     |
             .------+---------.
             |                |
     mit Vorzeichen     vorzeichenlos                                            .
\end{verbatim}

Die Zuordnung zu Wert- und Referenzdatentypen ergibt sich dabei aus den
zwei grundlegenden Organisationsformen im Arbeitsspeicher.

\begin{longtable}[]{@{}lll@{}}
\toprule
& Werttypen & Referenztypen\tabularnewline
\midrule
\endhead
Variable enthält & einen Wert & eine Referenz\tabularnewline
Speicherort & Stack & Heap\tabularnewline
Zuweisung & kopiert den Wert & kopiert die Referenz\tabularnewline
Speicher & Größe der Daten & Größe der Daten, Objekt-Metadata,
Referenz\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{wertdatentypen}{%
\section{Wertdatentypen}\label{wertdatentypen}}

Im Folgenden werden die Werttypen und deren Operatoren besprochen, bevor
in der nächsten Veranstaltung auf die Referenztypen konzeptionell
eingegangen wird.

\hypertarget{character-datentypen}{%
\subsection{Character Datentypen}\label{character-datentypen}}

Der \texttt{char} Datentyp repräsentiert Unicode Zeichen (vgl.
\href{https://de.wikipedia.org/wiki/Unicode}{Link}) mit einer Breite von
2 Byte.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{char}\NormalTok{ oneChar = }\CharTok{'A'}\NormalTok{;}
\DataTypeTok{char}\NormalTok{ secondChar = }\CharTok{'\textbackslash{}n'}\NormalTok{;}
\DataTypeTok{char}\NormalTok{ thirdChar = (}\DataTypeTok{char}\NormalTok{) }\DecValTok{65}\NormalTok{;  }\CommentTok{// Referenz auf ASCII Tabelle}
\end{Highlighting}
\end{Shaded}

Die Eingabe erfolgt entsprechend den Konzepten von C mit einfachen
Anführungszeichen. Doppelte Anführungsstriche implizieren
\texttt{String}-Variablen!

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{var}\NormalTok{ myChar = }\CharTok{'A'}\NormalTok{;}
        \DataTypeTok{var}\NormalTok{ myString = }\StringTok{"A"}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(myChar.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(myString.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Neben der unmittelbaren Eingabe über die Buchstaben und Zeichen kann die
Eingabe entsprechend

\begin{itemize}
\tightlist
\item
  einer Escapesequenz für Unicodezeichen, d.~h.
  \texttt{\textbackslash{}u} gefolgt von der aus vier(!) Symbolen
  bestehenden Hexadezimaldarstellung eines Zeichencodes.
\item
  einer Escapesequenz für Hexadezimalzahlen, d.~h.
  \texttt{\textbackslash{}x} gefolgt von der Hexadezimaldarstellung
  eines Zeichencodes.
\end{itemize}

erfolgen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{('\textbackslash{}u2328' + }\StringTok{" Unicodeblock Miscellaneous Technical"}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{('\textbackslash{}u2F0C' + }\StringTok{" Unicodeblock Kangxi Radicals"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Entsprechend der Datenbreite können \texttt{char} Variablen implizit in
\texttt{short} überführt werden. Für andere numerische Typen ist eine
explizite Konvertierung notwendig.

\hypertarget{zahlendatentypen-und-operatoren}{%
\subsection{Zahlendatentypen und
Operatoren}\label{zahlendatentypen-und-operatoren}}

\begin{longtable}[]{@{}llllll@{}}
\toprule
Type & Suffix & Name & .NET Typ & Bits & Wertebereich\tabularnewline
\midrule
\endhead
Ganzzahl vorzeichenbehaftet & & sbyte & SByte & 8 & --128 bis
127\tabularnewline
& & short & Int16 & 16 & --32.768 bis 32.767\tabularnewline
& & int & Int32 & 32 & -2.147.483.648 bis 2.147.483.647\tabularnewline
& \texttt{L} & long & Int64 & 64 & -9.223.372.036.854.775.808 bis
9.223.372.036.854.775.807\tabularnewline
Ganzzahl ohne Vorzeichen & & byte & Byte & 8 & 0 bis 255\tabularnewline
& & ushort & UInt16 & 16 & 0 bis 65.535\tabularnewline
& \texttt{U} & uint & UInt32 & 32 & 0 bis 4.294.967.295\tabularnewline
& \texttt{UL} & ulong & UInt64 & 64 & 0 bis
18.446.744.073.709.551.615\tabularnewline
Gleitkommazahl & \texttt{F} & float & Single & 32 &\tabularnewline
& \texttt{D} & double & Double & 64 &\tabularnewline
& \texttt{M} & decimal & Decimal & 128 &\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ i = }\DecValTok{5}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(i.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\DataTypeTok{int}\NormalTok{.}\FunctionTok{MinValue}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\DataTypeTok{int}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Numerische Suffixe

\begin{longtable}[]{@{}llll@{}}
\toprule
Suffix & C\# Typ & Beispiel & Bemerkung\tabularnewline
\midrule
\endhead
F & float & float f = 1.0F &\tabularnewline
D & double & double d = 1D &\tabularnewline
M & decimal & decimal d = 1.0M & Compilerfehler bei Fehlen des
Suffix\tabularnewline
U & uint & uint i = 1U &\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{float}\NormalTok{ f = }\FloatTok{5.1F}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(f.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{exkurs-gleitkommazahlen}{%
\subsubsection{Exkurs: Gleitkommazahlen}\label{exkurs-gleitkommazahlen}}

\begin{quote}
\textbf{Frage:} Gleitkommazahlen, wie funktioniert das eigentlich und
wie lässt sich das Format auf den Speicher abbilden?
\end{quote}

Ein naheliegender und direkt zu Gleitkommazahlen führender Gedanke ist
der Ansatz neben dem Zahlenwert auch die Position des Kommas
abzuspeichern. In der ``ingenieurwissenschaftlichen Schreibweise'' ist
diese Information aber an zwei Stellen verborgen, zum einen im
Zahlenwert und zum anderen im Exponenten.

\textbf{Beispiel:} Der Wert der \emph{Lichtgeschwindigkeit} beträgt \[
\begin{aligned}
c &= 299\,792\,458 \; \text{m/s} \\
  &= 299\,792{,}458 \cdot 10^3 \text{m/s} \\
  &= 0{,}299\,792\,458 \cdot 10^9 \text{m/s}\\
  &= 2{,}997\,924\,58 \cdot 10^8 \text{m/s}
\end{aligned}
\]

Um diese zusätzliche Information eindeutig abzulegen, normieren wir die
Darstellung - die Mantisse wird in einen festgelegten Wertebereich, zum
Beispiel \(1 \le m < 10\) gebracht.

Die Gleitkommadarstellung besteht dann aus dem Vorzeichen, der Mantisse
und dem Exponenten. Für binäre Zahlen ist diese Darstellung in der
\href{https://de.wikipedia.org/wiki/IEEE_754}{IEEE 754} genormt.

\begin{verbatim}
  +-+---- ~ -----+----- ~ ----+
  |V|  Mantisse  |  Exponent  |   V=Vorzeichenbit
  +-+---- ~ -----+----- ~ ----+

   1      23           8          = 32 Bit (float)
   1      52          11          = 64 Bit (double)                            .
\end{verbatim}

Welche Probleme treten bei der Verwendung von \texttt{float},
\texttt{double} und \texttt{decimal} ggf. auf?

\textbf{Rundungsfehler}

Ungenaue Darstellungen bei der Zahlenrepräsentation führen zu:

\begin{itemize}
\tightlist
\item
  algebraisch inkorrekten Ergebnissen
\item
  fehlender Gleichheit bei Konvertierungen in der Verarbeitungskette
\item
  Fehler beim Test auf Gleichheit
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
     \DataTypeTok{double}\NormalTok{ fnumber = }\FloatTok{123456784649577.0}\NormalTok{;}
     \DataTypeTok{double}\NormalTok{ additional = }\FloatTok{0.0000001}\NormalTok{;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Experiment 1"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} + \{1\} = \{2:G17\}"}\NormalTok{, fnumber, additional,}
\NormalTok{                                          fnumber + additional);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(fnumber ==(fnumber + additional));}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
     \DataTypeTok{double}\NormalTok{ value = }\FloatTok{.1}\NormalTok{;}
     \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}
     \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ ctr = }\DecValTok{1}\NormalTok{; ctr <= }\DecValTok{10000}\NormalTok{; ctr++)\{}
\NormalTok{          result += value;}
\NormalTok{     \}}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Experiment 2"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{".1 Added 10000 times: \{0:G17\}"}\NormalTok{, result);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Dezimal-Trennzeichen}

Im Beispielprogramm wird ein Dezimalpunkt als Trennzeichen verwendet.
Diese Darstellung ist jedoch kulturspezifisch. In Deutschland gelten das
Komma als Dezimaltrennzeichen und der Punkt als
Tauschender-Trennzeichen. Speziell bei Ein- und Ausgaben kann das zu
Irritationen führen. Diese können durch die Verwendung der Klasse
\textbf{System.Globalization.CultureInfo} beseitigt werden.

Zum Beispiel wird mit der folgenden Anweisung die Eingabe eines
Dezimalpunkts statt Dezimalkomma erlaubt.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{double}\NormalTok{ wert = }\DataTypeTok{double}\NormalTok{.}\FunctionTok{Parse}\NormalTok{(Console.}\FunctionTok{ReadLine}\NormalTok{(), System.}\FunctionTok{Globalization}\NormalTok{.}\FunctionTok{CultureInfo}\NormalTok{.}\FunctionTok{InvariantCulture}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\textbf{Division durch Null}

Die Datentypen \texttt{float} und \texttt{double} kennen die Werte
\emph{NegativeInfinity} (\emph{-1.\#INF}) und \emph{PositiveInfinity}
(\emph{1.\#INF}), die bei Division durch Null entstehen können. Außerdem
gibt es den Wert \emph{NaN} (\emph{not a number}, \emph{1.\#IND}), der
einen irregulären Zustand repräsentiert. Mit Hilfe der Methoden
\emph{IsInfinity()} bzw. \emph{IsNaN()} kann überprüft werden, ob diese
Werte vorliegen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(Double.}\FunctionTok{IsNaN}\NormalTok{(}\FloatTok{0.0}\NormalTok{/}\FloatTok{0.0}\NormalTok{));}\CommentTok{//gibt true aus}
\end{Highlighting}
\end{Shaded}

\hypertarget{numerische-konvertierungen}{%
\subsubsection{Numerische
Konvertierungen}\label{numerische-konvertierungen}}

Konvertierungen beschreiben den Transformationsvorgang von einem
Zahlentyp in einen anderen. Im Beispiel zuvor provoziert die Zeile

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
      \DataTypeTok{float}\NormalTok{ f = }\FloatTok{5.1}\NormalTok{D;}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

eine Fehlermeldung

\begin{verbatim}
... error CS0664:
Literal of type double cannot be implicitly converted
to type `float'. Add suffix `f' to create a literal of
this type.
...
\end{verbatim}

Das Problem ist offensichtlich. Wir versuchen einen Datentypen, der
größere Werte umfassen kann auf einen Typen mit einem kleineren
darstellbaren Zahlenbereich abzubilden. Der Compiler unterbindet dies
logischerweise.

C\# kennt implizite und explizite Konvertierungen.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{ x = }\DecValTok{1234}\NormalTok{;}
\DataTypeTok{long}\NormalTok{ y = x;}
\DataTypeTok{short}\NormalTok{ z = (}\DataTypeTok{short}\NormalTok{) x;}
\end{Highlighting}
\end{Shaded}

Da die Konvertierung von Ganzkommazahlen in Gleitkommazahlen in jedem
Fall umgesetzt werden kann, sieht C\# hier eine implizite Konvertierung
vor. Umgekehrt muss diese explizit realisiert werden.

Explizite Konvertiering mit dem Typkonvertierungsoperator (runde
Klammern) ist ebenfalls nicht immer möglich. Zusätzliche Möglichkeiten
der Typkonvertierung bietet für elementare Datentypen die Klasse
\textbf{Convert} durch zahlreiche Methoden wie z.B.:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{ wert=Convert.}\FunctionTok{ToInt32}\NormalTok{(Console.}\FunctionTok{ReadLine}\NormalTok{());}\CommentTok{//string to int}
\end{Highlighting}
\end{Shaded}

\hypertarget{arithmetische-operatoren}{%
\subsubsection{Arithmetische
Operatoren}\label{arithmetische-operatoren}}

\textbf{Alle Numerischen Datentypen}

Die arithmetischen Operatoren \texttt{+}, \texttt{-}, \texttt{*},
\texttt{/}, \texttt{\%} sind für alle numerischen Datentypen die
bekannten Operationen Addition, Subtraktion, Multiplikation, Division
und Modulo, mit Ausnahme der 8 und 16-Bit breiten Typen (byte und
short). Diese werden vorher implizit zu einem \texttt{int} konvertiert
und dann wird die bekannte Operation durchgeführt (Siehe Folie 2/2).

Die Addition und Subtraktion kann mit Inkrement und Dekrement-Operatoren
abgebildet werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{int}\NormalTok{ result = }\DecValTok{101}\NormalTok{;}
        \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{100}\NormalTok{; i++ )\{ }\CommentTok{// Anwendung des Inkrement Operators}
\NormalTok{          result--;  }\CommentTok{// Anwendung des Dekrement Operators}
\NormalTok{        \}}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(result);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Integraltypen}

Divisionsoperationen generieren einen abgerundeten Wert bei der
Anwendung auf Ganzkommazahlen. Fangen sie mögliche Divisionen durch 0
mit entsprechenden Exceptions ab!

\begin{itemize}
\tightlist
\item
  Wechsel zu Floatingpoint Zahlen (über Komma und Suffix),
\item
  Motivation der Format Specifiers von WriteLine
\item
  Division durch 0 --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Division von 2/3  = \{0:D\}"}\NormalTok{, }\DecValTok{2}\NormalTok{/}\DecValTok{3}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Überlaufsituationen (Vergleiche Ariane 5 Beispiel der zweiten Vorlesung)
lassen sich in C\# sehr komfortabel handhaben:

\begin{itemize}
\tightlist
\item
  Einführung des checked Operators --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{int}\NormalTok{ a = }\DataTypeTok{int}\NormalTok{.}\FunctionTok{MinValue}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wert von a                = \{0\}"}\NormalTok{, a);}
\NormalTok{        a--;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wert von a nach Dekrement = \{0\}"}\NormalTok{, a);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Überprüfung kann auf Blöcke \texttt{checked\{\}} ausgedehnt werden
oder per Compiler-Flag den gesamten Code einbeziehen. Der
\texttt{checked} Operator kann nicht zur Analyse von Operationen mit
Gleitkommazahlen herangezogen werden!

\textbf{8 und 16-Bit Integraltypen}

Diese Typen haben keine ``eigenen'' Operatoren. Vielmehr konvertiert der
Compiler diese implizit, was bei der Abbildung auf den kleineren
Datentyp zu entsprechenden Fehlermeldungen führt.

\begin{verbatim}
* Generierung Kompilerfehler
* Ergänzung cast Operator
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{short}\NormalTok{ x = }\DecValTok{1}\NormalTok{, y = }\DecValTok{1}\NormalTok{;}
        \DataTypeTok{short}\NormalTok{ z = x + y;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Die Summe ist gleich \{0:D\}"}\NormalTok{, z);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{bitweise-operatoren}{%
\subsubsection{Bitweise Operatoren}\label{bitweise-operatoren}}

Bitweise Operatoren verknüpfen Zahlen auf der Ebene einzelnen Bits,
analog anderen Programmiersprachen stellt C\# folgende Operatoren zur
Verfügung:

\begin{longtable}[]{@{}ll@{}}
\toprule
Symbol & Wirkung\tabularnewline
\midrule
\endhead
\texttt{\textasciitilde{}} & invertiert jedes Bit\tabularnewline
\texttt{\textbar{}} & verknüpft korrespondierende Bits mit
ODER\tabularnewline
\texttt{\&} & verknüpft korrespondierende Bits mit UND\tabularnewline
\texttt{\^{}} & verknüpft korrespondierende Bits mit XOR\tabularnewline
\texttt{\textless{}\textless{}} & bitweise Verschiebung nach
links\tabularnewline
\texttt{\textgreater{}\textgreater{}} & bitweise Verschiebung nach
rechts\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{string} \FunctionTok{printBinary}\NormalTok{(}\DataTypeTok{int}\NormalTok{ value)}
\NormalTok{    \{}
      \KeywordTok{return}\NormalTok{ Convert.}\FunctionTok{ToString}\NormalTok{(value, }\DecValTok{2}\NormalTok{).}\FunctionTok{PadLeft}\NormalTok{(}\DecValTok{8}\NormalTok{,}\CharTok{'0'}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
      \DataTypeTok{int}\NormalTok{ x = }\DecValTok{21}\NormalTok{, y = }\DecValTok{12}\NormalTok{;}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{printBinary}\NormalTok{(}\DecValTok{7}\NormalTok{));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"dezimal:\{0:D\}, binär:\{1\}"}\NormalTok{, x, }\FunctionTok{printBinary}\NormalTok{(x));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"dezimal:\{0:D\}, binär:\{1\}"}\NormalTok{, y, }\FunctionTok{printBinary}\NormalTok{(y));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x & y  = \{0\}"}\NormalTok{, }\FunctionTok{printBinary}\NormalTok{(x & y));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x | y  = \{0\}"}\NormalTok{, }\FunctionTok{printBinary}\NormalTok{(x | y));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x << 1 = \{0\}"}\NormalTok{, }\FunctionTok{printBinary}\NormalTok{(x << }\DecValTok{1}\NormalTok{));}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x >> 1 = \{0\}"}\NormalTok{, }\FunctionTok{printBinary}\NormalTok{(x >> }\DecValTok{1}\NormalTok{));}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgabe}{%
\section{Aufgabe}\label{aufgabe}}

\begin{itemize}
\tightlist
\item
  {[} {]} Machen Sie sich noch mal mit dem Ariane 5 Desaster vertraut.
  Wie hätte eine C\# Lösung ausgesehen, die den Absturz verhindert
  hätte?
\item
  {[} {]} Experimentieren Sie mit den Datentypen. Vollziehen Sie dabei
  die Erläuterungen des nachfolgenden Videos nach:
\end{itemize}

!?\href{https://www.youtube.com/watch?v=ekdcAHxJF6Q}{alt-text}

\hypertarget{c-grundlagen-ii}{%
\chapter{C\# Grundlagen II}\label{c-grundlagen-ii}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Einführung\ in\ die\ Basiselemente\ der\ Programmiersprache\ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/04_CsharpGrundlagenII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{auf-nachfrage}{%
\section{Auf Nachfrage \ldots{}}\label{auf-nachfrage}}

\textbf{Was passiert, wenn man eine größere Zahl in eine kleinere
konvertiert, so dass offensichtlich Stellen verloren gehen?}

\begin{longtable}[]{@{}llll@{}}
\toprule
Type & Name & Bits & Wertebereich\tabularnewline
\midrule
\endhead
Ganzzahl ohne Vorzeichen & byte & 8 & 0 bis 255\tabularnewline
& ushort & 16 & 0 bis 65.535\tabularnewline
& uint & 32 & 0 bis 4.294.967.295\tabularnewline
& ulong & 64 & 0 bis 18.446.744.073.709.551.615\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{byte}\NormalTok{ x = }\DecValTok{0}\NormalTok{;}
        \DataTypeTok{ushort}\NormalTok{ y = }\DecValTok{65535}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(x);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(y);}

\NormalTok{        x = y; }\CommentTok{// Fehler! Die Konvertierung muss explizit erfolgen!}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule
Wert & Binäre Darstellung\tabularnewline
\midrule
\endhead
65.535 & \texttt{11111111\ 11111111}\tabularnewline
255 & \texttt{11111111}\tabularnewline
\bottomrule
\end{longtable}

Nutzen Sie \texttt{checked\{\ \}}, um eine Überprüfung der Konvertierung
zur Laufzeit vornehmen zu lassen
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/keywords/checked}{Link
auf die Dokumentation}.

\hypertarget{wertdatentypen-und-operatoren-fortsetzung}{%
\section{Wertdatentypen und Operatoren
(Fortsetzung)}\label{wertdatentypen-und-operatoren-fortsetzung}}

Aufbauend auf den Inhalten der Vorlesung 3 setzen wir unseren Weg durch
die Datentypen und Operatoren unter C\# fort.

\begin{verbatim}
                                     C# Typen
                                         |
                       .------------------------------------.
                       |                                    |
                   Werttypen                           Referenztypen
                       |                                    |
         .-------+-----+---+--------.        .-------+---------+-------.
         |       |         |        |        |       |         |       |
     Vordefi-  Enumer-  Structs   Tupel   Klassen  Inter    Arrays  Delegates
 nierte Typen  ation                      (String) -faces
         |
         |      ...............................................................
         |                           Benutzerdefinierte Typen
         |
    .----+------+-----------+-------------.
    |           |           |             |
Character    Ganzzahl   Gleitkommazahl   Bool
                |
        .------+---------.
        |                |
   mit Vorzeichen   vorzeichenlos                                              .
\end{verbatim}

\hypertarget{boolscher-datentyp-und-operatoren}{%
\subsection{Boolscher Datentyp und
Operatoren}\label{boolscher-datentyp-und-operatoren}}

In anderen Sprachen kann die bool Variable (logischen Werte
\texttt{true} and \texttt{false}) mit äquivalent Zahlenwerten kombiniert
werden.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OperatorTok{=} \VariableTok{True}
\NormalTok{y }\OperatorTok{=} \DecValTok{1}

\BuiltInTok{print}\NormalTok{(y}\OperatorTok{==}\VariableTok{True}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

In C\# existieren keine impliziten cast-Operatoren, die numerische Werte
und umgekehrt wandeln!

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{bool}\NormalTok{ x = }\KeywordTok{true}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(x);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(!x);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(x == }\KeywordTok{true}\NormalTok{);      }\CommentTok{// Rückgabe eines "neuen" bool Wertes}
        \DataTypeTok{int}\NormalTok{ y = }\DecValTok{1}\NormalTok{;}
        \CommentTok{//Console.WriteLine(x == y);       // Funkioniert nicht}
        \CommentTok{// Lösungsansatz I bool -> int}
        \DataTypeTok{int}\NormalTok{ bool2int = x ? }\DecValTok{1}\NormalTok{ : }\DecValTok{0}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(bool2int);}
        \CommentTok{// Lösungsansatz II}
\NormalTok{        bool2int = Convert.}\FunctionTok{ToInt32}\NormalTok{(x);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(bool2int);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(bool2int == y);  }\CommentTok{// Funktiontiert}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Im Codebeispiel wird der sogenannte tertiäre Operator \texttt{?}
verwandt, der auch durch eine \texttt{if} Anweisung abgebildet werden
könnte (vgl.
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/operators/conditional-operator}{Dokumentation}).

Welchen Vorteil/Nachteil sehen Sie zwischen den beiden Lösungsansätzen?

Die Vergleichsoperatoren \texttt{==} und \texttt{!=} testen auf
Gleichheit oder Ungleichheit für jeden Typ und geben in jedem Fall einen
\texttt{bool} Wert zurück. Dabei muss unterschieden werden zwischen
Referenztypen und Wertetypen.

\begin{verbatim}
* Einführung eines weiteren Objektes, dass auf student2 zeigt,
  anschließend Ausführung der Vergleichsoperation
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \FunctionTok{Person}\NormalTok{ (}\DataTypeTok{string}\NormalTok{ n) \{Name = n;\}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{        Person student1 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Sebastian"}\NormalTok{);}
\NormalTok{        Person student2 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Sebastian"}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(student1 == student2);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Merke: Für Referenztypen evaluiert \texttt{==} die Addressen der
Objekte, für Wertetypen die spezifischen Daten. (Es sei denn, Sie haben
den Operator überladen.)
\end{quote}

Die Gleichheits- und Vergleichsoperationen \texttt{==}, \texttt{!=},
\texttt{\textgreater{}=}, \texttt{\textgreater{}} usw. sind auf alle
numerischen Typen anwendbar.

In der Vorlesung 3 war bereits über die bitweisen boolschen Operatoren
gesprochen worden. Diese verknüpfen Zahlenwerte auf Bitniveau. Die
gleiche Notation (einzelne Operatorsymbole \texttt{\&},
\texttt{\textbar{}}) kann auch zur Verknüpfung von Boolschen Aussagen
genutzt werden.

Darüber hinaus existieren die doppelten Schreibweisen als eigenständige
Operatorkonstrukte - \texttt{\&\&}, , \texttt{\textbar{}\textbar{}}. Bei
der Anwendung auf boolsche Variablen wird dabei zwischen
``nicht-konditionalen'' und ``konditionalen'' Operatoren unterschieden.

Bedeutung der boolschen Operatoren für unterschiedliche Datentypen:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.09\columnwidth}\raggedright
Operation\strut
\end{minipage} & \begin{minipage}[b]{0.50\columnwidth}\raggedright
numerische Typen\strut
\end{minipage} & \begin{minipage}[b]{0.32\columnwidth}\raggedright
boolsche Variablen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{\&}\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
bitweises UND (Ergebnis ist ein numerischer Wert!)\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
nicht-konditionaler UND Operator\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{\&\&}\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
FEHLER\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
konditonaler UND Operator\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{verbatim}
* Wechsel zu && -> Fehlermeldung
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{int}\NormalTok{ a =  }\DecValTok{6}\NormalTok{; }\CommentTok{// 0110}
        \DataTypeTok{int}\NormalTok{ b = }\DecValTok{10}\NormalTok{; }\CommentTok{// 1010}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{((a & b).}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(Convert.}\FunctionTok{ToString}\NormalTok{(a & b, }\DecValTok{2}\NormalTok{).}\FunctionTok{PadLeft}\NormalTok{(}\DecValTok{8}\NormalTok{,}\CharTok{'0'}\NormalTok{));}
        \CommentTok{// Console.WriteLine(a && b);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Konditional und Nicht-Konditional, was heißt das? Erstgenannte
optimieren die Auswertung. So berücksichtigt der AND-Operator
\texttt{\&\&} den rechten Operanden gar nicht, wenn der linke Operand
bereits ein \texttt{false} ergibt.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{bool}\NormalTok{ a=}\KeywordTok{true}\NormalTok{, b=}\KeywordTok{true}\NormalTok{, c=}\KeywordTok{false}\NormalTok{;}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(a || (b && c)); }\CommentTok{// short-circuit evaluation}

\CommentTok{// alternativ}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{(a | (b & c));   }\CommentTok{// keine short-circuit evaluation}
\end{Highlighting}
\end{Shaded}

Hier ein kleines Beispiel für die Optimierung der Konditionalen
Operatoren:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()\{}

            \DataTypeTok{bool}\NormalTok{ a=}\KeywordTok{false}\NormalTok{, b= }\KeywordTok{true}\NormalTok{, c=}\KeywordTok{false}\NormalTok{;}

            \CommentTok{//Nicht-Konditionales UND}
\NormalTok{            DateTime start = DateTime.}\FunctionTok{Now}\NormalTok{;}
            \KeywordTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{; i<}\DecValTok{1000}\NormalTok{; i++)\{}
                \KeywordTok{if}\NormalTok{(a & (b | c))\{\}}
\NormalTok{            \}}
\NormalTok{            DateTime end = DateTime.}\FunctionTok{Now}\NormalTok{;}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Mit Nicht-Konditionalen Operatoren dauerte es: \{0\} Millisekunden"}\NormalTok{, (end-start).}\FunctionTok{TotalMilliseconds}\NormalTok{);}


            \CommentTok{//Konditionales UND}
\NormalTok{            start = DateTime.}\FunctionTok{Now}\NormalTok{;}
            \KeywordTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{; i<}\DecValTok{1000}\NormalTok{; i++)\{}
                \KeywordTok{if}\NormalTok{(a && (b || c))\{\}}
\NormalTok{            \}}
\NormalTok{            end = DateTime.}\FunctionTok{Now}\NormalTok{;}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Mit Konditionalen Operatoren dauerte es nur: \{0\} Millisekunden, da vereinfacht wurde."}\NormalTok{, (end-start).}\FunctionTok{TotalMilliseconds}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{enumerations}{%
\subsection{Enumerations}\label{enumerations}}

Enumerationstypen erlauben die Auswahl aus einer Aufstellung von
Konstanten, die als Enumeratorliste bezeichnet wird. Was passiert
intern? Die Konstanten werden auf einen ganzzahligen Typ gemappt. Der
Standardtyp von Enumerationselementen ist \texttt{int}. Um eine
Enumeration eines anderen ganzzahligen Typs, z. B. \texttt{byte} zu
deklarieren, setzen Sie einen Doppelpunkt hinter dem Bezeichner, auf den
der Typ folgt.

\begin{itemize}
\tightlist
\item
  Darstellung des Enum spezifischen Cast Operators Day startingDay =
  (Day) 5;
\item
  Darstellung der Möglichkeit Constanten zuzuordnen Sat = 5
  --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{enum}\NormalTok{ Day \{Sat, Sun, Mon, Tue, Wed, Thu, Fri\};}
  \CommentTok{//enum Day : byte \{Sat, Sun, Mon, Tue, Wed, Thu, Fri\};}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Day startingDay = Day.}\FunctionTok{Wed}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(startingDay);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Typkonvertierung von einem Zahlenwert in eine enum kann wiederum mit
\texttt{checked} überwacht werden.

Dabei schließen sich die Instanzen nicht gegenseitig aus, mit einem
entsprechenden Attribut können wir auch Mehrfachbelegungen realisieren.

\begin{itemize}
\tightlist
\item
  Hinweis auf Zahlenzuordnung mit Zweierpotenzen --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// https://docs.microsoft.com/de-de/dotnet/api/system.flagsattribute?view=netframework-4.7.2}

\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
\NormalTok{  [FlagsAttribute] }\CommentTok{// <- Specifisches Enum Attribut}
  \KeywordTok{enum}\NormalTok{ MultiHue : }\DataTypeTok{byte}
\NormalTok{  \{}
\NormalTok{     None  = 0b_}\DecValTok{0000}\NormalTok{_}\DecValTok{0000}\NormalTok{,  }\CommentTok{// 0}
\NormalTok{     Black = 0b_}\DecValTok{0000}\NormalTok{_}\DecValTok{0001}\NormalTok{,  }\CommentTok{// 1}
\NormalTok{     Red   = 0b_}\DecValTok{0000}\NormalTok{_}\DecValTok{0010}\NormalTok{,  }\CommentTok{// 2}
\NormalTok{     Green = 0b_}\DecValTok{0000}\NormalTok{_}\DecValTok{0100}\NormalTok{,  }\CommentTok{// 4}
\NormalTok{     Blue  = 0b_}\DecValTok{0000}\NormalTok{_}\DecValTok{1000}\NormalTok{,  }\CommentTok{// 8}
\NormalTok{  \};}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}
          \StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{All possible combinations of values with FlagsAttribute:"}\NormalTok{);}
     \KeywordTok{for}\NormalTok{( }\DataTypeTok{int}\NormalTok{ val = }\DecValTok{0}\NormalTok{; val < }\DecValTok{16}\NormalTok{; val++ )}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{( }\StringTok{"\{0,3\} - \{1\}"}\NormalTok{, val, (MultiHue)val);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

\hypertarget{weitere-wertdatentypen}{%
\subsection{Weitere Wertdatentypen}\label{weitere-wertdatentypen}}

Für die Einführung der weiteren Wertdatentypen müssen wir noch einige
Grundlagen erarbeiten. Entsprechend wird an dieser Stelle noch nicht auf
\texttt{struct} und \texttt{tupel} eingegangen. Vielmehr sei dazu auf
nachfolgende Vorlesungen verwiesen.

\hypertarget{referenzdatentypen}{%
\section{Referenzdatentypen}\label{referenzdatentypen}}

In der vergangenen Veranstaltung haben wir bereits über die Trennlinie
zwischen Werttypen und Referenztypen gesprochen. Was bedeutet die Idee
aber grundsätzlich?

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.09\columnwidth}\raggedright
Aspekt\strut
\end{minipage} & \begin{minipage}[b]{0.37\columnwidth}\raggedright
Stack\strut
\end{minipage} & \begin{minipage}[b]{0.46\columnwidth}\raggedright
Heap\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Format\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
Es ist ein Array des Speichers. Es ist eine LIFO (Last In First Out)
Datenstruktur. In ihr können Daten nur von oben hinzugefügt und gelöscht
werden.\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
Es ist ein Speicherbereich, in dem Chunks zum Speichern bestimmter Arten
von Datenobjekten zugewiesen werden. In ihm können Daten in beliebiger
Reihenfolge gespeichert und entfernt werden.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Was wird abgelegt?\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
Wertedatentypen\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
Referenzdatentypen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Was wird auf dem Stack gespeichert?\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
Wert\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
Referenz\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Kann die Größe variiert werden?\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Zugriffsgeschwindigkeit\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
hoch\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
gering\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Freigabe\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
vom Compiler organisiert\strut
\end{minipage} & \begin{minipage}[t]{0.46\columnwidth}\raggedright
vom Garbage Collector realisiert\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Wie werden Objekte auf dem Stack/Heap angelegt?}

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{ x = }\DecValTok{5}\NormalTok{;}
\DataTypeTok{int}\NormalTok{ y = }\DecValTok{6}\NormalTok{;}
\DataTypeTok{int}\NormalTok{[] array = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{ }\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{7}\NormalTok{\};}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

          STACK                        HEAP
   +-----------------+         +-----------------+
   | 5               |         | ...             |
   +-----------------+         +-----------------+
   | 6               |   +-->  | 4               |  0x1234
   +-----------------+   |     +-----------------+
   | ...             |   |     | 5               |
   +-----------------+   |     +-----------------+
   | 0x1234          | --+     | 7               |
   +-----------------+         +-----------------+
                               | ...             |
                               +-----------------+                             .
\end{verbatim}

\textbf{Und was bedeutet dieser Unterschied?}

Ein zentrales Element ist die unterschiedliche Wirkung des
Zuweisungsoperators \texttt{=}. Analoges gilt für den Vergleichsoperator
\texttt{==} den wir bereits betrachtet haben.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{// Zuweisung für Wertetypen}
    \DataTypeTok{int}\NormalTok{ x = }\DecValTok{5}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ y = }\DecValTok{6}\NormalTok{;}
\NormalTok{    y = x;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}, \{1\}"}\NormalTok{, x, y);}
    \CommentTok{// Zuweisung für Referenztypen}
    \DataTypeTok{int}\NormalTok{ [] intArrayA = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[]\{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{\};}
    \DataTypeTok{int}\NormalTok{ [] intArrayB = intArrayA;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Alter Status \{0\}"}\NormalTok{,intArrayB[}\DecValTok{0}\NormalTok{]);}
\NormalTok{    intArrayA[}\DecValTok{0}\NormalTok{] = }\DecValTok{55}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Neuer Status \{0\}"}\NormalTok{,intArrayA[}\DecValTok{0}\NormalTok{]);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Neuer Status \{0\}"}\NormalTok{,intArrayB[}\DecValTok{0}\NormalTok{]);}
    \CommentTok{// Und wenn wir beides vermischen?}
\NormalTok{    intArrayA[}\DecValTok{1}\NormalTok{] = x;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Neuer Status \{0\}"}\NormalTok{,intArrayA[}\DecValTok{1}\NormalTok{]);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

                    STACK                        HEAP
             +-----------------+         +-----------------+
x            | 5               |         | ...             |
             +-----------------+         +-----------------+
y            | 6               |   +-->  | 55              |  0x1234
             +-----------------+   |     +-----------------+
             | ...             |   |     | 2               |
             +-----------------+   |     +-----------------+
intArrayA    | 0x1234          | --+     | 3               |
             +-----------------+   |     +-----------------+
intArrayB    | 0x1234          | --+     | ...             |
             +-----------------+         +-----------------+                   .
\end{verbatim}

Muss die Referenz immer auf ein Objekt auf dem Heap zeigen?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ [] intArrayA = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[]\{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{\};}
    \DataTypeTok{int}\NormalTok{ [] intArrayB;}
    \CommentTok{// int [] intArrayB = null;}
    \CommentTok{//if (intArrayB != null)\{     // C#6 Syntax}
    \KeywordTok{if}\NormalTok{ (intArrayB }\KeywordTok{is}\NormalTok{ not }\KeywordTok{null}\NormalTok{) \{      }\CommentTok{// C#9 Syntax}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Alles ok, mit intArrayB"}\NormalTok{);}
\NormalTok{     \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

Mit \texttt{null} kann angezeigt werden, dass diese Referenz noch nicht
zugeordnet wurde.

\hypertarget{array-datentyp}{%
\subsection{Array Datentyp}\label{array-datentyp}}

Arrays sind potentiell multidimensionale Container beliebiger Daten,
also auch von Arrays und haben folgende Eigenschaften:

\begin{itemize}
\tightlist
\item
  Ein Array kann eindimensional, mehrdimensional oder verzweigt sein.
\item
  Die Größe innerhalb der Dimensionen eines Arrays wird festgelegt, wenn
  die Arrayinstanz erstellt wird. Eine Anpassung zur Lebensdauer ist
  nicht vorgesehen.
\item
  Arrays sind nullbasiert: Der Index eines Arrays mit n Elementen
  beginnt bei 0 und endet bei n-1.
\item
  Arraytypen sind Referenztypen.
\item
  Arrays können mit \texttt{foreach} iteriert werden.
\end{itemize}

\begin{quote}
\textbf{Merke:} In C\# sind Arrays tatsächlich Objekte und nicht nur
adressierbare Regionen zusammenhängender Speicher wie in C und C++.
\end{quote}

\textbf{Eindimensionale Arrays}

Eindimensionale Arrays werden über das Format

\begin{verbatim}
<typ>[] name = new <typ>[<anzahl>];
\end{verbatim}

deklariert.

Die spezifische Größenangabe kann entfallen, wenn mit der Deklaration
auch die Initialisierung erfolgt.

\begin{verbatim}
<typ>[] name = new <typ>[] {<eintrag_0>, <eintrag_1>, <eintrag_2>};
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Statische Beschränkung der Loop! Fehler generieren
\item
  Ersetzen durch intArray.Length
\item
  Wie kann man nach mehreren Zeichen splitten? --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ [] intArray = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [}\DecValTok{5}\NormalTok{];}
    \DataTypeTok{short}\NormalTok{ [] shortArray = }\KeywordTok{new} \DataTypeTok{short}\NormalTok{[] \{ }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\DecValTok{9}\NormalTok{ \};}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < }\DecValTok{3}\NormalTok{; i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0, 3\}"}\NormalTok{, intArray[i]);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{""}\NormalTok{);}
    \DataTypeTok{string}\NormalTok{ sentence = }\StringTok{"Das ist eine Sammlung von Worten"}\NormalTok{;}
    \DataTypeTok{string}\NormalTok{ [] stringArray = sentence.}\FunctionTok{Split}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ i }\KeywordTok{in}\NormalTok{ stringArray)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0, -9\}"}\NormalTok{, i);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ [] intArray = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [}\DecValTok{5}\NormalTok{];}
    \DataTypeTok{short}\NormalTok{ [] shortArray = }\KeywordTok{new} \DataTypeTok{short}\NormalTok{[] \{ }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\DecValTok{9}\NormalTok{ \};}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < }\DecValTok{3}\NormalTok{; i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0, 3\}"}\NormalTok{, intArray[i]);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{""}\NormalTok{);}
    \DataTypeTok{string}\NormalTok{ sentence = }\StringTok{"Das ist eine Sammlung von Worten"}\NormalTok{;}
    \DataTypeTok{string}\NormalTok{ [] stringArray = sentence.}\FunctionTok{Split}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ i }\KeywordTok{in}\NormalTok{ stringArray)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0, -9\}"}\NormalTok{, i);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Mehrdimensionale Arrays}

C\# unterscheidet zwei Typen mehrdimensionaler Arrays, die sich bei der
Initalisierung und Indizierung unterschiedlich verhalten.

\begin{verbatim}
  Rechteckige Arrays
                      +-----+-----+-----+-----+
  a[zeile, Spalte] ──>|[0,0]│[0,1]│[0,2]│[0,3]|
                      +-----+-----+-----+-----+
                      |[1,0]│[1,1]│[1,2]│[1,3]|
                      +-----+-----+-----+-----+

  Ausgefranste Arrays

                    +---+       +-------+-------+-------+-------+
   a[index] ──>     |[0]| ──>   |[0],[0]│[0],[1]│[0],[2]│[0],[3]|
                    +---+       +-------+-------+-------+-------+
                    |[1]|       |[1],[0]│[1],[1]|
                    +---+       +-------+-------+-------+
                    |[2]|       |[2],[0]│[2],[1]│[2],[2]|
                    +---+       +-------+-------+-------+                      .
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{[,]  rectangularMatrix = }\CommentTok{//entspricht int[3,3]}
\NormalTok{\{}
\NormalTok{  \{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{\},}
\NormalTok{  \{}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{\},}
\NormalTok{  \{}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{\}}
\NormalTok{\};}

\DataTypeTok{int}\NormalTok{ [][] jaggedMatrix =\{ }\CommentTok{//entspricht int[3][]}
    \KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{\},}
    \KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{\},}
    \KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{\}}
\NormalTok{\};}
\end{Highlighting}
\end{Shaded}

\hypertarget{string-datentyp}{%
\subsection{String Datentyp}\label{string-datentyp}}

Als Referenztyp verweisen \texttt{string} Instanzen auf Folgen von
Unicodezeichen, die durch ein Null \texttt{\textbackslash{}0}
abgeschlossen sind. Bei der Interpretation der Steuerzeichen muss
hinterfragt werden, ob eine Ausgabe des Zeichens oder eine Realisierung
der Steuerzeichenbedeutung gewünscht ist.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{string}\NormalTok{ text1 = }\StringTok{"Das ist ein }\SpecialCharTok{\textbackslash{}n}\StringTok{ Test der }\SpecialCharTok{\textbackslash{}t}\StringTok{ über mehrere Zeilen geht!"}\NormalTok{;}
    \DataTypeTok{string}\NormalTok{ text2 = @}\StringTok{"Das ist ein}
\NormalTok{    Test der}
\NormalTok{    über mehrere Zeilen geht!}\StringTok{";}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(text1);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(text2);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Additionsoperator steht für 2 \texttt{string} Variablen bzw. 1
\texttt{string} und eine andere Variable als Verknüpfungsoperator
(sofern für den zweiten Operanden die Methode \texttt{toString()}
implementiert ist) bereit.

\begin{itemize}
\tightlist
\item
  Integration einer ToString Methode --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"String + String = "}\NormalTok{ + }\StringTok{"StringString"}\NormalTok{ );}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"String + Zahl 5 = "}\NormalTok{ + }\DecValTok{5}\NormalTok{); }\CommentTok{// Implizites .ToString()}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Gebrauch des \texttt{+} Operators im Zusammenhang mit
\texttt{string} Daten ist nicht effektiv. eine bessere Performanz bietet
\texttt{System.Text.StringBuilder}.

In der nächsten Vorlesung werden wir uns explizit mit den Konzepten der
Ausgabe und entsprechend den Methoden der String Generierung
beschäftigen.

\hypertarget{umgang-mit-variablen}{%
\section{Umgang mit Variablen}\label{umgang-mit-variablen}}

Wie sollten wir die variablen benennbaren Komponenten unseres Programms
bezeichnen
\href{https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/general-naming-conventions?redirectedfrom=MSDN}{Naming
guidelines}?

\begin{itemize}
\item
  Nutzen Sie sinnvolle, selbsterklärende Variablennamen!
\item
  Vermeiden Sie Abkürzungen abgesehen von verbreiteten Bezeichnungen.
\item
  camelCasing für Methodenargumente und lokale Variablen um konsistent
  mit dem .NET Framework zu sein
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ UserLog}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(LogEvent logEvent)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ itemCount = }\DecValTok{0}\NormalTok{;}
    \CommentTok{// ...}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Keine Codierung von Datentypen (Ungarische Notation), ihre IDE sollte
  hinreichend schlau sein.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Correct}
\DataTypeTok{int}\NormalTok{ counter;}
\DataTypeTok{string}\NormalTok{ name;}
\CommentTok{// Avoid}
\DataTypeTok{int}\NormalTok{ iCounter;}
\DataTypeTok{string}\NormalTok{ strName;}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Vermeiden Sie es Konstanten mit Screaming Caps zu definieren
  (diskutable Position)
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Correct}
\KeywordTok{public} \DataTypeTok{const} \DataTypeTok{string}\NormalTok{ UniName = }\StringTok{"TU Freiberg"}\NormalTok{;}
\CommentTok{// Avoid}
\KeywordTok{public} \DataTypeTok{const} \DataTypeTok{string}\NormalTok{ UNINAME = }\StringTok{"TU Freiberg"}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

Ihre IDE bzw. ein Linterprogramm sollte die Einhaltung dieser Regularien
überprüfen.

\hypertarget{konstante-werte}{%
\subsection{Konstante Werte}\label{konstante-werte}}

Konstanten sind unveränderliche Werte, die zur Compilezeit bekannt sind
und sich während der Lebensdauer des Programms nicht ändern. Der Versuch
einer Änderung wird durch den Compiler überwacht.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
     \DataTypeTok{const} \DataTypeTok{double}\NormalTok{ pi = }\FloatTok{3.14}\NormalTok{;}
\NormalTok{     pi = }\DecValTok{5}\NormalTok{; }\CommentTok{//erzeugt Fehlermeldung, da pi konstant ist}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(pi);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{implizit-typisierte-variablen}{%
\subsection{Implizit typisierte
Variablen}\label{implizit-typisierte-variablen}}

C\# erlaubt bei den lokalen Variablen eine Definition ohne der
expliziten Angabe des Datentyps. Die Variablen werden in diesem Fall mit
dem Schlüsselwort \texttt{var} definiert, der Typ ergibt sich infolge
der Auswertung des Ausdrucks auf der rechten Seite der
Initialisierungsanweisung zur Compilierzeit.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ i = }\DecValTok{10}\NormalTok{; }\CommentTok{// i compiled as an int}
\DataTypeTok{var}\NormalTok{ s = }\StringTok{"untypisch"}\NormalTok{; }\CommentTok{// s is compiled as a string}
\DataTypeTok{var}\NormalTok{ a = }\KeywordTok{new}\NormalTok{[] \{}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{\}; }\CommentTok{// a is compiled as int[]}
\end{Highlighting}
\end{Shaded}

\texttt{var}-Variablen sind trotzdem typisierte Variablen, nur der Typ
wird vom Compiler zugewissen.

Vielfach werden \texttt{var}-Variablen im Initialisierungsteil von
\texttt{for}- und \texttt{foreach}- Anweisungen bzw. in der
\texttt{using}-Anweisung verwendet. Eine wesentliche Rolle spielen sie
bei der Verwendung von anonymen Typen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{//int num = 123;}
    \CommentTok{//string str = "asdf";}
    \CommentTok{//Dictionary<int, string> dict = new Dictionary<int, string>();}
    \DataTypeTok{var}\NormalTok{ num = }\DecValTok{123}\NormalTok{;}
    \DataTypeTok{var}\NormalTok{ str = }\StringTok{"asdf"}\NormalTok{;}
    \DataTypeTok{var}\NormalTok{ dict = }\KeywordTok{new}\NormalTok{ Dictionary<}\DataTypeTok{int}\NormalTok{, }\DataTypeTok{string}\NormalTok{>();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}, \{1\}, \{2\}"}\NormalTok{, num.}\FunctionTok{GetType}\NormalTok{(), str.}\FunctionTok{GetType}\NormalTok{(), dict.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Weitere Infos
https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables

\hypertarget{nullable---leere-variablen}{%
\subsection{Nullable - Leere
Variablen}\label{nullable---leere-variablen}}

Ein ``leer-lassen'' ist nur für Referenzdatentypen möglich,
Wertedatentypen können nicht uninitialisiert bleiben (Compilerfehler)

\begin{verbatim}
* Der Ausgangszustand generiert einen Fehler
* Initalisierung mit string text = null
* Evaluation von int i = null;
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{string}\NormalTok{ text = }\KeywordTok{null}\NormalTok{;   }\CommentTok{// Die Referenz zeigt auf kein Objekt im Heap}
    \CommentTok{//int i = null;}
    \KeywordTok{if}\NormalTok{ (text == }\KeywordTok{null}\NormalTok{) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Die Variable hat keinen Wert!"}\NormalTok{);}
    \KeywordTok{else}\NormalTok{ Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Der Wert der Variablen ist \{0\}"}\NormalTok{, text);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Aus der Definition heraus kann zum Beispiel eine \texttt{int} Variable
nur einen Wert zwischen int.MinValue und int.MaxValue annehmen. Eine
\texttt{null} ist nicht vorgesehen und eine \texttt{0} gehört zum
``normalen'' Wertebereich.

Um gleichermaßen ``nicht-besetzte'' Werte-Variablen zu ermöglichen
integriert C\# das Konzept der sogenannte null-fähigen Typen
(\emph{nullable types}) ein. Dazu wird dem Typnamen ein Fragezeichen
angehängt. Damit ist es möglich diesen auch den Wert \texttt{null}
zuzuweisen bzw. der Compiler realisiert dies.

\begin{verbatim}
* einfache Variable ist mit null initialisierbar
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{? i = }\KeywordTok{null}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (i == }\KeywordTok{null}\NormalTok{) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Die Variable hat keinen Wert!"}\NormalTok{);}
    \KeywordTok{else}\NormalTok{ Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Der Wert der Variablen ist \{0\}"}\NormalTok{, i);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Wie wird das Ganze umgesetzt? Jeder \texttt{Typ?} wird vom Compiler dazu
in einen generischen Typ \texttt{Nullable\textless{}Typ\textgreater{}}
transformiert, der folgende Methoden implementiert:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Nullable <T>\{}
  \KeywordTok{private} \DataTypeTok{bool}\NormalTok{ defined;}
  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ HasValue \{}\KeywordTok{get}\NormalTok{;\}}
\NormalTok{  ...}
  \KeywordTok{private}\NormalTok{ T value;}
  \KeywordTok{public}\NormalTok{ T Value \{}\KeywordTok{get}\NormalTok{;\}}
\NormalTok{  ...}
  \KeywordTok{public}\NormalTok{ T }\FunctionTok{GetValueOrDefault}\NormalTok{()   }\CommentTok{// value oder default Value entsprechend der}
                                 \CommentTok{// der Liste unter dem untenstehenden Link}
\NormalTok{  ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/keywords/default-values-table

\hypertarget{aufgaben-3}{%
\section{Aufgaben}\label{aufgaben-3}}

\begin{itemize}
\item
  {[} {]} Experimentieren Sie mit Arrays und Enumerates. Schreiben Sie
  Programme, die Arrays nach bestimmten Einträgen durchsuchen. Erstellen
  Sie Arrays aus Enum Einträgen und zählen Sie die Häufigkeit des
  Vorkommens.
\item
  {[} {]} Welche Funktion realisiert das folgende Codebeispiel?
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ number = }\DecValTok{0}\NormalTok{; number < }\DecValTok{20}\NormalTok{; number ++)}
\NormalTok{    \{}
      \DataTypeTok{bool}\NormalTok{ prime = }\KeywordTok{true}\NormalTok{;}
      \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{2}\NormalTok{; i <= number / }\DecValTok{2}\NormalTok{; i++)}
\NormalTok{      \{}
        \KeywordTok{if}\NormalTok{(number % i == }\DecValTok{0}\NormalTok{)}
\NormalTok{        \{}
\NormalTok{          prime = }\KeywordTok{false}\NormalTok{;}
          \KeywordTok{break}\NormalTok{;}
\NormalTok{        \}}
\NormalTok{      \}}
      \KeywordTok{if}\NormalTok{ (prime == }\KeywordTok{true}\NormalTok{) Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\}, "}\NormalTok{, number);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  {[} {]} Studieren Sie C\# Codebeispiele. Einen guten Startpunkt bieten
  zum Beispiel die `'1000 C\# Examples'' unter
  https://www.sanfoundry.com/csharp-programming-examples/
\end{itemize}

\hypertarget{c-grundlagen-iii}{%
\chapter{C\# Grundlagen III}\label{c-grundlagen-iii}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Einführung\ in\ die\ Basiselemente\ der\ Programmiersprache\ C\#\ -\ Eingabe/Ausgabe,\ Ausnahmen}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/05_CsharpGrundlagenIII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{io-schreiboperation}{%
\section{I/O Schreiboperation}\label{io-schreiboperation}}

C\# selbst besitzt keine Anweisungen für die Ein- und Ausgabe von Daten,
dazu existieren aber mehrere Bibliotheken, die im folgenden für die
Bildschirmausgabe und das Schreiben in Dateien vorgestellt werden
sollen.

Für das Schreiben stehen zwei Methoden \texttt{System.Console.Write} und
\texttt{System.Console.WriteLine}.

Diese decken erstens eine \textbf{große Bandbreite von
Übergabeparametern} und bedienen zweitens verschiedene
\textbf{Ausgabeschnittstellen}.

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.02\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.36\columnwidth}\raggedright
WriteLine() Methoden\strut
\end{minipage} & \begin{minipage}[b]{0.54\columnwidth}\raggedright
Anwendung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.02\columnwidth}\raggedright
1\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine()}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Zeilenumbruch\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
2\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(UInt64),\ WriteLine(Double),\ WriteLine(Object)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Ausgabe von Variablen der Basisdatentypen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
3\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(Object)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
4\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(String)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Ausgabe einer \texttt{string} Variable\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
5\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(String,\ Object)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Kombinierte Formatierung- String mit Formatinformationen und
nachfolgendes Objekt \ldots{}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
6\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(String,\ Object,\ Object)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\ldots{} nachfolgende Objekte\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
7\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(String,\ Object,\ Object,\ Object)}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\ldots{}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedright
8\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\texttt{WriteLine(String,\ Object{[}{]})}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
\ldots{}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{einzelner-datentyp}{%
\subsection{Einzelner Datentyp}\label{einzelner-datentyp}}

Die Varianten 1-4 aus vorhergehender Tabelle übernehmen einen einzelnen
Datentypen und geben dessen Wert aus. Dabei wird implizit die Methode
\texttt{toString()} aufgerufen.

\begin{itemize}
\tightlist
\item
  Erinnerung an Steuerzeichen /n /t --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"One"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"Two"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Three"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Four"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Achtung, für Referenzdatentypen bedeutet dies, dass die Referenz
ausgegeben wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{double}\NormalTok{[] values = }\KeywordTok{new} \DataTypeTok{double}\NormalTok{[] \{}\FloatTok{43.2234}\NormalTok{, }\FloatTok{1.23123243}\NormalTok{, }\FloatTok{-123234.09}\NormalTok{\};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(values);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(values.}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Lassen Sie uns schon mal etwas in die Zukunft schauen und die
objektorientierte Implementierung dieser Idee erfassen:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ Person}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Age \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()}
\NormalTok{    \{}
        \KeywordTok{return} \StringTok{"Person: "}\NormalTok{ + Name + }\StringTok{" "}\NormalTok{ + Age;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Person person = }\KeywordTok{new}\NormalTok{ Person \{ Name = }\StringTok{"Bernhard von Cotta"}\NormalTok{, Age = }\DecValTok{55}\NormalTok{ \};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(person);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{kombinierte-formatierung-von-strings}{%
\subsection{Kombinierte Formatierung von
Strings}\label{kombinierte-formatierung-von-strings}}

Die ``Kombinierte Formatierung'' unter C\# ermöglicht eine breite
Festlegung bezüglich des Formats der Ausgaben. Die folgenden Aussagen
beziehen sich dabei aber nicht nur auf die Anwendung im Zusammenhang mit
\texttt{WriteLine()} und \texttt{Write()} sondern können auch auf:

\begin{itemize}
\tightlist
\item
  \href{https://docs.microsoft.com/de-de/dotnet/api/system.string.format}{String.Format}
  (und damit ToString()!)
\item
  \href{https://docs.microsoft.com/de-de/dotnet/api/system.text.stringbuilder}{String.Builder}
\item
  \href{https://docs.microsoft.com/de-de/dotnet/api/system.diagnostics.debug.writeline\#System_Diagnostics_Debug_WriteLine_System_String_System_Object___}{Debug.WriteLine}
  \ldots{}
\end{itemize}

angewandt werden.

Die Ausdrücke folgen dabei folgenden Muster. Achtung, die rechteckigen
Klammern illustrieren hier optionale Elemente \texttt{{[}...{]}}!

\begin{verbatim}
{ index [, alignment] [width][:format][precision]}
\end{verbatim}

\begin{longtable}[]{@{}ll@{}}
\toprule
Element & Bedeutung\tabularnewline
\midrule
\endhead
\texttt{index} & Referenz auf die nachfolgenden Folge der
Objekte\tabularnewline
\texttt{alignment} & Ausrichtung links- (\texttt{-} ) oder
rechtsbündig\tabularnewline
\texttt{width} & Breite der Darstellung\tabularnewline
\texttt{format} & siehe nachfolgende Tabellen\tabularnewline
\texttt{precision} & Nachkommastellen bei gebrochenen
Zahlenwerten\tabularnewline
\bottomrule
\end{longtable}

\begin{itemize}
\tightlist
\item
  Diskussion der Indizes, Durchtauschen der Indizes,
\item
  Erzeugung Fehler Indizes
\item
  Darstellung der Breite
\item
  Positives negatives Vorzeichen der Breite
\item
  Angabe der Formate, precision --\textgreater{}
\end{itemize}

Probieren sie es doch in folgendem Beispiel mal aus:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
        \DataTypeTok{double}\NormalTok{[] values = }\KeywordTok{new} \DataTypeTok{double}\NormalTok{[] \{}\FloatTok{43.2234}\NormalTok{, }\FloatTok{1.23123243}\NormalTok{, }\FloatTok{-123234.09}\NormalTok{\};}
        \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ index = }\DecValTok{0}\NormalTok{; index < values.}\FunctionTok{Length}\NormalTok{; index++)}
\NormalTok{        \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} -> \{1\}"}\NormalTok{, index, values[index]);}
\NormalTok{        \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lll@{}}
\toprule
Format Symbol & Bedeutung & Beispiel\tabularnewline
\midrule
\endhead
G & Default &\tabularnewline
E, e & Exponentiell & 1.052033E+003\tabularnewline
F, f & Festkomma & 123.45\tabularnewline
X, x & Hexadezimal & 1FF\tabularnewline
P, p & Prozent & -38.8\%\tabularnewline
D, d & Dezimal & 1231\tabularnewline
N, n & Dezimal mit Trennzeichen & 1.23432,12\tabularnewline
\bottomrule
\end{longtable}

Eine komplette Auflistung findet sich unter
https://docs.microsoft.com/de-de/dotnet/standard/base-types/standard-numeric-format-strings

\begin{quote}
\textbf{Achtung:} Die Formatzeichen sind typspezifisch, es exisiteren
analoge Zeichen mit unterschiedlicher Bedeutung für Zeitwerte
\end{quote}

\begin{itemize}
\tightlist
\item
  Illustration, dass die Formatierungsmethoden auf verschiedenen Ebenen
  funktionen
\item
  Hinweis auf fehlender Möglichkeit einer Breitenangabe
\item
  Einführung einer cultural Instanz
\end{itemize}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Globalization}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    DateTime thisDate = }\KeywordTok{new} \FunctionTok{DateTime}\NormalTok{(}\DecValTok{2020}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{12}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(thisDate.}\FunctionTok{ToString}\NormalTok{(}\StringTok{"d"}\NormalTok{));   }\CommentTok{// d = kurzes Datum}
                                                 \CommentTok{// D = langes Datum}
                                                 \CommentTok{// f = vollständig}

    \DataTypeTok{string}\NormalTok{[]  cultures = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{ [] \{}\StringTok{"de-DE"}\NormalTok{, }\StringTok{"sq-AL"}\NormalTok{, }\StringTok{"hy-AM"}\NormalTok{\};}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ culture }\KeywordTok{in}\NormalTok{ cultures)\{}
\NormalTok{         Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{CurrentCulture}\NormalTok{ = }\KeywordTok{new} \FunctionTok{CultureInfo}\NormalTok{(culture);}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0:5\} - \{1:D\}"}\NormalTok{, culture, thisDate);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Merke:} Die kulturbezogene Ausgabe ist auch für das Komma bei
den gebrochenen Zahlen relevant. Dieser Aspekt wird in den Übungen
thematisiert
\href{https://docs.microsoft.com/de-de/dotnet/api/system.globalization.numberformatinfo.numberdecimalseparator?view=net-5.0}{Link}.
\end{quote}

\hypertarget{zeichenfolgeninterpolation}{%
\subsection{Zeichenfolgeninterpolation}\label{zeichenfolgeninterpolation}}

Wesentliches Element der Zeichenfolgeninterpolation ist die
``Ausführung'' von Code innerhalb der Ausgabespezifikation. Die Breite
der Möglichkeiten reicht dabei von einfachen Variablennamen bis hin zu
komplexen Ausdrücken. Hier bitte Augenmaß im Hinblick auf die Lesbarkeit
walten lassen! Angeführt wird ein solcher Ausdruck durch ein
\texttt{\$}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{// Composite formatting:}
    \DataTypeTok{var}\NormalTok{ date = DateTime.}\FunctionTok{Now}\NormalTok{;}
    \DataTypeTok{string}\NormalTok{ city = }\StringTok{"Freiberg"}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hello, \{0\}! Today is \{1\}, it's \{2:HH:mm\} now."}\NormalTok{, city, date.}\FunctionTok{DayOfWeek}\NormalTok{, date);}
    \CommentTok{// String interpolation:}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"Hello, \{city\}! Today is \{date.DayOfWeek\}, it's \{date:HH:mm\} now."}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Darstellung des Ausdrucks folgt dabei der Semantik:

\begin{verbatim}
{<interpolatedExpression>[,<alignment>][:<formatString>]}
\end{verbatim}

Damit lassen sich dann sehr mächtige Ausdrücke formulieren vgl.
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/tokens/interpolated}{Link}
oder aber in den Beispielen von

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ ivalue = }\DecValTok{33}\NormalTok{;}
    \DataTypeTok{double}\NormalTok{ fvalue = }\FloatTok{43.1231}\NormalTok{;}

    \CommentTok{// Berechnungen}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{ivalue * 10000,20\}"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{ivalue * 10000,20:E\}"}\NormalTok{);}

    \CommentTok{// Fallunterscheidungen mit ternärem Operator}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{ivalue < 5 ? ivalue.ToString() : "}\NormalTok{invalid}\StringTok{"\}"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{(fvalue < 1000 ? fvalue : fvalue/1000):f2\}"}\NormalTok{+}
\NormalTok{                      $}\StringTok{"\{fvalue < 1000 ? "}\NormalTok{Euro}\StringTok{" : "}\NormalTok{kEuro}\StringTok{"\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{ziele-der-schreiboperationen}{%
\subsection{Ziele der
Schreiboperationen}\label{ziele-der-schreiboperationen}}

Üblicherweise möchte man die Ausgabegeräte (Konsole, Dateien, Netzwerk,
Drucker, etc.) anpassen können. \texttt{System.IO} bietet dafür bereits
verschiedene Standardschnittstellen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Ausgabe auf das Standard-Gerät"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Ausgabe nach Out (default die Konsole)"}\NormalTok{);}
     \CommentTok{//Console.Error.WriteLine("Ausgabe an die Fehlerschnittstelle");}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die dafür vorgesehenen Standardeinstellungen können aber entsprechend
umgelenkt werden. Dafür greift C\# analog zu vielen anderen Sprachen
(und Betriebssysteme) das Stream Konzept auf, dass eine Abstraktion für
verschiedene Quellen und Senken von Informationen bereitstellt. Darauf
aufbauend sind dann Lese- / Schreiboperationen möglich.

Einen guten Überblick dazu bietet das nachfolgende Tutorial:

!?\href{https://www.youtube.com/watch?v=CN5A3Q2ePak}{Streams}

Von der Klasse \texttt{System.IO.Stream} leiten sich entsprechend
\href{https://docs.microsoft.com/de-de/dotnet/api/system.io.memorystream?view=netframework-4.7.2}{MemoryStream},
\href{https://docs.microsoft.com/de-de/dotnet/api/system.io.filestream?view=netframework-4.7.2}{FileStream},
\href{https://docs.microsoft.com/de-de/dotnet/api/system.net.sockets.networkstream?view=netframework-4.7.2}{NetworkStream}
ab. Diese bringen sowohl eigene Lese-/Operationen mit, gleichzeitig ist
aber auch das ``Umlenken'' von Standardoperationen möglich.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Das Beispiel entstammt der Dokumentation des .Net Frameworks}
\CommentTok{// https://docs.microsoft.com/de-de/dotnet/api/system.console.out?view=netframework-4.7.2}

\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{IO}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Example}
\NormalTok{\{}
   \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{   \{}
      \CommentTok{// Get all files in the current directory.}
      \DataTypeTok{string}\NormalTok{[] files = Directory.}\FunctionTok{GetFiles}\NormalTok{(}\StringTok{"."}\NormalTok{);}
\NormalTok{      Array.}\FunctionTok{Sort}\NormalTok{(files);}

      \CommentTok{// Display the files to the current output source to the console.}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"First display of filenames to the console:"}\NormalTok{);}
\NormalTok{      Array.}\FunctionTok{ForEach}\NormalTok{(files, s => Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(s));}
\NormalTok{      Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{();}

      \CommentTok{// Redirect output to a file named Files.txt and write file list.}
\NormalTok{      StreamWriter sw = }\KeywordTok{new} \FunctionTok{StreamWriter}\NormalTok{(@}\StringTok{".\textbackslash{}Files.txt"}\NormalTok{);}
\NormalTok{      sw.}\FunctionTok{AutoFlush}\NormalTok{ = }\KeywordTok{true}\NormalTok{;}
\NormalTok{      Console.}\FunctionTok{SetOut}\NormalTok{(sw);}
\NormalTok{      Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Display filenames to a file:"}\NormalTok{);}
\NormalTok{      Array.}\FunctionTok{ForEach}\NormalTok{(files, s => Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(s));}
\NormalTok{      Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{();}

      \CommentTok{// Close previous output stream and redirect output to standard output.}
\NormalTok{      Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{Close}\NormalTok{();}
\NormalTok{      sw = }\KeywordTok{new} \FunctionTok{StreamWriter}\NormalTok{(Console.}\FunctionTok{OpenStandardOutput}\NormalTok{());}
\NormalTok{      sw.}\FunctionTok{AutoFlush}\NormalTok{ = }\KeywordTok{true}\NormalTok{;}
\NormalTok{      Console.}\FunctionTok{SetOut}\NormalTok{(sw);}

      \CommentTok{// Display the files to the current output source to the console.}
\NormalTok{      Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Second display of filenames to the console:"}\NormalTok{);}
\NormalTok{      Array.}\FunctionTok{ForEach}\NormalTok{(files, s => Console.}\FunctionTok{Out}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(s));}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Darüber hinaus stehen aber auch spezifische Zugriffsmethoden zum
Beispiel für Dateien zur Verfügung.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Text}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{IO}\NormalTok{; }\CommentTok{//Erforderlicher Namespace}
\KeywordTok{namespace}\NormalTok{ Wiki}
\NormalTok{\{}
    \KeywordTok{class}\NormalTok{ Program}
\NormalTok{    \{}
        \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{        \{}
            \CommentTok{// Unmittelbare Ausgabe in eine Datei}
\NormalTok{            File.}\FunctionTok{WriteAllText}\NormalTok{(@}\StringTok{"C:}\SpecialCharTok{\textbackslash{}t}\StringTok{est1.txt"}\NormalTok{, }\StringTok{"Sehr einfach"}\NormalTok{);}

            \CommentTok{// Einlesen des gesamten Inhalts einer Textdatei und}
            \CommentTok{// Ausgabe auf dem Bildschirm}
            \DataTypeTok{string}\NormalTok{ text = File.}\FunctionTok{ReadAllText}\NormalTok{(@}\StringTok{"C:}\SpecialCharTok{\textbackslash{}t}\StringTok{est1.txt"}\NormalTok{);}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(text);}
\NormalTok{        \}}
\NormalTok{     \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Zur Erinnerung:} Das \texttt{@} vor einen String markiert ein
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/tokens/verbatim}{verbatim
string literal} - alles in der Zeichenfolge, was normalerweise als
Escape-Sequenz interpretiert werden würde, wird ignoriert.
\end{quote}

\hypertarget{beispiel}{%
\subsection{Beispiel}\label{beispiel}}

Zur Erinnerung, in Markdown werden Tabellen nach folgendem Muster
aufgebaut:

\begin{verbatim}
| Name     | Alter     | Aufgabe         |
|:---------|----------:|:----------------|
| Peter    | 42        | C-Programmierer |
| Astrid   | 23        | Level Designer  |
\end{verbatim}

\begin{longtable}[]{@{}lrl@{}}
\toprule
Name & Alter & Aufgabe\tabularnewline
\midrule
\endhead
Peter & 42 & C-Programmierer\tabularnewline
Astrid & 23 & Level Designer\tabularnewline
\bottomrule
\end{longtable}

Geben Sie die Daten bestimmte Fußballvereine in einer Markdown-Tabelle
aus.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{string}\NormalTok{ [] clubs = \{}\StringTok{"Blau Weiß"}\NormalTok{, }\StringTok{"Grün Gelb 1905"}\NormalTok{, }\StringTok{"Borussia Tralla Trulla"}\NormalTok{, }\StringTok{"Eintracht"}\NormalTok{\};}
    \DataTypeTok{int}\NormalTok{ [] punkte = \{}\DecValTok{12}\NormalTok{, }\DecValTok{10}\NormalTok{, }\DecValTok{9}\NormalTok{, }\DecValTok{5}\NormalTok{\};}
    \CommentTok{// Wie lang ist ein Clubname maximal?}
    \DataTypeTok{int}\NormalTok{ maxlength = }\DecValTok{0}\NormalTok{;}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ club }\KeywordTok{in}\NormalTok{ clubs)}
\NormalTok{    \{}
\NormalTok{      maxlength =  club.}\FunctionTok{Length}\NormalTok{ < maxlength ? maxlength : club.}\FunctionTok{Length}\NormalTok{ ;}
\NormalTok{    \}  }
\NormalTok{    maxlength += }\DecValTok{1}\NormalTok{;}
    \CommentTok{// Ausgabe}
    \DataTypeTok{string}\NormalTok{ output;}
\NormalTok{    output  = }\StringTok{"| "}\NormalTok{;}
\NormalTok{    output += }\StringTok{"Verein"}\NormalTok{.}\FunctionTok{PadRight}\NormalTok{(maxlength, }\CharTok{' '}\NormalTok{) + }\StringTok{"| Punkte |}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{;}
\NormalTok{    output += }\StringTok{"|:"}\NormalTok{+ }\StringTok{""}\NormalTok{.}\FunctionTok{PadRight}\NormalTok{(maxlength, }\CharTok{'-'}\NormalTok{) + }\StringTok{"|:-------|}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{;}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < clubs.}\FunctionTok{Length}\NormalTok{; i++)\{}
\NormalTok{       output += String.}\FunctionTok{Format}\NormalTok{(}\StringTok{"| \{0\}| \{1, -7\}|}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, clubs[i].}\FunctionTok{PadRight}\NormalTok{(maxlength, }\CharTok{' '}\NormalTok{), punkte[i]);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(output);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Frage:} Welche Annahmen werden implizit bei der Erstellung der
Tabelle getroffen? Wo sehen Sie Verbesserungsbedarf?
\end{quote}

\hypertarget{io-leseoperationen}{%
\section{I/O Leseoperationen}\label{io-leseoperationen}}

Eine Software ist zumeist von Nutzereingaben abhängig. Diese können:

\begin{itemize}
\tightlist
\item
  in Form von Dateiinhalten daherkommen,
\item
  als Eingaben beim Start des Programms vorgegeben oder
\item
  zur Laufzeit eingelesen werden.
\end{itemize}

\begin{quote}
Vergegenwärtigen Sie sich die Vor- und Nachteile der unterschiedlichen
Formen mit Blick auf die Entwicklung einer Software!
\end{quote}

\hypertarget{kommandozeilenargumente}{%
\subsection{Kommandozeilenargumente}\label{kommandozeilenargumente}}

Eine grundlegende Eingabemöglichkeit ist die Übergabe von Parametern
beim Aufruf des Programms von der Kommandozeile.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"How many arguments are given? - \{args.Length\}"}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{string}\NormalTok{ argument }\KeywordTok{in}\NormalTok{ args)}
\NormalTok{    \{}
\NormalTok{      System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(argument);}
\NormalTok{    \}}
    \KeywordTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Bei der Vorgabe von Commandline Parametern unterscheidet sich der Ablauf
etwas, je nachdem wie Sie Ihren Code ``bauen''.

\textbf{Kommandozeile}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  mono Compiler
\end{enumerate}

\begin{verbatim}
mcs CmdLineParams.cs
mono CmdLineParams.exe Das ist "ein Test"
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  dotnet Umgebung
\end{enumerate}

\begin{verbatim}
dotnet new console --name dotnet_cmdLinePara --framework net5.0
cd dotnet_cmdLinePara
dotnet run -- -1 -zwei -"drei vier"
\end{verbatim}

\textbf{Entwicklungsumgebung am Beispiel von VS Code}

Suchen Sie den zugehörigen \texttt{.vscode} Ordner innerhalb Ihres
Projektes und öffenen Sie \texttt{launch.json}. Ergänzen Sie die
Kommandozeilenparameter für den Punkt \texttt{args}.

\begin{Shaded}
\begin{Highlighting}[]
\ErrorTok{"configurations":} \OtherTok{[}
    \FunctionTok{\{}
        \DataTypeTok{"name"}\FunctionTok{:} \StringTok{".NET Core Launch (console)"}\FunctionTok{,}
        \DataTypeTok{"args"}\FunctionTok{:} \OtherTok{[]}\FunctionTok{,} \ErrorTok{//} \ErrorTok{PUT} \ErrorTok{YOUR} \ErrorTok{ARGUMENTS} \ErrorTok{HERE}
         \ErrorTok{...}
    \FunctionTok{\}}
\OtherTok{]}
\end{Highlighting}
\end{Shaded}

\textbf{Auswertung der Kommandozeilenparameter}

\begin{quote}
\textbf{Achtung:} Im folgenden bemühen wir uns selbst um das Parsen der
Kommandozeilenargumente. Dies sollte in realen Vorhaben entsprechenden
Bibliotheken überlassen werden
\href{https://blogs.msmvps.com/bsonnino/2020/04/12/parsing-the-command-line-for-your-application-with-system-commandline/}{Using
System.CommandLine}!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Geben Sie einen Ganzzahlwert und einen String als Argumente ein!"}\NormalTok{);}
    \KeywordTok{if}\NormalTok{ (args.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{0}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Offenbar keine Eingabe - Fehler!"}\NormalTok{);}
        \KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    \}}
    \KeywordTok{if}\NormalTok{ ((args.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{1}\NormalTok{) || (args.}\FunctionTok{Length}\NormalTok{ > }\DecValTok{2}\NormalTok{))}
\NormalTok{    \{}
\NormalTok{        System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Falsche Zahl von Parametern - Fehler!"}\NormalTok{);}
        \KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    \}}
    \KeywordTok{if}\NormalTok{ (args.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{2}\NormalTok{)  }\CommentTok{// Erwartete Zahl von Parametern}
\NormalTok{    \{}
        \CommentTok{// hier müssen wir jetzt die Daten parsen und die Datentypen evaluieren}
\NormalTok{    \}}
    \KeywordTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Im übernächsten Abschnitt prüfen wir den Datentyp und den Inhalt der
Parameter auf Ihre Korrektheit.

\hypertarget{leseoperationen-von-der-console}{%
\subsection{Leseoperationen von der
Console}\label{leseoperationen-von-der-console}}

Leseoperationen von der Console (oder anderen Streams) werden durch zwei
Methoden abgebildet:

\begin{verbatim}
public static int Read ();
public static string ReadLine ();
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{char}\NormalTok{ ch;}
    \DataTypeTok{int}\NormalTok{ x;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Print Unicode-Indizes"}\NormalTok{);}
    \KeywordTok{do}
\NormalTok{      \{}
\NormalTok{        x = Console.}\FunctionTok{Read}\NormalTok{();   }\CommentTok{// Lesen eines Zeichens}
\NormalTok{        ch = Convert.}\FunctionTok{ToChar}\NormalTok{(x);}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{($}\StringTok{"Unicode \{x\}- Sign \{Convert.ToChar(x)\}}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}
        \CommentTok{// Hier könnte man jetzt eine Filterung realiseren}
\NormalTok{      \} }\KeywordTok{while}\NormalTok{ (ch != }\CharTok{'+'}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}  }\CommentTok{// 你好 zu Demonstrationszwecken}
\end{Highlighting}
\end{Shaded}

Das Beispiel zeigt sehr schön, wie verschiedene Zeichensätze auf
unterschiedlich lange Codes abgebildet werden. Das chinesische Zeichen,
dass vor dem Escape-Zeichen ``+'' steht generiert einen 2Byte breiten
Wert.

\hypertarget{transformation-der-eingaben}{%
\subsection{Transformation der
Eingaben}\label{transformation-der-eingaben}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Geben Sie einen Ganzzahlwert und einen String als Argumente ein!"}\NormalTok{);}
    \DataTypeTok{string}\NormalTok{ inputstring = Console.}\FunctionTok{ReadLine}\NormalTok{ ();}
    \DataTypeTok{string}\NormalTok{[] param = inputstring.}\FunctionTok{Split}\NormalTok{(}\CharTok{' '}\NormalTok{);}

    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s }\KeywordTok{in}\NormalTok{ param)\{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(s + }\StringTok{" "}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{if}\NormalTok{ (param.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{0}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Offenbar keine Eingabe - Fehler!"}\NormalTok{);}
        \KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    \}}
    \KeywordTok{if}\NormalTok{ (param.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{2}\NormalTok{)  }\CommentTok{// Erwartete Zahl von Parametern}
\NormalTok{    \{}
        \DataTypeTok{long}\NormalTok{ num1 = }\DataTypeTok{long}\NormalTok{.}\FunctionTok{Parse}\NormalTok{(param[}\DecValTok{0}\NormalTok{]);}
        \DataTypeTok{long}\NormalTok{ num2 = System.}\FunctionTok{Convert}\NormalTok{.}\FunctionTok{ToInt64}\NormalTok{(param[}\DecValTok{0}\NormalTok{]);}
        \DataTypeTok{long}\NormalTok{ num3;}
        \DataTypeTok{long}\NormalTok{.}\FunctionTok{TryParse}\NormalTok{(param[}\DecValTok{0}\NormalTok{], }\KeywordTok{out}\NormalTok{ num3);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{num1\} \{num2\} \{num3\}"}\NormalTok{);}
        \DataTypeTok{string}\NormalTok{ text = param[}\DecValTok{1}\NormalTok{];}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{text\}"}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Dabei nutzt das obige Beispiel 3 Formen der Interpretation der Daten. In
den beiden ersten Fällen ist der Entwickler für das Abfangen der
\emph{Exceptions} verantwortlich. Die letzte Variante kapselt dies
intern und gibt die möglicherweise eingetretene Ausnahme über die
Rückgabewerte aus. Der Code auf Seiten der Anwendung wird kompakter.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \texttt{long.Parse} parst die Eingabe in einen ganzzahligen Wert,
  wirft jedoch eine Ausnahme aus, wenn dies nicht möglich ist, wenn die
  bereitgestellten Daten nicht numerisch sind.
\item
  \texttt{Convert.ToInt64()} konvertiert die Zeichenkettendaten in einen
  korrekten echten int64-Wert und wirft eine Ausnahme aus, wenn der Wert
  nicht konvertiert werden kann.
\item
  Einen alternativen Weg schlägt \texttt{int.TryParse()} ein. Die
  TryParse-Methode ist wie die \texttt{Parse}-Methode, außer dass die
  \texttt{TryParse}-Methode keine Ausnahme auslöst, wenn die
  Konvertierung fehlschlägt.
\end{enumerate}

Auf die Verwendung der Ausnahmen wird im folgenden Abschnitt
eingegangen.

\hypertarget{ausnahmebehandlungen}{%
\section{Ausnahmebehandlungen}\label{ausnahmebehandlungen}}

Ausnahmen sind Fehler, die während der Ausführung einer Anwendung
auftreten. Die C\#-Funktionen zur Ausnahmebehandlung unterstützen bei
der Handhabung von diesen unerwarteten oder außergewöhnlichen
Situationen, die beim Ausführen von Programmen auftreten.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Globalization}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
      \CommentTok{// Beispiel 1: Zugriff auf das Filesystem eines Rechners aus dem Netz}
\NormalTok{      System.}\FunctionTok{IO}\NormalTok{.}\FunctionTok{FileStream}\NormalTok{ file = }\KeywordTok{null}\NormalTok{;}
      \CommentTok{//System.IO.FileInfo fileInfo = new System.IO.FileInfo(@"NoPermission.txt");}
      \CommentTok{// Beispiel 2: Division durch Null}
      \DataTypeTok{int}\NormalTok{ a = }\DecValTok{0}\NormalTok{, b = }\DecValTok{5}\NormalTok{;}
      \CommentTok{//a = b / a;}
      \CommentTok{//long num = long.Parse("NN");}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Merke:} Wenn für eine spezifische Ausnahme kein Ausnahmehandler
existiert, beendet sich das Programm mit einer Fehlermeldung.
\end{quote}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.06\columnwidth}\raggedright
Schlüsselwort\strut
\end{minipage} & \begin{minipage}[b]{0.88\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.06\columnwidth}\raggedright
\texttt{try}\strut
\end{minipage} & \begin{minipage}[t]{0.88\columnwidth}\raggedright
Ein \texttt{try}-Block wird verwendet, um einen Bereich des Codes zu
kapseln. Wenn ein Code innerhalb dieses \texttt{try}-Blocks eine
Ausnahme auslöst, wird diese durch den zugehörigen \texttt{catch}-Block
behandelt.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
\texttt{catch}\strut
\end{minipage} & \begin{minipage}[t]{0.88\columnwidth}\raggedright
Hier haben Sie die Möglichkeit, die (spezifische) Ausnahme zu behandeln,
zu protokollieren oder zu ignorieren.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
\texttt{finally}\strut
\end{minipage} & \begin{minipage}[t]{0.88\columnwidth}\raggedright
Der \texttt{finally}-Block ermöglicht es Ihnen, bestimmten Code
auszuführen, wenn eine Ausnahme geworfen wird oder nicht. Zum Beispiel
das Entsorgen eines Objekts aus dem Speicher.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
\texttt{throw}\strut
\end{minipage} & \begin{minipage}[t]{0.88\columnwidth}\raggedright
Das \texttt{throw}-Schlüsselwort wird verwendet, um eine neue Ausnahme
zu erzeugen, die in einem
\texttt{try}-\texttt{catch}-\texttt{finally}-Block aufgefangen
wird.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{try}
\NormalTok{\{}
   \CommentTok{// Statement which can cause an exception.}
\NormalTok{\}}
\KeywordTok{catch}\NormalTok{(Type x)}
\NormalTok{\{}
   \CommentTok{// Statements for handling the exception}
\NormalTok{\}}
\KeywordTok{finally}
\NormalTok{\{}
   \CommentTok{//Any cleanup code}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Dabei gelten folgende Regeln für den Umgang mit Ausnahmen:

\begin{itemize}
\tightlist
\item
  Alle Ausnahmen sind von \texttt{System.Exception} abgeleitet und
  enthalten detaillierte Informationen über den Fehler, z.B. den Zustand
  der Aufrufliste und eine Textbeschreibung des Fehlers.
\item
  Ausnahmen, die innerhalb eines \texttt{try}-Blocks auftreten, werden
  auf einen Ausnahmehandler, der mit dem Schlüsselwort \texttt{catch}
  gekennzeichnet ist, umgeleitet.
\item
  Ausnahmen werden durch die CLR ausgelöst oder in Software mit dem
  \texttt{throw} Befehl.
\item
  ein \texttt{finally}-Block wird im Anschluss an die Aktivierung eines
  \texttt{catch} Blockes ausgeführt, wenn eine Ausnahme ausgelöst wurde.
  Hier werden Ressourcen freizugeben, beispielsweise ein Stream
  geschlossen.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Berechnung}\NormalTok{(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ c=}\DecValTok{0}\NormalTok{;}
    \KeywordTok{try}
\NormalTok{    \{}
        \KeywordTok{checked}\NormalTok{ \{c = a + b;\}        }\CommentTok{// Fall 1}
        \CommentTok{// c = a / b;                // Fall 2}
\NormalTok{    \}}
    \KeywordTok{catch}\NormalTok{ (OverflowException e)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"[Overflow] "}\NormalTok{ + e.}\FunctionTok{Message}\NormalTok{);}
      \CommentTok{//throw;}
\NormalTok{    \}}
    \KeywordTok{finally}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Finally Block"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hier sind wir am Ende der Funktion!"}\NormalTok{);}
    \KeywordTok{return}\NormalTok{ c;}
\NormalTok{\}}

\KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{\{}
    \CommentTok{// try}
    \CommentTok{// \{}
      \FunctionTok{Berechnung}\NormalTok{(}\DataTypeTok{int}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{, }\DecValTok{1}\NormalTok{);     }\CommentTok{// Fall 1}
      \CommentTok{//Berechnung(2, 0);              // Fall 2}
    \CommentTok{// \}}
    \CommentTok{/*}
\CommentTok{    catch (DivideByZeroException e)}
\CommentTok{    \{}
\CommentTok{      Console.WriteLine("[DivideByZero] " + e.Message);}
\CommentTok{    \}}
\CommentTok{    catch (Exception e)}
\CommentTok{    \{}
\CommentTok{        Console.WriteLine("[GeneralExept] " + e.Message);}
\CommentTok{    \}}
\CommentTok{    */}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hier sind wir am Ende des Hauptprogrammes!"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{best-practice}{%
\subsection{Best Practice}\label{best-practice}}

Die folgende Darstellung geht auf die umfangreiche Sammlung von
Hinweisen zum Thema Exceptions unter
https://docs.microsoft.com/de-de/dotnet/standard/exceptions/best-practices-for-exceptions
zurück.

\begin{itemize}
\tightlist
\item
  Differenzieren Sie zwischen Ausnahmevermeidung und Ausnahmebehandlung
  anhand der erwarteten Häufigkeit und der avisierten ``Signalwirkung''
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Ausnahmevermeidung}
\KeywordTok{if}\NormalTok{ (conn.}\FunctionTok{State}\NormalTok{ != ConnectionState.}\FunctionTok{Closed}\NormalTok{)}
\NormalTok{\{}
\NormalTok{    conn.}\FunctionTok{Close}\NormalTok{();}
\NormalTok{\}}

\CommentTok{// Ausnahmebehandlung}
\KeywordTok{try}
\NormalTok{\{}
\NormalTok{    conn.}\FunctionTok{Close}\NormalTok{();}
\NormalTok{\}}
\KeywordTok{catch}\NormalTok{ (InvalidOperationException ex)}
\NormalTok{\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(ex.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{FullName}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(ex.}\FunctionTok{Message}\NormalTok{);}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Nutzen Sie die Möglichkeite von Ausnahmen statt einen Fehlercode
  zurückzugeben
\item
  Verwenden Sie dafür die vordefinierten .NET-Ausnahmetypen!
\item
  Selbst definierte Ausnahmen enden auf das Wort \emph{Exception}!
\item
  Vermeiden Sie unklare Ausgaben für den Fall einer Ausnahmebehandlung,
  stellen Sie alle Informationen bereit, die für die Analyse des Fehlers
  nötig sind
\item
  Stellen Sie den Status einer Methode wieder her, die von einer
  Ausnahmebehandlung betroffen war (Beispiel: Code für
  Banküberweisungen, Abbuchen von einem Konto und Einzahlung auf ein
  anderes. Scheitert die zweite Aktion muss auch die erste
  zurückgefahren werden.)
\item
  Testen Sie Ihre Ausnahmebehandlungsstrategie!
\end{itemize}

\hypertarget{beispiel-exception-handling}{%
\subsection{Beispiel
Exception-Handling}\label{beispiel-exception-handling}}

Schreiben Sie die Einträge eines Arrays in eine Datei!

Lösung unter
\href{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/mastercode/05_GrundlagenIII/ExceptionHandling/ExceptionHandling.cs}{ExceptionHandling.cs}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.07\columnwidth}\raggedright
Schritt\strut
\end{minipage} & \begin{minipage}[b]{0.87\columnwidth}\raggedright
Fragestellungen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.07\columnwidth}\raggedright
1\strut
\end{minipage} & \begin{minipage}[t]{0.87\columnwidth}\raggedright
Welche Fehler können überhaupt auftreten? Welche Fehler werden durch die
Implementierung abgefangen?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.07\columnwidth}\raggedright
2\strut
\end{minipage} & \begin{minipage}[t]{0.87\columnwidth}\raggedright
Wo sollen die Fehler abgefangen werden?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.07\columnwidth}\raggedright
3\strut
\end{minipage} & \begin{minipage}[t]{0.87\columnwidth}\raggedright
Gibt es Prioritäten bei der Abarbeitung?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.07\columnwidth}\raggedright
4\strut
\end{minipage} & \begin{minipage}[t]{0.87\columnwidth}\raggedright
Sind abschließende ``Arbeiten'' notwendig?\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\href{https://docs.microsoft.com/de-de/dotnet/api/system.io.streamwriter.-ctor?view=netframework-4.7.2\#System_IO_StreamWriter__ctor_System_String_}{Link
auf die Dokumentation der StreamWriter Klasse}

\hypertarget{aufgaben-4}{%
\section{Aufgaben}\label{aufgaben-4}}

\begin{itemize}
\tightlist
\item
  {[} {]} Entwickeln Sie ein Programm, dass als Kommandozeilen-Parameter
  eine Funktionsnamen und eine Ganzzahl übernimmt und die entsprechende
  Ausführung realisiert. Als Funktionen sollen dabei \texttt{Square} und
  \texttt{Reciprocal} dienen. Der Aufruf erfolgt also mit
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{mono}\NormalTok{ Calculator Square 7}
\ExtensionTok{mono}\NormalTok{ Calculator Reciprocal 9}
\end{Highlighting}
\end{Shaded}

Welche Varianten der Eingaben müssen Sie prüfen? Erproben Sie Ihre
Lösung mit einem besonders ``böswilligen'' Nutzer :-)

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ MainClass}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{double} \FunctionTok{Square}\NormalTok{(}\DataTypeTok{int}\NormalTok{ num) => num * num;}
  \KeywordTok{static} \DataTypeTok{double} \FunctionTok{Reciprocal}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ num) => 1f / num;}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{bool}\NormalTok{ Error = }\KeywordTok{false}\NormalTok{;}
    \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ num = }\DecValTok{1}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (args.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{2}\NormalTok{)}
\NormalTok{    \{}
      \CommentTok{// Hier geht es weiter, welche Fälle müssen Sie bedenken?}
      \CommentTok{// int.TryParse(args[1], out num) erlaubt ein fehlertolerantes Parsen}
      \CommentTok{// eines strings}
\NormalTok{    \}}
    \KeywordTok{else}\NormalTok{ Error = }\KeywordTok{true}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (Error)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Please enter a function and a numeric argument."}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Usage: Square    <int> or}\SpecialCharTok{\textbackslash{}n}\StringTok{       Reciprocal <int>"}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{else}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} Operation on \{1\} generates \{2\}"}\NormalTok{, args[}\DecValTok{0}\NormalTok{], num, result );}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{programmfluss-und-funktionen}{%
\chapter{Programmfluss und
Funktionen}\label{programmfluss-und-funktionen}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Programmfluss\ und\ Funktionsstrukturen\ in\ \ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/06_ProgrammflussUndFunktionen.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{anweisungen}{%
\section{Anweisungen}\label{anweisungen}}

In den vorangegangenen Beispielen haben wir zu Illustrationszwecken
bereits mehrfach auf Kontrollstrukturen, die den Programmfluss steuern
zurückgegriffen. Nunmehr sollen diese in einem kurzen Überblick
systematisch eingeführt werden.

Anweisungen setzen sich zusammen aus Zuweisungen, Methodenaufrufen,
Verzweigungen Sprunganweisungen und Anweisungen zur Fehlerbehandlung.

Der letztgenannte Bereich wurde im Zusammenhang mit der Ein- und Ausgabe
von Daten bereits thematisiert.

\begin{figure}
\centering
\includegraphics{./img/06_Progammfluss/Flowchart_de.png}
\caption{Flussdiagramm}
\end{figure}

\hypertarget{verzweigungen}{%
\subsection{Verzweigungen}\label{verzweigungen}}

\textbf{if}

Verzweigungen in C\# sind allein aufgrund von boolschen Ausdrücken
realisiert. Eine implizite Typwandlung wie in C \texttt{if\ (value)} ist
nicht vorgesehen. Dabei sind entsprechend kombinierte Ausdrücke möglich,
die auf boolsche Operatoren basieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{if}\NormalTok{ (BooleanExpression) Statement }\KeywordTok{else}\NormalTok{ Statement}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ a = }\DecValTok{23}\NormalTok{, b = }\DecValTok{3}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (a > }\DecValTok{20}\NormalTok{ && b < }\DecValTok{5}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wahre Aussage "}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{else}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Falsche Aussage "}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Warum sollte ich in jedem Fall Klammern um Anweisungen setzen, gerade
wenn diese nur ein Zeile umfasst?

\begin{itemize}
\tightlist
\item
  Was passiert wenn A == false? Es gibt keine Ausgabe mehr. Wenn man
  aber eine Klammer um das innere if setzt, folgt daraus eine gänzlich
  andere Bedeutung. --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{bool}\NormalTok{ A = }\KeywordTok{false}\NormalTok{, B = }\KeywordTok{false}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (A)}
    \CommentTok{//\{}
      \KeywordTok{if}\NormalTok{ (B)}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fall 1"}\NormalTok{);  }\CommentTok{// A & B}
    \CommentTok{//\}}
      \KeywordTok{else}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fall 2"}\NormalTok{);  }\CommentTok{// A & not B}

\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Programm abgeschlossen"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Versuchen Sie nachzuvollziehen, welche Wirkung die Klammern in Zeile 9
und 12 hätten. Wie verändert sich die Logik des Ausdruckes?

\begin{longtable}[]{@{}lll@{}}
\toprule
& Variante mit Klammern & Variante ohne Klammern\tabularnewline
\midrule
\endhead
Ausgabe 1 & \(A \land B\) & \(A \land B\)\tabularnewline
Ausgabe 2 & \(\overline{A}\) & \(A \land\overline{B}\)\tabularnewline
\bottomrule
\end{longtable}

\begin{quote}
\textbf{Merke}: Das setzen der Klammern steigert die Lesbarkeit \ldots{}
nur bei langen \texttt{else\ if} Reihen kann drauf verzichtet werden.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Enter a character: "}\NormalTok{);}
    \DataTypeTok{char}\NormalTok{ ch = (}\DataTypeTok{char}\NormalTok{)Console.}\FunctionTok{Read}\NormalTok{();}
    \KeywordTok{if}\NormalTok{ (Char.}\FunctionTok{IsUpper}\NormalTok{(ch))}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The character is an uppercase letter."}\NormalTok{);}
    \KeywordTok{else} \KeywordTok{if}\NormalTok{ (Char.}\FunctionTok{IsLower}\NormalTok{(ch))}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The character is a lowercase letter."}\NormalTok{);}
    \KeywordTok{else} \KeywordTok{if}\NormalTok{ (Char.}\FunctionTok{IsDigit}\NormalTok{(ch))}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The character is a number."}\NormalTok{);}
    \KeywordTok{else}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The character is not alphanumeric."}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{switch}

Die \texttt{switch}-Anweisung ist eine Mehrfachverzweigung. Sie umfasst
einen Ausdruck und mehrere Anweisungsfolgen, die durch \texttt{case}
eingeleitet werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{enum}\NormalTok{ Color \{ Red, Green, Blue \}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Color c = (Color) (}\KeywordTok{new} \FunctionTok{Random}\NormalTok{()).}\FunctionTok{Next}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{3}\NormalTok{);}
    \KeywordTok{switch}\NormalTok{ (c)}
\NormalTok{    \{}
       \KeywordTok{case}\NormalTok{ Color.}\FunctionTok{Red}\NormalTok{:}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The color is red"}\NormalTok{);}
          \KeywordTok{break}\NormalTok{;}
       \KeywordTok{case}\NormalTok{ Color.}\FunctionTok{Green}\NormalTok{:}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The color is green"}\NormalTok{);}
          \KeywordTok{break}\NormalTok{;}
       \KeywordTok{case}\NormalTok{ Color.}\FunctionTok{Blue}\NormalTok{:}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The color is blue"}\NormalTok{);}
          \KeywordTok{break}\NormalTok{;}
       \KeywordTok{default}\NormalTok{:}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The color is unknown."}\NormalTok{);}
          \KeywordTok{break}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Aufgabe:} Realisieren Sie das Beispiel als als Folge von
\texttt{if\ else} Anweisungen.
\end{quote}

Anders als bei vielen anderen Sprachen erlaubt C\#
\texttt{switch}-Verzweigungen anhand auch von \texttt{string}s
(zusätzlich zu allen Ganzzahl-Typen, bool, char, enums). Interessant ist
die Möglichkeit auf \texttt{case:\ null} zu testen!

Es fehlt hier aber die Möglichkeit sogenannte \emph{Fall Through} durch
das Weglassen von \texttt{break}-Anweisungen zu realisieren.

\textbf{Jeder switch muss mit einem \texttt{break}, \texttt{return},
\texttt{throw}, \texttt{continue} oder \texttt{goto} beendet werden.}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{string}\NormalTok{ day = }\StringTok{"Sonntag"}\NormalTok{;}
    \DataTypeTok{string}\NormalTok{ output;}
    \KeywordTok{switch}\NormalTok{ (day)\{}
      \KeywordTok{case} \StringTok{"Montag"}\NormalTok{: }\KeywordTok{case} \StringTok{"Dienstag"}\NormalTok{:}
      \KeywordTok{case} \StringTok{"Mittwoch"}\NormalTok{: }\KeywordTok{case} \StringTok{"Donnerstag"}\NormalTok{: }\KeywordTok{case} \StringTok{"Freitag"}\NormalTok{:}
\NormalTok{        output = }\StringTok{"Wochentag"}\NormalTok{;}
        \KeywordTok{break}\NormalTok{;}
      \KeywordTok{case} \StringTok{"Samstag"}\NormalTok{: }\KeywordTok{case} \StringTok{"Sonntag"}\NormalTok{:}
\NormalTok{        output = }\StringTok{"Wochenende"}\NormalTok{;}
        \KeywordTok{break}\NormalTok{;}
      \KeywordTok{default}\NormalTok{:}
\NormalTok{        output = }\StringTok{"Kein Wochentag!"}\NormalTok{;}
        \KeywordTok{break}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(output);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Achtung:} Beachten Sie den Unterschied zwischen dem
\texttt{switch}-Ausdruck
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/operators/switch-expression}{Link}
und der \texttt{switch}-Anweisung, die wir hier besprechen.
\end{quote}

Ein weiteres Anwendungsbeispiel ist die Implementierung eines Automaten.
Nehmen wir an, dass wir einen Sequenzdetektor entwerfen wollen, der das
Auftreten des Musters \emph{a\{c\}d} in einem Signalverlauf erkennt! Der
Zustand kann mit \emph{f} verlassen werden.

\begin{verbatim}


                  .- 'a' -. .- 'c' -. .- 'd' -.
            .-.   |       | |       | |       |   .--.
            |  \  |       v |       v |       v  /   |
            |   v.-.      .-.       .-.       .-.    |
          !'a'  ( A )    ( B )     ( C )     ( D )  !'f'
            |   /'-'      '-'      ^'-'\\     '-'^   |
            '--'  ^        |      /     \\     |  \  |
                  |- !'c'--'     '- 'c' -'\    |   '-'
                  |                        \   |
                  |------- !'c' & !'d' -----'  |
                  |                            |
                  .------------- 'f' ----------.                               .
\end{verbatim}

Wir nutzen dafür ein \texttt{enum}, dessen Inhalt mittels
\texttt{switch} ausgewertet und fortgeschrieben wird. Das \texttt{enum}
umfasst die vier Zustände A-D.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{enum}\NormalTok{ states \{A, B, C, D\};}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{string}\NormalTok{ inputs;}
\NormalTok{    states state = states.}\FunctionTok{A}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Geben Sie die Eingabefolge für die State-Machine vor: "}\NormalTok{);}
\NormalTok{    inputs = }\StringTok{"aaabccccf"}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(inputs);}
    \DataTypeTok{bool}\NormalTok{ sequence = }\KeywordTok{false}\NormalTok{;}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{char}\NormalTok{ sign }\KeywordTok{in}\NormalTok{ inputs)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\} -> \{1\} "}\NormalTok{, state, sign);}
      \KeywordTok{switch}\NormalTok{ (state)\{}
        \KeywordTok{case}\NormalTok{ states.}\FunctionTok{A}\NormalTok{:}
          \KeywordTok{if}\NormalTok{ (sign == }\CharTok{'a'}\NormalTok{) state = states.}\FunctionTok{B}\NormalTok{;}
          \KeywordTok{break}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ states.}\FunctionTok{B}\NormalTok{:}
          \KeywordTok{if}\NormalTok{ (sign == }\CharTok{'c'}\NormalTok{) state = states.}\FunctionTok{C}\NormalTok{;}
          \KeywordTok{else}\NormalTok{ state = states.}\FunctionTok{A}\NormalTok{;}
          \KeywordTok{break}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ states.}\FunctionTok{C}\NormalTok{:}
          \KeywordTok{if}\NormalTok{ (sign == }\CharTok{'d'}\NormalTok{) state = states.}\FunctionTok{D}\NormalTok{;}
          \KeywordTok{else} \KeywordTok{if}\NormalTok{ (sign != }\CharTok{'c'}\NormalTok{) state = states.}\FunctionTok{A}\NormalTok{;}
          \KeywordTok{break}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ states.}\FunctionTok{D}\NormalTok{:}
          \KeywordTok{if}\NormalTok{ (sign == }\CharTok{'f'}\NormalTok{) \{}
\NormalTok{            state = states.}\FunctionTok{A}\NormalTok{;}
\NormalTok{            sequence = }\KeywordTok{true}\NormalTok{;}
\NormalTok{          \}}
          \KeywordTok{break}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"-> \{0\}"}\NormalTok{, state);}
      \KeywordTok{if}\NormalTok{ (sequence)}
\NormalTok{      \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Sequenz erkannt!"}\NormalTok{);}
\NormalTok{        sequence = }\KeywordTok{false}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Frage:} Sehen Sie in der Lösung eine gut wartbare
Implementierung?
\end{quote}

C\# 7.0 führt darüber hinaus das \emph{pattern matching} mit switch ein.
Damit werden komplexe Typ und Werte-Prüfungen innerhalb der case
Statements möglich.

Eine beispielhafte Anwendung sei im folgenden Listing dargestellt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{double} \FunctionTok{ComputeArea_Version}\NormalTok{(}\DataTypeTok{object}\NormalTok{ shape)}
\NormalTok{\{}
    \KeywordTok{switch}\NormalTok{ (shape)}
\NormalTok{    \{}
        \KeywordTok{case}\NormalTok{ Square s when s.}\FunctionTok{Side}\NormalTok{ == }\DecValTok{0}\NormalTok{:}
        \KeywordTok{case}\NormalTok{ Circle c when c.}\FunctionTok{Radius}\NormalTok{ == }\DecValTok{0}\NormalTok{:}
        \KeywordTok{case}\NormalTok{ Triangle t when t.}\FunctionTok{Base}\NormalTok{ == }\DecValTok{0}\NormalTok{ || t.}\FunctionTok{Height}\NormalTok{ == }\DecValTok{0}\NormalTok{:}
        \KeywordTok{case}\NormalTok{ Rectangle r when r.}\FunctionTok{Length}\NormalTok{ == }\DecValTok{0}\NormalTok{ || r.}\FunctionTok{Height}\NormalTok{ == }\DecValTok{0}\NormalTok{:}
            \KeywordTok{return} \DecValTok{0}\NormalTok{;}

        \KeywordTok{case}\NormalTok{ Square s:}
            \KeywordTok{return}\NormalTok{ s.}\FunctionTok{Side}\NormalTok{ * s.}\FunctionTok{Side}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ Circle c:}
            \KeywordTok{return}\NormalTok{ c.}\FunctionTok{Radius}\NormalTok{ * c.}\FunctionTok{Radius}\NormalTok{ * Math.}\FunctionTok{PI}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ Triangle t:}
            \KeywordTok{return}\NormalTok{ t.}\FunctionTok{Base}\NormalTok{ * t.}\FunctionTok{Height}\NormalTok{ / }\DecValTok{2}\NormalTok{;}
        \KeywordTok{case}\NormalTok{ Rectangle r:}
            \KeywordTok{return}\NormalTok{ r.}\FunctionTok{Length}\NormalTok{ * r.}\FunctionTok{Height}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Codebeispiel aus \protect\hyperlink{11}{MSDoku}

\begin{quote}
\textbf{Achtung}: C\# 8.0 erweitert das Spektrum hier noch einmal mit
einen \texttt{is} Keyword, dass die Lesbarkeit und Eindeutigkeit erhöht.
Zudem wird \texttt{switch} mit der \emph{fat arrow} Syntax erweitert und
kann unmittelbar Werte zurückgeben.
\end{quote}

\hypertarget{schleifen}{%
\subsection{Schleifen}\label{schleifen}}

Eine Schleife wiederholt einen Anweisungs-Block -- den sogenannten
Schleifenrumpf oder Schleifenkörper --, solange die Schleifenbedingung
als Laufbedingung gültig bleibt bzw. als Abbruchbedingung nicht
eintritt. Schleifen, deren Schleifenbedingung immer zur Fortsetzung
führt oder die keine Schleifenbedingung haben, sind Endlosschleifen.

\textbf{Zählschleife - for}

\begin{verbatim}
for (initializer; condition; iterator)
    body
\end{verbatim}

Üblich sind für alle drei Komponenten einzelne Anweisungen. Das erhöht
die Lesbarkeit, gleichzeitig können aber auch komplexere Anweisungen
integriert werden.

\begin{itemize}
\tightlist
\item
  Hinweis, dass Dekrementieren und Inkrementieren durch beliebige andere
  Funktionen ersetzt werden können. --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{, j = }\DecValTok{10}\NormalTok{;}
\NormalTok{         i<}\DecValTok{10}\NormalTok{ && j>}\DecValTok{5}\NormalTok{;}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Start: i=\{0\}, j=\{1\}"}\NormalTok{, i, j), i++, j--)}
\NormalTok{      \{}
          \CommentTok{//empty}
\NormalTok{      \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Lassen Sie uns zwei ineinander verschachtelte Schleifen nutzen, um eine
\([m\times n]\) Matrix mit zufälligen Werten zu befüllen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Random rnd = }\KeywordTok{new} \FunctionTok{Random}\NormalTok{();}
    \DataTypeTok{int}\NormalTok{[,] matrix = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[}\DecValTok{3}\NormalTok{,}\DecValTok{5}\NormalTok{];}
    \KeywordTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{;i<}\DecValTok{3}\NormalTok{;i++)}
\NormalTok{    \{}
        \KeywordTok{for}\NormalTok{(}\DataTypeTok{int}\NormalTok{ j=}\DecValTok{0}\NormalTok{;j<}\DecValTok{5}\NormalTok{;j++)}
\NormalTok{        \{}
\NormalTok{            matrix[i, j]= rnd.}\FunctionTok{Next}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\NormalTok{            Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0,3\}"}\NormalTok{, matrix[i,j]);}
            \KeywordTok{if}\NormalTok{ (j == }\DecValTok{4}\NormalTok{) Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{        \}}
\NormalTok{     \}}
     \CommentTok{//Console.WriteLine($"\{matrix.GetLength(0)\}, \{matrix.GetLength(1)\}");}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Kopf- Fußgesteuerte schleife - while/do while}

Eine \texttt{while}-Schleife führt eine Anweisung oder einen
Anweisungsblock so lange aus, wie ein angegebener boolescher Ausdruck
gültig ist. Da der Ausdruck vor jeder Ausführung der Schleife
ausgewertet wird, wird eine while-Schleife entweder nie oder mehrmals
ausgeführt. Dies unterscheidet sich von der do-Schleife, die ein oder
mehrmals ausgeführt wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ counter = }\DecValTok{0}\NormalTok{;}
    \KeywordTok{while}\NormalTok{ (counter < }\DecValTok{5}\NormalTok{)  }\CommentTok{// "Kopfgesteuert"}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"While counter! The counter is \{counter\}"}\NormalTok{);}
\NormalTok{        counter++;}
\NormalTok{    \}}

    \CommentTok{//counter = 0;}
    \KeywordTok{do}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"Do while counter! The counter is \{counter\}"}\NormalTok{);}
\NormalTok{        counter++;}
\NormalTok{    \} }\KeywordTok{while}\NormalTok{ (counter < }\DecValTok{5}\NormalTok{);  }\CommentTok{// "Fußgesteuert"}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Iteration - foreach}

Als alternative Möglichkeit zum Durchlaufen von Containern, die
\texttt{IEnumerable} implementieren bietet sich die Iteration mit
\texttt{foreach} an. Dabei werden alle Elemente nacheinander aufgerufen,
ohne dass eine Laufvariable nötig ist.

\begin{itemize}
\tightlist
\item
  foreach (char in ``TU Bergakademie'') --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ [] array = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [] \{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{\};}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ entry }\KeywordTok{in}\NormalTok{ array)\{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\} "}\NormalTok{, entry);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{spruxfcnge}{%
\subsection{Sprünge}\label{spruxfcnge}}

Während \texttt{label} bestimmte Positionen im Code adressiert, lassen
sich mit \texttt{break} Schleifen beenden, dient \texttt{continue} der
Unterbrechung des aktuellen Blockes.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
Sprunganweisung\strut
\end{minipage} & \begin{minipage}[b]{0.80\columnwidth}\raggedright
Wirkung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
\texttt{break}\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
beendet die Ausführung der nächsten einschließenden Schleife oder
\texttt{switch}-Anweisung\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
\texttt{continue}\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
realisiert einen Sprung in die nächste Iteration der einschließenden
Schleife\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
\texttt{goto\ \textless{}label\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
Sprung an eine Stelle im Code, er durch das Label markiert ist\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
\texttt{return}\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
beendet die Ausführung der Methode, in der sie angezeigt wird und gibt
den optional nachfolgenden Wert zurücksetzen\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ dummy = }\DecValTok{0}\NormalTok{;}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ y = }\DecValTok{0}\NormalTok{; y < }\DecValTok{10}\NormalTok{; y++)}
\NormalTok{    \{}
      \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ x = }\DecValTok{0}\NormalTok{; x < }\DecValTok{10}\NormalTok{; x++)}
\NormalTok{      \{}
        \KeywordTok{if}\NormalTok{ (x == }\DecValTok{5}\NormalTok{ && y == }\DecValTok{5}\NormalTok{)}
\NormalTok{        \{}
          \KeywordTok{goto}\NormalTok{ Outer;}
\NormalTok{        \}}
\NormalTok{      \}}
\NormalTok{      dummy++;}
\NormalTok{    \}}
\NormalTok{    Outer:}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(dummy);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Vgl. Links zur Diskussion um goto auf
https://de.wikipedia.org/wiki/Sprunganweisung

\hypertarget{funktionen-in-c}{%
\section{Funktionen in C}\label{funktionen-in-c}}

Im Grunde ist die separate von Operationen, ohne die Einbettung in
entsprechende Klassen nur beschränkt zielführend. In C\# können
Funktionen und Prozeduren nur als Methoden innerhalb von Klassen
angelegt werden. Allerdings lassen sich insbesondere die Konzepte der
Parameterübergaben auch ohne dass zuvor die OO-Konzepte besprochen
wurden, erläutern.

C\# kennt \emph{benannte} und \emph{anonyme} Methoden, in diesem
Abschnitt wird nur auf die benannten Methoden eingegangen, letztgenannte
folgen zu einem späteren Zeitpunkt. Prozeduren sind Funktionen ohne
Rückgabewert, sie werden entsprechend als \texttt{void} deklariert.

\begin{itemize}
\tightlist
\item
  Bedeutung von void static
\item
  static void Calc(float p) Überladen von Funktionen --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p)               }\CommentTok{// Funktions / Methodendefinition}
\NormalTok{  \{}
\NormalTok{    p = p + }\DecValTok{1}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(p);}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \FunctionTok{Calc}\NormalTok{(5f);                           }\CommentTok{// Funktions / Methodenaufruf}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{verkuxfcrzte-darstellung}{%
\subsection{Verkürzte Darstellung}\label{verkuxfcrzte-darstellung}}

Methoden können seit C\#6 in Kurzform in einer einzigen Zeile angegeben
werden (\emph{Expression-bodied function members}). Dafür nutzt C\# die
Syntax von Lambda Ausdrücken, die für anonyme Funktionen verwendet
werden. Dem \texttt{=\textgreater{}} entsprechend wird von der \emph{Fat
Arrow Syntax} gesprochen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{string} \FunctionTok{Combine}\NormalTok{(}\DataTypeTok{string}\NormalTok{ fname, }\DataTypeTok{string}\NormalTok{ lname) => $}\StringTok{"\{fname.Trim()\} \{lname.Trim()\}"}\NormalTok{;}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{// Nutzereingaben mit Leerzeichen}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{Combine}\NormalTok{(}\StringTok{"      Sebastian"}\NormalTok{, }\StringTok{"Zug     "}\NormalTok{));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die oben genannte Funktion, die die Kundendaten von Lehrzeichen befreit,
ist also äquivalent zur Darstellung von:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{string} \FunctionTok{CombineNames}\NormalTok{(}\DataTypeTok{string}\NormalTok{ fname, }\DataTypeTok{string}\NormalTok{ lname)}
\NormalTok{\{}
\NormalTok{   return$}\StringTok{"\{fname.Trim()\} \{lname.Trim()\}"}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Damit lassen sich einfache Funktionen sehr kompakt darstellen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \CommentTok{// Prozedur}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p)  => Console.}\FunctionTok{WriteLine}\NormalTok{(p);}
  \CommentTok{// Funktion}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Increment}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p)    => p+}\DecValTok{1}\NormalTok{;}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{6}\NormalTok{, result;}
\NormalTok{    result = }\FunctionTok{Increment}\NormalTok{(p);}
    \FunctionTok{print}\NormalTok{(result);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{uxfcbergeben-von-parametern}{%
\subsection{Übergeben von
Parametern}\label{uxfcbergeben-von-parametern}}

Ohne weitere Refrenzparameter werden Variablen an Funktionen bei

\begin{itemize}
\tightlist
\item
  Wertetypen (Basistypen, Enumerationen, structs, Tupel) mittels
  \emph{pass-by-value}
\item
  Referenztypen (Klassen, Interfaces, Arrays, Delegates) mittels
  \emph{pass-by-reference}
\end{itemize}

an eine Funktion übergeben.

Ersetzen Sie die integer Variable p durch ein Array der Größe 1 und
beobachten Sie das veränderte Ergebnis. Nutzen Sie das Schlüsselwort ref
um eine datentypunabhängige pass-by-reference Übergabe zu realisieren.
--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p)}
\NormalTok{  \{}
\NormalTok{    p = p + }\DecValTok{1}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Innerhalb von Calc \{0\}"}\NormalTok{, p);}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{6}\NormalTok{;                   }\CommentTok{// Wertedatentyp}
    \CommentTok{//int [] p = new int [] \{6\};   // Referenzdatentyp}
    \FunctionTok{Calc}\NormalTok{(p);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Innerhalb von Main \{0\}"}\NormalTok{, p);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Merke:} Die Namesgleichheit der Variablennamen in der Funktion
und der \texttt{Main} ist irrelevant.
\end{quote}

Welche Lösungen sind möglich den Zugriff einer Funktion auf eine
übergebene Variable generell sicherzustellen?

\textbf{Ansatz 0 - Globale Variablen}

\ldots{} sind in C\# als isoliertes Konzept nicht implementiert, können
aber als statische Klassen realisiert werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{static} \KeywordTok{class}\NormalTok{ Counter}
\NormalTok{\{}
   \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ globalCounter = }\DecValTok{0}\NormalTok{;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{IncrementsCounter}\NormalTok{()\{}
\NormalTok{     Counter.}\FunctionTok{globalCounter}\NormalTok{++;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Counter.}\FunctionTok{globalCounter}\NormalTok{);}
    \FunctionTok{IncrementsCounter}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Counter.}\FunctionTok{globalCounter}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Ansatz 1 - Rückgabe des modifizierten Wertes}

Wir benutzen \texttt{return} um einen Wert aus der Funktion
zurückzugeben. Allerdings kann dies nur ein Wert sein. Der Datentyp muss
natürlich mit dem der Deklaration übereinstimmen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Calc}\NormalTok{( }\DataTypeTok{int}\NormalTok{ input)}
\NormalTok{  \{}
    \CommentTok{// operationen über P}
    \DataTypeTok{int}\NormalTok{ output = }\DecValTok{5}\NormalTok{ * input;}
    \KeywordTok{return}\NormalTok{ output;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{5}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ a = }\FunctionTok{Calc}\NormalTok{(p);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(a);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Ansatz 2 - Übergabe als Referenz}

Bei der Angabe des \texttt{ref}-Attributes wird statt der Variablen in
jedem Fall die Adresse übergeben. Es ist aber lediglich ein Attribut der
Parameterübergabe und kann isoliert nicht genutzt werden, um die Adresse
einer Variablen zu bestimmen (vgl C: \texttt{int\ a=5;\ int\ *b=\&a}).

Vorteil: auf beliebig viele Parameter ausweisbar, keine Synchronisation
der Variablennamen zwischen Übergabeparameter und Rückgabewert
notwendig.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calc}\NormalTok{(}\KeywordTok{ref} \DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{    x = x + }\DecValTok{1}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Innerhalb von Calc \{0\}"}\NormalTok{, x);}
\NormalTok{  \}}


  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{1}\NormalTok{;}
    \FunctionTok{Calc}\NormalTok{(}\KeywordTok{ref}\NormalTok{ p);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Innerhalb von Main \{0\}"}\NormalTok{, p);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\texttt{ref} kann auch auf Referenzdatentypen angewendet werden. Dort
wirkt es sich nur dann aus, wenn an den betreffenden Parameter
zugewiesen wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Test1}\NormalTok{(}\DataTypeTok{int}\NormalTok{ []  w)}
\NormalTok{  \{}
\NormalTok{    w[}\DecValTok{0}\NormalTok{] = }\DecValTok{22}\NormalTok{;}
\NormalTok{    w = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [] \{}\DecValTok{50}\NormalTok{,}\DecValTok{60}\NormalTok{,}\DecValTok{70}\NormalTok{\};}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Test2}\NormalTok{(}\KeywordTok{ref} \DataTypeTok{int}\NormalTok{ [] w)}
\NormalTok{  \{}
\NormalTok{    w[}\DecValTok{0}\NormalTok{] = }\DecValTok{22}\NormalTok{;}
\NormalTok{    w = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [] \{}\DecValTok{50}\NormalTok{,}\DecValTok{60}\NormalTok{,}\DecValTok{70}\NormalTok{\};}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{//Test1:}
    \DataTypeTok{int}\NormalTok{ [] array = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [] \{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{\};}
    \FunctionTok{Test1}\NormalTok{(array);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Test1() without ref: array[0] = \{0\}"}\NormalTok{, array[}\DecValTok{0}\NormalTok{]);}
    \CommentTok{//Test2:}
\NormalTok{    array = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [] \{}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{7}\NormalTok{\};}
    \FunctionTok{Test2}\NormalTok{(}\KeywordTok{ref}\NormalTok{ array);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Test2() with ref   : array[0] = \{0\}"}\NormalTok{, array[}\DecValTok{0}\NormalTok{]);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Nur der Vollständigkeit halber sei erwähnt, dass Sie auch unter C\# die
Pointer-Direktiven wie unter C oder C++ verwenden können. Allerdings
müssen Sie Ihre Methoden dann explizit als \texttt{unsafe} deklarieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \KeywordTok{unsafe} \DataTypeTok{void} \FunctionTok{MIncrement}\NormalTok{(}\DataTypeTok{int}\NormalTok{* x)}
\NormalTok{  \{}
\NormalTok{    *x = *x + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{unsafe} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ i = }\DecValTok{42}\NormalTok{;}
    \FunctionTok{MIncrement}\NormalTok{(&i);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(i);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Ansatz 3 - Übergabe als out-Referenz}

\texttt{out} erlaubt die Übernahme von Rückgabewerten aus der
aufgerufenen Methode.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p, }\KeywordTok{out} \DataTypeTok{int}\NormalTok{ output)}
\NormalTok{  \{}
\NormalTok{    output = p + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{6}\NormalTok{, r;}
    \FunctionTok{Calc}\NormalTok{(p, }\KeywordTok{out}\NormalTok{ r);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(r);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Interessant wird dieses Konzept durch die in C\# 7.0 eingeführte
Möglichkeit, dass die Deklaration beim Aufruf selbst erfolgt. Im
Zusammenhang mit impliziten Variablendeklarationen kann man dann
typunabhängig Rückgabewerte aus Funktionen entgegennehmen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p, }\KeywordTok{out} \DataTypeTok{int}\NormalTok{ output)}
\NormalTok{  \{}
\NormalTok{    output = p + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ p = }\DecValTok{6}\NormalTok{;}
    \FunctionTok{Calc}\NormalTok{(p, }\KeywordTok{out} \DataTypeTok{int}\NormalTok{ r);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(r);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net5.0</TargetFramework>
  </PropertyGroup>
</Project>
\end{verbatim}

Zudem sollte für eine sehr umfangreiches Set von Rückgabewerten geprüft
werden, ob diese wirklich alle benötig werden. Mit dem \emph{discard}
Platzhalter \texttt{out\ \_} werden unnötige Deklarationen eingespart.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Defintion}
\KeywordTok{static} \DataTypeTok{void} \FunctionTok{SuperComplexMethod}\NormalTok{(}\KeywordTok{out} \DataTypeTok{string}\NormalTok{ result,}
                               \KeywordTok{out} \DataTypeTok{int}\NormalTok{ countA,}
                               \KeywordTok{out} \DataTypeTok{int}\NormalTok{ countB)}
\NormalTok{\{}
  \CommentTok{// super complex}
\NormalTok{\}}

\CommentTok{// Aufruf der Methode}
\FunctionTok{SuperComplexMethod}\NormalTok{(}\KeywordTok{out}\NormalTok{ _, }\KeywordTok{out}\NormalTok{ _, }\KeywordTok{out} \DataTypeTok{int}\NormalTok{ count);}
\end{Highlighting}
\end{Shaded}

\hypertarget{parameterlisten}{%
\subsection{Parameterlisten}\label{parameterlisten}}

C\# erlaubt es Methoden zu definieren, die eine variable Zahl von
Parametern haben. Dabei wird der letzte Parameter als Array deklariert,
so dass die Informationen dann systematisch zu evaluieren sind. Dafür
wird der \texttt{params} Modifikator eingefügt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(}\KeywordTok{out} \DataTypeTok{int}\NormalTok{ sum, }\KeywordTok{params} \DataTypeTok{int}\NormalTok{ [] list)}
\NormalTok{  \{}
\NormalTok{    sum = }\DecValTok{0}\NormalTok{;}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i }\KeywordTok{in}\NormalTok{ list) sum+=i;}
\NormalTok{  \}}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ sum = }\DecValTok{0}\NormalTok{;}
    \FunctionTok{Add}\NormalTok{(}\KeywordTok{out}\NormalTok{ sum, }\DecValTok{3}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{5}\NormalTok{ , }\DecValTok{6}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(sum);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Letztendlich wird damit eine Funktionalität realisiert, wie sie für
\texttt{Main(string{[}{]}\ args)} obligatorisch ist.

\hypertarget{benannte-und-optionale-argumente}{%
\subsection{Benannte und optionale
Argumente}\label{benannte-und-optionale-argumente}}

Funktionsdeklarationen können mit Default-Werten spezifiziert werden.
Dadurch wird auf der einen Seite Flexibilität über ein breites Interface
garantiert, auf der anderen aber lästige Tipparbeit vermieden. Der Code
bleibt damit übersichtlich.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \DataTypeTok{void} \FunctionTok{Sort}\NormalTok{(}\DataTypeTok{string}\NormalTok{ [] s, }\DataTypeTok{int}\NormalTok{ from, }\DataTypeTok{int}\NormalTok{ to,}
                 \DataTypeTok{bool}\NormalTok{ ascending, }\DataTypeTok{bool}\NormalTok{ ignoreCases)\{\}}

\KeywordTok{static} \DataTypeTok{void} \FunctionTok{Sort}\NormalTok{(}\DataTypeTok{string}\NormalTok{ [] s,}
                 \DataTypeTok{int}\NormalTok{ from = }\DecValTok{0}\NormalTok{,}
                 \DataTypeTok{int}\NormalTok{ to = }\DecValTok{-1}\NormalTok{,}
                 \DataTypeTok{bool}\NormalTok{ ascending = }\KeywordTok{true}\NormalTok{,}
                 \DataTypeTok{bool}\NormalTok{ ignoreCases= }\KeywordTok{false}\NormalTok{)\{\}}
\end{Highlighting}
\end{Shaded}

Die \emph{default}-Werte müssen aber der Reihenfolge nach
``abgearbeitet'' werden. Eine partielle Auswahl bestimmter Werte ist
nicht möglich.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{string}\NormalTok{ [] s = \{'Rotkäpchen', 'Hänsel', 'Gretel', 'Hexe'\};}
\CommentTok{//Aufruf     // implizit}
\FunctionTok{Sort}\NormalTok{(s);     }\CommentTok{// from=0, to=-1, ascending = true, ignoreCases= false}
\FunctionTok{Sort}\NormalTok{(s, }\DecValTok{3}\NormalTok{);  }\CommentTok{// to=-1, ascending = true, ignoreCases= false}
\end{Highlighting}
\end{Shaded}

Darüber hinaus lässt sich die Reihenfolge der Parameter aber auch
auflösen. Der Variablenname wird dann explizit angegeben
\texttt{variablenname:Wert,}.

\begin{verbatim}
      PrintDate(1, year:2019, month:12);
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{PrintDate}\NormalTok{(}\DataTypeTok{int}\NormalTok{ day=}\DecValTok{1111}\NormalTok{, }\DataTypeTok{int}\NormalTok{ month=}\DecValTok{2222}\NormalTok{, }\DataTypeTok{int}\NormalTok{ year=}\DecValTok{3333}\NormalTok{ )\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Day \{0\} Month \{1\} Year \{2\}"}\NormalTok{, day, month, year);}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \FunctionTok{PrintDate}\NormalTok{(year:}\DecValTok{2019}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{uxfcberladen-von-funktionen}{%
\subsection{Überladen von
Funktionen}\label{uxfcberladen-von-funktionen}}

Innerhalb der Konzepte von C\# ist es explizit vorgesehen, dass Methoden
gleichen Namens auftreten, wenn diese sich in ihren Parametern
unterscheiden:

\begin{itemize}
\tightlist
\item
  Anzahl der Parameter
\item
  Parametertypen
\item
  Paramterattribute (ref, out)
\end{itemize}

Ein bereits mehrfach genutztes Beispiel dafür ist die
\texttt{System.Write}-Methode, die unabhängig vom Typ der übergebenen
Variable eine entsprechende Ausgabe realisiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)\{}
    \KeywordTok{return}\NormalTok{ a/b;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{float} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{float}\NormalTok{ a, }\DataTypeTok{float}\NormalTok{ b)\{}
    \KeywordTok{return}\NormalTok{ a/b;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ a = }\DecValTok{5}\NormalTok{, b= }\DecValTok{2}\NormalTok{;}
    \DataTypeTok{float}\NormalTok{ c =}\FloatTok{5.0f}\NormalTok{, d=}\FloatTok{2.0f}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{Calc}\NormalTok{(a, b));}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{Calc}\NormalTok{(c, d));    }
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-5}{%
\section{Aufgaben}\label{aufgaben-5}}

\begin{itemize}
\tightlist
\item
  {[} {]} Wenden Sie die Möglichkeit der Strukturierung des Codes in
  Funktionen auf die Aufgabe der letzten Vorlesung an. Integrieren Sie
  zum Beispiel eine Funktion, die den Algorithmus erkennt und eine
  andere, die die Operanden einliest.
\end{itemize}

\textbf{Bemühen Sie sich für die Übungsaufgaben Lösungen vor der
Veranstaltung zu realisieren, um dort über Varianten möglicher Lösungen
zu sprechen!}

\hypertarget{oop-motivation}{%
\chapter{OOP Motivation}\label{oop-motivation}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Einführung\ der\ Konzepte\ OOP\ am\ Beispiel\ von\ Structs}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/07_OOPGrundlagenI.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{structs}{%
\section{Structs}\label{structs}}

Ein struct-Typ ist ein ein Werttyp, der in der Regel verwendet wird, um
eine Gruppe verwandter Variablen zusammenzufassen. Beispiele dafür
können sein:

\begin{itemize}
\tightlist
\item
  kartesische Koordinaten (x, y, z)
\item
  Merkmale eines Produktes (Größe, Name, Preis)
\item
  Charakteristik einer Datei (Speicherort, Name, Größe,
  Rechteinformationen)
\end{itemize}

Ausgangspunkt für die weiteren Überlegungen ist die Konfiguration von
\texttt{structs} in C.

\begin{quote}
Machen Sie sich, wenn Ihnen hier die Grundidee noch unklar ist mit den
\texttt{structs} anhand weiterer Materialien vertraut.
\end{quote}

!?\href{https://www.youtube.com/watch?v=lxDFeuCln3Q}{Einführung in
Structs}

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{#include }\ImportTok{<stdio.h>}
\PreprocessorTok{#include }\ImportTok{<stdlib.h>}

\KeywordTok{typedef} \KeywordTok{struct}\NormalTok{ RectangleStructure\{}
    \DataTypeTok{double}\NormalTok{ length;}
    \DataTypeTok{double}\NormalTok{ width;}
    \DataTypeTok{double}\NormalTok{ area;}
\NormalTok{\} Rectangle;}

\DataTypeTok{int}\NormalTok{ main(}\DataTypeTok{int}\NormalTok{ argc, }\DataTypeTok{char} \DataTypeTok{const}\NormalTok{ *argv[])}
\NormalTok{\{}
\NormalTok{    Rectangle rect1, rect2, rect3;}
    \CommentTok{// Initialisierung:}
\NormalTok{    rect1.length = }\FloatTok{2.5}\NormalTok{; rect1.width = }\DecValTok{5}\NormalTok{;}
\NormalTok{    rect2.length = }\DecValTok{4}\NormalTok{; rect2.width = }\DecValTok{8}\NormalTok{;}
\NormalTok{    rect3.length = }\FloatTok{1.5}\NormalTok{; rect3.width = }\FloatTok{2.1}\NormalTok{;}
    \CommentTok{// Berechnung:}
\NormalTok{    rect1.area = rect1.length * rect1.width;}
\NormalTok{    rect2.area = rect2.length * rect2.width;}
\NormalTok{    rect3.area = rect3.length * rect3.width;}
    \CommentTok{// Ausgabe:}
\NormalTok{    printf(}\StringTok{"Rectangle 1 has an area of %5.1f}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{,rect1.area);}
\NormalTok{    printf(}\StringTok{"Rectangle 2 has an area of %5.1f}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{,rect2.area);}
\NormalTok{    printf(}\StringTok{"Rectangle 3 has an area of %5.1f}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{,rect3.area);}
    \ControlFlowTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Wir können also Daten unterschiedlichen Typs
situationsspezifisch zusammenfassen \ldots{} Was fehlt uns?}
\end{quote}

Richtig, ein Set zugehöriger Funktionen!

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{#include }\ImportTok{<stdio.h>}
\PreprocessorTok{#include }\ImportTok{<stdlib.h>}

\KeywordTok{typedef} \KeywordTok{struct}\NormalTok{ RectangleStructure\{}
    \DataTypeTok{double}\NormalTok{ length;}
    \DataTypeTok{double}\NormalTok{ width;}
    \DataTypeTok{double}\NormalTok{ area;}
\NormalTok{\} Rectangle;}

\DataTypeTok{void}\NormalTok{ initializeRectangle(Rectangle *actualRect, }\DataTypeTok{double}\NormalTok{ length,}
                         \DataTypeTok{double}\NormalTok{ width)\{}
\NormalTok{ actualRect->length = length;}
\NormalTok{ actualRect->width = width;}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ computeArea(Rectangle *actualRect)\{}
\NormalTok{ actualRect->area = actualRect->length * actualRect->width;}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ printRectangleArea(Rectangle *actualRect)\{}
\NormalTok{ printf(}\StringTok{"The Rectangle has an area of %f}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{,actualRect->area);}
\NormalTok{\}}

\DataTypeTok{int}\NormalTok{ main(}\DataTypeTok{int}\NormalTok{ argc, }\DataTypeTok{char} \DataTypeTok{const}\NormalTok{ *argv[])}
\NormalTok{\{}
\NormalTok{    Rectangle rect1;}
    \CommentTok{// Initialisierung:}
\NormalTok{    initializeRectangle(&rect1, }\DecValTok{30}\NormalTok{, }\DecValTok{40}\NormalTok{);}
\NormalTok{    computeArea(&rect1);}
\NormalTok{    printRectangleArea(&rect1);}
    \ControlFlowTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

C sieht keine Möglichkeit vor Funktion und Daten ``dichter''
zusammenzubringen, wenn man von Funktionspointern im \texttt{struct}
absieht.

\hypertarget{structs-in-c}{%
\subsection{Structs in C}\label{structs-in-c}}

\begin{quote}
Wir fokussieren uns zunächst auf \texttt{structs} und übertragen das
dabei gewonnene Verständnis dann auf die Klassen. Dabei gilt es einige
Unterschiede zu beachten!
\end{quote}

Und in C\#? Die Sprache erweitert das Konzept in Richtung der Konzepte
der objektorientierten Programmierung und integriert Operationen über
den Daten in das \texttt{struct}-Konzept. Dabei können sie folgende
Elemente umfassen:

\begin{itemize}
\tightlist
\item
  Felder und Konstanten
\item
  Methoden
\item
  Konstruktoren und Destruktoren
\item
  Eigenschaften(Properties)
\item
  Indexer
\item
  Events
\item
  überladene Operatoren
\item
  geschachtelte Typen
\end{itemize}

Konzentrieren wir im ersten Beispiel auf die Felder und die Methoden.
Wie sieht eine entsprechende Definition des Bauplanes aller Instanzen
von \texttt{Animal} aus?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;               }\CommentTok{// Felder / Konstanten}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;              }\CommentTok{//}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{         }\CommentTok{// Methode}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{name\} makes \{sound\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\} }\CommentTok{// <- Keine Semikolon liebe C++ Programmierer!}
\end{Highlighting}
\end{Shaded}

Sowohl die ganze Struktur als auch die einzelnen Felder sind mit
entsprechenden Sichtbarkeitsattributen versehen. Hier wurde explizit
\texttt{public} vorgesehen, damit ist Animal aber auch alle Elemente
uneingeschränkt ``sichbar''. In der Regel ist das aber nicht gewünscht.

Wie legen wir nun ein Objekt entsprechend der Spezifikation an? Wir
haben mit dem \texttt{struct} einen neuen Typ definiert. Der Aufruf kann
(!) anhand des Formats
\texttt{\textless{}datentyp\textgreater{}\ Variablenname} erfolgen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;               }\CommentTok{// Felder / Konstanten}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;              }\CommentTok{//}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{         }\CommentTok{// Methode}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{name\} makes \{sound\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty;}
\NormalTok{    kitty.}\FunctionTok{name}\NormalTok{ = }\StringTok{"Kitty"}\NormalTok{;}
\NormalTok{    kitty.}\FunctionTok{sound}\NormalTok{ = }\StringTok{"Miau"}\NormalTok{;}
\NormalTok{    kitty.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Erstellen Sie eine weiteres Objekt vom Typ \texttt{Animal} und erstellen
Sie eine Kopie von Kitty.
\end{quote}

\hypertarget{herausforderung-this}{%
\subsection{\texorpdfstring{Herausforderung
\texttt{this}}{Herausforderung this}}\label{herausforderung-this}}

Warum nutzen einige Beispiele das Schlüsselwort \texttt{this}? Es wird
verwendet, um auf die aktuelle Instanz der Klasse zu verweisen. Obiges
Beispiel kann also auch wie folgt geschrieben werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{this.name\} makes \{this.sound\}"}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{setName}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty;}
\NormalTok{    kitty.}\FunctionTok{name}\NormalTok{ = }\StringTok{"Kitty"}\NormalTok{;}
\NormalTok{    kitty.}\FunctionTok{sound}\NormalTok{ = }\StringTok{"Miau"}\NormalTok{;}
\NormalTok{    kitty.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{    kitty.}\FunctionTok{setName}\NormalTok{(}\StringTok{"Tom"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Das Verständnis von \texttt{this} macht die grundlegende Idee deutlich.
Das \texttt{struct\ Animal} ist ein genereller Bauplan. Die Instanzen
davon haben ein ``Selbstverständnis'' in Form der \texttt{this}
Referenz.

\hypertarget{konstruktoren}{%
\subsection{Konstruktoren}\label{konstruktoren}}

Nun umfasst unsere Datenstruktur möglicherweise - anders als unser
Beispiel - eine große Zahl von individuellen Variablen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty;}
    \CommentTok{//kitty.name = "Kitty";   // <- fehlende "manuelle" Initalisierung}
    \CommentTok{//kitty.sound = "Miau";}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(kitty.}\FunctionTok{name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Wie sieht unser Speicher nach Zeile 12 aus?

\begin{verbatim}
                    STACK
             +-----------------+
             | ...             |
             +-----------------+ -.
 kitty.name  | undefiniert     |  |
             +-----------------+  | Instanz von Animal
 kitty.sound | undefiniert     |  |
             +-----------------+ -'
             | ...             |
             +-----------------+                                              .
\end{verbatim}

Wie können wir also sicherstellen, dass die Initialisierung vollständig
vorgenommen wurde?

Konstruktoren sind spezielle Methoden für die Initialisierung eines
Objektes. Sie werden einmalig aufgerufen.

Und wie erfolgt der Aufruf des Konstruktors, einer Funktion, die auf
einer Datenstruktur wirkt, die es noch gar nicht gibt? Das Schlüsselwort
\texttt{new} übernimmt diese Aufgabe für uns.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{<Type> <Variablenname> = }\KeywordTok{new}\NormalTok{ <Konstruktorsignatur>;}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"->\{this.name\}<- makes ->\{this.sound\}<-"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal cat = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{();}
\NormalTok{    cat.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Nach dem Aufruf besteht eine mit den Standardwerten der Datentypen
vorinitialisierte Instanz auf dem Stack.

\begin{verbatim}
                    STACK
             +-----------------+
             | ...             |
             +-----------------+ -.
 kitty.name  | ``              |  |
             +-----------------+  | Instanz von Animal
 kitty.sound | ``              |  |
             +-----------------+ -'
             | ...             |
             +-----------------+                                              .
\end{verbatim}

In \texttt{structs} dürfen allerdings (im Unterschied zu Klassen) keine
parameterlosen Methoden sein. Der Compiler erzeugt diese automatisch,
die Methode beschreibt alle Felder mit den datentypspezifischen
Nullwerten.

Der Standardkonstruktor hilft aber nur bei der Vermeidung von
uninitalisierten Werten. In der Regel wollen wir den Feldern aber
konkrete Werte zuordnen.

\begin{verbatim}
   + Deklaration eines parameterlosen Konstruktors
   + Deklaration eines Konstruktors mit einzelnem Parameter
   + Überladen des Konstruktors
\end{verbatim}

--\textgreater{}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"\{this.name\} makes \{this.sound\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal dog = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Roger"}\NormalTok{, }\StringTok{"Wuff"}\NormalTok{);}
\NormalTok{    dog.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\emph{Anmerkung:} Konstruktoren sind Methoden und folglich steht das
gesamte Spektrum der Variabilität bei deren Definition zur Verfügung
(Überladen, vordefinierte Variablen, Parameterlisten, usw.)
\end{quote}

\begin{longtable}[]{@{}ll@{}}
\toprule
Konstruktor & Aufruf\tabularnewline
\midrule
\endhead
Aufruf des (impliziten) Standardkonstruktors &
\texttt{Animal\ kitty\ =\ new\ Animal()}\tabularnewline
\texttt{public\ Animal(name,\ sound)} &
\texttt{Animal\ kitty\ =\ new\ Animal("kitty","Miau")}\tabularnewline
\texttt{public\ Animal(name,\ sound\ =\ "Miau")} &
\texttt{Animal\ kitty\ =\ new\ Animal("kitty")}\tabularnewline
\bottomrule
\end{longtable}

Im Hinblick auf die Verwendung des Schlüsselwortes \texttt{new} und die
Konsequenzen in Bezug auf die Nutzung des Speichers, sei auf den
exzellenten
\href{http://clarkkromenaker.com/post/csharp-structs/}{Beitrag} von
Clark Kromenaker verwiesen.

In Ergänzung sei auch noch auf die kompakte \emph{Fat Arrow} Darstellung
im Zusammenhang mit Konstruktoren, die ja Funktionen wie alle anderen
sind verwiesen. Wenn nur eine Anweisung ausgeführt wird kann dies in
einer Zeile realisiert werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) => }\KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} makes Miau"}\NormalTok{, name);}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal cat = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{);}
\NormalTok{    cat.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

Ein alternatives Vorgehen bietet die sogenannte Object Initialization
Syntax aus C\# 3.0 nutzen. Der Compiler generiert den zugehörigen Code
für die spezifische Initialisierung.

Dies kann zum Beispiel ein Array mit allen Tieren unseres virtuellen
Bauernhofes sein. Wie werden diese dann initialisiert?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} makes \{1\}"}\NormalTok{, name, sound);}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     Animal[] myAnimals = }\KeywordTok{new}\NormalTok{ Animal[]\{}
      \KeywordTok{new}\NormalTok{ Animal\{ name = }\StringTok{"Kitty"}\NormalTok{, sound = }\StringTok{"Miau"}\NormalTok{\},    }\CommentTok{// Object Initialization Syntax}
      \KeywordTok{new}\NormalTok{ Animal\{ name = }\StringTok{"Wally"}\NormalTok{, sound = }\StringTok{"Wuff"}\NormalTok{\},}
      \KeywordTok{new}\NormalTok{ Animal\{ name = }\StringTok{"Berta"}\NormalTok{, sound = }\StringTok{"Muuuh"}\NormalTok{\}}
\NormalTok{    \};}
    \KeywordTok{foreach}\NormalTok{(Animal animal }\KeywordTok{in}\NormalTok{ myAnimals)\{}
\NormalTok{      animal.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{  \}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Aufgabe:} Versuchen Sie das Beispiel um einen Konstruktor und
einen zugehörigen Aufruf für die Initialisierung zu ergänzen!
\end{quote}

\hypertarget{veruxe4nderliche-und-nicht-veruxe4nderliche-felder}{%
\subsection{Veränderliche und nicht veränderliche
Felder}\label{veruxe4nderliche-und-nicht-veruxe4nderliche-felder}}

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Aspekt\strut
\end{minipage} & \begin{minipage}[b]{0.42\columnwidth}\raggedright
\texttt{readonly} Felder\strut
\end{minipage} & \begin{minipage}[b]{0.37\columnwidth}\raggedright
\texttt{const} Felder\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Zweck\strut
\end{minipage} & \begin{minipage}[t]{0.42\columnwidth}\raggedright
\ldots{} wird verwendet, um ein schreibgeschütztes Feld zu
erstellen.\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\ldots{} wird verwendet, um konstante Felder zu erstellen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Typ\strut
\end{minipage} & \begin{minipage}[t]{0.42\columnwidth}\raggedright
\ldots{} ist eine zur Laufzeit definierte Konstante.\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\ldots{} wird verwendet, um eine Konstante zur Kompilierzeit zu
erstellen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Wert\strut
\end{minipage} & \begin{minipage}[t]{0.42\columnwidth}\raggedright
\ldots{} kann nach der Deklaration geändert werden.\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\ldots{} kann nach der Deklaration nicht geändert werden.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Wertzuweisung\strut
\end{minipage} & \begin{minipage}[t]{0.42\columnwidth}\raggedright
\ldots{} werden als Instanzvariable deklariert und im Konstruktor mit
Werten belegt.\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\ldots{} sind zum Zeitpunkt der Deklaration zuzuweisen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Einbettung in Methoden\strut
\end{minipage} & \begin{minipage}[t]{0.42\columnwidth}\raggedright
\ldots{} können nicht innerhalb einer Methode definiert werden.\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\ldots{} können innerhalb einer Methode deklariert werden.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \CommentTok{//public const string name = "Kitty";}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name = }\StringTok{"Kitty"}\NormalTok{;}
  \KeywordTok{public} \KeywordTok{readonly} \DataTypeTok{int}\NormalTok{[] legCount = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[}\DecValTok{1}\NormalTok{];  }\CommentTok{// Referenzdatentyp (etwas konstruiert)}
  \KeywordTok{public} \KeywordTok{readonly} \DataTypeTok{int}\NormalTok{ age;                      }\CommentTok{// Wertdatentyp}
  \CommentTok{//public const long[] hairCount = new int[1]; //geht nicht, da const nicht auf Refernztyp verweisen darf bzw. wenn doch muss es null sein}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ age, }\DataTypeTok{int}\NormalTok{ legs) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{age}\NormalTok{ = age;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{legCount}\NormalTok{[}\DecValTok{0}\NormalTok{]= legs;}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Miau"}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{4}\NormalTok{);}
\NormalTok{    kitty.}\FunctionTok{legCount}\NormalTok{[}\DecValTok{0}\NormalTok{]=}\DecValTok{5}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(kitty.}\FunctionTok{legCount}\NormalTok{[}\DecValTok{0}\NormalTok{]);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Achtung:} \emph{Der readonly-Modifizierer verhindert, dass das
Feld durch eine andere Instanz des Verweistyps ersetzt wird. Der
Modifizierer verhindert jedoch nicht, dass die Instanzdaten des Felds
durch das schreibgeschützte Feld geändert werden.}
\end{quote}

\begin{quote}
\textbf{Achtung:} \emph{Verwendet man \texttt{const} ist dies jedoch
nicht möglich, da eine Konstante nur ein numerischer Typ, ein Boolean,
ein String oder ein Enum sein kann. \texttt{const} kann also nicht auf
einen Referenztyp verwendet werden (außer string -\textgreater{}
\textbf{Ausnahme}) bzw. wenn doch, muss es dann immer \textbf{null}
sein.}
\end{quote}

C\# 9 geht einen Schritt weiter und ermöglicht die pauschale Deklaration
von \texttt{readonly} \texttt{structs}. Damit wird der Entwickler
beauftragt JEDES Feld entsprechen mit \texttt{readonly} zu schützen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{readonly} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ age;}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound, }\DataTypeTok{int}\NormalTok{ age) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{age}\NormalTok{ = age;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{, }\StringTok{"Miau"}\NormalTok{, }\DecValTok{5}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(kitty.}\FunctionTok{sound}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

In der nächsten Vorlesung werden die sogenannten Eigenschaften genauer
untersucht. Diese eröffnen nochmals weitere Möglichkeiten der Kapselung.

\hypertarget{sichtbarkeitsattribute}{%
\subsection{Sichtbarkeitsattribute}\label{sichtbarkeitsattribute}}

Strukturen und Klassen abstrahieren Daten und verbergen konkrete
Realisierungen von Programmteilen. Um zu steuern, welche Elemente eines
Programms aus welchem Kontext heraus sichtbar sind, werden diese mit
Attributen versehen.

\textbf{Sichtbarkeit der Stuktur}

Strukturen, die innerhalb eines \emph{Namespace} (mit anderen Worten,
die nicht in anderen Klassen oder Strukturen geschachtelt sind) direkt
deklariert werden, können entweder \texttt{private}, \texttt{public}
oder \texttt{internal} sein.

\begin{longtable}[]{@{}ll@{}}
\toprule
Bezeichner & Konsequenz\tabularnewline
\midrule
\endhead
\texttt{public} & Keine Einschränkungen für den Zugriff\tabularnewline
\texttt{internal} & Der Zugriff ist auf die aktuelle \emph{Assembly}
beschränkt.\tabularnewline
\texttt{private} & Der Zugriff kann nur aus dem Code der gleichen
Struktur erfolgen.\tabularnewline
\bottomrule
\end{longtable}

Wenn kein Modifizierer angegeben ist, wird standardmäßig
\texttt{internal} verwendet.

\begin{verbatim}

            Program.cs                        Farmland.cs
            +-----------------------+         +-------------------------+
            | class Program{        |    .->  | internal struct Animal{ |
            |   public void Main(){ |    |    |    ...                  |
            |      Animal Kitty;    | ---.    | }                       |
            |      ...              |         |                         |
            |      Farm Bullerbue;  | ----->  | public struct Farm{     |
            |   }                   |         |    ...                  |
            |}                      |         | }                       |
            +-----------------------+         +-------------------------+      .

Schritt 1                                     mcs -target:library Farmland.cs
Schritt 2   mcs -reference:Farmland.dll Program.cs
\end{verbatim}

Das struct ``Animal'' soll in einem anderen Assembly nicht aufrufbar
sein. Wir wollen die Implementierung kapseln und verbergen. Folglich
generiert der entsprechende Aufruf einen Compiler-Fehler. Zugehörige
Dateien sind unter
\href{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/tree/master/code/08_OOP/assemblies_mono}{GitHub}
zu finden.

Variante 1: Compilieren von Farmland und Programm in ein Assembly

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{mcs}\NormalTok{ Program.cs Farmland.cs}
\ExtensionTok{My}\NormalTok{ name ist Kitty.}
\end{Highlighting}
\end{Shaded}

Variante 2: Compilieren von Farmland als externe Bibliothek

\begin{verbatim}
mcs -target:library Farmland.cs
mcs -reference:Farmland.dll Program.cs
Programm.cs(8,13): error CS0122: `Farm.Animal' is inaccessible due to its protection level
Programm.cs(9,26): error CS0841: A local variable `cat' cannot be used before it is declared
\end{verbatim}

\textbf{Sichtbarkeit der Felder und Member einer Stuktur}

Für die Sichtbarkeit auf der Ebene der Felder und Member können für
structs drei Attribute verwendet werden \texttt{private},
\texttt{internal} und \texttt{public}. Standard ist \texttt{private}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{internal} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{private} \DataTypeTok{byte}\NormalTok{ age;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{uint}\NormalTok{ born, }\DataTypeTok{string}\NormalTok{ sound = }\StringTok{"Miau"}\NormalTok{)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
\NormalTok{    age = (}\DataTypeTok{byte}\NormalTok{) (}\DecValTok{2019}\NormalTok{ - born);}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} (\{1\} years old) makes \{2\}"}\NormalTok{, name, age, sound);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal Wally = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{ (}\StringTok{"Wally"}\NormalTok{, }\DecValTok{2014}\NormalTok{, }\StringTok{"Wau"}\NormalTok{);}
\NormalTok{    Wally.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{    Wally.}\FunctionTok{age}\NormalTok{ = }\DecValTok{5}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{vergleich-mit-klassen}{%
\section{Vergleich mit Klassen}\label{vergleich-mit-klassen}}

\begin{verbatim}
                                     C# Typen
                                         |
                       .------------------------------------.
                       |                                    |
                   Werttypen                           Referenztypen
                       |                                    |
         .-------+-----+---+--------.        .-------+---------+-------.
         |       |         |        |        |       |         |       |
     Vordefi-  Enumer-  Structs   Tupel   Klassen  Inter    Arrays  Delegates
 nierte Typen  ation                     (String) -faces
         |
         |      ...............................................................
         |                           Benutzerdefinierte Typen
         |
         .----+------+-----------+-------------.
         |           |           |             |
     Character    Ganzzahl   Gleitkommazahl   Bool
                     |
             .------+---------.
             |                |
     mit Vorzeichen     vorzeichenlos                                            .
\end{verbatim}

Das vorangegangene Beispiel als Klassenimplementierung:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\CommentTok{//public struct Animal}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{private} \DataTypeTok{byte}\NormalTok{ age;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{uint}\NormalTok{ born, }\DataTypeTok{string}\NormalTok{ sound = }\StringTok{"Miau"}\NormalTok{)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
\NormalTok{    age = (}\DataTypeTok{byte}\NormalTok{) (}\DecValTok{2019}\NormalTok{ - born);}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} (\{1\} years old) makes \{2\}"}\NormalTok{, name, age, sound);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal Wally = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{ (}\StringTok{"Wally"}\NormalTok{, }\DecValTok{2014}\NormalTok{, }\StringTok{"Wau"}\NormalTok{);}
\NormalTok{    Wally.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.51\columnwidth}\raggedright
Structs\strut
\end{minipage} & \begin{minipage}[b]{0.43\columnwidth}\raggedright
Klassen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.51\columnwidth}\raggedright
Werttyp (Variablen enthalten das Objektes)\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
Referenzdatentyp\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
Abgelegt auf dem Stack\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
Gespeichert auf dem Heap\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
Unterstützen keine Vererbung\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
Unterstützen Vererbung\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
können Interfaces implementieren\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
können Interfaces implementieren\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
\texttt{internal} und \texttt{public} als Struct-Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
\texttt{private}, \texttt{internal} und \texttt{public} als
Klassenattribute\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
\texttt{private}, \texttt{internal} und \texttt{public} als Feld und
Member-Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
analog plus 3 weitere Attribute\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.51\columnwidth}\raggedright
keine parameterlosen Konstruktoren deklarierbar\strut
\end{minipage} & \begin{minipage}[t]{0.43\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Welche Konsequenzen hat das zum Beispiel?

\begin{quote}
\textbf{Merke:} Strukturen sind Wertdatentypen!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{  ...}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Human}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{  ...}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty = }\KeywordTok{new} \FunctionTok{Aninmal}\NormalTok{();  }\CommentTok{// <- Referenzvariable}
\NormalTok{    Human farmer = }\KeywordTok{new} \FunctionTok{Farmer}\NormalTok{();   }\CommentTok{// <- Wertvariable}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{beispiel-der-woche}{%
\section{Beispiel der Woche}\label{beispiel-der-woche}}

Im folgenden Beispiel werden Instanzen des Structs ``Animal'' von einem
anderen Struct ``Farm'' genutzt und dort in einer (generischen) Liste
gespeichert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound = }\StringTok{"Miau"}\NormalTok{)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} makes \{1\}"}\NormalTok{, name, sound);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Farm\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ adress;}
  \KeywordTok{public}\NormalTok{ List<Animal> animalList;}

  \KeywordTok{public} \FunctionTok{Farm}\NormalTok{(}\DataTypeTok{string}\NormalTok{ adress) \{}
\NormalTok{    animalList = }\KeywordTok{new}\NormalTok{ List<Animal>();}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{adress}\NormalTok{ = adress;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{AddAnimal}\NormalTok{(Animal newanimal)\{}
\NormalTok{    animalList.}\FunctionTok{Add}\NormalTok{(newanimal);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{PrintAnimals}\NormalTok{()\{}
    \KeywordTok{foreach}\NormalTok{ (Animal pet }\KeywordTok{in}\NormalTok{ animalList)\{}
\NormalTok{      pet.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal Wally = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{ (}\StringTok{"Wally"}\NormalTok{, }\StringTok{"Wau"}\NormalTok{);}
\NormalTok{    Animal Kitty = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{ (}\StringTok{"Kitty"}\NormalTok{, }\StringTok{"Miau"}\NormalTok{);}
\NormalTok{    Farm myFarm = }\KeywordTok{new} \FunctionTok{Farm}\NormalTok{(}\StringTok{"Biobauernhof Freiberg"}\NormalTok{);}
\NormalTok{    myFarm.}\FunctionTok{AddAnimal}\NormalTok{(Wally);}
\NormalTok{    myFarm.}\FunctionTok{AddAnimal}\NormalTok{(Kitty);}
\NormalTok{    myFarm.}\FunctionTok{PrintAnimals}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-6}{%
\section{Aufgaben}\label{aufgaben-6}}

Vollziehen Sie die Überlegungen rund um \texttt{structs} nach! Das ist
Elementar für das weitere Vorgehen.

!?\href{https://www.youtube.com/watch?v=q7aWkjH3UUI}{Konstruktoren}

!?\href{https://www.youtube.com/watch?v=ZqDtPFrUonQ}{Klassen}

Für diejenigen, die bei der Befragung beim letzten mal ``Langweilig''
ausgewählt hatten, eine Anregung für die Verwendung von C\# \ldots{}

!?\href{https://www.youtube.com/watch?v=9tMvzrqBUP8}{C\# und Unity}

\hypertarget{oop-konzepte-i}{%
\chapter{OOP Konzepte I}\label{oop-konzepte-i}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Konzepte\ OOP\ Programmierung\ und\ Umsetzung\ in\ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/08_OOPGrundlagenII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{auf-nachfrage-1}{%
\section{Auf Nachfrage \ldots{}}\label{auf-nachfrage-1}}

\begin{quote}
\textbf{Wann machen \texttt{private} Klassen oder \texttt{structs}
Sinn?}
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{struct}\NormalTok{ Farm\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ adress;}
  \KeywordTok{public}\NormalTok{ List<Animal> animalList;}

  \KeywordTok{public} \FunctionTok{Farm}\NormalTok{(}\DataTypeTok{string}\NormalTok{ adress) \{}
\NormalTok{    animalList = }\KeywordTok{new}\NormalTok{ List<Animal>();}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{adress}\NormalTok{ = adress;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{AddAnimal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound)\{}
\NormalTok{    animalList.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(name, sound));}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{PrintAnimals}\NormalTok{()\{}
    \KeywordTok{foreach}\NormalTok{ (Animal pet }\KeywordTok{in}\NormalTok{ animalList)\{}
\NormalTok{      pet.}\FunctionTok{MakeNoise}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{  \}}

  \KeywordTok{private} \KeywordTok{struct}\NormalTok{ Animal}
\NormalTok{  \{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}

    \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound = }\StringTok{"Miau"}\NormalTok{)\{}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{MakeNoise}\NormalTok{() \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} makes \{1\}"}\NormalTok{, name, sound);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Farm myFarm = }\KeywordTok{new} \FunctionTok{Farm}\NormalTok{(}\StringTok{"Biobauernhof Freiberg"}\NormalTok{);}
\NormalTok{    myFarm.}\FunctionTok{AddAnimal}\NormalTok{(}\StringTok{"Wally"}\NormalTok{, }\StringTok{"Wau"}\NormalTok{);}
\NormalTok{    myFarm.}\FunctionTok{AddAnimal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{, }\StringTok{"Miau"}\NormalTok{);}
\NormalTok{    myFarm.}\FunctionTok{PrintAnimals}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Wie verhält es sich mit mehreren Dateien in einem Ordner und wie
stellt man die Relationen zwischen separaten Assemblies her?}
\end{quote}

\begin{verbatim}
dotnet new sln -o assemblies_dotnet
cd assemblies_dotnet
dotnet new console -o MyApp
dotnet new classlib -o MyClass
dotnet sln add MyApp
dotnet sln add MyClass
cd MyApp
dotnet add reference ../MyClass
\end{verbatim}

Kopieren Sie noch die Dateien aus dem
\href{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/tree/master/code/08_OOP/assemblies_mono}{Mono
Verzeichnis} in die entsprechenden Ordner.

Starten Sie die Kompilierung, in dem Sie \texttt{dotnet\ run} im Ordner
\texttt{MyApp} aufrufen. Was beobachten Sie?

\hypertarget{visionen-der-objektorientierung}{%
\section{Visionen der
Objektorientierung}\label{visionen-der-objektorientierung}}

\begin{quote}
Ein Objekt ist ein Bestandteil eines Programms, der Zustände enthalten
kann. Diese Zustände werden von dem Objekt vor einem Zugriff von außen
versteckt und damit geschützt. Außerdem stellt ein Objekt anderen
Objekten Operationen zur Verfügung. Von außen kann dabei auf das Objekt
ausschließlich zugegriffen werden, indem eine Operation auf dem Objekt
aufgerufen wird. Ein Objekt legt dabei selbst fest, wie es auf den
Aufruf einer Operation reagiert. Die Reaktion kann in Änderungen des
eigenen Zustands oder dem Aufruf von Operationen auf weiteren Objekte
bestehen.
\end{quote}

\begin{quote}
\textbf{Merke} \emph{Ein Objekt ist eine zur Ausführungszeit vorhandene
und für ihre Member Speicher allozierende Instanz, die sich aus der
Spezifikation einer Klasse erschließt.}
\end{quote}

Ideen der OOP: * Objekte der \emph{realen Welt} müssen sich in der
Programmierung widerspiegeln * Es geht nicht um das Manipulieren von
Daten, sondern um Zustandsänderungen von Objekten * Im Zentrum der
objektorientierten Programmierung stehen Objekte, die miteinander
kommunizieren

\begin{quote}
\textbf{Merke} Wir haben zwei Herausforderungen zu meistern -
Modellierung und Realisierung.
\end{quote}

\includegraphics{./img/08_OOP_Csharp/OOPHistory.png}

\textbf{Beispiel - Simulationsumgebung Fußballspiel:}

\begin{itemize}
\tightlist
\item
  1 Objekt vom Typ ``Spielsituation''
\item
  1 Objekt vom Typ ``Ball''
\item
  2 Objekte vom Typ ``Trainer''
\item
  3 Objekte vom Typ ``Schiedsrichter''
\item
  22 Objekte vom Typ ``Fußballspieler''
\end{itemize}

\textbf{Welche Eigenschaften hat jedes Objekt des Typen ``Spieler'',
``Trainer'' bzw. ``Schiedsrichter''?}

\begin{itemize}
\tightlist
\item
  Name, Alter, Geschlecht, Gewicht, Größe
\item
  Position (x, y, z),
\item
  im Spiel, Geschwindigkeit
\item
  Mannschaft, Rolle (Stürmer, Tormann, Verteidiger), Nummer
\item
  physischer Zustand (topfit, ausgepowert, verletzt)
\end{itemize}

Einige der Eigenschaften \ldots{}

\begin{itemize}
\tightlist
\item
  \ldots{} ändern sich im Spielkontext, andere bleiben konstant
\item
  \ldots{} lassen sich durchaus allen Personen zuordnen, anderen nur
  spezifischen Kategorien von Beteiligten.
\end{itemize}

\textbf{Welche Eigenschaften und Methoden (Fähigkeiten) sind für die
Instanzen aller Teilnehmer gleich?}?

\begin{itemize}
\tightlist
\item
  Name, Alter, Geschlecht, Gewicht, Größe
\item
  physischer Zustand (topfit, ausgepowert, verletzt)
\item
  \texttt{ändertPosition()}
\end{itemize}

\textbf{Welche Eigenschaften und Methoden (Fähigkeiten) sind
unterschiedlich?}?

\begin{itemize}
\tightlist
\item
  Rolle in der Mannschaft und Trikotnummer gibt es nur für Spieler
\item
  Mitglied einer Mannschaft bezieht Spieler und Trainer mit ein
\item
  \ldots{}
\end{itemize}

\textbf{Welche Methoden sollten dem Objekt ``Spieler'' erlaubt sein und
wie verändert dies deren Zustand}?

\begin{itemize}
\tightlist
\item
  \texttt{FängtDenBall()} -\textgreater{} Wirkt sich auf den Zustand von
  Ball aus, die Position des Balles ist identisch mit der des Spielers
  \ldots{} und es gibt nur einen Ball!
\item
  \texttt{WirftDenBall()}
\item
  \texttt{Foul(Spieler\ gefoulterSpieler)} -\textgreater{} Wirkt sich
  auf die Fitness von \texttt{gefoulterSpieler} aus
\end{itemize}

Welche Schwachstellen sehen Sie bei unserem Modellierungsansatz / der
Realisierung?

\hypertarget{kapselung}{%
\subsection{Kapselung}\label{kapselung}}

\begin{quote}
Die Verkapselung bezieht sich auf die ``Einhüllung'' von Daten und
Methoden innerhalb einer Struktur (Klasse), die die
Objektimplementierung verbirgt und den unmittelbaren Datenzugriff
außerhalb vorbestimmter Dienste unterbindet.
\end{quote}

Vom Innenleben einer Klasse soll der Verwender -- gemeint sind sowohl
die Algorithmen, die mit der Klasse arbeiten, als auch der
Programmierer, der diese entwickelt -- möglichst wenig wissen müssen
(Geheimnisprinzip). Durch die Kapselung werden nur Angaben über das
„Was`` (Funktionsweise) einer Klasse nach außen sichtbar, nicht aber das
„Wie`` (die interne Darstellung).

Standardidentifier für Daten- und Methodenzugriffe sind dabei:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.09\columnwidth}\raggedright
Bezeichner\strut
\end{minipage} & \begin{minipage}[b]{0.09\columnwidth}\raggedright
UML Kürzel\strut
\end{minipage} & \begin{minipage}[b]{0.73\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.09\columnwidth}\raggedright
public\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
+\strut
\end{minipage} & \begin{minipage}[t]{0.73\columnwidth}\raggedright
Zugreifbar für alle Objekte (auch die anderer Klassen)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
private\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
-\strut
\end{minipage} & \begin{minipage}[t]{0.73\columnwidth}\raggedright
Nur für Objekte der eigenen Klasse zugreifbar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
protected\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\#\strut
\end{minipage} & \begin{minipage}[t]{0.73\columnwidth}\raggedright
Nur für Objekte der eigenen Klasse und von Spezialisierungen derselben
zugreifbar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
internal\strut
\end{minipage} & \begin{minipage}[t]{0.09\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.73\columnwidth}\raggedright
Der Zugriff ist auf die aktuelle Assembly beschränkt\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Vorteile}

\begin{itemize}
\tightlist
\item
  Da die Implementierung einer Klasse anderen Klassen nicht bekannt ist,
  kann ihre Implementierung geändert werden, ohne die Zusammenarbeit mit
  anderen Klassen zu beeinträchtigen.
\item
  Beim Zugriff über eine Zugriffsfunktion spielt es von außen keine
  Rolle, ob diese Funktion komplett im Inneren der Klasse existiert, das
  Ergebnis einer Berechnung ist oder möglicherweise aus anderen Quellen
  (z. B. einer Datei oder Datenbank) stammt.
\item
  Es ergibt sich eine erhöhte Übersichtlichkeit, da nur die öffentliche
  Schnittstelle einer Klasse betrachtet werden muss.
\item
  Deutlich verbesserte Testbarkeit, Stabilität und Änderbarkeit der
  Software bzw. deren Teile (Module).
\end{itemize}

\textbf{Nachteile}

\begin{itemize}
\tightlist
\item
  In Abhängigkeit vom Anwendungsfall Geschwindigkeitseinbußen durch den
  Aufruf von Zugriffsfunktionen (direkter Zugriff auf die Datenelemente
  wäre schneller).
\item
  Zusätzlicher Programmieraufwand für die Erstellung von
  Zugriffsfunktionen.
\end{itemize}

\textbf{Beispiel Fußballsimulation}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Die Position x,y eines jeden Spielers und des Balls sollte nur über
  entsprechende Zugriffsmethoden manipuliert werden.
\item
  Die \texttt{Foul} kann nur aus dem Spieler heraus aufgerufen werden
  :-)
\end{enumerate}

\begin{verbatim}
                                 public struct Position{float x; float y};
+---------------------------+
| Spieler                   |      public class Spieler{ // oder struct !!!
+---------------------------+        enum Rolle {Stürmer, Tormann, Verteidiger};
| - name: string            |          private string Name;                |
| - alter: byte             |          private byte? Alter;                |  Geschützte
| - player: Rolle           |          private Rolle player;               |  Felder
| ...                       |          private Position position;          |
+---------------------------+
| ✛ FängtDenBall(): void    |          public get ... set ...              |  Zugriffsmethoden für
| ✛ SchießtDenBall(): Kraft |                                                  Felder
| - Foul()                  |          public void FängtDenBall(Ball);
| ...                       |          public Kraft = SchießtDenBall(Ball);
+---------------------------+          private Foul(SpielerX);             |  Event an SpielerX im
                                    }                                         "Erfolgsfall"
\end{verbatim}

\hypertarget{vererbung}{%
\subsection{Vererbung}\label{vererbung}}

\begin{quote}
Die Vererbung dient dazu, aufbauend auf existierenden Klassen neue zu
schaffen. Aus der Klassenspezifikation einer Klasse wird eine neue
Klasse hergeleitet. Diese ist dann entweder eine Erweiterung oder eine
Einschränkung der ursprünglichen Klasse.
\end{quote}

Die vererbende Klasse wird meist Basisklasse (auch Super-, Ober- oder
Elternklasse) genannt, die erbende abgeleitete Klasse (auch Sub-, Unter-
oder Kindklasse). Den Vorgang des Erbens nennt man meist Ableitung oder
Spezialisierung.

\begin{figure}
\centering
\includegraphics{./img/08_OOP_Csharp/Vererbungsbeispiel.png}
\caption{Vererbungsbeispiel}
\end{figure}

\textbf{Vorteile}

\begin{itemize}
\tightlist
\item
  Abbildung der Eigenschaften und Daten in einem hierarchischen Konzept
\item
  Steigerung der Wartbarkeit und Erweiterbarkeit
\end{itemize}

\textbf{Nachteile}

\begin{itemize}
\tightlist
\item
  Eine Klasse, die als Subklasse aus anderen Klassen entsteht, ist kein
  autonomer Baustein. Bei der Verwendung der Klasse wird es immer wieder
  zu Rückgriffen auf die Basisklasse(n) kommen.
\item
  Bisweilen schwierige Modellierung
\item
  Schaffung von Abhängigkeitsverhältnissen, die dem
  Modularisierungsgedanken nicht entsprechen.
\end{itemize}

\textbf{Am Beispiel Fußballspiel}

\begin{verbatim}

   Erbende Klasse                  Höherabstrakte Klasse                       .

  +-----------------------+
  | Spieler               |
  +-----------------------+
  |"+" Position           |
  | ...                   | --.
  +-----------------------+   |
  |"+" FängtDenBall()     |   |   +------------------------+
  |"+" SchießtDenBall()   |   |   | Person                 |
  |"-" Foul()             |   |   +------------------------+
  | ...                   |   '--▷| - Name                 |
  +-----------------------+       | - Alter                |
                                  | ...                    |
  +-----------------------+       +------------------------+
  | Schiedsrichter        |       |"+"SetName()            |
  +-----------------------+   .--▷|"+"SetAge()             |
  |"+" ...                |   |   | ...                    |
  |"+" ...                |   |   +------------------------+
  +-----------------------+   |
  |"+" StartetSpiel()     |   |
  |"+" BeendetDasSpiel()  | --'
  |"+" ErkenntFoul()      |
  | ...                   |
  +-----------------------+
\end{verbatim}

\textbf{Zentrale Objekt-Klasse}

https://docs.microsoft.com/de-de/dotnet/api/system.object?view=netframework-4.8

OOP Sprachen verfügen meist über eine zentrale Klasse, von der alle
Klassen in letztlich abgeleitet sind. Diese heißt bei diesen Sprachen
Object. In Eiffel wird sie mit ANY bezeichnet. Zu den wenigen Ausnahmen,
in denen es keine solche Klasse gibt, zählen C++ oder Python.

In den Sprachen mit zentraler Basisklasse erbt eine Klasse, für die
keine Basisklasse angegeben wird, implizit von dieser besonderen Klasse.
Ein Vorteil davon ist, dass allgemeine Funktionalität, beispielsweise
für die Serialisierung, Ausgaben, Hashwerte oder die Typinformation,
dort untergebracht werden kann. Weiterhin ermöglicht es die Deklaration
von Variablen, denen ein Objekt jeder beliebigen Klasse zugewiesen
werden kann. Dies ist besonders hilfreich zur Implementierung von
Containerklassen, wenn eine Sprache keine generische Programmierung
unterstützt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\KeywordTok{typeof}\NormalTok{(}\DataTypeTok{int}\NormalTok{));}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\KeywordTok{typeof}\NormalTok{(}\DataTypeTok{int}\NormalTok{).}\FunctionTok{BaseType}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\KeywordTok{typeof}\NormalTok{(}\DataTypeTok{int}\NormalTok{).}\FunctionTok{BaseType}\NormalTok{.}\FunctionTok{BaseType}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Type t = }\KeywordTok{typeof}\NormalTok{(Program);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"------ Methods --------"}\NormalTok{);}
\NormalTok{    System.}\FunctionTok{Reflection}\NormalTok{.}\FunctionTok{MethodInfo}\NormalTok{[] methodInfo = t.}\FunctionTok{GetMethods}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (System.}\FunctionTok{Reflection}\NormalTok{.}\FunctionTok{MethodInfo}\NormalTok{ mInfo }\KeywordTok{in}\NormalTok{ methodInfo)}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(mInfo.}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{polymorphie}{%
\subsection{Polymorphie}\label{polymorphie}}

\begin{quote}
Polymorphie oder Polymorphismus (griechisch für Vielgestaltigkeit)
ermöglicht, dass ein Objekt sich in seiner Funktionalität in
Abhängigkeit von den Datentypen verändert.
\end{quote}

Die Polymorphie der objektorientierten Programmierung ist eine
Eigenschaft, die immer im Zusammenhang mit Vererbung und Schnittstellen
(Interfaces) auftritt. Eine Methode ist polymorph, wenn sie in
verschiedenen Klassen die gleiche Signatur hat, jedoch erneut
implementiert ist.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Shape}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ X \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{private} \KeywordTok{set}\NormalTok{; \}}
\NormalTok{    ....}
    \CommentTok{// Virtual method}
    \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{Draw}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Performing base class drawing tasks"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Circle : Shape}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Draw}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{// Code to draw a circle...}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Drawing a circle"}\NormalTok{);}
        \KeywordTok{base}\NormalTok{.}\FunctionTok{Draw}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Square : Shape \{\}}
\NormalTok{...}
\end{Highlighting}
\end{Shaded}

In C\# ist jeder Typ polymorph, da alle Typen, einschließlich
benutzerdefinierten Typen, von \texttt{Object} erben.

Beim Vererben erhält die abgeleitete Klasse alle Methoden, Felder,
Eigenschaften und Ereignisse der Basisklasse. Dabei gilt es zu
entscheiden, welche davon unverändert übernommen und welche auf die
spezifischen Anforderungen angepasst werden sollen.

\textbf{Am Beispiel Fußballspiel}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person\{}
  \KeywordTok{private} \DataTypeTok{int}\NormalTok{ alter;}
  \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{setAge}\NormalTok{(}\DataTypeTok{int}\NormalTok{ alter) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{alter}\NormalTok{ = alter;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Spieler: Person \{}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{setAge}\NormalTok{(}\DataTypeTok{int}\NormalTok{ alter) \{}
      \CommentTok{// hier wird noch getestet ob der Spieler älter als 16 ist}
      \CommentTok{// und überhaupt eingesetzt werden darf}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Zuschauer: Person \{}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{setAge}\NormalTok{(}\DataTypeTok{int}\NormalTok{ alter) \{}
      \CommentTok{// hier wird noch getestet ob ein Zuschauer jünger als 6 ist und}
      \CommentTok{// kostenlos ins Stadion darf}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{weitere-beispiele}{%
\subsection{Weitere Beispiele}\label{weitere-beispiele}}

\begin{longtable}[]{@{}llll@{}}
\toprule
\begin{minipage}[b]{0.03\columnwidth}\raggedright
Beispiel\strut
\end{minipage} & \begin{minipage}[b]{0.33\columnwidth}\raggedright
Kapselung\strut
\end{minipage} & \begin{minipage}[b]{0.18\columnwidth}\raggedright
Vererbung\strut
\end{minipage} & \begin{minipage}[b]{0.35\columnwidth}\raggedright
Polymorphie\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.03\columnwidth}\raggedright
Auto\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
Interne Daten (CAN-Nachrichten zwischen Motor und Getriebe,
Zündzeitpunkte, etc.) sind für mich nicht interessant\strut
\end{minipage} & \begin{minipage}[t]{0.18\columnwidth}\raggedright
Kleinwagen und Kombis sind lediglich spezielle Arten von Autos\strut
\end{minipage} & \begin{minipage}[t]{0.35\columnwidth}\raggedright
Ein Maserati Quattroporte und ein C Corsa können beide fahren. Trotzdem
sind die Auswirkungen verschieden\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
Säugetier\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
Die genauen Vorgänge der Verdauung interessieren nicht. Nur das
benötigte Futter ist wichtig\strut
\end{minipage} & \begin{minipage}[t]{0.18\columnwidth}\raggedright
Eine Springmaus und eine Hausratte sind beide aus der Ordnung der
Nagetiere. Beide Tiere teilen viele gleiche Eigenschaften\strut
\end{minipage} & \begin{minipage}[t]{0.35\columnwidth}\raggedright
Fortbewegen ist eine Eigenschaft jedes Säugetieres. Ein Wal schwimmt
jedoch und ein Känguru hüpft. Ein Pferd galoppiert.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{begriffe}{%
\subsection{Begriffe}\label{begriffe}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.04\columnwidth}\raggedright
Begriff\strut
\end{minipage} & \begin{minipage}[b]{0.90\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Klassen\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} sind Vorlagen (Baupläne), aus denen Instanzen Objekte erzeugt
werden.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Objekt\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} ist ein Element, welches Funktionen, Methoden, Prozeduren,
einen inneren Zustand, oder mehrere dieser Dinge besitzt. Es leitet sich
von einer Spezifikation ab.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Entität\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} ist ein Objekt, welches eine Identität besitzt, welche
unveränderlich ist. Beispielsweise kann eine Person ihre Adresse,
Telefonnummer oder Namen ändern, ohne zu einer anderen Person zu werden.
Eine Person ist also eine Entität.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Eigenschaft\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} bestimmt den Zustands eines Objekts. Der Zustand des Objektes
setzt sich aus seinen Eigenschaften und Verbindungen zu anderen Objekten
zusammen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Prozedur\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} verändert den Zustand eines Objektes, ohne einen Rückgabewert
zu liefern. Eine Prozedur kann andere Objekte als Parameter
entgegennehmen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Funktion\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} ordnet einer gegebenen Eingabe einen bestimmten Rückgabewert
zu. Eine Funktion zeichnet sich insbesondere dadurch aus, dass sie nicht
den Zustand eines Objekts verändert.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Methode\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
\ldots{} ist ein Unterprogramm (Funktion oder Prozedur), welches das
Verhalten von Objekten beschreibt und implementiert. Über Methoden
können Objekte untereinander in Verbindung treten.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{klassen-in-c}{%
\section{Klassen in C}\label{klassen-in-c}}

\begin{quote}
Klassen {[}und Strukturen{]} sind zwei der grundlegenden Konstrukte des
allgemeinen Typsystems in .NET Framework. Bei beiden handelt es sich um
eine Datenstruktur, die einen als logische Einheit zusammengehörenden
Satz von Daten und Verhalten kapselt.
\end{quote}

Entsprechend können Klassenspezifikationen folgende Elemente umfassen:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
Member / Elemente\strut
\end{minipage} & \begin{minipage}[b]{0.14\columnwidth}\raggedright
englische Bezeichnung\strut
\end{minipage} & \begin{minipage}[b]{0.63\columnwidth}\raggedright
Funktion\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Felder\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{fields}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Daten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Konstanten\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{constant}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
konstante Daten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Eigenschaften\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{property}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Daten und Zugriffsmethoden\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Methoden\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{method}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Funktionen / Prozeduren\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Konstruktoren\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{constructor}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Instanziierung einer Klasse\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Ereignisse\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{event}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Informationsaustausch zwischen Klassen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Finalizer\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{finalizer}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
``Destruktoren''\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Indexer\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{indexer}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Ähnlich Eigenschaften, Adressierung über Indizes\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Operatoren\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{operators}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Set von `==', `+' etc. mit eigener Bedeutung\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Geschachtelte Typen\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
\emph{embedded types}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
Integrierte Klassen oder Structs, die nur innerhalb einer Klasse/
Structs angewendet werden\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ Person\{}
  \DataTypeTok{string}\NormalTok{ name;                     }\CommentTok{// eine häufige Konvention, kleine Anfangs-}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Geburtsjahr;          }\CommentTok{// buchstaben = privat, groß = public}

  \KeywordTok{public} \FunctionTok{Person}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ geburtsjahr)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
\NormalTok{    Geburtsjahr = geburtsjahr;}
\NormalTok{  \}}

  \DataTypeTok{int} \FunctionTok{AktuellesAlter}\NormalTok{ () => DateTime.}\FunctionTok{Today}\NormalTok{.}\FunctionTok{Year}\NormalTok{ - Geburtsjahr;}

  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
     \KeywordTok{return}\NormalTok{ name + }\StringTok{" ist "}\NormalTok{ + }\FunctionTok{AktuellesAlter}\NormalTok{().}\FunctionTok{ToString}\NormalTok{() + }\StringTok{"Jahre alt."}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator}\NormalTok{< (Person person1, Person Person2)\{}
    \CommentTok{// TODO Hausaufgabe}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Und wie legen wir eine Instanz an? Dazu sind mehrere Schritte notwendig:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Person p;  }\CommentTok{// Generierung einer Referenzvariablen p auf dem Stack}
\NormalTok{p = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{();  }\CommentTok{// Generierung einer Instanz im Heap}
\CommentTok{// alles zusammen}
\CommentTok{// Person p = new Person();}
\end{Highlighting}
\end{Shaded}

Als Operanden erwartet der new-Operator einen Klassennamen und eine
Parameterliste, die an den entsprechenden Konstruktor übergeben wird.

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.21\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.33\columnwidth}\raggedright
Fields\strut
\end{minipage} & \begin{minipage}[b]{0.37\columnwidth}\raggedright
Methods\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Statisches Attribut\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{static}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\texttt{static}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Zugriffsattribute\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{public}, \texttt{internal}, \texttt{private},
\texttt{protected}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\texttt{public}, \texttt{internal}, \texttt{private},
\texttt{protected}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Vererbungsattribut\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{new}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\texttt{new}, \texttt{virtual}, \texttt{abstract}, \texttt{override},
\texttt{sealed}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Unsafe Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{unsafe}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Attribut Teilimplementierung\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\texttt{partitial}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Unmanaged Code Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\texttt{unsafe\ extern}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Read-only Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{readonly}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Threading Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.33\columnwidth}\raggedright
\texttt{volatile}\strut
\end{minipage} & \begin{minipage}[t]{0.37\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{felder}{%
\subsection{Felder}\label{felder}}

Felder sind Variablen eines beliebigen Typs, die einer Klasse
unmittelbar zugeordnet sind. In Feldern werden die Daten abgelegt, die
übergreifend Verwendung finden.

Der Idee der Kapselung folgend, sollten nur methodenlokal relevante
Variablen auch dort deklariert werden.

Eine Klasse oder Struktur kann Instanzenfelder, statische Felder oder
beides gemischt verfügen.

\begin{verbatim}

  +-----------------+   +-----------------+  +-----------------+               .
  | Instanz 0       |   | Instanz 1       |  | Instanz 2       |
  +-----------------+   +-----------------+  +-----------------+
  | - Intanzfeld0   |   | - Intanzfeld0   |  | - Intanzfeld0   |
  | - Intanzfeld1   |   | - Intanzfeld1   |  | - Intanzfeld1   |
  |                 |   |                 |  |                 |
  | ..................... ✛ StatischesFeld0 .................. |
  | ..................... ✛ StatischesFeld1 .................. |
  |                 |   |                 |  |                 |
  +-----------------+   +-----------------+  +-----------------+
  | ✛ Method1()     |   | ✛ Method1()     |  | ✛ Method1()     |
  | ✛ Method2()     |   | ✛ Method2()     |  | ✛ Method2()     |
  +-----------------+   +-----------------+  +-----------------+
\end{verbatim}

Instanzenfelder beziehen sich als Datensatz individuell auf die
``eigene'' Instanz, statisches Felder gehören zur Klasse selbst und
werden von allen Instanzen einer Klasse gemeinsam verwendet. ``Lokale''
Änderungen, werden somit übergreifend sichtbar.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person\{}
  \DataTypeTok{string}\NormalTok{ name;}
  \DataTypeTok{int}\NormalTok{ index;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Geburtsjahr;}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ Count;          }\CommentTok{// <- Statische Variable Count}
  \KeywordTok{public} \FunctionTok{Person}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ geburtsjahr)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
\NormalTok{    Geburtsjahr = geburtsjahr;}
\NormalTok{    index = Count;}
\NormalTok{    Count = Count + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
     \KeywordTok{return}\NormalTok{ name + }\StringTok{" ist die "}\NormalTok{ + (index+}\DecValTok{1}\NormalTok{).}\FunctionTok{ToString}\NormalTok{() + }\StringTok{" von "}\NormalTok{ + Count.}\FunctionTok{ToString}\NormalTok{() + }\StringTok{" Personen"}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Person Student1 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Mickey"}\NormalTok{, }\DecValTok{1935}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Student1);}
\NormalTok{    Person Student2 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Donald"}\NormalTok{, }\DecValTok{1927}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Student1);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Student2);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Felder können mit der Deklaration oder im Konstruktor initialisiert
werden. Desweiteren kann mit \texttt{readonly} der Wert nach dem Ende
des Konstruktorabarbeitung geschützt werden. Eine solche Variable kann
als static deklariert werden, um zu vermeiden, dass eine entsprechende
Zahl von Kopien erstellt wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person\{}
  \DataTypeTok{string}\NormalTok{ name;}
  \DataTypeTok{int}\NormalTok{ index = }\DecValTok{0}\NormalTok{;}
  \KeywordTok{readonly} \DataTypeTok{string}\NormalTok{ Kategorie = }\StringTok{"Student"}\NormalTok{;}
  \KeywordTok{readonly} \DataTypeTok{string}\NormalTok{ Hochschule;}

  \KeywordTok{public} \FunctionTok{Person}\NormalTok{()\{}
    \CommentTok{//...}
\NormalTok{    Hochschule = }\StringTok{"TU Freiberg"}\NormalTok{;}
    \CommentTok{//...}
\NormalTok{  \}}
\end{Highlighting}
\end{Shaded}

\hypertarget{konstanten}{%
\subsection{Konstanten}\label{konstanten}}

Konstanten sind unveränderliche Datensätze, die zur Kompilierzeit(!)
bekannt sind und sich danach nicht mehr verändern lassen. Nur die in C\#
integrierten Typen - einfache Datentypen und string können als
\texttt{const} deklariert werden.

Varianten ``konstanter'' Variablen in C\#

\begin{longtable}[]{@{}llll@{}}
\toprule
& Konstante & Readonly & Readonly statisch\tabularnewline
\midrule
\endhead
Attribute & \texttt{const} & \texttt{readonly} &
\texttt{readonly\ static}\tabularnewline
Veränderbar bis \ldots{} & Kompilierung & Ende des Konstruktors & Ende
des Konstruktors\tabularnewline
Statisch & Standard, ja & Nein & Ja\tabularnewline
Zugriff & Klasse & Instanz & Instanz\tabularnewline
\bottomrule
\end{longtable}

\begin{itemize}
\tightlist
\item
  Versuchen Sie die Variable innnerhalb von Main zu manipulieren
\item
  Wechseln Sie readonly gegen const? Welche Anpassungen müssen Sie
  vornehmen? --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person\{}
  \KeywordTok{public} \KeywordTok{readonly} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \FunctionTok{Person}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Person Student1 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Mickey"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Student1.}\FunctionTok{name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{konstuktoren}{%
\subsection{Konstuktoren}\label{konstuktoren}}

Beim Erzeugen einer Instanz einer \texttt{class} oder eines
\texttt{structs} wird deren Konstruktor aufgerufen. Dieser ist für die
Initialisierung der Instanz auf der Zustandsebene verantwortlich.
Konstruktoren können überladen werden und verschiedene Signaturen
abbilden.

Wenn für eine Klasse kein Konstuktor vorgegeben wird, erstellt der
Kompiler standardmäßig einen, der das Objekt instanziiert und
Membervariablen auf die Standardwerte festlegt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Wine}
\NormalTok{\{}
   \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Price;}
   \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Year;}

   \CommentTok{// public Wine() // <- Implzit vorhanden, kann aber überschrieben werden}
                    \CommentTok{// Standardkonstruktor}
   \KeywordTok{public} \FunctionTok{Wine}\NormalTok{ (}\DataTypeTok{decimal}\NormalTok{ price)\{Price = price;\}}
   \KeywordTok{public} \FunctionTok{Wine}\NormalTok{ (}\DataTypeTok{decimal}\NormalTok{ price, }\DataTypeTok{int}\NormalTok{ year) : }\KeywordTok{this}\NormalTok{ (price) \{Year = year;\}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Standardkonstruktor wird implizit generiert, wenn kein anderer
Konstruktor durch den Entwickler spezifiziert wurde. Sofern das
geschieht, steht dieser auch nicht mehr bereit.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ sound;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ age;}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{string}\NormalTok{ sound, }\DataTypeTok{int}\NormalTok{ age) \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{sound}\NormalTok{ = sound;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{age}\NormalTok{ = age;}
\NormalTok{  \}  }
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal kitty = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{, }\StringTok{"Miau"}\NormalTok{, }\DecValTok{5}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(kitty.}\FunctionTok{sound}\NormalTok{);}
\NormalTok{    Animal tom = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(tom.}\FunctionTok{sound}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Ein Konstruktor kann einen anderen Konstruktor der gleichen Klasse über
das Schlüsselwort \texttt{this} aufrufen. Dabei kann der Aufruf mit oder
ohne Parameter erfolgen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ Car}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{readonly} \DataTypeTok{int}\NormalTok{ NumberOfSeats;}
  \KeywordTok{public} \KeywordTok{readonly} \DataTypeTok{int}\NormalTok{ MaxSpeed;}
  \KeywordTok{private} \DataTypeTok{int}\NormalTok{ CurrentSpeed;}

  \KeywordTok{public} \FunctionTok{Car}\NormalTok{(}\DataTypeTok{int}\NormalTok{ maxSpeed, }\DataTypeTok{int}\NormalTok{ numberOfSeats)}
\NormalTok{  \{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"2 arg ctor"}\NormalTok{);}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{MaxSpeed}\NormalTok{ = maxSpeed;}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{NumberOfSeats}\NormalTok{ = numberOfSeats;}
\NormalTok{  \}}

  \KeywordTok{public} \FunctionTok{Car}\NormalTok{(}\DataTypeTok{int}\NormalTok{ maxSpeed) : }\KeywordTok{this}\NormalTok{(maxSpeed, }\DecValTok{5}\NormalTok{)}
\NormalTok{  \{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"1 arg ctor"}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \FunctionTok{Car}\NormalTok{() : }\KeywordTok{this}\NormalTok{(}\DecValTok{100}\NormalTok{)}
\NormalTok{  \{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"0 arg ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     Car myVehicle = }\KeywordTok{new} \FunctionTok{Car}\NormalTok{(}\DecValTok{5}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Statische Konstruktoren}

\begin{itemize}
\item
  \ldots{} werden verwendet, um static-Daten zu initialisieren oder um
  eine bestimmte Aktion auszuführen, die nur einmal ausgeführt werden
  muss.
\item
  \ldots{} können nicht über Zugriffsmodifizierer oder Parameter
  verfügen.
\item
  \ldots{} können nicht vererbt oder überladen werden.
\item
  \ldots{} werden automatisch vor dem Erzeugen der ersten Instanz
  ausgeführt und können nicht direkt aufgerufen werden. Damit hat der
  Nutzer keine Kontrolle, wann der Konstruktor ausgeführt wird.
\item
  \ldots{} werden kein zweites mal aufgerufen, wenn eine Ausnahme
  ausgelöst wird.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ BAFStudent}
\NormalTok{\{}
   \KeywordTok{public} \KeywordTok{static} \DataTypeTok{string}\NormalTok{ Universität;}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{ NameStudent;}
   \KeywordTok{static} \FunctionTok{BAFStudent}\NormalTok{()\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Universität wird initialisiert"}\NormalTok{);}
\NormalTok{     Universität = }\StringTok{"TU BAF Freiberg"}\NormalTok{;}
\NormalTok{   \}}
   \KeywordTok{public} \FunctionTok{BAFStudent}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Name wird initialisiert"}\NormalTok{);}
\NormalTok{     NameStudent = name;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
   \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     BAFStudent student0 = }\KeywordTok{new} \FunctionTok{BAFStudent}\NormalTok{(}\StringTok{"Humboldt"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0,20\} - \{1,-10\}"}\NormalTok{, BAFStudent.}\FunctionTok{Universit}\NormalTok{ät, student0.}\FunctionTok{NameStudent}\NormalTok{);}
\NormalTok{     BAFStudent student1 = }\KeywordTok{new} \FunctionTok{BAFStudent}\NormalTok{(}\StringTok{"Winkler"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0,20\} - \{1,-10\}"}\NormalTok{, BAFStudent.}\FunctionTok{Universit}\NormalTok{ät, student1.}\FunctionTok{NameStudent}\NormalTok{);}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Für die Objektinitialisierung besteht neben den Konstruktoren und dem
unmittelbaren Zugriff auf die Membervariablen (vermeiden!) die
Möglichkeit direkt nach dem Konstruktoraufruf die Belegung abzubilden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Wine}
\NormalTok{\{}
   \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Price;}
   \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Year;}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Vinyard;}
   \KeywordTok{public} \FunctionTok{Wine}\NormalTok{ () \{\}}
   \KeywordTok{public} \FunctionTok{Wine}\NormalTok{ (}\DataTypeTok{decimal}\NormalTok{ price)\{Price = price;\}}
   \KeywordTok{public} \FunctionTok{Wine}\NormalTok{ (}\DataTypeTok{decimal}\NormalTok{ price, }\DataTypeTok{int}\NormalTok{ year, }\DataTypeTok{string}\NormalTok{ vinyard = }\StringTok{"Chateau Lafite"}\NormalTok{ )\{}
\NormalTok{     Price = price;}
\NormalTok{     Year = year;}
\NormalTok{     Vinyard = vinyard;}
\NormalTok{   \}}
   \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()}
\NormalTok{   \{}
     \KeywordTok{return}\NormalTok{ String.}\FunctionTok{Format}\NormalTok{(}\StringTok{"| \{0,5\} Euro | \{1,5\} | \{2,-18\}|"}\NormalTok{, Price, Year, Vinyard );}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
   \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
     \CommentTok{// Initalisierung über Standardkonstruktor und direkten Feldzugriff}
\NormalTok{     Wine bottle0 = }\KeywordTok{new} \FunctionTok{Wine}\NormalTok{();}
\NormalTok{     bottle0.}\FunctionTok{Vinyard}\NormalTok{ = }\StringTok{"Chateau Latour"}\NormalTok{;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(bottle0);}
     \CommentTok{// Initialisierung über die Konstruktoren}
\NormalTok{     Wine bottle1 = }\KeywordTok{new} \FunctionTok{Wine}\NormalTok{(}\DecValTok{23}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(bottle1);}
\NormalTok{     Wine bottle2 = }\KeywordTok{new} \FunctionTok{Wine}\NormalTok{(}\DecValTok{3432}\NormalTok{, }\DecValTok{1956}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(bottle2);}
     \CommentTok{// Initialisierung über Initalizer}
\NormalTok{     Wine bottle3 = }\KeywordTok{new} \FunctionTok{Wine}\NormalTok{() \{Price = }\DecValTok{19}\NormalTok{, Year = }\DecValTok{1910}\NormalTok{\};}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(bottle3);}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

3 Varianten, und was ist nun besser? Der Aufruf über den Konstruktor
ermöglicht die Initialisierung von \texttt{readonly} Variablen.

Initalizer werden als atomare Funktion realisiert, sind damit
Thread-sicher, sind damit aber auch schwieriger zu debuggen. Zudem
können nur \texttt{public} Member damit adressiert werden. An dieser
Stelle wird deutlich, dass Initializier ggf. beim schnellen Testen
Tipparbeit sparen, in realen Anwendungen aber nicht zum Einsatz kommen
sollten.

\hypertarget{destruktoren-finalizer}{%
\subsection{Destruktoren / Finalizer}\label{destruktoren-finalizer}}

Mit Finalizern (die auch als Destruktoren bezeichnet werden) werden alle
erforderlichen endgültigen Bereinigungen durchgeführt, wenn eine
Klasseninstanz vom Garbage Collector gesammelt wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \FunctionTok{Person}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}\KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;\}}
\NormalTok{  ~}\FunctionTok{Person}\NormalTok{() \{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The \{0\} destructor is executing."}\NormalTok{, }\FunctionTok{ToString}\NormalTok{());\}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Person Student1 = }\KeywordTok{new} \FunctionTok{Person}\NormalTok{(}\StringTok{"Mickey"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Student1.}\FunctionTok{name}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Aus die Maus!"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Finalizer ruft implizit die Methode \texttt{Finalize} aus der
Basisklasse des Typs \texttt{Objekt} auf.

\hypertarget{eigenschaften}{%
\subsection{Eigenschaften}\label{eigenschaften}}

Eigenschaft (Properties) organisieren den Zugriff auf private Felder
über einen flexiblen Mechanismus zum Lesen, Schreiben oder Berechnen des
Wertes. Entsprechend können Eigenschaften wie öffentliche Datenmember
verwendet werden. Damit wird das Konzept der Kapselung auf effiziente
Zugriffsmethoden abgebildet.

Ausgangspunkt:

\begin{itemize}
\tightlist
\item
  Fügen Sie eine Lese / Schreibmethode für die Variable Wochentag ein,
  die Prüft, ob die Eingabe zwischen Mo = 0 und Freitag = 4 liegt.
  --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Vorlesung\{}
  \KeywordTok{private} \DataTypeTok{byte}\NormalTok{ wochentag;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Vorlesung SoWi = }\KeywordTok{new} \FunctionTok{Vorlesung}\NormalTok{();}
\NormalTok{    SoWi.}\FunctionTok{wochentag}\NormalTok{ = }\DecValTok{4}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

C\# hält, wie andere OOP Sprachen auch dafür eine eigene kompakte Syntax
bereit, die Aspekte der Felder und der Methoden kombiniert. Der
aufrufende Nutzer sieht eine Feld, der Zugriff kann aber über eine
Methode konfiguriert werden. Dabei können durchaus mehrere Eigenschaften
auf eine private Variable verweisen.

Für den Benutzer eines Objekts erscheint eine Eigenschaft wie ein Feld;
der Zugriff auf die Eigenschaft erfordert dieselbe Syntax.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Vorlesung}
\NormalTok{\{}
  \KeywordTok{private} \DataTypeTok{byte}\NormalTok{ wochentag;            }\CommentTok{// Private Variable}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ Wochentag              }\CommentTok{// Öffentliche Variable}
\NormalTok{  \{}
    \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ wochentag; \}        }\CommentTok{// Property accessors}
    \KeywordTok{set}\NormalTok{ \{}
      \KeywordTok{if}\NormalTok{ ((value < }\DecValTok{7}\NormalTok{) & (value >= }\DecValTok{0}\NormalTok{))}
\NormalTok{          wochentag = value;}
      \KeywordTok{else}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fehlerhafte Eingabe!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Vorlesung SoWi = }\KeywordTok{new} \FunctionTok{Vorlesung}\NormalTok{();}
\NormalTok{    SoWi.}\FunctionTok{Wochentag}\NormalTok{ = }\DecValTok{4}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(SoWi.}\FunctionTok{Wochentag}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Assessoren können beliebig kombiniert werden. Eine Eigenschaft ohne
einen \texttt{set}-Accessor ist schreibgeschützt. Eine Eigenschaft ohne
einen \texttt{get}-Accessor ist lesegeschützt.

Zudem lassen sich mit der \emph{Fat Arrow} Notation die Darstellungen
wiederum verkürzen. Beispielhaft ist an folgendem Beispiel auch, dass
sich die Properties eine vollkommen andere Informationsstruktur bedienen
als die eigentlichen privaten Variablen abbilden (= Kapselung).

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{decimal}\NormalTok{ currentPrice, sharesOwned;}

\KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Worth}
\NormalTok{\{}
\NormalTok{    get => currentPrice * SharesOwned;}
\NormalTok{    set => sharesOwned = value / currentPrice}
\NormalTok{\}}

\CommentTok{// Kompakt für}

\KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Worth}
\NormalTok{\{}
    \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ currentPrice * SharesOwned; \}}
    \KeywordTok{set}\NormalTok{ \{ sharesOwned = value / currentPrice; \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\texttt{set} verwendet dabei einen impliziten Parameter mit dem Namen
\texttt{value}, dessen Typ der Typ der Eigenschaft ist.

Und wie sieht es mit dem Zugriffsschutz der Eigenschaften aus?
Insbesondere \texttt{set} sollte soweit wie möglich eingeschränkt
werden. Dafür können \texttt{internal}, \texttt{private} und
\texttt{protected} genutzt werden.

Wenn in den Eigenschaftenzugriffsmethoden keine zusätzliche Logik
erforderlich ist, bietet sich die Verwendung von automatisch
implementierten Eigenschaften.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \DataTypeTok{int}\NormalTok{ CustomerID \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
\end{Highlighting}
\end{Shaded}

In diesem Fall erstellt der Compiler ein privates, anonymes, dahinter
liegendes Feld, auf das nur über \texttt{get} und
\texttt{set}-Accessoren zugegriffen werden kann.

\hypertarget{indexer}{%
\subsection{Indexer}\label{indexer}}

Indexer bilden die Zugriffsmethodik für Arrays \texttt{MyArray{[}3{]}}
auf Klassen ab, um den Zugriff auf Arrays, Listen oder andere Container
zu kapseln. Dabei wird folgende Notation benutzt:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{string}\NormalTok{ [] words = }\StringTok{"Das ist ein beispielhafter Text"}\NormalTok{.}\FunctionTok{Split}\NormalTok{();}
\CommentTok{//    Typ der Rückgabevariablen}
\CommentTok{//       |    this Referenz auf das eigene Objekt}
\CommentTok{//       |     |    Typ der Indexvariable}
\CommentTok{//       |     |     |      Bezeichner der Variable}
\CommentTok{//       v     v     v       v}
\KeywordTok{public} \DataTypeTok{string} \KeywordTok{this}\NormalTok{ [}\DataTypeTok{int}\NormalTok{ index]\{}
     \KeywordTok{get}\NormalTok{  \{}\KeywordTok{return}\NormalTok{ words[index]; \}}
     \KeywordTok{set}\NormalTok{  \{words[index] = value; \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Auch hier wird das Schlüsselwort \texttt{value} verwendet, um den Wert
zu definieren, der zugewiesen wird.

Indexer müssen nicht durch einen Ganzzahlwert indiziert werden, es
können auch andere Typen verwendet werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Months}
\NormalTok{\{}
  \DataTypeTok{string}\NormalTok{[] months = \{}\StringTok{"Jan"}\NormalTok{, }\StringTok{"Feb"}\NormalTok{, }\StringTok{"März"}\NormalTok{, }\StringTok{"April"}\NormalTok{, }\StringTok{"Mai"}\NormalTok{, }\StringTok{"Juni"}\NormalTok{, }\StringTok{"Juli"}\NormalTok{,}
                     \StringTok{"Aug"}\NormalTok{, }\StringTok{"Sep"}\NormalTok{, }\StringTok{"Okt"}\NormalTok{, }\StringTok{"Nov"}\NormalTok{, }\StringTok{"Dez"}\NormalTok{\};}

  \KeywordTok{public} \DataTypeTok{string} \KeywordTok{this}\NormalTok{[}\DataTypeTok{byte}\NormalTok{ index]\{}
    \KeywordTok{get}\NormalTok{ \{}\KeywordTok{return}\NormalTok{ months[index];\}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Months MonthList = }\KeywordTok{new} \FunctionTok{Months}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(MonthList[}\DecValTok{5}\NormalTok{]);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Was ist der Vorteil der Klasse + Indexer Lösung? Wie würden Sie die
Indizierung noch absichern?

\hypertarget{operatorenuxfcberladung-in-c}{%
\subsection{Operatorenüberladung in
C\#}\label{operatorenuxfcberladung-in-c}}

Operatoren sind ein Set von Tokens, die grundlegende Operationen für
Grunddatentypen beschreiben.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{ a = }\DecValTok{4}\NormalTok{;}
\DataTypeTok{int}\NormalTok{ b = }\DecValTok{7}\NormalTok{;}
\DataTypeTok{int}\NormalTok{ c = a + b;                   }\CommentTok{// + Addition}

\DataTypeTok{string}\NormalTok{ s1 = }\StringTok{"Hello"}\NormalTok{;}
\DataTypeTok{string}\NormalTok{ s2 = }\StringTok{"World"}\NormalTok{;}
\DataTypeTok{string}\NormalTok{ s3 = s1 + }\StringTok{" "}\NormalTok{ + s2;       }\CommentTok{// + für String Konkatenation}
\end{Highlighting}
\end{Shaded}

Analog zu Methoden werden können Operatoren überladen werden.
Entsprechend wird den Operatoren eine spezifische Bedeutung für die
Klassen gegeben.

\begin{itemize}
\tightlist
\item
  Operatoren werden in der Klasse überladen
\item
  Operatoren-Überladung ist immer static
\item
  Nutzung des Schlüsselwortes \texttt{operator}
\end{itemize}

\textbf{Überladbare Operatoren}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.32\columnwidth}\raggedright
Opererator\strut
\end{minipage} & \begin{minipage}[b]{0.62\columnwidth}\raggedright
Bedeutug\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{+}, \texttt{-}, \texttt{!}, \texttt{\textasciitilde{}},
\texttt{++}, \texttt{-\/-}, \texttt{true}, \texttt{false}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
unäre Operatoren, überladbar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{+}, \texttt{-}, \texttt{\textbackslash{}*}, \texttt{/},
\texttt{\%}, \texttt{\&}, \texttt{\^{}},
\texttt{\textless{}\textless{}},
\texttt{\textgreater{}\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
binäre Operatoren, überladbar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{==}, \texttt{!=}, \texttt{\textless{}}, \texttt{\textgreater{}},
\texttt{\textless{}=}, \texttt{\textgreater{}=}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Vergleichsoperatoren, überladbar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{{[}{]}}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
nicht überladbar, aber selbe Funktion mit Indexern\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{()}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
nicht überladbar, aber mittels custom conversion gleiche
Funktionalität\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.32\columnwidth}\raggedright
\texttt{+=}, \texttt{-=}, \texttt{\textbackslash{}*=}, \texttt{/=},
\texttt{\%=}, \texttt{\&=}, \texttt{\^{}=},
\texttt{\textless{}\textless{}=},
\texttt{\textgreater{}\textgreater{}=}\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Werden durch die zugehörigen binären Operatoren automatisch
überladen\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Beispiel}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Vector \{}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ X;}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ Y;}

  \KeywordTok{public} \FunctionTok{Vector}\NormalTok{ (}\DataTypeTok{double}\NormalTok{ x, }\DataTypeTok{double}\NormalTok{ y)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{X}\NormalTok{ = x;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{Y}\NormalTok{ = y;}
\NormalTok{  \}}

  \CommentTok{//public static Vector operator +(Vector p1, Vector p2)\{}
  \CommentTok{//  return new Vector(p1.X + p2.X, p1.Y + p2.Y);}
  \CommentTok{//\}}

  \KeywordTok{public} \KeywordTok{static}\NormalTok{ Vector }\KeywordTok{operator}\NormalTok{ -(Vector p1, Vector p2)\{}
    \KeywordTok{return} \KeywordTok{new} \FunctionTok{Vector}\NormalTok{(p1.}\FunctionTok{X}\NormalTok{ - p2.}\FunctionTok{X}\NormalTok{, p1.}\FunctionTok{Y}\NormalTok{ - p2.}\FunctionTok{Y}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \KeywordTok{return} \StringTok{"x = "}\NormalTok{ + X.}\FunctionTok{ToString}\NormalTok{() + }\StringTok{", y = "}\NormalTok{ + Y.}\FunctionTok{ToString}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Vector a = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{);}
\NormalTok{    Vector b = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{9}\NormalTok{,}\DecValTok{6}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{ (a+b);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Operatoren += und -= werden dabei automatisch mit überladen.

\begin{quote}
\textbf{Merke:} Die Typen der Operanden beim Überladen von Operatoren
müssen nicht übereinstimmen!
\end{quote}

Nehmen wir an, dass wir eine Skalierung \(r\) unseres Vektors einfügen
wollen und dafür dessen Länge manipulieren.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Es müssen beide Varianten implementiert werden!}
\KeywordTok{public} \KeywordTok{static}\NormalTok{ Point }\KeywordTok{operator}\NormalTok{ *(Point p1, }\DataTypeTok{double}\NormalTok{ ratio)}
\NormalTok{\{}
  \KeywordTok{new} \FunctionTok{Point}\NormalTok{(p1.}\FunctionTok{X}\NormalTok{ * ratio, p1.}\FunctionTok{Y}\NormalTok{ * ratio);}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{static}\NormalTok{ Point }\KeywordTok{operator}\NormalTok{ *(}\DataTypeTok{int}\NormalTok{ ratio, Point p1)}
\NormalTok{\{}
  \KeywordTok{new} \FunctionTok{Point}\NormalTok{(p1.}\FunctionTok{X}\NormalTok{ * ratio, p1.}\FunctionTok{Y}\NormalTok{ * ratio);}
\NormalTok{\}}

\KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{\{}
\NormalTok{  Point ptOne = }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{100}\NormalTok{, }\DecValTok{100}\NormalTok{);}
\NormalTok{  Point ptTwo = }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{40}\NormalTok{, }\DecValTok{40}\NormalTok{);}
\NormalTok{\}}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{((ptOne * }\FloatTok{2.5}\NormalTok{));}
\NormalTok{Console.}\FunctionTok{WriteLine}\NormalTok{((}\DecValTok{1}\NormalTok{ * ptOne));}
\end{Highlighting}
\end{Shaded}

Unäre Operatoren (++, --) können in gleicher Art und Weise überschrieben
werden.

Wann sind zwei Klasseninstanzen gleich? Müssen alle Inhalte
übereinstimmen? Gibt es besondere Felder, deren Übereinstimmung
relevanter sind?

\begin{longtable}[]{@{}ll@{}}
\toprule
class & Felder\tabularnewline
\midrule
\endhead
Haus & Farbe der Fenster, Markise (ja/nein), Zahl der
Räume\tabularnewline
Tier & Art, Rasse, Geschlecht\tabularnewline
Datei & Typ, Inhalt, Namen\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Vector \{}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ X;}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ Y;}
  \KeywordTok{public} \FunctionTok{Vector}\NormalTok{ (}\DataTypeTok{double}\NormalTok{ x, }\DataTypeTok{double}\NormalTok{ y)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{X}\NormalTok{ = x;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{Y}\NormalTok{ = y;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator}\NormalTok{ ==(Vector p1, Vector p2)\{}
    \KeywordTok{return}\NormalTok{ (p1.}\FunctionTok{X}\NormalTok{ == p2.}\FunctionTok{X}\NormalTok{) && (p1.}\FunctionTok{Y}\NormalTok{ == p2.}\FunctionTok{Y}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator}\NormalTok{ !=(Vector p1, Vector p2)\{}
    \KeywordTok{return}\NormalTok{ (p1.}\FunctionTok{X}\NormalTok{ != p2.}\FunctionTok{X}\NormalTok{) || (p1.}\FunctionTok{Y}\NormalTok{ != p2.}\FunctionTok{Y}\NormalTok{);}
\NormalTok{  \}}

  \CommentTok{//public override bool Equals(object p)\{}
  \CommentTok{//  return ???}
  \CommentTok{//\}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Vector a = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{);}
\NormalTok{    Vector b = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{9}\NormalTok{,}\DecValTok{6}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{ (a == b);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die unären Operatoren \texttt{True} und \texttt{False} nehmen eine
kleine Sonderrolle ein:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator} \KeywordTok{true}\NormalTok{(Point p1) => (p1.}\FunctionTok{X}\NormalTok{>}\DecValTok{0}\NormalTok{) && (p1.}\FunctionTok{Y}\NormalTok{>}\DecValTok{0}\NormalTok{);}
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator} \KeywordTok{false}\NormalTok{(Point p1) => (p1.}\FunctionTok{X}\NormalTok{ < }\DecValTok{0}\NormalTok{) && (p1.}\FunctionTok{Y}\NormalTok{ < }\DecValTok{0}\NormalTok{);}

\NormalTok{Point pt1 = }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\KeywordTok{if}\NormalTok{ (pt1) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"true"}\NormalTok{); }\CommentTok{// true}

\CommentTok{// Point is neither true nor false:}
\NormalTok{Point pt2 = }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{-10}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\hypertarget{beispiel-der-woche-1}{%
\section{Beispiel der Woche \ldots{}}\label{beispiel-der-woche-1}}

Entwickeln Sie eine Klassenstruktur für die Speicherung der Daten eines
Studenten.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Student}
\NormalTok{\{}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ globalerZähler;}
  \KeywordTok{private} \KeywordTok{readonly} \DataTypeTok{int}\NormalTok{ uid;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
  \KeywordTok{private} \DataTypeTok{bool}\NormalTok{ eingeschrieben;}
  \KeywordTok{private}\NormalTok{ List<}\DataTypeTok{string}\NormalTok{> fächer;}

  \KeywordTok{static} \FunctionTok{Student}\NormalTok{()\{}
\NormalTok{    globalerZähler = }\DecValTok{0}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{public} \FunctionTok{Student}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)}
\NormalTok{  \{}
\NormalTok{    Name = name;}
\NormalTok{    Eingeschrieben = }\KeywordTok{true}\NormalTok{;}
\NormalTok{    uid = globalerZähler;}
\NormalTok{    fächer = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{string}\NormalTok{>();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Der Student \{0\} (Nr. \{1\}) ist angelegt!"}\NormalTok{, Name, uid);}
\NormalTok{    globalerZähler++;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ Eingeschrieben}
\NormalTok{  \{}
    \KeywordTok{get}\NormalTok{ \{}\KeywordTok{return}\NormalTok{ eingeschrieben;\}}
\NormalTok{    set}
\NormalTok{    \{}
      \KeywordTok{if}\NormalTok{ (eingeschrieben != value)}
\NormalTok{        eingeschrieben = value;}
      \KeywordTok{else}
\NormalTok{      \{}
        \KeywordTok{if}\NormalTok{ (value) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!Student \{0\} ist schon eingeschrieben!"}\NormalTok{, Name);}
        \KeywordTok{else}\NormalTok{ Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!Student \{0\} ist schon exmatrikuliert!"}\NormalTok{, Name);}
\NormalTok{      \}}
\NormalTok{     \}}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{addTopic}\NormalTok{(}\DataTypeTok{string}\NormalTok{ Fächername)\{}
\NormalTok{    fächer.}\FunctionTok{Add}\NormalTok{(Fächername);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{printTopics}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Student \{0\} hat folgende Fächer absolviert:"}\NormalTok{, Name);}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{string}\NormalTok{ topic }\KeywordTok{in}\NormalTok{ fächer)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(topic + }\StringTok{" "}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Student student0 = }\KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Humboldt"}\NormalTok{);}
\NormalTok{    student0.}\FunctionTok{addTopic}\NormalTok{(}\StringTok{"Softwareentwicklung"}\NormalTok{);}
\NormalTok{    student0.}\FunctionTok{addTopic}\NormalTok{(}\StringTok{"Höhere Mathematik I"}\NormalTok{);}
\NormalTok{    student0.}\FunctionTok{addTopic}\NormalTok{(}\StringTok{"Prozedurale Programmierung"}\NormalTok{);}
\NormalTok{    student0.}\FunctionTok{printTopics}\NormalTok{();}
\NormalTok{    student0.}\FunctionTok{Eingeschrieben}\NormalTok{ = }\KeywordTok{true}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-7}{%
\section{Aufgaben}\label{aufgaben-7}}

\begin{itemize}
\tightlist
\item
  {[} {]} Setzen Sie sich anhand von
  \href{https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/classes-and-structs/}{Tutorials}
  mit den Konzepten der objektorientierten Programmierung auseinander!
\end{itemize}

!?\href{https://www.youtube.com/watch?v=t2SPg6IuT3k}{alt-text}

\hypertarget{vererbung-1}{%
\chapter{Vererbung}\label{vererbung-1}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2022}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Implementierung\ der\ Vererbung\ in\ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/09_Vererbung.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{auf-nachfrage-2}{%
\section{Auf Nachfrage \ldots{}}\label{auf-nachfrage-2}}

\begin{quote}
Hinweis auf die Lauffähigkeit der \emph{Fat Arrow Syntax} unter C\# 7.0.
siehe
\href{https://liascript.github.io/course/?https://raw.githubusercontent.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/master/07_OOPGrundlagenI.md\#5}{Beispiel
aus Vorlesung 7}
\end{quote}

\hypertarget{vererbung-in-c}{%
\section{Vererbung in C}\label{vererbung-in-c}}

\begin{quote}
Vererbung bildet neben Kapselung und Polymorphie die zentrale Säule des
objektorientierten Programmierens. Die Vererbung ermöglicht die
Erstellung neuer Klassen, die ein in exisitierenden Klassen definiertes
Verhalten wieder verwenden, erweitern und ändern. {[}MS.NET
Programmierhandbuch{]}
\end{quote}

\textbf{Beispiele}

Die Klasse, deren Member vererbt werden, wird \textbf{Basisklasse}
genannt, die erbende Klasse als \textbf{abgeleitete Klasse} bezeichnet.

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.09\columnwidth}\raggedright
Basisklasse\strut
\end{minipage} & \begin{minipage}[b]{0.29\columnwidth}\raggedright
abgeleitete Klassen\strut
\end{minipage} & \begin{minipage}[b]{0.53\columnwidth}\raggedright
Gemeinsamkeiten\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Fahrzeug\strut
\end{minipage} & \begin{minipage}[t]{0.29\columnwidth}\raggedright
Flugzeug, Boot, Automobil\strut
\end{minipage} & \begin{minipage}[t]{0.53\columnwidth}\raggedright
Position, Geschwindigkeit, Zulassungsnummer, Führerscheinpflicht\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Datei\strut
\end{minipage} & \begin{minipage}[t]{0.29\columnwidth}\raggedright
Foto, Textdokument, Datenbankauszug\strut
\end{minipage} & \begin{minipage}[t]{0.53\columnwidth}\raggedright
Dateiname, Dateigröße, Speicherort\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
Nachricht\strut
\end{minipage} & \begin{minipage}[t]{0.29\columnwidth}\raggedright
Email, SMS, Chatmessage\strut
\end{minipage} & \begin{minipage}[t]{0.53\columnwidth}\raggedright
Adressat, Inhalt, Datum der Versendung\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{figure}
\centering
\includegraphics{./img/08_OOP_Csharp/Vererbungsbeispiel.png}
\caption{Vererbungsbeispiel}
\end{figure}

\textbf{Umsetzung in C\#}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person \{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Fußballspieler : Person \{}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ rückennumemr;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Schiedsrichter : Person \{}
  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ assistent = }\KeywordTok{true}\NormalTok{;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Person Mensch = }\KeywordTok{new}\NormalTok{ Person \{geburtsjahr = }\DecValTok{1956}\NormalTok{, name = }\StringTok{"Löw"}\NormalTok{\};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0,4\} - \{1\}"}\NormalTok{, Mensch.}\FunctionTok{geburtsjahr}\NormalTok{, Mensch.}\FunctionTok{name}\NormalTok{ );}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Felder in der Instanz '\{0\}' von '\{1\}'"}\NormalTok{, Mensch.}\FunctionTok{name}\NormalTok{, Mensch);}
    \DataTypeTok{var}\NormalTok{ fields = Mensch.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{GetFields}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (FieldInfo field }\KeywordTok{in}\NormalTok{ fields)\{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{" x "}\NormalTok{ + field.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\emph{Merke}: Im Unterschied zu Klassen ist für Structs unter C\# keine
Vererbung möglich!
\end{quote}

In C\# kann jede Klassendefinition nur eine Basisklasse referenzieren.
Im Sinne einer realitätsnahen Modellierung wären Mehrfachvererbungen
aber durchaus zielführend. Ein Amphibienfahrzeug leitet sich aus den
Basisklassen Wasserfahrzeug und Landfahrzeug ab, ein Touchpad integriert
die Member von Eingabegerät und Ausgabegerät. C\# verzichtet drauf um
Mehrdeutigkeiten und Fehler ausschließen zu können, die aus gleichnamige
Membern hervorgehen.

** \ldots{} und wie erfolgt die Initialisierung?**

Konstruktoren werden nicht vererbt, jedoch

\begin{itemize}
\tightlist
\item
  kann mit dem Schlüsselwort \texttt{base} auf die Konstruktoren der
  Basisklasse zurückgegriffen werden.
\item
  wird sofern aus der abgeleiteten Klasse kein expliziter Aufruf
  erfolgt, der Standardkonstruktor der Basisklasse aufgerufen.
\end{itemize}

Ein Beispiel für den impliziten Aufruf des Standardkonstruktors:

\begin{itemize}
\tightlist
\item
  Fügen Sie einen leeren Standardkonstruktor mit einer Ausgabe in
  Fußballspieler ein public Fußballspieler()\{ Console.WriteLine(``ctor
  of Fußballspieler''); \}
\item
  nutzen Sie nun base um den zweiten in Person exisitierenden
  Konstruktor zu adressieren. public Fußballspieler() : base(1)
  --\textgreater{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person \{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}

  \KeywordTok{public} \FunctionTok{Person}\NormalTok{()\{}
\NormalTok{    geburtsjahr = }\DecValTok{1984}\NormalTok{;}
\NormalTok{    name = }\StringTok{"Orwell"}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"ctor of Person"}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \FunctionTok{Person}\NormalTok{(}\DataTypeTok{int}\NormalTok{ auswahl)\{}
    \KeywordTok{if}\NormalTok{ (auswahl == }\DecValTok{1}\NormalTok{) \{name = }\StringTok{"Micky Maus"}\NormalTok{;\}}
    \KeywordTok{else}\NormalTok{ \{name = }\StringTok{"Donald Duck"}\NormalTok{;\}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Fußballspieler : Person \{}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ rückennummer;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Fußballspieler champ = }\KeywordTok{new}\NormalTok{ Fußballspieler();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0,4\} - \{1\}"}\NormalTok{, champ.}\FunctionTok{geburtsjahr}\NormalTok{, champ.}\FunctionTok{name}\NormalTok{ );}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{zugriffsmechanismen}{%
\section{Zugriffsmechanismen}\label{zugriffsmechanismen}}

Wer darf auf welche Methoden, Properties, Variablen usw. zurückgreifen?
Mit der Einführung der Vererbung steigt die Komplexität der
Sichtbarkeitsregeln nochmals an.

\begin{verbatim}
| Zugriffsmodifizierer | Innerhalb eines Assemblys       || Außerhalb eines Assemblys      |
|                      | Vererbung      | Instanzierung  || Vererbung     | Instanzierung  |
| -------------------- | -------------- | -------------- || ------------- | -------------- |
| `public`             | ja             | ja             || ja            | ja             |
| `private`            | nein           | nein           || nein          | nein           |
| `protected`          | ja             | nein           || ja            | nein           |
| `internal`           | ja             | ja             || nein          | nein           |
| `ìnternal protected` | ja             | ja             || ja            | nein           |
\end{verbatim}

\texttt{protected} definiert eine differenzierten Zugriff für geerbte
und Instanz-Methoden. Während bei geerbten Elementen uneingeschränkt
zugegriffen werden kann, bleiben diese bei der bloßenn Anwendung
geschützt.

Die Konzepte von \texttt{internal} setzen diese Überlegung fort und
kontrollieren den Zugriff über Assembly-Grenzen.

\hypertarget{member-der-klasse}{%
\subsection{Member der Klasse}\label{member-der-klasse}}

\begin{verbatim}
                                      :  Variante I                       Variante II
                                      :  Übergreifendes gemeinsames       Separate Assemblies via
                                      :  Assembly                         dll-Referenz
                                      :
  +------------------------------+    : -.
  | Person                       |    :  |
  +------------------------------+    :  |
  | ✛ Geburtsjahr : int          |    :  |                                     +-------------------------+
  | ✛ Name : string              | ---:--|-------------------------------------| Person.dll              |
  | - email : string             |    :  |                                     +-------------------------+
  +------------------------------+    :  |                                                  |
  | ✛ BerechneAlter()            |    :  .    +------------------------+                    |
  | # SendEmail()                |    :   \   |  Assembly - Programm   |                    |
  +------------------------------+    :   /   +------------------------+                    |
                 ∆                    :  '                                                  |
                 |                    :  |                                                  |
                 |                    :  |                                                  |
  +------------------------------+    :  |                                -.                |
  | Fußballspieler               |    :  |                                 |                |
  +------------------------------+    :  |                                 |                |
  | - rückennummer: int          |    :  |                                 |                |
  | # geschosseneTore : int      |    :  |                                 |                |
  +------------------------------+    :  |                                 |                |
  | «property» Rückennummer: int |    :  |                                 |                |
  | - SendMessage()              |    :  |                                 |                |
  +------------------------------+    :  |                                 .                |
                "^"                   :  |                                  \   +-------------------------+
                 |                    :  |                                  /   | Assembly - Programm     |
                 |                    :  |                                 '    +-------------------------+
  +------------------------------+    :  |                                 |
  | Programm                     |    :  |                                 |
  +------------------------------+    :  |                                 |
  | ✛ Maier: Fußballspieler      |    :  |                                 |
  +------------------------------+    :  |                                 |
  | ✛ Main()                     |    :  |                                 |
  +------------------------------+    :  |                                 |
                                      : -'                                -'
\end{verbatim}

Kriterien der Zugriffsattribute:

\begin{itemize}
\tightlist
\item
  innerhalb/außerhalb einer Klasse
\item
  innerhalb der Vererbungshierachie einer Klasse / außerhalb (``nutzt'')
\item
  innerhalb des Assemblys / außerhalb
\end{itemize}

Für Methoden, Membervariablen etc. ist das klar, aber macht es Sinn
geschützte private Konstruktoren zu definieren?

Private Konstruktoren werden verwendet, um die Instanziierung einer
Klasse zu verhindern, die ausschließlich statische Elemente hat. Ein
Beispiel dafür ist die \texttt{Math} Klasse, die Methoden definiert, die
ohne eine Instanz der Klasse aufgerufen werden. Wenn alle Methoden in
der Klasse statisch sind, wäre es ggf. sinnvoll die gesamte Klasse
statisch anzulegen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Counter}
\NormalTok{\{}
    \KeywordTok{private} \FunctionTok{Counter}\NormalTok{() \{ \}}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ currentCount;}

    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int} \FunctionTok{IncrementCount}\NormalTok{()}
\NormalTok{    \{}
        \KeywordTok{return}\NormalTok{ ++currentCount;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Counter myCounter = }\KeywordTok{new} \FunctionTok{Counter}\NormalTok{();}
    \CommentTok{//Console.WriteLine()}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{klasse}{%
\subsection{Klasse}\label{klasse}}

Auch für Klassen selbst können Zugriffsattribute das Verhalten
bestimmen:

\begin{itemize}
\tightlist
\item
  Jede Klasse kann entweder als \texttt{public} oder \texttt{internal}
  deklariert sein (Standard: \texttt{internal})
\item
  Klassen können mit \texttt{sealed} versiegelt werden. Damit ist das
  Erben davon ausgeschlossen (Bsp.: System.String)
\end{itemize}

\hypertarget{polymorphie-in-c}{%
\section{Polymorphie in C}\label{polymorphie-in-c}}

Strukturieren Sie die Klassen ``Zug'', ``GüterZug'', ``PersonenZug'' und
``ICE'' in einer sinnvolle Vererbungshierarchie. Wie setzen Sie diese in
C\# Code um?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Zug}
\NormalTok{\{}
  \DataTypeTok{string}\NormalTok{ nummer;}
  \KeywordTok{public} \FunctionTok{Zug}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Zug-ctor"}\NormalTok{);}
\NormalTok{  \}}
  \KeywordTok{public} \FunctionTok{Zug}\NormalTok{(}\DataTypeTok{string}\NormalTok{ nummer)}
\NormalTok{  \{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{nummer}\NormalTok{ = nummer;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Spezifischer Zug-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ PersonenZug : Zug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{PersonenZug}\NormalTok{() : }\KeywordTok{base}\NormalTok{(}\StringTok{"Freiberg"}\NormalTok{)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"PersonenZug-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Ice : PersonenZug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Ice}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"ICE-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ GueterZug : Zug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{GueterZug}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"GueterZug-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Generiere neuen ICE "}\NormalTok{);}
\NormalTok{    Ice ice = }\KeywordTok{new} \FunctionTok{Ice}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Generieren neuen Güterzug");}
\NormalTok{    GueterZug gueter = }\KeywordTok{new} \FunctionTok{GueterZug}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Merke:} Konstruktoren werden nicht geerbt! Jede Unterklasse
deklariert (implizit) eigene Konstrukturen.
\end{quote}

Die Konstruktoren der Basisklasse können jeweils mit \texttt{base()}
aufgerufen werden. Erfolgt dies nicht, wird der parameterlose
Konstruktor der Basisklasse automatisch aufgerufen.

Die Ausgabe des oben aufgeführten Beispiels illustriert diese
Aufrufhierachie. Entfernen Sie dem \texttt{base} Aufruf in Zeile 23 und
erklären Sie den Unterschied.

In diesem Fall ist \texttt{Zug} die Basisklasse und
\texttt{PersonenZug}, \texttt{GueterZug} und \texttt{ICE} sind
abgeleitete Klassen.

Eine Variablen vom Basisdatentyp kann immer eine Instanz einer
abgeleiteten Klasse zugewiesen werden. Entsprechend unterscheidet man
dann zwischen dem statischen und dem dynamischen Typ der Variablen. Der
statische Typ ist immer der, der auch deklariert wurde. Der dynamische
Typ wird durch die aktuelle Referenz einer Instanz einer abgeleiteten
Klasse von Zug bestimmt und ist veränderlich.

\begin{longtable}[]{@{}lll@{}}
\toprule
Zuweisung & statischer Typ von Zug & dynamischer Typ von
Zug\tabularnewline
\midrule
\endhead
\texttt{Zug\ RB51\ =\ new\ Zug()} & Zug & Zug\tabularnewline
\texttt{RB51\ =\ new\ PersonenZug()} & Zug & PersonenZug\tabularnewline
\texttt{RB51\ =\ new\ Ice} & Zug & ICE\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{laufzeitpruxfcfung}{%
\subsection{Laufzeitprüfung}\label{laufzeitpruxfcfung}}

Entsprechend brauchen wir eine Typprüfung, die untersucht, ob die
Variable von einem bestimmten dynamischen Typ oder einem daraus
abgeleiteten Typ ist.

\begin{itemize}
\tightlist
\item
  der dynamische Typ einer Klasse kann zur Laufzeit geprüft werden
\item
  Typtest liefert bei null-Werten immer \texttt{false}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Zug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Zug}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Zug-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ PersonenZug : Zug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{PersonenZug}\NormalTok{() : }\KeywordTok{base}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"PersonenZug-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Ice : PersonenZug}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Ice}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"ICE-ctor"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Zug IC239 = }\KeywordTok{new} \FunctionTok{Ice}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IC239 ist ein Zug? "}\NormalTok{ + (IC239 }\KeywordTok{is}\NormalTok{ Zug)); }\CommentTok{// true}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IC239 ist ein PersonenZug? "}\NormalTok{ + (IC239 }\KeywordTok{is}\NormalTok{ PersonenZug)); }\CommentTok{// true}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IC239 ist ein Ice? "}\NormalTok{ + (IC239 }\KeywordTok{is}\NormalTok{ Ice)); }\CommentTok{// true}
\NormalTok{    IC239 = }\KeywordTok{null}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IC239 ist ein Ice? "}\NormalTok{ + (IC239 }\KeywordTok{is}\NormalTok{ Ice)); }\CommentTok{// false}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{grundidee-der-polymorphie}{%
\subsection{Grundidee der Polymorphie}\label{grundidee-der-polymorphie}}

Objekte einer Basisklasse können somit Instanzen einer abgeleiteten
Klassen umfassen. Damit lassen sich ähnlich einem Container sehr
unterschiedliche Objekte einer Vererbungslinie bündeln. Welche Frage
ergibt sich dann?

\textbf{Wir haben schon gesehen, dass die Vererbung unter anderem
Funktionen umfasst. Auf welche Klassenmember greife ich überhaupt
zurück?}

\begin{quote}
\textbf{Merke} Polymorphie bezeichnet die Tatsache, dass Klassenmember
ausgehend von Ihrer Nutzung ein unterschiedliches Verhalten erzeugen.
\end{quote}

Das heißt, die Methoden der Klassen einer Vererbungshierarchie können
auf verschiedenen Ebenen gleiche Signatur, aber unterschiedliche
Implementierungen haben. Welche der Methoden für ein gegebenes Objekt
aufgerufen wird, wird erst zur Laufzeit bestimmt (dynamische Bindung).

\begin{quote}
\textbf{Merke} Dynamische Bindung bezeichnet die Tatsache, dass bei
Aufruf einer überschriebenen Methode über eine Basisklassenreferenz oder
ein Interface trotzdem die Implementierung der abgeleiteten Klasse zum
Einsatz kommt.
\end{quote}

Dynamische Bindung erlaubt den Aufruf von überschriebenen Methoden aus
der Basisklasse heraus, wobei das Überschreiben muss in der Basisklasse
explizit erlaubt werden muss.

\hypertarget{uxfcberschreiben-von-methoden}{%
\subsection{Überschreiben von
Methoden}\label{uxfcberschreiben-von-methoden}}

In C\# können abgeleitete Klassen Methoden mit dem gleichen Namen wie
Basisklassen-Methoden enthalten. Diese Methoden müssen dann in der
Basisklasse mittels \texttt{virtual} als explizit überschreibbar
deklariert werden:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{() => Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"I'm an Animal"}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

Zum Überschreiben wird das Schlüsselwort \texttt{override} genutzt,
welches ein erneutes Deklarieren ermöglicht:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{() => Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Quack!"}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

Dabei müssen beide Methoden die gleiche Signatur haben, d.h. sie sollen
die den gleichen Namen und eine identische Parameterliste besitzen.
Ansonsten ist es nur Überladung!

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
\NormalTok{    Name = name;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"I'm an Animal"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Duck : Animal}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Duck}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name) \{ \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - Quack (\{1\})"}\NormalTok{, Name, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Cow : Animal}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Cow}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name) \{ \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - Muh (\{1\})"}\NormalTok{, Name, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal[] animals = }\KeywordTok{new}\NormalTok{ Animal[}\DecValTok{3}\NormalTok{]; }\CommentTok{// <- Statischer Typ  Animal}
\NormalTok{    animals[}\DecValTok{0}\NormalTok{] = }\KeywordTok{new} \FunctionTok{Duck}\NormalTok{(}\StringTok{"Alfred"}\NormalTok{);  }\CommentTok{// <- Dynamischer Typ Duck}
\NormalTok{    animals[}\DecValTok{1}\NormalTok{] = }\KeywordTok{new} \FunctionTok{Cow}\NormalTok{(}\StringTok{"Hilde"}\NormalTok{);}
\NormalTok{    animals[}\DecValTok{2}\NormalTok{] = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Bernd"}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{ (Animal anim }\KeywordTok{in}\NormalTok{ animals)}
\NormalTok{      anim.}\FunctionTok{makeSound}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die verschiedenen Tierklassen werden auf ihre Basisklasse gecastet,
trotzdem aber die individuelle Implementierung von makeSound ausgeführt.
Damit erlaubt die Polymorphie ein gleichartiges Handling
unterschiedlicher Klassen, die über die Vererbung miteinander verknüpft
sind.

Interessant ist die Möglichkeit die ursprüngliche Implementierung der
Methode aus der Basisklasse weiterhin zu nutzen und zu erweitern:

\begin{verbatim}
class Horse : Animal
{
  public Horse(string name) : base(name) { }
  public override void makeSound()
  {
    base.makeSound();
    Console.WriteLine("Ich ziehe Kutschen");
  }
}
\end{verbatim}

Dazu kann die Methode aus der Basisklasse über
\texttt{base.\textless{}Methodenname\textgreater{}} aufgerufen werden

\hypertarget{verdecken-von-methoden}{%
\subsection{Verdecken von Methoden}\label{verdecken-von-methoden}}

Sollen die spezifischen Methoden aber nur im Kontext der Klasse
realisierbar sein, so werden sie vor der Basisklasse ``verdeckt''. Dazu
ist das Schlüsselwort \texttt{new} erforderlich. In diesem Fall wird
keine dynamische Bindung realisiert, sondern die Methode der Basisklasse
aufgerufen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
\NormalTok{    Name = name;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"I'm an Animal"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Cat : Animal}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Cat}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name) \{ \}}
  \KeywordTok{public} \KeywordTok{new} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - Miau (\{1\})"}\NormalTok{, Name, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Cat myCat = }\KeywordTok{new} \FunctionTok{Cat}\NormalTok{(}\StringTok{"Kity"}\NormalTok{);}
\NormalTok{    myCat.}\FunctionTok{makeSound}\NormalTok{();}
\NormalTok{    Animal myCatAsAnimal = }\KeywordTok{new} \FunctionTok{Cat}\NormalTok{(}\StringTok{"KatziTatzi"}\NormalTok{);}
\NormalTok{    myCatAsAnimal.}\FunctionTok{makeSound}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Verdeckt werden können alle Klassenmember einer Basisklasse:

\begin{itemize}
\tightlist
\item
  Felder
\item
  Properties und Indexer
\item
  Methoden usw.
\end{itemize}

Wenn kein Schlüsselwort angegeben ist, wird implizit \texttt{new}
angenommen. Im oben genannten Beispiel folgt daraus, dass die in
\texttt{Cat} implementierte Ausgabe ausschließlich von Objekten des
statischen Typs \texttt{Cat} aufgerufen werden kann. Testen Sie die
Wirkung und ersetzen Sie \texttt{new} durch \texttt{override}.

Das folgende Beispiel entstammt dem C\# Programmierhandbuch und kann
unter
\href{https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/classes-and-structs/versioning-with-the-override-and-new-keywords}{Link}
nachgelesen werden.

Nehmen wir an, dass Ihre Software eine Grafikbibliothek nutzt, die
folgende Funktionen bietet:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ GraphicsClass}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{DrawLine}\NormalTok{() \{ \}}
    \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{DrawPoint}\NormalTok{() \{ \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Sie haben darauf aufbauend eine umfangreiches Framework geschieben und
in einer Klasse, die von GraphicsClass erbt eine Methode
\texttt{DrawRectangle} implementiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ YourDerivedGraphicsClass : GraphicsClass}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{DrawRectangle}\NormalTok{() \{ \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Nun entwickelt der Hersteller eine neue Version von GraphicsClass und
integriert eine eigene Realisierung von \texttt{DrawRectangle}. Sobald
Sie Ihre Anwendung neu gegen die Bibliothek kompilieren, erhalten Sie
vom Compiler eine Warnung. Diese Warnung informiert Sie darüber, dass
Sie das gewünschte Verhalten der DrawRectangle-Methode in Ihrer
Anwendung bestimmen müssen. Welche Möglichkeiten haben Sie - override
oder new oder umbenennen? Welche Konsequenzen ergeben sich daraus?

\hypertarget{versiegeln-von-klassen-oder-membern}{%
\section{Versiegeln von Klassen oder
Membern}\label{versiegeln-von-klassen-oder-membern}}

Die Mechanismen der Vererbung und Polymorphie können aber auch
aufgehoben werden, wenn ein Schutz notwendig ist. Das Schlüsselwort
\texttt{sealed} ermöglicht es sowohl Klassen von der Rolle als
Basisklasse auszuschließen als auch das Überschreiben von Methoden zu
verhindern.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ A \{\}}
\KeywordTok{sealed} \KeywordTok{class}\NormalTok{ B : A \{\}}
\end{Highlighting}
\end{Shaded}

Im Beispiel erbt die Klasse B von der Klasse A, allerdings kann keine
Klasse von der Klasse B erben.

\begin{quote}
\textbf{Merke:} Da Strukturen implizit versiegelt sind, können sie nicht
geerbt werden.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{sealed} \KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
\NormalTok{    Name = name;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"I'm a Crocodile"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Cat : Animal}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Cat}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name) \{ \}}
  \KeywordTok{public} \KeywordTok{sealed} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{   }\CommentTok{// sealed schützt die Cat.makeSound methode}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - Miau (\{1\})"}\NormalTok{, Name, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Tiger : Cat}
\NormalTok{\{}
  \KeywordTok{public} \FunctionTok{Tiger}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name) \{ \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - Grrrr (\{1\})"}\NormalTok{, Name, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Tiger evilTiger = }\KeywordTok{new} \FunctionTok{Tiger}\NormalTok{(}\StringTok{"Shir Khan"}\NormalTok{);}
\NormalTok{    evilTiger.}\FunctionTok{makeSound}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{casts-uxfcber-klassen}{%
\section{Casts über Klassen}\label{casts-uxfcber-klassen}}

Konvertierungen zwischen unterschiedlichen Datentypen lassen sich auch
auf Klassen anwenden, allerdings sind hier einige Besonderheiten zu
beachten.

\begin{itemize}
\tightlist
\item
  implizit auf die Basisklasse (upcast)
\item
  explizit auf die abgeleitete Klasse (downcast)
\end{itemize}

gecastet werden. Zunächst ein Beispiel für einen \emph{upcast} anhand
unseres Fußballbeispiels. Zugriffe auf Member, die in der Basisklasse
nicht enthalten sind führen logischerweise zum Fehler.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person \{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Fußballspieler : Person \{}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ rückennummer;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Fußballspieler champ = }\KeywordTok{new}\NormalTok{ Fußballspieler \{geburtsjahr = }\DecValTok{1956}\NormalTok{,}
\NormalTok{                                               name = }\StringTok{"Maier"}\NormalTok{,}
\NormalTok{                                               rückennummer = }\DecValTok{13}\NormalTok{\};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Felder in der Instanz '\{0\}' von '\{1\}'"}\NormalTok{, champ.}\FunctionTok{name}\NormalTok{, champ);}
    \DataTypeTok{var}\NormalTok{ fields = champ.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{GetFields}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (FieldInfo field }\KeywordTok{in}\NormalTok{ fields)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{" x "}\NormalTok{ + field.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{    Person human = champ;     }\CommentTok{// Castoperation Fußballspieler -> Person}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"human ist ein Fußballspieler? "}\NormalTok{ + (human }\KeywordTok{is}\NormalTok{ Fußballspieler));}
    \CommentTok{//Console.WriteLine(human.rückennummer);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

In umgekehrter Richtung vollzieht sich der \emph{Downcast}, eine Instanz
der Basisklasse wird auf einen abgeleiteten Typ gemappt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person \{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Fußballspieler : Person \{}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ rückennummer;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Fußballspieler champ = }\KeywordTok{new}\NormalTok{ Fußballspieler \{geburtsjahr = }\DecValTok{1956}\NormalTok{,}
\NormalTok{                                               name = }\StringTok{"Maier"}\NormalTok{,}
\NormalTok{                                               rückennummer = }\DecValTok{13}\NormalTok{\};}
\NormalTok{    Person mensch = champ;}
\NormalTok{    Fußballspieler champ2 = (Fußballspieler) mensch;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{beispiel-1}{%
\subsection{Beispiel}\label{beispiel-1}}

\emph{Upcast} und \emph{Downcast} \ldots{} wozu brauche ich das den?
Nehmen wir an, dass wir eine Ausgabemethode für beide Typen - Person und
Fußballspieler - benötigen. Ja, es wäre möglich diese als Memberfunktion
zu implementieren, problematisch wäre aber dann, dass wir an
unterschiedlichen Stellen im Code spezifische Befehle für die Ausgabe in
der Konsole zu stehen haben. Sollen die Log-Daten nun plötzlich in eine
Datei ausgegeben werden, müsste diese Anpassung überall vollzogen
werden. Entsprechend ist eine externe (statische) Logger-Klasse
wesentlich geeigneter diese Funktionalität zu kapseln. Allerdings wäre
dann ein überladen der entsprechenden Ausgabefunktion mit allen
vorkommenden Typen notwendig. Dies kann durch entsprechende Casts
umgangen werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Person}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Fußballspieler : Person}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ rückennummer;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{static} \KeywordTok{class}\NormalTok{ Logger}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{printPerson}\NormalTok{(Person person)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - \{1\}"}\NormalTok{, person.}\FunctionTok{name}\NormalTok{, person.}\FunctionTok{geburtsjahr}\NormalTok{);}
      \KeywordTok{if}\NormalTok{ (person }\KeywordTok{is}\NormalTok{ Fußballspieler)}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - \{1\}"}\NormalTok{, person.}\FunctionTok{name}\NormalTok{, (person }\KeywordTok{as}\NormalTok{ Fußballspieler).}\FunctionTok{r}\NormalTok{ückennummer);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{     Person Mensch = }\KeywordTok{new}\NormalTok{ Person \{geburtsjahr = }\DecValTok{1956}\NormalTok{,}
\NormalTok{                                name = }\StringTok{"Maier"}\NormalTok{\};}
\NormalTok{     Logger.}\FunctionTok{printPerson}\NormalTok{(Mensch);}
\NormalTok{     Fußballspieler Champ = }\KeywordTok{new}\NormalTok{ Fußballspieler\{geburtsjahr = }\DecValTok{1967}\NormalTok{,}
\NormalTok{                                               name = }\StringTok{"Müller",}
\NormalTok{                                               rückennummer = }\DecValTok{13}\NormalTok{\};}
\NormalTok{     Logger.}\FunctionTok{printPerson}\NormalTok{(Champ);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-8}{%
\section{Aufgaben}\label{aufgaben-8}}

\begin{itemize}
\tightlist
\item
  {[} {]}
\end{itemize}

\hypertarget{abstrakte-klassen-und-interfaces}{%
\chapter{Abstrakte Klassen und
Interfaces}\label{abstrakte-klassen-und-interfaces}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Konzepte\ Abstrakter\ Klassen\ und\ Interfaces}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/10_AbstrakteKlassenUndInterfaces.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{auf-nachfrage-3}{%
\section{Auf Nachfrage \ldots{}}\label{auf-nachfrage-3}}

Wozu brauche ich das? Bisher bin ich auch gut ohne OOP ausgekommen
\ldots{}

Nutzung von objektorientierten Konzepten im Python Projekt
\href{https://github.com/TUBAF-IFI-DiPiT/github2pandas}{github2pandas}.

\hypertarget{abstrakte-klassen-abstrakte-methoden}{%
\section{Abstrakte Klassen / Abstrakte
Methoden}\label{abstrakte-klassen-abstrakte-methoden}}

Mit \texttt{virtual} werden einzelne Methoden spezifiziert, die durch
die abgeleiteten Klassen implmentiert werden. Die Basisklasse hält aber
eine ``default'' Implementierung bereit. Letztendich kann man diesen
Gedanken konsequent weiter treiben und die Methoden der Basisklasse auf
ein reines Muster reduzieren, dass keine eigenen Implementierungen
umfasst.

Diese Aufgabe übernehmen abstrakte Klassen und abstrakte Methoden. Eine
abstrakte Klasse:

\begin{itemize}
\tightlist
\item
  kann nicht instantiiert werden
\item
  kann abstrakte Methoden umfassen
\item
  ist oft als Startpunkt(e) einer Vererbungshierarchie gedacht sind.
\end{itemize}

Innerhalb der Klasse können abstrakte Methoden integriert werden, die

\begin{itemize}
\tightlist
\item
  implizit als virtuelle Methode implementiert angelegt werden
\item
  entsprechend keinen Methodenkörper umfassen
\end{itemize}

Eine nicht abstrakte Klasse, die von einer abstrakten Klasse abgeleitet
wurde, muss Implementierungen aller geerbten abstrakten Methoden und
Accessoren enthalten.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{abstract} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
\NormalTok{    Name = name;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{abstract} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Corcodile : Animal\{}
  \KeywordTok{public} \FunctionTok{Corcodile}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name) : }\KeywordTok{base}\NormalTok{(name)\{}
\NormalTok{    Name = name;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"I'm a Crocodile"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Corcodile A = }\KeywordTok{new} \FunctionTok{Corcodile}\NormalTok{(}\StringTok{"Tuffy"}\NormalTok{);}
\NormalTok{    A.}\FunctionTok{makeSound}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Abstrakte Klassen dienen somit als Template für nachgeordnete
Unterklassen. Neben Methoden können auch Properties und Indexer als
abstrakt deklariert werden.

Warum macht es keinen Sinn eine abstrakte Klasse als \texttt{sealed} zu
deklarieren?

\hypertarget{interfaces}{%
\section{Interfaces}\label{interfaces}}

Interfaces setzen die Idee der abstrakten Klassen konsequent fort und
umfassen nur abstrakte Member. Sie bilden die Signatur einer Klasse, in
der Methoden, Properties, Indexer und Events erfasst werden.

\begin{quote}
Merke: Interfaces umfassen keine Felder!
\end{quote}

Charakteristik von Interfaces:

\begin{itemize}
\tightlist
\item
  alle Bestandteile aus einem Interface müssen implementiert werden
\item
  Klassen „implementieren`` Interfaces und „erben`` von Basisklassen
\item
  Interfaces haben das Schlüsselwort \texttt{interface} und fangen im
  allgemeinen mit dem Buchstaben I an
\item
  alle Elemente sind implizit \texttt{abstract} und \texttt{public}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{interface}\NormalTok{ IShape}
\NormalTok{\{}
  \DataTypeTok{double} \FunctionTok{Area}\NormalTok{();}
  \DataTypeTok{double} \FunctionTok{Scope}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Rectangular : IShape   }\CommentTok{// Rectangular implementiert das Interface IShape}
\NormalTok{\{}
  \DataTypeTok{double}\NormalTok{ area;}
  \DataTypeTok{double}\NormalTok{ scope;}
  \KeywordTok{public} \DataTypeTok{double} \FunctionTok{Area}\NormalTok{() => area;}
  \KeywordTok{public} \DataTypeTok{double} \FunctionTok{Scope}\NormalTok{() => scope;}
  \KeywordTok{public} \FunctionTok{Rectangular}\NormalTok{(}\DataTypeTok{double}\NormalTok{ sideA, }\DataTypeTok{double}\NormalTok{ sideB)}
\NormalTok{  \{}
\NormalTok{    area = sideA * sideB;}
\NormalTok{    scope = }\DecValTok{2}\NormalTok{ * sideA + }\DecValTok{2}\NormalTok{ * sideB;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Rectangular rect = }\KeywordTok{new} \FunctionTok{Rectangular}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Area: \{0\}, "}\NormalTok{ + }\StringTok{"Scope: \{1\}"}\NormalTok{, rect.}\FunctionTok{Area}\NormalTok{(), rect.}\FunctionTok{Scope}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Eine Klasse kann nur von einer anderen Klasse erben, aber beliebig viele
Interfaces implementieren.

Schnittstellen werden verwendet:

\begin{itemize}
\tightlist
\item
  um eine lose Kopplung zu erreichen.
\item
  um eine vollständige Abstraktion zu erreichen.
\item
  um komponentenbasierte Programmierung zu erreichen
\item
  um Mehrfachvererbung und Abstraktion zu erreichen.
\end{itemize}

\textbf{Vererbung}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{interface}\NormalTok{ IBaseInterface \{ }\DataTypeTok{void} \FunctionTok{M}\NormalTok{(); \}}
\KeywordTok{interface}\NormalTok{ IDerivedInterface : IBaseInterface \{ }\DataTypeTok{void} \FunctionTok{N}\NormalTok{(); \}}

\KeywordTok{class}\NormalTok{ A : IBaseInterface}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{M}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Methode M in \{0\}"}\NormalTok{, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ B : IDerivedInterface}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{M}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Methode M in \{0\}"}\NormalTok{, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{N}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Methode N in \{0\}"}\NormalTok{, }\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    IBaseInterface t1 = }\KeywordTok{new} \FunctionTok{A}\NormalTok{();    }\CommentTok{// Statischer Typ IBaseInterface, dynamischer class A}
\NormalTok{    IBaseInterface t2 = }\KeywordTok{new} \FunctionTok{B}\NormalTok{();    }\CommentTok{// Statischer Typ IBaseInterface, dynamischer class B}
\NormalTok{    t1.}\FunctionTok{M}\NormalTok{();}
\NormalTok{    t2.}\FunctionTok{M}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(t2 }\KeywordTok{is}\NormalTok{ IDerivedInterface);}
\NormalTok{    (t2 }\KeywordTok{as}\NormalTok{ IDerivedInterface).}\FunctionTok{N}\NormalTok{();}
\NormalTok{    (t2 }\KeywordTok{as}\NormalTok{ B).}\FunctionTok{N}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Es besteht keine Vererbungshierarchie zwischen den beiden Klassen
\texttt{A} und \texttt{B}! Vielmehr ergibt sich ein neuer Zusammenhang,
die gemeinsame Implementierung eines Musters an Membern.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/TP113e8m44NtSufPwW8EG0W1eWiMUeVQ3Z99AMOwkb7lBb5H4h6hvkUzdvyfenhHS-_1Kwke0meVEqN7GbPv262zYH6RsaHgWfAqnXBc-UTV58XNmF7jLckuJ_o6X2_a_YWlOVyKtaOrjSp3-XlEZONsMvgET8PDV_BKKr0cKPZFdgZgDqsIXS4PRkMW01qxGijYFG6K5DnuhGS0}
\caption{ClassStructure}
\end{figure}

Die Visualisierung von Klassen und deren Abhängigkeiten mit plantUML ist
eine Möglichkeit einen raschen Überblick über bestimmte Zusammenhänge zu
gewinnen. In den folgenden Materialien wird dies intensiv genutzt.

\hypertarget{interfaces-vs.-abstrakte-klassen}{%
\subsection{Interfaces vs.~Abstrakte
Klassen}\label{interfaces-vs.-abstrakte-klassen}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.38\columnwidth}\raggedright
interface\strut
\end{minipage} & \begin{minipage}[b]{0.56\columnwidth}\raggedright
abstract class\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.38\columnwidth}\raggedright
viele Interfaces möglich\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
immer nur eine Basisklasse\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.38\columnwidth}\raggedright
speichert keine Daten\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
kann Felder umfassen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.38\columnwidth}\raggedright
keine Konstruktorensignaturen\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
kann Konstruktoren umfassen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.38\columnwidth}\raggedright
beinhaltet nur Methodensignaturen\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
kann Signaturen und Implementierungen integrieren\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.38\columnwidth}\raggedright
keine Zugriffsmodifizierer\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
beliebige Zugriffsmodifizierer\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.38\columnwidth}\raggedright
keine statischen Member\strut
\end{minipage} & \begin{minipage}[t]{0.56\columnwidth}\raggedright
statische Member möglich\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{quote}
Merke: Interfaces geben keine Struktur vor, sondern nur ein Verhalten!
\end{quote}

\hypertarget{bedeutung-von-interfaces}{%
\subsection{Bedeutung von Interfaces}\label{bedeutung-von-interfaces}}

Die C\# Bibliothek implementiert eine Vielzahl von Interfaces, die
insbesondere für die Handhabung von Datenstrukturen in jedem Fall
genutzt werden sollten.

Informieren Sie sich unter
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.ilist?view=netcore-3.1}{Link}
über die wichtigsten davon wie:

\begin{itemize}
\tightlist
\item
  IEnumerable, IEnuerator
\item
  IList
\item
  IComparable
\item
  ICollection
\item
  \ldots{}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{ComponentModel}\NormalTok{.}\FunctionTok{Design}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Cat: IComparable}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\}}
    \KeywordTok{public} \DataTypeTok{int} \FunctionTok{CompareTo}\NormalTok{(}\DataTypeTok{object}\NormalTok{ obj)}
\NormalTok{    \{}
        \KeywordTok{if}\NormalTok{ (!(obj }\KeywordTok{is}\NormalTok{ Cat))}
\NormalTok{        \{}
            \KeywordTok{throw} \KeywordTok{new} \FunctionTok{ArgumentException}\NormalTok{(}\StringTok{"Compared Object is not of Cat"}\NormalTok{);}
\NormalTok{        \}}
\NormalTok{        Cat cat = obj }\KeywordTok{as}\NormalTok{ Cat;}
        \KeywordTok{return}\NormalTok{ Name.}\FunctionTok{CompareTo}\NormalTok{(cat.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Cat[] cats = }\KeywordTok{new}\NormalTok{ Cat[]}
\NormalTok{    \{}
        \KeywordTok{new} \FunctionTok{Cat}\NormalTok{()  \{Name = }\StringTok{"Mizekatze"}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Cat}\NormalTok{()  \{Name = }\StringTok{"Beethoven"}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Cat}\NormalTok{()  \{Name = }\StringTok{"Alex"}\NormalTok{\},}
\NormalTok{    \};}
\NormalTok{    Array.}\FunctionTok{Sort}\NormalTok{(cats);}
\NormalTok{    Array.}\FunctionTok{ForEach}\NormalTok{(cats, x => Console.}\FunctionTok{WriteLine}\NormalTok{(x.}\FunctionTok{Name}\NormalTok{));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufluxf6sung-von-namenskonflikten}{%
\subsection{Auflösung von
Namenskonflikten}\label{aufluxf6sung-von-namenskonflikten}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{interface}\NormalTok{ IInterfaceA\{}
  \DataTypeTok{void} \FunctionTok{M}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{interface}\NormalTok{ IInterfaceB\{}
  \DataTypeTok{void} \FunctionTok{M}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ SampleClass : IInterfaceA, IInterfaceB}
\NormalTok{\{}
    \CommentTok{// Hier ist die zuordnung nicht eindeutig}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{M}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Gib irgendwas aus!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    SampleClass sample = }\KeywordTok{new} \FunctionTok{SampleClass}\NormalTok{();}
\NormalTok{    sample.}\FunctionTok{M}\NormalTok{();}
\NormalTok{    IInterfaceA A = sample;}
\NormalTok{    IInterfaceB B = sample;}
\NormalTok{    A.}\FunctionTok{M}\NormalTok{();}
\NormalTok{    B.}\FunctionTok{M}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Wenn zwei Schnittstellenmember nicht dieselbe Funktion durchführen
sollen muss diese separat implementiert werden. Hierzu wird ein
Klassenmember erstellt, der sich explizit auf das Interface bezieht und
den Namen der Schnittstelle benennt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ SampleClass : IInterfaceA, IInterfaceB}
\NormalTok{\{}
    \CommentTok{// Hier ist die zuordnung nicht eindeutig}
    \DataTypeTok{void}\NormalTok{ IInterfaceA.}\FunctionTok{M}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IInterfaceA - Gib irgendwas aus!"}\NormalTok{);}
\NormalTok{    \}}

    \DataTypeTok{void}\NormalTok{ IInterfaceB.}\FunctionTok{M}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"IInterfaceB - Gib irgendwas aus!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Allerdings kann diese Funktion dann nur über die Schnittstelle und nicht
über die Klasse aufgerufen werden.

\hypertarget{aufgaben-9}{%
\section{Aufgaben}\label{aufgaben-9}}

\begin{itemize}
\tightlist
\item
  {[} {]} Setzen Sie sich mit den Konzepten von Interfaces auseinander!
\end{itemize}

!?\href{https://www.youtube.com/watch?v=_Zvi21_kMw4}{Interfaces}

!?\href{https://www.youtube.com/watch?v=A7qwuFnyIpM}{Interfaces}

\hypertarget{versionsverwaltung-i}{%
\chapter{Versionsverwaltung I}\label{versionsverwaltung-i}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Motivation\ der\ Versionsverwaltung\ in\ der\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/11_VersionsverwaltungI.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{motivation}{%
\section{Motivation}\label{motivation}}

Was war das umfangreicheste Dokument, an dem Sie bisher gearbeitet
haben? Bei vielen sicher eine Hausarbeit am Gymnasium. Wie haben Sie
Ihren Fortschritt organisiert?

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Im schlimmsten Fall haben Sie sich gar keine Gedanken gemacht und
  immer wieder ins gleiche Dokument geschrieben, das in einem Ordner
  liegt, der alle zugehörigen Dateien umfasst.
\item
  Eine Spur besser ist die Idee wöchentlich neue Kopien des Ordners
  anzulegen und diese in etwa so zu benennen:
\end{enumerate}

\begin{verbatim}
▶ ls
myProject
myProject_test
myProject_newTest
myProject_Moms_corrections
...
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Wenn Sie ``einen Plan hatte'', haben Sie täglich eine Kopie aller
  Dateien in einem Ordner angelegt und diese systematisch benannt.
\end{enumerate}

\begin{verbatim}
▶ ls
myProject_01042021
myProject_02042021
myProject_03042021
...
\end{verbatim}

In den Ordnern gab es dann aber wieder das gleiche Durcheinander wie in
(2), weil Sie bestimmte Texte gern kurzfristig sichern wollten.
Teilweise haben sie diese dann gelöscht bevor die Kopie erstellt wurde,
meistens aber einfach in einem \texttt{sonstiges} Ordner belassen.

Überlegen Sie sich kurz, wie Sie vorgehen müssen, um Antworten auf die
folgenden Fragen zu finden:

\begin{itemize}
\tightlist
\item
  ``Wann wurde der letzte Stand der Datei x.y gelöscht?''
\item
  ``In welcher Version habe ich die Anpassung der Überschriften
  vorgenommen?''
\item
  ``Wie kann ich dies trotz anderer zwischenzeitlicher Änderungen
  rückgängig machen?''
\item
  ``Warum habe ich davon keine Kopie gemacht?''
\item
  ``\ldots{}''
\end{itemize}

In jedem Fall viel manuelle Arbeit \ldots{}

Und nun übertragen wir den Ansatz auf eine Softwareentwicklungsprojekt
mit vielen Mitstreitern. Die Herausforderungen potenzieren sich.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Die Erstellung der Tageskopie müsste synchron erfolgen.
\item
  Ich muss in die Ordner schauen, um zu sehen welche Anpassungen
  vorgenommen wurden.
\item
  Ich weiß nicht welche die aktuelle Version einer Datei ist.
\item
  Es existieren plötzlich mehrere Varianten einer Datei mit Änderungen
  an unterschiedlichen Codezeilen.
\item
  Ich kann den Code nicht kompilieren, weil einzelne Dateien fehlen.
\item
  Ich kann eine ältere Version der Software nicht finden - ``Gestern hat
  es noch funktioniert''.
\item
  Meine Änderungen wurden von einem Mitstreiter einfach überschrieben.
\end{enumerate}

\hypertarget{luxf6sungsansatz}{%
\subsection{Lösungsansatz}\label{luxf6sungsansatz}}

Eine Versionsverwaltung ist ein System, das zur Erfassung von Änderungen
an Dokumenten oder Dateien verwendet wird. Alle Versionen werden in
einem Archiv mit Zeitstempel und Benutzerkennung gesichert und können
später wiederhergestellt werden. Versionsverwaltungssysteme werden
typischerweise in der Softwareentwicklung eingesetzt, um Quelltexte zu
verwalten.

Ein Beispiel, wie ein Versionsmanagementsystem die Arbeit von verteilten
Autoren unterstützt ist die Implementierung von Wikipedia. Jede Änderung
eines Artikels wird dokumentiert. Alle Versionen bilden eine Kette, in
der die letzte Version als gültige angezeigt wird. Entsprechend der
Angaben kann nachvollzogen werden: wer wann was geändert hat. Damit ist
bei Bedarf eine Rückkehr zu früheren Version möglich.

\begin{figure}
\centering
\includegraphics{./img/11_VersionsverwaltungI/VersionenVonVersionsverwaltung.png}
\caption{VersionsmanagementWikipedia}
\end{figure}

Hauptaufgaben:

\begin{itemize}
\tightlist
\item
  Protokollierungen der Änderungen: Es kann jederzeit nachvollzogen
  werden, wer wann was geändert hat.
\item
  Wiederherstellung von alten Ständen einzelner Dateien: Somit können
  versehentliche Änderungen jederzeit wieder rückgängig gemacht werden.
\item
  Archivierung der einzelnen Stände eines Projektes: Dadurch ist es
  jederzeit möglich, auf alle Versionen zuzugreifen.
\item
  Koordinierung des gemeinsamen Zugriffs von mehreren Entwicklern auf
  die Dateien.
\item
  Gleichzeitige Entwicklung mehrerer Entwicklungszweige (engl. Branch)
  eines Projektes, was nicht mit der Abspaltung eines anderen Projekts
  (engl. Fork) verwechselt werden darf.
\end{itemize}

\hypertarget{strategien-zur-konfliktvermeidung}{%
\subsection{Strategien zur
Konfliktvermeidung}\label{strategien-zur-konfliktvermeidung}}

\textbf{Herausforderung}

Das Beispiel entstammt dem Buch \emph{Version Control with Subversion}
\footnote{Brian W. Fitzpatrick, Ben Collins-Sussman, C. Michael Pilato,
  Version Control with Subversion, 2nd Edition, O'Reilly Media}

Zwei Nutzer (Harry und Sally) arbeiten am gleichen Dokument (A), das auf
einem zentralen Server liegt:

\begin{itemize}
\tightlist
\item
  Beide führen verschiedene Änderungen an ihren lokalen Versionendes
  Dokuments durch.
\item
  Die lokalen Versionen werden nacheinander in das Repository
  geschrieben.
\item
  Sally überschreibt dadurch eventuell Änderungenvon Harry.
\end{itemize}

Die zeitliche Abfolge der Schreibzugriffe bestimmt welche Variante des
Dokuments A überlebt.

\begin{verbatim}
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |   A   |           |       |   A   |           |
|        +-------+           |       +-------+           |
|         /     \            |                           |
|    read/       \read       |                           |
|       /         \          |                           |
|      v           v         |                           |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A   |    |   A   |     | |   A'  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
| Erzeugen der lokalen Kopie | Barbeitung                |
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |   A'  |           |       |  A''  |           |
|        +-------+           |       +-------+           |
|         ^                  |              ^            |
|   write/                   |               \write      |
|       /                    |                \          |
|      /                     |                 \         |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A'  |    |  A''  |     | |   A'  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
|Harry schreibt seine Version|Sally übermittelt A''      |
+----------------------------+---------------------------+                     .
\end{verbatim}

\textbf{Lösung I - Exklusives Bearbeiten (Sequenzialisierung)}

Bei der pessimistische Versionsverwaltung (\emph{Lock Modify Unlock})
werden einzelne Dateien vor einer Änderung durch den Benutzer gesperrt
und nach Abschluss der Änderung wieder freigegeben werden. Während sie
gesperrt sind, verhindert das System Änderungen durch andere Benutzer.
Der Vorteil dieses Konzeptes ist, dass kein Zusammenführen von Versionen
erforderlich ist, da nur immer ein Entwickler eine Datei ändern kann.

\begin{verbatim}
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        ╔═══════╗           |       ╔═══════╗           |
|        ║   A   ║  locked   |       ║   A   ║  locked   |
|        ╚═══════╝           |       ╚═══════╝           |
|         ^/                 |             X             |
|    lock//read              |              \lock        |
|       //                   |               \           |
|      /v                    |                \          |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A   |    |       |     | |   A'  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
| Harry "locks", kopiert und | Sallys lock request wird  |
| beginnt die Bearbeitung    | blockiert                 |
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |   A'  |           |       |  A''  |           |
|        +-------+           |       +-------+           |
|         ^^                 |             ^\            |
|   write//unlock            |         lock \\read       |
|       //                   |               \\          |
|      //                    |                \v         |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A'  |    |  A''  |     | |   A'  |   |   A'  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
| Harry übermittelt seine    | Sally blockiert und liest |
| Version und löst den Lock  | die neue Version          |
+----------------------------+---------------------------+                     .
\end{verbatim}

Welche Aspekte sehen Sie an dieser Lösung kritisch?

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Administrative Probleme \ldots{} Gesperrte Dokumente werden vergessen
  zu entsperren.
\item
  Unnötige Sequentialisierung der Arbeit \ldots{} Wenn zwei Nutzer ein
  Dokument an verschiedenen Stellen ändern möchten, könnten sie dies
  auch gleichzeitig tun.
\item
  Keine Abbildung von übergreifenden Abhängigkeiten \ldots{} Zwei Nutzer
  arbeiten getrennt auf den Dokumenten A und B. Was passiert, wenn A von
  B abhängig ist? A und B passen nicht mehr zusammen. Die Nutzer müssen
  dieses Problem diskutieren.
\end{enumerate}

\textbf{Lösung II - Kollaboratives Arbeiten mit Mischen (Mergen)}

Optimistische Versionsverwaltungen (\emph{Copy Modify Merge}) versuchen
die die Schwächen der pessimistischen Versionsverwaltung zu beheben, in
dem sie gleichzeitige Änderungen durch mehrere Benutzer an einer Datei
zu lassen und anschließend diese Änderungen automatisch oder manuell
zusammen führen (Merge).

\begin{verbatim}
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |   A   |           |       |   A   |           |
|        +-------+           |       +-------+           |
|         /     \            |                           |
|    read/       \read       |                           |
|       /         \          |                           |
|      v           v         |                           |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A   |    |   A   |     | |   A'  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
| Erzeugen der lokalen Kopie | Barbeitung                |
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |  A''  |           |       |  A''  |           |
|        +-------+           |       +-------+           |
|              ^             |         X                 |
|               \write       |   write/                  |
|                \           |       /                   |
|                 \          |      /                    |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A'  |    |  A''  |     | |   A'  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
|Sally schreibt ihre Version |Harries Schreibversuch wird|
|                            |blockiert                  |
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |  A''  |           |       |  A''  |           |
|        +-------+           |       +-------+           |
|         /                  |                           |
|    read/                   |                           |
|       /                    |                           |
|      v                     |                           |
| +-------+    +-------+     | +-------+   +-------+     |
| | A',A''|    |  A''  |     | |   A*  |   |  A''  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
| Mergen der Kopien          | merge(A',A'')=A*          |
+----------------------------+---------------------------+
|        Repository          |       Repository          |
|        +-------+           |       +-------+           |
|        |   A*  |           |       |   A*  |           |
|        +-------+           |       +-------+           |
|         ^                  |              \            |
|   write/                   |               \read       |
|       /                    |                \          |
|      /                     |                 v         |
| +-------+    +-------+     | +-------+   +-------+     |
| |   A*  |    |  A''  |     | |   A*  |   |   A*  |     |
| +-------+    +-------+     | +-------+   +-------+     |
|   Harry        Sally       |   Harry       Sally       |
|                            |                           |
|Harry schreibt seine Version|Sally übermittelt A''      |
+----------------------------+---------------------------+                     .
\end{verbatim}

Ablauf:

\begin{itemize}
\tightlist
\item
  Harry und Sally kopierendas das Dokument A in ihre lokalen Ordner.
\item
  Beide arbeiten unabhängig daran und erzeugen die Versionen A' und A''
\item
  Sally schreibt als Erste das Dokument in das Repository zurück.
\item
  Harry kann das Dokument nun nicht mehr zurückschreiben, seine Version
  ist veraltet
\item
  Harry vergleicht seine lokale Version mit der aktuellen Version im
  Repository und mischt die Änderungen von Sally mit seinen Anpassungen
\item
  Die neue (gemischte) Version A* wird zurückgeschrieben.
\item
  Sally muss eine neue Leseoperation realisieren, da Ihre lokale Version
  veraltet ist.
\end{itemize}

Welche Konsequenzen ergeben sich daraus?

\begin{itemize}
\tightlist
\item
  Unser Dokument muss überhaupt kombinierbar sein! Auf ein binäres
  Format ließe sich das Konzept nicht anwenden!
\item
  Das Dokument liegt in zeitgleich in n-Versionen vor, die ggf.
  überlappende Änderungen umfassen.
\item
  Das zentrale Repository kennt die Version von Harry nur indirekt. Man
  kann zwar indirekt aus A'' und A* auf A' schließen, man verliert aber
  zum Beispiel die Information wann Harry seine Änderungen eingebaut
  hat.
\end{itemize}

Die Herausforderung liegt somit im Mischen von Dokumenten!

\hypertarget{mischen-von-dokumenten}{%
\subsection{Mischen von Dokumenten}\label{mischen-von-dokumenten}}

\textbf{Schritt 1: Identifikation von Unterschieden}

Zunächst einmal müssen wir feststellen an welchen Stellen es überhaupt
Unterschiede gibt. Welche Differenzen sehen Sie zwischen den beiden
Dokumenten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{TU}
\NormalTok{Bergakademie}
\NormalTok{Freiberg}
\NormalTok{Softwareentwicklung}
\NormalTok{Online Course}
\NormalTok{Sommersemester 2020}
\NormalTok{Lorem ipsum dolor sit amet, CONSETETUR sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]



\NormalTok{TU}
\NormalTok{Bergakademie}
\NormalTok{Freiberg}
\NormalTok{Softwareentwicklung}
\NormalTok{Sommersemester 2019}
\NormalTok{Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.}
\end{Highlighting}
\end{Shaded}

Offenbar wurden sowohl Lehrzeichen, als auch neue Zeilen eingeführt. In
anderen Zeilen wurden Inhalte angepasst.

Nutzen wir das Tool \texttt{diff} um diese Änderungen automatisiert
festzustellen. Die Zeilen, die mit \texttt{\textgreater{}} beginnen,
sind nur in der ersten Datei vorhanden, diejenigen, die mit
\texttt{\textless{}}, markieren das Vorkomen in der zweiten Datei. Die
einzelnen Blöcke werden durch sogenannte change commands
(„Änderungsbefehle``) getrennt, die angeben, welche Aktion (Zeilen
hinzufügen -- a, ändern -- c oder entfernen -- d) in welchen Zeilen
ausgeführt wurde.

\begin{verbatim}
▶diff DokumentV1.md DokumentV2.md
0a1,3
>
>
>
5,7c8,9
< Online Course
< Sommersemester 2020
< Lorem ipsum dolor sit amet, CONSETETUR sadipscing elitr, ...
---
> Sommersemester 2019
> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, ...
\end{verbatim}

\begin{quote}
\textbf{Merke}: Sehr lange Zeilen erschweren die Suche nach wirklichen
Änderungen!
\end{quote}

Dahinter steht das \emph{Longest Common Subsequence} Problem, dessen
Umsetzung kurz dargestellt werden soll.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{def}\NormalTok{ lcs_algo(S1, S2, m, n):}
\NormalTok{    L }\OperatorTok{=}\NormalTok{ [[}\DecValTok{0} \ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(n}\OperatorTok{+}\DecValTok{1}\NormalTok{)] }\ControlFlowTok{for}\NormalTok{ x }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(m}\OperatorTok{+}\DecValTok{1}\NormalTok{)]}

    \CommentTok{# Building the mtrix in bottom-up way}
    \ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(m}\OperatorTok{+}\DecValTok{1}\NormalTok{):}
        \ControlFlowTok{for}\NormalTok{ j }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(n}\OperatorTok{+}\DecValTok{1}\NormalTok{):}
            \ControlFlowTok{if}\NormalTok{ i }\OperatorTok{==} \DecValTok{0} \KeywordTok{or}\NormalTok{ j }\OperatorTok{==} \DecValTok{0}\NormalTok{:}
\NormalTok{                L[i][j] }\OperatorTok{=} \DecValTok{0}
            \ControlFlowTok{elif}\NormalTok{ S1[i}\DecValTok{-1}\NormalTok{] }\OperatorTok{==}\NormalTok{ S2[j}\DecValTok{-1}\NormalTok{]:}
\NormalTok{                L[i][j] }\OperatorTok{=}\NormalTok{ L[i}\DecValTok{-1}\NormalTok{][j}\DecValTok{-1}\NormalTok{] }\OperatorTok{+} \DecValTok{1}
            \ControlFlowTok{else}\NormalTok{:}
\NormalTok{                L[i][j] }\OperatorTok{=} \BuiltInTok{max}\NormalTok{(L[i}\DecValTok{-1}\NormalTok{][j], L[i][j}\DecValTok{-1}\NormalTok{])}

\NormalTok{    index }\OperatorTok{=}\NormalTok{ L[m][n]}

\NormalTok{    lcs_algo }\OperatorTok{=}\NormalTok{ [}\StringTok{""}\NormalTok{] }\OperatorTok{*}\NormalTok{ (index}\OperatorTok{+}\DecValTok{1}\NormalTok{)}
\NormalTok{    lcs_algo[index] }\OperatorTok{=} \StringTok{""}

\NormalTok{    i }\OperatorTok{=}\NormalTok{ m}
\NormalTok{    j }\OperatorTok{=}\NormalTok{ n}
    \ControlFlowTok{while}\NormalTok{ i }\OperatorTok{>} \DecValTok{0} \KeywordTok{and}\NormalTok{ j }\OperatorTok{>} \DecValTok{0}\NormalTok{:}

        \ControlFlowTok{if}\NormalTok{ S1[i}\DecValTok{-1}\NormalTok{] }\OperatorTok{==}\NormalTok{ S2[j}\DecValTok{-1}\NormalTok{]:}
\NormalTok{            lcs_algo[index}\DecValTok{-1}\NormalTok{] }\OperatorTok{=}\NormalTok{ S1[i}\DecValTok{-1}\NormalTok{]}
\NormalTok{            i }\OperatorTok{-=} \DecValTok{1}
\NormalTok{            j }\OperatorTok{-=} \DecValTok{1}
\NormalTok{            index }\OperatorTok{-=} \DecValTok{1}

        \ControlFlowTok{elif}\NormalTok{ L[i}\DecValTok{-1}\NormalTok{][j] }\OperatorTok{>}\NormalTok{ L[i][j}\DecValTok{-1}\NormalTok{]:}
\NormalTok{            i }\OperatorTok{-=} \DecValTok{1}
        \ControlFlowTok{else}\NormalTok{:}
\NormalTok{            j }\OperatorTok{-=} \DecValTok{1}

    \CommentTok{# Printing the sub sequences}
    \BuiltInTok{print}\NormalTok{(}\StringTok{"S1 : "} \OperatorTok{+}\NormalTok{ S1 }\OperatorTok{+} \StringTok{"}\CharTok{\textbackslash{}n}\StringTok{S2 : "} \OperatorTok{+}\NormalTok{ S2)}
    \BuiltInTok{print}\NormalTok{(}\StringTok{"LCS: "} \OperatorTok{+} \StringTok{""}\NormalTok{.join(lcs_algo))}


\NormalTok{S1 }\OperatorTok{=} \StringTok{"Das ist ein Test"}
\NormalTok{S2 }\OperatorTok{=} \StringTok{"und das ist ein weiterer Test mit mehr Zeichen"}
\NormalTok{m }\OperatorTok{=} \BuiltInTok{len}\NormalTok{(S1)}
\NormalTok{n }\OperatorTok{=} \BuiltInTok{len}\NormalTok{(S2)}
\NormalTok{lcs_algo(S1, S2, m, n)}
\end{Highlighting}
\end{Shaded}

@Pyodide.eval

\textbf{Schritt 2: Mischen}

In der Praxis wird zwischen zwei Szenarien unterschieden:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Mischen unabhängiger Dokumente (2-Wege-Mischen) - Ziel ist die
  Erzeugung eines neuen Dokumentes, dass die gemeinsamen Komponenten und
  individuelle Teilmengen vereint.
\item
  Mischen von Dokumenten mit gemeinsamen Ursprung (3-Wege-Mischen) -
  Ziel ist die Integration möglichst aller Änderungen der neuen
  Dokumente in eine weiterentwickelte Version des Ursprungsdokumentes
\end{enumerate}

\begin{quote}
Ein Paar von Änderung aus D1 bzw. D2 gegenüber einen Ausgangsdokument D0
kann unverträglich sein, wenn die Abbildung beider Änderungen in einem
gemeinsamen Dokument nicht möglich ist. In diesem Fall spricht man von
einem Konflikt.
\end{quote}

Bei einem Konflikt muss eine der beiden ̈Änderungen weggelassen werden.
Die Entscheidung darüber kann anhand von zwei Vorgehensweisen realisiert
werden:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Nicht-interaktives Mischen: Es wird zunächst ein Mischergebnis
  erzeugt, das beide Änderungen umfasst. Über eine entsprechende
  Semantik werden die notwendigerweise duplizierten Stellen
  hervorgehoben. Ein Vorteil dieser Vorgehensweise ist, dass ein
  beliebiges weitergehendes Editieren zur Konfliktauflösung möglich ist.
\item
  Interaktives Mischen: Ein Entwickler wird unmittelbar in den
  Mischprozess eingebunden und um ``Schritt-für-Schritt'' Entscheidungen
  gebeten. Denkbare Entscheidungen dabei sind:

  \begin{itemize}
  \item
    Übernahme der Änderung gemäß D1 oder D2,
  \item
    Übernahme keiner Änderung,
  \item
    Übernahme von modifizierten Änderung
  \end{itemize}
\end{enumerate}

\hypertarget{revisionen}{%
\subsection{Revisionen}\label{revisionen}}

Bislang haben wir lediglich einzelne Dateien betrachtet. Logischerweise
muss ein übergreifender Ansatz auch Ordnerstrukturen integrieren.

\begin{figure}
\centering
\includegraphics{./img/11_VersionsverwaltungI/Versionsverlauf.png}
\caption{ProblemKollaborativesArbeiten}
\end{figure}

Damit werden sowohl die Ordnerstruktur als auch die Dokumente als
Struktur, wie auch deren Inhalte, erfasst.

\begin{quote}
Wichtig für die Nachvollziehbarkeit der Entwicklung ist somit die
Kontinuität der Erfassung!
\end{quote}

Wenn sich der Ordner- oder Dateiname ändert wollen wir trotzdem noch die
gesamte History der Entwicklung innerhalb eines Dokuments kennen.
Folglich muss ein Link zwischen altem und neuem Namen gesetzt werden.

\hypertarget{formen-der-versionsverwaltung}{%
\subsection{Formen der
Versionsverwaltung}\label{formen-der-versionsverwaltung}}

\textbf{Lokale Versionsverwaltung} Bei der lokalen Versionsverwaltung
wird oft nur eine einzige Datei versioniert, diese Variante wurde mit
Werkzeugen wie SCCS und RCS umgesetzt. Sie findet auch heute noch
Verwendung in Büroanwendungen, die Versionen eines Dokumentes in der
Datei des Dokuments selbst speichern (Word).

\textbf{Zentrale Versionsverwaltung} Diese Art ist als
Client-Server-System aufgebaut, sodass der Zugriff auf ein Repository
auch über Netzwerk erfolgen kann. Durch eine Rechteverwaltung wird dafür
gesorgt, dass nur berechtigte Personen neue Versionen in das Archiv
legen können. Die Versionsgeschichte ist hierbei nur im Repository
vorhanden.

Dieses Konzept wurde vom Open-Source-Projekt Concurrent Versions System
(CVS) populär gemacht, mit Subversion (SVN) neu implementiert und von
vielen kommerziellen Anbietern verwendet.

\begin{verbatim}
                                +-----------------+
                                | V 21.09         |
                              +-----------------+ |
                              | V 21.10         | |
              Zentrales     +-----------------+ | |
              Repository    | V 21.11         | | |
                            |                 | |-+
                            |                 | |
                            |                 |-+
                            |                 |
                            +-----------------+
                                    |
          +-------------------------+--------------------------+
          |                         |                          |
  +-----------------+       +-----------------+       +-----------------+
  | V 21.11         |       | V 21.11         |       | V 21.11         |
  | ABCD            |       | GEFH            |       | IKLM            |
  |                 |       |                 |       |                 |
  +-----------------+       +-----------------+       +-----------------+
    User 1                    User 2                    User 3
    Lokale Kopien
\end{verbatim}

\textbf{Verteilte Versionsverwaltung} Die verteilte Versionsverwaltung
(DVCS, distributed VCS) verwendet kein zentrales Repository mehr. Jeder,
der an dem verwalteten Projekt arbeitet, hat sein eigenes Repository und
kann dieses mit jedem beliebigen anderen Repository abgleichen. Die
Versionsgeschichte ist dadurch genauso verteilt. Änderungen können lokal
verfolgt werden, ohne eine Verbindung zu einem Server aufbauen zu
müssen.

\begin{verbatim}
                                +-----------------+
                                | V 21.09         |
                              +-----------------+ |
                              | V 21.10         | |
              Zentrales     +-----------------+ | |
              Repository    | V 21.11         | | |
                            |                 | |-+
                            |                 | |
                            |                 |-+
                            |                 |
                            +-----------------+
                                    |
          +-------------------------+--------------------------+
          |                         |                          |
    +-----------------+      +-----------------+         +-----------------+
    | V 21.09         |      | V 21.09         |         | V 21.09         |
  +-----------------+ |    +-----------------+ |       +-----------------+ |
  | V 21.10         | |    | V 21.10         | |       | V 21.10         | |
+-----------------+ | |  +-----------------+ | |     +-----------------+ | |
| V 21.11         | | |  | V 21.11         | | |     | V 21.11         | | |
|                 | |-+  |                 | |-+   +-----------------+ | |-+
|                 | |    |                 | |     | V 21.12         | | |
|                 |-+    |                 |-+     |                 | |-+
|                 |      |                 |       |                 | |
+-----------------+      +-----------------+       |                 |-+
         |                        |                +-----------------+
         |                        |                          |
         |                        |                          |
+-----------------+       +-----------------+         +-----------------+
| V 21.11         |       | V 21.09         |         | V 21.12         |
| ABCD            |       | GEFH            |         | IKLM            |
|                 |       |                 |         |                 |
+-----------------+       +-----------------+         +-----------------+
  User 1                    User 2                      User 3
\end{verbatim}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.49\columnwidth}\raggedright
Zentrale Versionsverwaltung\strut
\end{minipage} & \begin{minipage}[b]{0.45\columnwidth}\raggedright
Verteilte Versionsverwaltung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.49\columnwidth}\raggedright
Historie liegt nur auf dem Server\strut
\end{minipage} & \begin{minipage}[t]{0.45\columnwidth}\raggedright
gesamte Historie ist den lokalen Repositiories bekannt\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.49\columnwidth}\raggedright
Zentrales Repository als Verbindungselement\strut
\end{minipage} & \begin{minipage}[t]{0.45\columnwidth}\raggedright
n gleichberechtigte Repositories\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.49\columnwidth}\raggedright
Konflikte bei Manipulation eines Dokumentes durch mehrere Autoren\strut
\end{minipage} & \begin{minipage}[t]{0.45\columnwidth}\raggedright
Existenz paralleler Versionen eines Dokumentes abgesichert\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.49\columnwidth}\raggedright
Sequenz von Versionen\strut
\end{minipage} & \begin{minipage}[t]{0.45\columnwidth}\raggedright
gerichteter azyklischer Graph\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{git}{%
\section{Git}\label{git}}

\textbf{Geschichte und Einsatz}

Die Entwicklungsgeschichte von git ist mit der des Linux Kernels
verbunden:

\begin{longtable}[]{@{}ll@{}}
\toprule
Jahr & Methode der Versionsverwaltungen\tabularnewline
\midrule
\endhead
1991 & Änderungen am Linux Kernel via patches und archive
files\tabularnewline
2002 & Linux Kernel mit dem Tool BitKeeper verwaltet\tabularnewline
2005 & Bruch zwischen der vertreibenden Firma und der Linux
Community\tabularnewline
2021 & Die aktuelle Version ist 2.31.1\tabularnewline
\bottomrule
\end{longtable}

2005 wurde einen Anforderungsliste für eine Neuentwicklung definiert.
Dabei wurde hervorgehoben, dass sie insbesondere sehr große Projekte
(Zahl der Entwickler, Features und Codezeilen, Dateien) unterstützen
können muss. Daraus entstand \texttt{Git} als freie Software zur
verteilten Versionsverwaltung von Dateien.

\begin{quote}
Git dominiert entweder als einzelne Installation oder aber eingebettet
in verschiedene Entwicklungsplattform die Softwareentwicklung!
\end{quote}

\textbf{Wie bekommen sie Git auf Ihren Windows-Rechner?}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Variante 1: als Integralen Bestandteil in Ihrer Entwicklungsumgebung
  (Visual Studio Code) Die großen IDEs umfassen einen eigenen
  Git-Client, für einfachere Editoren muss dieser meist nachinstalliert
  werden.
\item
  Variante 2: als unabhänigige Installation Unter
  \href{https://phoenixnap.com/kb/how-to-install-git-windows}{Link}
  findet sich eine Schritt-für-Schritt Beschreibung für die Installation
  von Git unter Windows. Dabei wird sowohl ein Shell als auch eine GUI
  installiert.
\item
  Variante 3: mittels cygwin Cygwin emuliert Linuxbefehle und Tools der
  Shell. Neben Compilern und einer Vielzahl von Entwicklertools können
  auch verschiedene Versionsverwaltungen installiert werden.
\end{enumerate}

Eine übergreifende Erklärung für die Installation gibt zum Beispiel
dieses \href{https://www.youtube.com/watch?v=Fk12ELJ9Bww}{Tutorial}.

\hypertarget{zustandsmodell-einer-datei-in-git}{%
\subsection{Zustandsmodell einer Datei in
Git}\label{zustandsmodell-einer-datei-in-git}}

Dateien können unterschiedliche Zustände haben, mit denen sie in
Git-Repositories markiert sind.

\begin{verbatim}
@startuml
hide empty description
[*] --> Untracked : Erzeugen einer Datei
Untracked --> Staged : Hinzufügen zum Repository
Unmodified --> Modified : Editierung der Datei
Modified --> Staged : Markiert als neue Version
Staged --> Unmodified : Bestätigt als neue Version
Unmodified --> Untracked : Löschen aus dem Repository
@enduml
\end{verbatim}

\begin{verbatim}
@startuml
hide empty description
[*] --> Untracked : Erzeugen einer Datei
Untracked --> Staged : Hinzufügen zum Repository\n <color:Red> ""git add""
Unmodified --> Modified : Editierung der Datei
Modified --> Staged : Markiert als neue Version\n  <color:Red>  ""git add""
Staged --> Unmodified : Bestätigt als neue Version\n   <color:Red>  ""git commit""
Unmodified --> Untracked : Löschen aus dem Repository\n   <color:Red>  ""git remove""
@enduml
\end{verbatim}

\hypertarget{grundlegende-anwendung-lokal}{%
\subsection{Grundlegende Anwendung
(lokal!)}\label{grundlegende-anwendung-lokal}}

\begin{quote}
\textbf{Merke:} Anders als bei svn können Sie mit git eine völlig
autonome Versionierung auf Ihrem Rechner realisieren. Ein Server ist
dazu \emph{zunächst} nicht nötig.
\end{quote}

Aus dem Zustandmodell einer Datei ergeben sich drei Ebenen auf der wir
eine Datei in Git Perspektivisch einordnen können - Arbeitsverzeichis,
Stage und Repository.

\begin{quote}
\textbf{Achtung:} Die folgende Darstellung dient hauptsächlich der
didaktischen Hinführung zum Thema!
\end{quote}

\begin{verbatim}
                     lokal                           remote
  ---------------------------------------------  --------------
  Arbeitskopie     "Staging"        Lokales          Remote
                                   Repository      Repository
                       |               |                          
                       |               |            Dazu kommen               
                       |               |            wir morgen!          
       +-+- - - - - - -|- - - - - - - -|                          
       | | Änderungen  |               |                          
       | |             |               |                          
       +-+             |               |                          
        |   git add    |               |                          
        |------------->|  git commit   |                          
        |              |-------------->|                          
       +-+             |               |                          
       | | weitere     |               |                          
       | | Änderungen  |               |                          
       +-+             |               |                          
        |   git add    |               |                          
        +------------->|  git commit   |                          
                       |-------------->|                          
                       |               |                                                 |               |                                       .
\end{verbatim}

Phase 1: Anlegen des Projektes und initaler Commit

\begin{verbatim}
mkdir GitBasicExample
cd GitBasicExample
git init
touch README.md
// Hier kommen jetzt einige Anpassungen in README.md dazu
git add README.md
git commit -m "Add first commit!"
git status
\end{verbatim}

Phase 2: Generieren unseres DotNet Projektes

\begin{verbatim}
cd GitBasicExample
dotnet new console -o MyApp
cd MyApp
dotnet run    // Nur zur Testzwecken
git status
git add MyApp.csproj
git add Program.cs
git commit -m "Add inital dotnet project!"
git log --oneline
\end{verbatim}

\begin{quote}
\textbf{Merke:} Beschränken Sie die versionierten Dateien auf ein
Minimum! Der gesamte Umfang des dotnet-Projektes gehört nur in seltenen
Fällen ins Repository!
\end{quote}

Phase 3: Arbeit im Projekt

\begin{verbatim}
// Veränderungen im Programmcode
git add Program.cs
git commit -m "Change output of project!"
git log --oneline
\end{verbatim}

Bis hier her haben wir lediglich eine Erfassung unserer Aktivitäten
umgesetzt. Wir können anhand der Log-Files einen Überblick darüber
behalten, wann welche Änderungen in welcher Datei realisiert wurden.

\hypertarget{kommando-zuruxfcck}{%
\subsection{``Kommando zurück''}\label{kommando-zuruxfcck}}

Nun wird es aber interessanter! Lassen Sie uns jetzt aber zwischen den
Varianten navigieren.

\textbf{Variante 1 - Reset}

\texttt{git\ reset} löscht die Historie bis zu einem Commit. Adressieren
können wir die Commits relativ zum \texttt{HEAD}
\texttt{git\ reset\ HEAD\textasciitilde{}1} oder mit der jeweiligen ID
\texttt{git\ reset\ \textless{}commit-id\textgreater{}}.

Wichtig sind dabei die Parameter des Aufrufes:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.20\columnwidth}\raggedright
Attribut\strut
\end{minipage} & \begin{minipage}[b]{0.74\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{git\ reset\ -\/-soft}\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
uncommit changes, changes are left staged (index).\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{git\ reset\ -\/-mixed}\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
(default): uncommit + unstage changes, changes are left in working
tree.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
\texttt{git\ reset\ -\/-hard}\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
uncommit + unstage + delete changes, nothing left.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\texttt{text\ @ExplainGit.eval\ git\ commit\ -m\ V1\ git\ commit\ -m\ V2\ git\ commit\ -m\ V3}

\textbf{Variante 2 - Revert}

Häufig möchte man nicht die gesamte Historie zurückgehen und alle
Änderungen verwerfen, sondern vielmehr eine Anpassung zurücknehmen und
deren Auswirkung korrigieren. Eine Anpassung würde aber bedeuten, dass
alle nachgeordneten Commits angepasst werden müssten.

\texttt{text\ @ExplainGit.eval\ git\ commit\ -m\ V1\ git\ commit\ -m\ V2\ git\ commit\ -m\ V3}

\textbf{Variante 3 - Rebase}

Ein sehr mächtiges Werkzeug ist der interaktive Modus von
\texttt{git\ rebase}. Damit kann die Geschichte neugeschrieben werden,
wie es die git Dokumentation beschreibt. Im Grund können Sie damit Ihre
Versionsgeschichte ``aufräumen''. Einzelne Commits umbenennen, löschen
oder fusionieren. Dafür besteht ein eigenes Interface, dass Sie mit dem
folgenden Befehl aufrufen können:

\begin{verbatim}
▶git rebase -i HEAD~5

pick d2a06e4 Update main.yml
pick 78839b0 Reconfigures checkout
pick f70cfc7 Replaces wildcard by specific filename
pick 05b76f3 New pandoc command line
pick c56a779 Corrects md filename

# Rebase a3b07d4..c56a779 onto a3b07d4 (5 commands)
#
# Commands:
# p, pick = use commit
# r, reword = use commit, but edit the commit message
# e, edit = use commit, but stop for amending
# s, squash = use commit, but meld into previous commit
# f, fixup = like "squash", but discard this commit's log message
# x, exec = run command (the rest of the line) using shell
# d, drop = remove commit
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out
\end{verbatim}

Als Anwendungsfall habe ich mir meine Aktivitäten im Kontext einiger
Experimente mit den GitHub Actions, die im nächsten Abschnitt kurz
eingeführt werden, ausgesucht. Schauen wir zunächst auf den
ursprünglichen Stand. Alle Experimente drehten sich darum, eine Datei
anzupassen und dann auf dem Server die Korrektheit zu testen.

\begin{verbatim}
▶
c56a779 - Sebastian Zug, 7 hours ago : Corrects md filename
05b76f3 - Sebastian Zug, 7 hours ago : New pandoc command line
f70cfc7 - Sebastian Zug, 8 hours ago : Replaces wildcard by specific filename
78839b0 - Sebastian Zug, 21 hours ago : Reconfigures checkout
d2a06e4 - Sebastian Zug, 22 hours ago : Update main.yml
...
aa04051 - Sebastian Zug, 23 hours ago : Restart action activities
4b22d12 - Sebastian Zug, 23 hours ago : Deleting old state
64075cc - Sebastian Zug, 24 hours ago : Update main.yml
01f341b - Sebastian Zug, 24 hours ago : Missing links added
...
29c8e68 - Sebastian Zug, 11 days ago : Update README.md
\end{verbatim}

Unser lokaler Branch liegt nach dem Löschen aber um einiges hinter dem
auf GitHub entsprechend müssen wir mit \texttt{git\ push\ -\/-force} das
Überschreiben erzwingen.

\hypertarget{was-kann-schief-gehen}{%
\subsection{Was kann schief gehen?}\label{was-kann-schief-gehen}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Ups, die Datei sollte im Commit nicht dabei sein (Unstage)}
\end{enumerate}

\begin{verbatim}
... ein neues Feature wird in sourceA.cs implementiert
... ein Bug in Codedatei sourceB.cs korrigiert
... wir wollen schnell sein und fügen alle Änderungen als staged ein
git add *
... Aber halt! Die beiden Dinge gehören doch nicht zusammen!
git reset
\end{verbatim}

\texttt{text\ @ExplainGit.eval\ git\ commit\ -m\ V1\ git\ commit\ -m\ V2\ git\ commit\ -m\ V3}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  \textbf{Ups, eine Datei in der Version vergessen! (Unvollständiger
  Commit)}
\end{enumerate}

\begin{verbatim}
... eine neue Codedatei source.cs anlegen
... zugehörige Anpassungen in der README.md erklären
git add README.md
git commit -m "Hinzugefügt neues Feature"
... Leider wurde die zugehörige Code Datei vergessen!
git add source.cs
git commit --amend --no-edit
... Hinzufügen der Datei ohne die Log Nachricht anzupassen
\end{verbatim}

\hypertarget{ich-sehe-was-was-du-nicht-siehst}{%
\subsection{Ich sehe was, was Du nicht siehst
\ldots{}}\label{ich-sehe-was-was-du-nicht-siehst}}

Häufig bettet ein Projekt Dateien ein, die Git nicht automatisch
hinzufügen oder schon gar nicht als „nicht versioniert`` anzeigen soll.
Beispiele dafür sind automatisch generierte Dateien, wie Log-Dateien
oder die Binaries, die von Ihrem Build-System erzeugt wurden. In solchen
Fällen können Sie die Datei .gitignore erstellen, die eine Liste mit
Vergleichsmustern enthält. Hier ist eine .gitignore Beispieldatei:

\begin{verbatim}
# ignore all .a files
*.a

# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in any directory named build
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory and any of its subdirectories
doc/**/*.pdf
\end{verbatim}

Unter \href{https://github.com/github/gitignore}{gitIgnoreBeispiele}
gibt es eine ganze Sammlung von Konfigurationen für bestimmte
Projekttypen.

\hypertarget{kommandozeile-oder-keine-kommandozeile}{%
\section{Kommandozeile oder keine
Kommandozeile}\label{kommandozeile-oder-keine-kommandozeile}}

Die Editoren unterstützen den Nutzer bei der Arbeit, in dem Sie die
eigentlichen Commandozeilentools rund um die Arbeitsfläche anordnen.

\includegraphics{./img/12_VersionsverwaltungII/ArbeitmitGitImEditor.png}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.03\columnwidth}\raggedright
Bereich\strut
\end{minipage} & \begin{minipage}[b]{0.91\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.03\columnwidth}\raggedright
A\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Darstellung der Dateien im Ordner, wobei der Typ über die führenden
Symbole und der Zustand über die Farbgebung hervorgehoben wird (grün
untracked Files, orange getrackte Dateien mit Änderungen).\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
B\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Hier erfolgt die Darstellung der \texttt{Staged\ Changes} also der
registrierten Änderungen. Offenbar ist die Datei
\texttt{02\_Versionsverwaltung.md} verändert worden, ohne dass ein
entsprechendes \texttt{git\ add\ 02\_Versionsverwaltung.md} ausgeführt
wurde.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
C\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Die Übersicht der erfassten Änderngen mit einem \texttt{stage} Status
übernimmt die aus der darüber geführten Liste, wenn der Befehlt
ausgeführt wurde. Offenbar ist dies fr \texttt{.gitignore} der
Fall.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
D\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Die Übertragung ins lokale Repository wird gerade vorbereitet. Die
Commit-Nachricht ist bereits eingegeben. Der Button zeigt den
zugehörigen Branch.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
G An dieser Stelle wird ein kurzes Log der letzten Commits ausgeben.
Dies ermöglich das effiziente Durchsuchen der nach bestimmten
Veränderungen.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Die identischen Informationen lassen sich auch auf der Kommandozeile
einsehen:

\begin{verbatim}
▶git status
On branch SoSe2020dev
Your branch is up to date with 'origin/SoSe2020dev'.

Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        modified:   .gitignore

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)


        modified:   02_Versionsverwaltung.md
        deleted:    03_ContinuousIntegration.md

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        03_VersionsverwaltungII.md
        code/
        img/03_VersionsverwaltungII/
\end{verbatim}

\begin{verbatim}
▶git log
commit d7603554c958c478f1ec600bd3ccea437d91ae9a (HEAD -> SoSe2020dev, origin/SoSe2020dev)
Author: Sebastian Zug <Sebastian.Zug@informatik.tu-freiberg.de>
Date:   Thu Apr 9 13:16:38 2020 +0200

    First version of L3

commit 39fc168222f4c7a7d062adcaccff17fe34bccbe3
Author: Sebastian Zug <Sebastian.Zug@informatik.tu-freiberg.de>
Date:   Thu Apr 9 13:16:12 2020 +0200

    First version of L02

commit 350c127c7dfbc61a81edc8bd148f605ee681a07a

Author: Sebastian Zug <Sebastian.Zug@informatik.tu-freiberg.de>
Date:   Tue Apr 7 07:01:02 2020 +0200

    Final version of L1
....
\end{verbatim}

\hypertarget{aufgaben-10}{%
\section{Aufgaben}\label{aufgaben-10}}

\begin{itemize}
\tightlist
\item
  {[} {]} Legen Sie sich einen GitHub Account an.
\item
  {[} {]} Experimentieren Sie mit lokalen Repositories!
\end{itemize}

\hypertarget{versionsverwaltung-ii}{%
\chapter{Versionsverwaltung II}\label{versionsverwaltung-ii}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Versionsverwaltung\ mit\ Git\ und\ GitHub}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/12_VersionsverwaltungII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{verteiltes-versionsmanagement}{%
\section{Verteiltes
Versionsmanagement}\label{verteiltes-versionsmanagement}}

\emph{Einfaches Editieren}: Sie klonen das gesamte Repository, dass sich
auf dem ``Server-Rechner'' befindet. Damit haben Sie eine vollständige
Kopie aller Versionen in Ihrem Working Directory. Wenn wir annehmen,
dass keine branches im Repository bestehen, dann können Sie direkt auf
der Ihrer Arbeitskopie arbeiten und diese verändern. Danach generieren
Sie einen Snappshot des Arbeitsstandes \emph{Staging}. Ihre Version ist
als relevant markiert und kann im lokalen Repository als neuer Eintrag
abgelegt werden. Vielleicht wollen sie Ihren Algorithmus noch
weiterentwickeln und speichern zu einem späteren Zeitpunk eine weitere
Version. All diese Vorgänge betreffen aber zunächst nur Ihre Kopie, ein
anderer Mitstreiter in diesem Repository kann darauf erst zurückgreifen,
wenn Sie das Ganze an den Server übermittelt haben.

\begin{verbatim}
                     lokal                           remote
  ---------------------------------------------  --------------
  Arbeitskopie     "Staging"        Lokales          Remote
                                   Repository      Repository
                       |               |                 |
                       |               |    git clone    |
                       |               |<----------------|
       +-+- - - - - - -|- - - - - - - -|                 |
       | | Änderungen  |               |                 |
       | |             |               |                 |
       +-+             |               |                 |
        |   git add    |               |                 |
        |------------->|  git commit   |                 |
        |              |-------------->|                 |
       +-+             |               |                 |
       | | weitere     |               |                 |
       | | Änderungen  |               |                 |
       +-+             |               |                 |
        |   git add    |               |                 |
        +------------->|  git commit   |                 |
                       |-------------->|   git push      |
                       |               |---------------->|
                       |               |                 |                     .
\end{verbatim}

\emph{Kooperatives Arbeiten:} Nehmen wir nun an, dass Ihr Kollege in
dieser Zeit selbst das Remote Repository fortgeschrieben hat. In diesem
Fall bekommen Sie bei Ihrem \texttt{push} eine Fehlermeldung, die sie
auf die neuere Version hinweist. Nun ``ziehen'' Sie sich den aktuellen
Stand in Ihr Repository und kombinieren die Änderungen. Sofern keine
Konflikte entstehen, wird daraus ein neuer Commit generiert, den Sie
dann mit Ihren Anpassungen an das Remote-Repository senden.

\begin{verbatim}
                     lokal                           remote
  ---------------------------------------------  --------------
  Arbeitskopie     "Staging"        Lokales          Remote
                                   Repository      Repository
                       |               |                 |
                       |               |    git clone    |
                       |               |<----------------|
       +-+- - - - - - -|- - - - - - - -|                 |
       | | Änderungen  |               |                 |
       | |             |               |                 |
       +-+             |               |                 |
        |   git add    |               |                 |
        |------------->|  git commit   |                 |
        |              |-------------->|                 |
       +-+             |               |                 |
       | | weitere     |               |                 |
       | | Änderungen  |               |                 |   git push
       +-+             |               |                 |<-------------
        |   git add    |               |                 |
        +------------->|  git commit   |                 |
                       |-------------->|   git push      |
                       |               |---------------X |
                       |               |   git fetch     |
                       |               |<--------------- |     git fetch
                       |               |   git merge     |   + git merge
                       |               |<--------------- |   = git pull
                       |               |   git push      |
                       |               |---------------->|                   .
\end{verbatim}

Versuchen wir das ganze noch mal etwas plastischer nachzuvollziehen.
Rechts oben sehen Sie unser Remote-Repository auf dem Server. Im
mittleren Bereich den Status unseres lokalen Repositories.

\texttt{text\ @ExplainGit.eval\ create\ origin}

\hypertarget{arbeiten-mit-branches}{%
\section{Arbeiten mit Branches}\label{arbeiten-mit-branches}}

Die Organisation von Versionen in unterschiedlichen Branches ist ein
zentrales Element der Arbeit mit git. Branches sind Verzweigungen des
Codes, die bestimmte Entwicklungsziele kapseln.

Der größte Nachteil bei der Arbeit mit nur einem Branch liegt darin,
dass bei einem defekten Master(-Branch) die Arbeit sämtlicher
Beteiligter unterbrochen wird. Branches schaffen einen eignen
(temporären) Raum für die Entwicklung neuer Features, ohne die
Stabilität des Gesamtsystems zu gefährden. Gleichzeitig haben die
Entwickler den gesamten Verlauf eines Projekts in strukturierter Art zur
Hand.

Wie sieht das zum Beispiel für unsere Kursmaterialien aus?

\begin{verbatim}

        vSoSe2019                                                   vSoSe2020
Master   O-----------------------------------------  ....  ---------O
          \                                                        ^
           \               Offizielle Versionen                   /
SoSe2020    \              O-->O                 O          ---->O
             \            ^     \               /
              v          /       v             /
SoSe2020dev    O->O---->O---->O->O---->O-->O->O      ....
               Vorlesung      Vorlesung
               00             01
\end{verbatim}

Ein Branch in Git ist einfach ein Zeiger auf einen Commit zeigt. Der
zentrale Branch wird zumeist als \texttt{master} bezeichnet.

\hypertarget{generieren-und-navigation-uxfcber-branches}{%
\subsection{Generieren und Navigation über
Branches}\label{generieren-und-navigation-uxfcber-branches}}

Wie navigieren wir nun konkret über den verschiedenen
Entwicklungszweigen.

\texttt{text\ @ExplainGit.eval\ git\ commit\ -m\ V1\ git\ commit\ -m\ V2\ git\ commit\ -m\ V3}

\hypertarget{mergoperationen-uxfcber-branches}{%
\subsection{Mergoperationen über
Branches}\label{mergoperationen-uxfcber-branches}}

Nehmen wir folgendes Scenario an. Sie arbeiten an einem Issue, dafür
haben Sie einen separaten Branch (newFeature) erzeugt und haben bereits
einige Commits realisiert. Beim Kaffeetrinken denken Sie über den Code
von letzter Woche nach und Ihnen fällt ein Bug ein, den Sie noch nicht
behoben haben. Jetzt aber schnell!

Legen Sie dafür einen neuen Branch an, commiten Sie eine Version und
mergen Sie diese mit dem Master. Kehren Sie dann in den Feature-Branch
zurück und beenden Sie die Arbeit. Mergen Sie auch diesen Branch mit dem
Master. Worin unterscheiden sich beide Vorgänge?

\texttt{text\ @ExplainGit.eval\ git\ branch\ newFeature\ git\ checkout\ newFeature\ git\ commit\ -m\ FeatureV1\ git\ commit\ -m\ FeatureV2}

Mergen ist eine nicht-destruktive Operation. Die bestehenden Branches
werden auf keine Weise verändert. Das Ganze ``bläht'' aber den
Entwicklungsbaum auf.

\hypertarget{rebase-mit-einem-branch}{%
\subsection{Rebase mit einem Branch}\label{rebase-mit-einem-branch}}

Zum \texttt{merge} existiert auch noch eine alternative Operation. Mit
\texttt{rebase} werden die Änderungen eins branches in einem Patch
zusammengefasst. Dieser wird dann auf head angewandt.

\texttt{text\ @ExplainGit.eval\ git\ branch\ newFeature\ git\ checkout\ newFeature\ git\ commit\ -m\ FeatureV1\ git\ commit\ -m\ FeatureV2\ git\ checkout\ master\ git\ commit\ -m\ V1}

\hypertarget{arbeit-mit-github}{%
\section{Arbeit mit GitHub}\label{arbeit-mit-github}}

\hypertarget{issues}{%
\subsection{Issues}\label{issues}}

Issues dienen dem Sammeln von Benutzer-Feedback, dem Melden von
Software-Bugs und der Strukturierung von Aufgaben, die Sie erledigen
möchten. Dabei sind Issues umittelbar mit Versionen verknüpft, diese
können dem Issue zugeordnet werden.

Sie können eine Pull-Anfrage mit einer Ausgabe verknüpfen, um zu zeigen,
dass eine Korrektur in Arbeit ist und um die Ausgabe automatisch zu
schließen, wenn jemand die Pull-Anfrage zusammenführt.

Um über die neuesten Kommentare in einer Ausgabe auf dem Laufenden zu
bleiben, können Sie eine Ausgabe beobachten, um Benachrichtigungen über
die neuesten Kommentare zu erhalten.

https://guides.github.com/features/issues/

\hypertarget{pull-requests-und-reviews}{%
\subsection{Pull requests und Reviews}\label{pull-requests-und-reviews}}

Natürlich wollen wir nicht, dass ``jeder'' Änderungen ungesehen in
unseren Code einspeist. Entsprechend kapseln wir ja auch unseren
Master-Branch. Den Zugriff regeln sowohl die Rechte der einzelnen
Mitstreiter als auch die Pull-Request und Review Konfiguration.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.08\columnwidth}\raggedright
Status des Beitragenden\strut
\end{minipage} & \begin{minipage}[b]{0.86\columnwidth}\raggedright
Einreichen des Codes\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.08\columnwidth}\raggedright
Collaborator\strut
\end{minipage} & \begin{minipage}[t]{0.86\columnwidth}\raggedright
Auschecken des aktuellen Repositories und Arbeit. Wenn die Arbeit in
einem eigenen Branch erfolgt, wird diese mit einem Pull-Request
angezeigt und gemerged.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.08\columnwidth}\raggedright
non Collaborator\strut
\end{minipage} & \begin{minipage}[t]{0.86\columnwidth}\raggedright
Keine Möglichkeit seine Änderungen unmittelbar ins Repository zu
schreiben. Der Entwickler erzeugtn eine eigene Remote Kopie
(\emph{Fork}) des Repositories und dortige Realsierung der Änderungen.
Danach werden diese als Pull-Request eingereicht.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Wird ein Pull Request akzeptiert, so spricht man von einem \emph{Merge},
wird er geschlossen, so spricht man von einem \emph{Close}. Vor dem
Merge sollte eine gründliche Prüfung sichergestellt werden, diese kann
in Teilen automatisch erfolgen oder durch Reviews
\href{https://github.com/features/code-review/}{Doku}

\hypertarget{automatisierung-der-arbeit}{%
\subsection{Automatisierung der
Arbeit}\label{automatisierung-der-arbeit}}

Hervorragend! Wir sind nun in der Lage die Entwicklung unseres Codes zu
``verwalten''. Allerdings sagt noch niemand, dass ein eingereichter Code
auch lauffähig ist. Wie können wir aber möglichst schnell realisieren,
dass etwas schief geht? Es wäre wünschenswert, dass wir unmittelbar mit
den Aktivitäten unserer Entwickler entsprechende Tests durchführen und
zum Beispiel deren Commits zurückweisen.

An dieser Stelle wollen wir zunächst die Möglichkeiten des
\emph{Continuous Integration} aufzeigen, die differenzierte Diskussion
einer Folge von Build und Test-Schritten folgt später. Wir werden diese
Möglichkeit im Rahmen der Übungsaufgaben nutzen, um Ihre Lösungen zu
testen.

GitHub stellt dafür die sogenannten \emph{Actions} zur Verfügung. Dies
sind Verarbeitungsketten, die auf verschiedensten Architekturen,
Betriebssystemen, Konfigurationen usw. laufen können. Damit haben wir
die Möglichkeit einen Quellcode für verschiedene Plattformen zu bauen
und zu testen oder eine Dokumentation zu erstellen.

Ein \emph{Workflow} wird durch vordefinierten \emph{Trigger} ausgelöst.
Dies können das Anlegen einer Datei, ein Commit oder ein Pull Request
sein. Danach wird das System konfiguriert und die Folge der
Verarbeitungsschritte gestartet.

\begin{verbatim}
    +------+
    |      |\           +----> Check Syntax
  +-|      +-+          |
  | | File.a |          |               +---> Windows 10   --+
+-| +--------+  Commit  |               |                    |
| | File.b  |  ---------+----> Build ---+---> Ubuntu 18.04 --+
| +---------+           |               |                    |
| File.c   |            |               +---> MacOS ---------+
+----------+            |                                    |
                        +----> Test <------------------------+
                        |
                        +----> Generierung Dokumentation                     .
\end{verbatim}

GitHub gliedert diese Punkte in \emph{Workflows} und \emph{Jobs} in
einer hierachischen Struktur, die über \texttt{yaml} Files beschrieben
werden. Eine kurze Einführung zur Syntax findet sich unter
\href{https://de.wikipedia.org/wiki/YAML}{Wikipedia}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{name:}\AttributeTok{ Hello World}
\FunctionTok{on:}\AttributeTok{ }\KeywordTok{[}\NormalTok{push}\KeywordTok{]}

\FunctionTok{jobs:}
  \FunctionTok{build-and-run:}
    \FunctionTok{name:}\AttributeTok{ Print Hello World}
    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}
    \FunctionTok{steps:}
      \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Checkout files (master branch)}
        \FunctionTok{uses:}\AttributeTok{ actions/checkout@v2}
      \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Show all files}
        \FunctionTok{run:}\AttributeTok{ pwd && whoami && ls -all}
\end{Highlighting}
\end{Shaded}

Spanndend wird die Sache nun dadurch, dass es eine breite Community rund
um die Actions gibt. Diese stellen häufig benötigte \emph{Steps} bereits
zur Verfügung, fertige Tools für das Bauen und Testen von .NET Code.

Die Dokumentation zu den GitHub-Actions findet sich unter
\url{https://github.com/features/actions}. Ein umfangreicheres Beispiel
finden Sie in unserem Projektordner im aktuellen Branch
\texttt{SoSe2020}. Hier werden alle LiaScript-Dateien in ein pdf
umgewandelt.

\begin{quote}
\textbf{Merke} Workflow files müssen unter
\texttt{.github\textbackslash{}workflows\textbackslash{}*.yml} abgelegt
werden.
\end{quote}

\hypertarget{ein-wort-zur-zusammenarbeit}{%
\section{Ein Wort zur
Zusammenarbeit}\label{ein-wort-zur-zusammenarbeit}}

Bitte haben Sie immer den spezifischen Kontext Ihres Projektes vor
Augen. Üblicherweise legt man am Anfang, bei einem ``kleinen Hack''
keinen Wert auf formelle Abläufe und Stukturen. Diese sind aber in
großen Projekten unablässig.

Ein neues Feature wird in einem Issue beschrieben, in einem eigenen
Branch implementiert, mit Commits beschrieben, auf den master branch
abgebildet und das Issue mit Referenz auf den commit geschlossen.

Entsprechend ist die Dokumentation in Form der Issues und
Commit-Messages der zentrale Schlüssel für die Interaktion im
Softwareentwicklerteam. Entsprechend hoch ist Ihre Bedeutung anzusetzen.

\hypertarget{commit-messages}{%
\subsection{Commit Messages}\label{commit-messages}}

Stöbern Sie dafür mal durch anderen Projekte (zum Beispiel
\href{https://github.com/tensorflow/tensorflow}{GitHub Tensorflow}) und
informieren Sie sich über deren Policies.

\includegraphics{./img/12_VersionsverwaltungII/ScreenshotTensorflow.png}

\begin{verbatim}
Kurze (72 Zeichen oder weniger) Zusammenfassung

Ausführlicherer erklärender Text. Umfassen Sie ihn auf 72 Zeichen. Die Leerzeile
Zeile, die die Zusammenfassung vom Textkörper trennt, ist entscheidend (es sei
denn, Sie lassen den den Textkörper ganz weg).

Schreiben Sie Ihre Commit-Nachricht im Imperativ: "Fix bug" und nicht "Fixed
Fehler" oder "Behebt Fehler". Diese Konvention stimmt mit den Commit-Nachrichten
überein die von Befehlen wie "git merge" und "git revert" erzeugt werden.

Weitere Absätze kommen nach Leerzeilen.

- Aufzählungspunkte sind für eine Liste von Anpassungen in Ordnung.
- ... und noch einer
\end{verbatim}

Folgende Regeln sollte man für die Beschreibung eines Commits
berücksichtigen:

\begin{itemize}
\tightlist
\item
  Trennen Sie den Betreff durch eine Leerzeile vom folgenden Text
\item
  Beschränkt Sie sich bei der Betreffzeile auf maximal 50 Zeichen
\item
  Beginnen Sie die Betreffzeile mit einem Großbuchstaben
\item
  Schreiben Sie die Betreffzeile im Imperativ
\item
  Brechen Sie den Text der Message 72 Zeichen um
\end{itemize}

\begin{quote}
\textbf{Merke:} Beschreiben Sie in der Commit-Nachricht das was und
warum, aber nicht das wie.
\end{quote}

Das \emph{Semantic Versioning} geht einen Schritt weiter und gibt den
Commit-Messages eine feste Satzstruktur, vgl.
\href{https://entwickler.de/online/development/commit-messages-git-579873267.html}{entwickler.de}

\hypertarget{generelles-vorgehen}{%
\subsection{Generelles Vorgehen}\label{generelles-vorgehen}}

Lassen Sie uns einen Blick auf das Aufgabenblatt der kommenden Woche
werfen. Ihre Aufgabe besteht darin, in einem zweier Team verschiedene
Rollen einzunehmen.

\begin{verbatim}
@startuml
actor Maintainer
actor Developer
== Vorbereitung ==
Maintainer --> Maintainer: Einfügen der Rolleninformation\n und des Fragebogenschlüssels\n in [[https://github.com/ComputerScienceLecturesTUBAF/SoftwareentwicklungSoSe2021_Aufgabe_04/blob/main/team.config{Link zur Datei} team.config]]
Developer --> Developer: Einfügen der Rolleninformation\n und des Fragebogenschlüssels\n in [[https://github.com/ComputerScienceLecturesTUBAF/SoftwareentwicklungSoSe2021_Aufgabe_04/blob/main/team.config{Link zur Datei} team.config]]
== Projekt Initialisierung ==
Maintainer --> Maintainer: Konfiguration [[https://docs.github.com/en/organizations/organizing-members-into-teams/managing-code-review-assignment-for-your-team{Review Konfiguration} Reviews]]
Maintainer --> Maintainer: Anlegen [[https://guides.github.com/features/issues/{Mastering Issues} Issue]] "txt_to_md"
Maintainer --> Developer:  Zuweisung Issue
== Implementierung ==
activate Maintainer
Maintainer --> Maintainer:  Monitoring Projekt
Developer --> Maintainer:  //Issue in progress//
activate Developer
Developer --> Developer:  Anlegen eines Branches
Developer -> Developer:  Implementieren 1
note right
 * Anlegen neue Datei
 * Kopieren der txt Inhalte
 * Formatieren als md
 * Einbau einiger Typos, die
    der Maintainer finden soll
end note
Developer --> Developer:  Commiten
Developer -> Developer:  Implementieren 2
note right
 * Ergänzen eines Hello-World Codebeispiels
end note
Developer -> Developer:  Commiten
== Review ==
Developer --> Developer:   Starte  [[https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request {Guideline Pull request} Pull request]]
Developer --> Maintainer : Anforderung [[https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-request-reviews#re-requesting-a-review {Guideline Reviews on Github} Review]]
Maintainer --> Maintainer:  Code Review / Kommentare
Maintainer --> Developer :  Anforderung Nachbesserungen
note left
Bitte um zusätzliche
 * Bildunterschrift
 * Rechtschreibkorrektur
end note
Developer -> Developer:  Implementieren 3
note right
 * Korrektur der Fehler
 * Einfügen einer Beschreibung der Grafik
end note
Developer --> Maintainer :  Bitte um erneutes Rereview
Maintainer --> Developer :  Review abgeschlossen
Maintainer --> Maintainer:  Abschluss Pull request
deactivate Developer
== Deploy ==
Maintainer --> Maintainer:  Abschluss des Pullrequests
Maintainer --> Maintainer:  Generierung Release
deactivate Maintainer
@enduml
\end{verbatim}

\begin{quote}
\textbf{Wichtig:} Schließen Sie Ihre Arbeit mit einem Release ab! Damit
ist für uns erkennbar, dass Sie die Aufgabe erfolgreich umgesetzt haben.
\end{quote}

\hypertarget{aufgaben-11}{%
\section{Aufgaben}\label{aufgaben-11}}

!?\href{https://www.youtube.com/watch?v=SWYqp7iY_Tc}{alt-text}

\begin{itemize}
\tightlist
\item
  {[} {]} Recherchieren Sie die Methode des ``Myers-diff-Algorithmus''
  https://blog.jcoglan.com/2017/02/12/the-myers-diff-algorithm-part-1/
\item
  {[} {]} Legen Sie sich ein lokales Repository mit git an und
  experimentieren Sie damit.
\item
  {[} {]} Richten Sie sich für Ihren GitHub-Account einen SSH basierten
  Zugriff ein (erspart einem das fortwährende Eingeben eines
  Passwortes).
\item
  {[} {]} Sie erhalten im Laufe der Woche Ihre erste Einladung für einen
  GitHub Classroom. Ausgehend davon werden Sie aufgefordert sich in
  Zweierteams zu organisieren und werden dann gemeinsam erste
  Gehversuche unter git zu unternehmen.
\end{itemize}

\hypertarget{modellierung-von-software}{%
\chapter{Modellierung von Software}\label{modellierung-von-software}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Motivation\ der\ Modellierung\ von\ Software}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/13_UML_Modellierung.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{neues-aus-github}{%
\section{Neues aus Github}\label{neues-aus-github}}

Die erste Aufgabe unter Zuhilfenahme von git / GitHub ist angelaufen.
Setzen Sie sich in dieser Woche, soweit das noch nicht geschehen ist,
intensiv damit auseinander! Die Techniken sind von zentraler Bedeutung
für die weiteren Aufgabenblätter.

Anmerkungen:

\begin{itemize}
\tightlist
\item
  Versehen Sie Ihre Commits mit aussagekräftigen Bezeichnungen
  -\textgreater{}
  \href{https://t3n.de/news/schreibt-richtig-gute-1214910/}{Anleitung}
\item
  Beenden Sie das Projekt mit der Veröffentlichung eines Release!
\end{itemize}

\begin{quote}
Tragen Sie bitte Ihre Fragebogenschlüssel in die Datei team.config ein.
Dies hilft bei der wissenschaftlichen Aufbereitung der Daten ungemein.
\end{quote}

\hypertarget{motivation-des-modellierungsgedankens}{%
\section{Motivation des
Modellierungsgedankens}\label{motivation-des-modellierungsgedankens}}

Um gedanklich wieder in die C\# Entwicklung einzutauchen, finden Sie in
dem Ordner
\href{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/tree/master/code/13_UML_Modellierung}{code}
zwei Beispiele für die:

\begin{itemize}
\tightlist
\item
  Nutzung abstrakter Klassen
\item
  Verwendung von Interfaces
\end{itemize}

Überlegen Sie sich alternative Lösungsansätze mit Vor- und Nachteilen
für die beschriebenen Implementierungen.

\hypertarget{prinzipien-des-objektorientierten-softwareentwurfs}{%
\section{Prinzipien des (objektorientierten)
Softwareentwurfs}\label{prinzipien-des-objektorientierten-softwareentwurfs}}

\begin{quote}
\textbf{Merke:} Software lebt!
\end{quote}

\begin{itemize}
\tightlist
\item
  Prinzipien zum Entwurf von Systemen
\item
  Prinzipien zum Entwurf einzelner Klassen
\item
  Prinzipien zum Entwurf miteinander kooperierender Klassen
\end{itemize}

\href{https://de.wikipedia.org/wiki/Robert_Cecil_Martin}{Robert C.
Martin} fasste eine wichtige Gruppe von Prinzipien zur Erzeugung
wartbarer und erweiterbarer Software unter dem Begriff ``SOLID''
zusammen \footnote{Robert C. Martin, Webseite ``The principles of OOD'',
  http://www.butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod}. Robert
C. Martin erklärte diese Prinzipien zu den wichtigsten
Entwurfsprinzipien. Die SOLID-Prinzipien bestehen aus:

\begin{itemize}
\tightlist
\item
  \textbf{S} ingle Responsibility Prinzip
\item
  \textbf{O} pen-Closed Prinzip
\item
  \textbf{L} iskovsches Substitutionsprinzip
\item
  \textbf{I} nterface Segregation Prinzip
\item
  \textbf{D} ependency Inversion Prinzip
\end{itemize}

Die folgende Darstellung basiert auf den Referenzen \footnote{Markus
  Just, IT Designers Gruppe, ``Entwurfsprinzipien'', Foliensatz
  Fachhochschule Esslingen
  \href{http://www.it-designers-gruppe.de/fileadmin/Inhalte/Studentenportal/Die_SOLID-Prinzipien__Folien___1_.pdf}{Link}}.
Eine sehr gute, an einem Beispiel vorangetrieben Erläuterung ist unter
\footnote{Andre Krämer, ``SOLID - Die 5 Prinzipien für
  objektorientiertes Softwaredesign'',
  \href{https://www.informatik-aktuell.de/entwicklung/methoden/solid-die-5-prinzipien-fuer-objektorientiertes-softwaredesign.html}{Link}}
zu finden.

\hypertarget{prinzip-einer-einzigen-verantwortung-single-responsibility-prinzip-srp}{%
\subsection{Prinzip einer einzigen Verantwortung
(Single-Responsibility-Prinzip
SRP)}\label{prinzip-einer-einzigen-verantwortung-single-responsibility-prinzip-srp}}

In der objektorientierten Programmierung sagt das SRP aus, dass jede
Klasse nur eine fest definierte Aufgabe zu erfüllen hat. In einer Klasse
sollten lediglich Funktionen vorhanden sein, die direkt zur Erfüllung
dieser Aufgabe beitragen.

\begin{quote}
``There should never be more than one reason for a class to change.
\footnote{Robert C. Martin, Webseite ``The principles of OOD'',
  http://www.butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod}
\end{quote}

\begin{itemize}
\tightlist
\item
  Verantwortlichkeit = Grund für eine Änderung (multiple Veränderungen
  == multiple Verantwortlichkeiten)
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Employee}
\NormalTok{\{}
  \KeywordTok{public}\NormalTok{ Money }\FunctionTok{calculatePay}\NormalTok{() ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{save}\NormalTok{() ...}
  \KeywordTok{public}\NormalTok{ String }\FunctionTok{reportHours}\NormalTok{() ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Mehrere Verantwortlichkeiten innerhalb eines Software-Moduls führen zu
  zerbrechlichem Design, da Wechselwirkungen bei den Verantwortlichkeit
  nicht ausgeschlossen werden können
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ SpaceStation\{}
  \KeywordTok{public} \FunctionTok{initialize}\NormalTok{() ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{run_sensors}\NormalTok{() ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{show_sensors}\NormalTok{() ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{load_supplies}\NormalTok{(type, quantity) ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{use_supplies}\NormalTok{(type, quantity) ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{report_supplies}\NormalTok{ () ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{load_fuel}\NormalTok{(quantity) ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{report_fuel}\NormalTok{() ...}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{activate_thrusters}\NormalTok{() ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Eine mögliche separaten Realisierung findet sich unter
\href{https://medium.com/@severinperez/writing-flexible-code-with-the-single-responsibility-principle-b71c4f3f883f}{Link}

\begin{quote}
\textbf{Merke:} Vermeiden Sie ``God''-Objekte, die alles wissen.
\end{quote}

\textbf{Verallgemeinerung}

Eine Verallgemeinerung des SRP stellt Curly's Law
\href{https://blog.codinghorror.com/curlys-law-do-one-thing/}{CodingHorror}
dar, welches das Konzept ``methods should do one thing'' bis ``single
source of truth'' zusammenfasst und auf alle Aspekte eines
Softwareentwurfs anwendet. Dazu gehören nicht nur Klassen, sondern unter
anderem auch Funktionen und Variablen.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ numbers = }\KeywordTok{new}\NormalTok{ [] \{ }\DecValTok{5}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{1}\NormalTok{ \};}
\NormalTok{numbers = numbers.}\FunctionTok{OrderBy}\NormalTok{(i => i);}

\DataTypeTok{var}\NormalTok{ numbers = }\KeywordTok{new}\NormalTok{ [] \{ }\DecValTok{5}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{1}\NormalTok{ \};}
\DataTypeTok{var}\NormalTok{ orderedNumbers = numbers.}\FunctionTok{OrderBy}\NormalTok{(i => i);}
\end{Highlighting}
\end{Shaded}

Da die Variable \texttt{numbers} zuerst die unsortierten Zahlen
repräsentiert und später die sortierten Zahlen, wird Curly's Law
verletzt. Dies lässt sich auflösen, indem eine zusätzliche Variable
eingeführt wird.

\hypertarget{open-closed-prinzip}{%
\subsection{Open-Closed Prinzip}\label{open-closed-prinzip}}

Bertrand Meyer beschreibt das Open-Closed-Prinzip durch: \emph{Module
sollten sowohl offen (für Erweiterungen) als auch verschlossen (für
Modifikationen) sein.} \footnote{Bertrand Meyer, ``Object Oriented
  Software Construction'' Prentice Hall, 1988,}

Eine Erweiterung im Sinne des Open-Closed-Prinzips ist beispielsweise
die Vererbung. Diese verändert das vorhandene Verhalten der Einheit
nicht, erweitert aber die Einheit um zusätzliche Funktionen oder Daten.
Überschriebene Methoden verändern auch nicht das Verhalten der
Basisklasse, sondern nur das der abgeleiteten Klasse.

Gegenbeispiel: Ausgangspunkt ist eine Klasse \texttt{Employee}, die für
unterschiedliche Angestelltentypen um verschiedenen Algorithmen zur
Bonusberechnung versehen werden soll. Intuitiv ist der Ansatz ein
weiteres Feld einzufügen, dass den Typ des Angestellten erfasst und dazu
eine entsprechende Verzweigung zu realisieren \ldots{} ein Verstoß gegen
das OCP, der sich über eine Vererbungshierachie deutlich
wartungsfreundlicher realisieren lässt!

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Employee}
\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{}\KeywordTok{set}\NormalTok{; }\KeywordTok{get}\NormalTok{;\}}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ ID \{}\KeywordTok{set}\NormalTok{; }\KeywordTok{get}\NormalTok{;\}}

  \KeywordTok{public} \FunctionTok{Employee}\NormalTok{(}\DataTypeTok{int}\NormalTok{ id, }\DataTypeTok{string}\NormalTok{ name)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{ID}\NormalTok{ = id; }\KeywordTok{this}\NormalTok{.}\FunctionTok{Name}\NormalTok{ = name;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{decimal} \FunctionTok{CalculateBonus}\NormalTok{(}\DataTypeTok{decimal}\NormalTok{ salary)\{}
    \KeywordTok{return}\NormalTok{ salary * }\FloatTok{0.1}\NormalTok{M;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Employee Bernhard = }\KeywordTok{new} \FunctionTok{Employee}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"Bernhard"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"Bonus = \{Bernhard.CalculateBonus(11234)\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Achtung: Die Einbettung der \texttt{CalculateBonus()} Methode in die
jeweiligen \texttt{Employee} Klassen ist selbst fragwürdig! Dadurch wird
eine Funktion an verschiedenen Stellen realisiert, so dass pro Klasse
unterschiedliche ``Zwecke'' umgesetzt werden. Damit liegt ein Verstoß
gegen die Idee des SRP vor.

\hypertarget{liskovsche-substitutionsprinzip-lsp}{%
\subsection{Liskovsche Substitutionsprinzip
(LSP)}\label{liskovsche-substitutionsprinzip-lsp}}

\begin{quote}
Das Liskovsche Substitutionsprinzip (LSP) oder Ersetzbarkeitsprinzip
besagt, dass ein Programm, das Objekte einer Basisklasse T verwendet,
auch mit Objekten der davon abgeleiteten Klasse S korrekt funktionieren
muss, ohne dabei das Programm zu verändern:
\end{quote}

\emph{"Sei \(q(x)\) eine beweisbare Eigenschaft von Objekten \(x\) des
Typs \(T\). Dann soll \(q(y)\) für Objekte \(y\) des Typs \(S\) wahr
sein, wobei \(S\)bein Untertyp von \(T\) ist.``}

Beispiel: Grafische Darstellung von verschiedenen Primitiven

\includegraphics{https://www.plantuml.com/plantuml/png/SoWkIImgAStDuN8lIapBB4xEI2rspKdDJSqhKR2fqTLL24fDpYX9JSx69U-QavDPK9oAIpeajQA42we68k9Tb9fPp8L5lPL2LMfcSaPUgeOcbqDgNWhGKG00}

Entsprechend sollte eine Methode, die \texttt{GrafischesElement}
verarbeitet, auch auf \texttt{Ellipse} und \texttt{Kreis} anwendbar
sein. Problematisch ist dabei allerdings deren unterschiedliches
Verhalten. \texttt{Kreis} weist zwei gleich lange Halbachsen. Die
zugehörigen Membervariablen sind nicht unabhängig von einander.

\hypertarget{interface-segregation-prinzip}{%
\subsection{Interface Segregation
Prinzip}\label{interface-segregation-prinzip}}

Zu große Schnittstellen sollten in mehrere Schnittstellen aufgeteilt
werden, so dass die implementierende Klassen keine unnötigen Methoden
umfasst. Schnittstellen aufgeteilt werden, falls implementierende
Klassen unnötige Methoden haben müssen. Nach erfolgreicher Anwendung
dieses Entwurfprinzips würde ein Modul, das eine Schnittstelle benutzt,
nur die Methoden implementieren müssen, die es auch wirklich braucht.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IVehicle}
\NormalTok{\{}
    \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{();}
    \DataTypeTok{void} \FunctionTok{Fly}\NormalTok{();}
\NormalTok{\}}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ MultiFunctionalCar : IVehicle}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to start driving car}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Drive a multifunctional car"}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Fly}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to start flying}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fly a multifunctional car"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Car : IVehicle}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to drive a car}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Driving a car"}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Fly}\NormalTok{()}
\NormalTok{    \{}
        \KeywordTok{throw} \KeywordTok{new} \FunctionTok{NotImplementedException}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Lösung unter Beachtung des Interface Segregation Prinzip

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{interface}\NormalTok{ ICar}
\NormalTok{\{}
    \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IAirplane}
\NormalTok{\{}
    \DataTypeTok{void} \FunctionTok{Fly}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Car : ICar}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to drive a car}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Driving a car"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ MultiFunctionalCar : ICar, IAirplane}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Drive}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to start driving car}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Drive a multifunctional car"}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Fly}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//actions to start flying}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fly a multifunctional car"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Man könnte jetzt sogar ein Highlevel Interface realisieren, dass beide
Aspekte integriert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IMultiFunctionalVehicle : ICar, IAirplane}
\NormalTok{\{}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ MultiFunctionalCar : IMultiFunctionalVehicle}
\NormalTok{\{}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Vorteil}

\begin{itemize}
\tightlist
\item
  übersichtlichere kleinere Schnittstellen, die flexibler kombiniert
  werden können
\item
  Klassen umfassen keine Methoden, die sie nicht benötigen
\end{itemize}

-\textgreater{} Das Prinzip der Schnittstellentrennung verbessert die
Lesbarkeit und Wartbarkeit unseres Codes.

\hypertarget{dependency-inversion-prinzip}{%
\subsection{Dependency Inversion
Prinzip}\label{dependency-inversion-prinzip}}

\begin{quote}
``High-level modules should not depend on low-level modules. Both should
depend on abstractions. Abstractions should not depend upon details.
Details should depend upon abstractions'' {[}UncleBob{]}
\end{quote}

Lösungsansatz für die Realisierung ist eine veränderte Sicht auf die
klassischerweise hierachische Struktur von Klassen.

\begin{verbatim}

  Traditionelle Sicht                 Objektorientierte Perspektive

  +-----------------------+           +-------------------------------+
  | Präsentation          |           |          Präsentation         |
  +-----------------------+           | Realisierung        Interface |
              |                       +-------------------------^-----+
              |                                                 |
              |                                                 |
              v                               +-----------------+
  +-----------------------+           +-------|-----------------------+
  | Anwendung             |           |       |  Anwendung            |
  +-----------------------+           | Realisierung        Interface |
              |                       +-------------------------^-----+
              |                                                 |
              |                                                 |
              v                               +-----------------+
  +-----------------------+           +-------|-----------------------+
  | Verarbeitung          |           |       |  Verarbeitung         |
  +-----------------------+           | Realisierung        Interface |
             |                        +-------------------------^-----+
             |                                                  |
             |                                                  |
             v                                +-----------------+
  +-----------------------+           +-------|-----------------------+
  | Daten                 |           |       |     Daten             |
  +-----------------------+           | Realisierung        Interface |
                                      +-------------------------------+
\end{verbatim}

Das folgende Beispiel entstammt der Webseite
https://exceptionnotfound.net/simply-solid-the-dependency-inversion-principle/

Beachten Sie, dass die Benachrichtigungsklasse, eine übergeordnete
Klasse, eine Abhängigkeit sowohl von der E-Mail-Klasse als auch von der
SMS-Klasse hat, bei denen es sich um untergeordnete Klassen handelt. Mit
anderen Worten, die Benachrichtigung hängt von der konkreten
Implementierung von E-Mail und SMS ab und nicht von einer Abstraktion
der Implementierung. Da DIP verlangt, dass sowohl Klassen der höheren
als auch der unteren Ebenen von Abstraktionen abhängen, verstoßen wir
derzeit gegen das Prinzip der Abhängigkeitsinversion.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Email}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ ToAddress \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Content \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{SendEmail}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//Send email}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ SMS}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ PhoneNumber \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Message \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{SendSMS}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//Send sms}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Notification}
\NormalTok{\{}
    \KeywordTok{private}\NormalTok{ Email _email;}
    \KeywordTok{private}\NormalTok{ SMS _sms;}

    \KeywordTok{public} \FunctionTok{Notification}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        _email = }\KeywordTok{new} \FunctionTok{Email}\NormalTok{();}
\NormalTok{        _sms = }\KeywordTok{new} \FunctionTok{SMS}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Send}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        _email.}\FunctionTok{SendEmail}\NormalTok{();      }\CommentTok{// Abhängigkeit von Email}
\NormalTok{        _sms.}\FunctionTok{SendSMS}\NormalTok{();          }\CommentTok{// Abhängigkeit von SMS}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Lösung

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Schritt 1: Interface Definition}
\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IMessage}
\NormalTok{\{}
    \DataTypeTok{void} \FunctionTok{SendMessage}\NormalTok{();}
\NormalTok{\}}

\CommentTok{// Schritt 2: Die niederwertigeren Klassen implmentieren das Interface}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Email : IMessage}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ ToAddress \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Content \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{SendMessage}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//Send email}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ SMS : IMessage}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ PhoneNumber \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Message \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{SendMessage}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{//Send sms}
\NormalTok{    \}}
\NormalTok{\}}

\CommentTok{// Schritt 3: Die höherwertige Klasse wird gegen das Interface implementiert}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Notification}
\NormalTok{\{}
    \KeywordTok{private}\NormalTok{ IMessage _message;}

    \KeywordTok{public} \FunctionTok{Notification}\NormalTok{(IMessage messages)}
\NormalTok{    \{}
        \KeywordTok{this}\NormalTok{._message = message;}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Send}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        message.}\FunctionTok{SendMessage}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\CommentTok{// Variante für multiple Messages}
\CommentTok{//public class Notification}
\CommentTok{//\{}
\CommentTok{//    private ICollection<IMessage> _messages;}
\CommentTok{//    public Notification(ICollection<IMessage> messages)}
\CommentTok{//    \{}
\CommentTok{//        this._messages = messages;}
\CommentTok{//    \}}
\CommentTok{//    public void Send()}
\CommentTok{//    \{}
\CommentTok{//        foreach(var message in _messages)}
\CommentTok{//        \{}
\CommentTok{//            messages.SendMessage();}
\CommentTok{//        \}}
\CommentTok{//    \}}
\CommentTok{//\}}
\end{Highlighting}
\end{Shaded}

Beispiel aus
https://exceptionnotfound.net/simply-solid-the-dependency-inversion-principle/

\hypertarget{herausforderungen-bei-der-umsetzung-der-prinzipien}{%
\section{Herausforderungen bei der Umsetzung der
Prinzipien}\label{herausforderungen-bei-der-umsetzung-der-prinzipien}}

Kunde TU Freiberg: \emph{Entwickeln Sie für mich ein webbasiertes
System, mit dem Sie die Anmeldung und Bewertung von Prüfungsleistung
erfassen.}

Welche Fragen sollten Sie dem Kunden stellen, bevor Sie sich daran
machen und munter Code schreiben?

Betrachten Sie die Darstellung auf der
\href{https://www.programmwechsel.de/lustig/management/schaukel-baum.html}{Webseite}.
Welche hier scherzhaft beschriebenen Herausforderungen sehen Sie im
Projekt?

Wie verzahnen wir den Entwicklungsprozess? Wie können wir sicherstellen,
dass am Ende die erwartete Anwendung realisiert wird?

\begin{verbatim}

         +------------------------------------------------------>   Zeit
         |
         |      Analyse                             Abnahmetest
         |          \                                   ^
         |           v                                 /
         |        Grobentwurf                   Systemtests
         |             \                             ^
         |              v                           /
         |           Feinentwurf             Integrationstests
 Detail- |                \                       ^
 grad    |                 v                     /
         |             Implementierung  --> Modultests
         |
         v
\end{verbatim}

\begin{quote}
Das V-Modell ist ein Vorgehensmodell, das den
Softwareentwicklungsprozess in Phasen organisiert. Zusätzlich zu den
Entwicklungsphasen definiert das V-Modell auch das Evaluationsphasen, in
welchen den einzelnen Entwicklungsphasen Testphasen gegenüber gestellt
werden.
\end{quote}

vgl. zum Beispiel
\href{https://www.johner-institut.de/blog/iec-62304-medizinische-software/v-modell/}{Link}

Achtung: Das V-Modell ist nur eine Variante eines Vorgehensmodells,
moderne Entwicklungen stellen eher agile Methoden in den Vordergrund.

vgl. zum Beispiel
\href{https://entwickler.de/online/agile/agile-methoden-einfuehrung-209035.html}{Link}

\hypertarget{unified-modeling-language}{%
\section{Unified Modeling Language}\label{unified-modeling-language}}

\begin{quote}
Die Unified Modeling Language, kurz UML, dient zur Modellierung,
Dokumentation, Spezifikation und Visualisierung komplexer
Softwaresysteme unabhängig von deren Fach- und Realsierungsgebiet. Sie
liefert die Notationselemente gleichermaßen für statische und dynamische
Modelle zur Analyse, Design und Architektur und unterstützt insbesondere
objektorientierte Vorgehensweisen. \footnote{Mario Jeckle, Christine
  Rupp, Jürgen Hahn, Barbara Zengler, Stefan Queins, UML 2 glasklar,
  Hanser Verlag, 2004}
\end{quote}

UML ist heute die dominierende Sprache für die
Softwaresystem-Modellierung. Der erste Kontakt zu UML besteht häufig
darin, dass Diagramme in UML im Rahmen von Softwareprojekten zu
erstellen, zu verstehen oder zu beurteilen sind:

\begin{itemize}
\tightlist
\item
  Projektauftraggeber prüfen und bestätigen die Anforderungen an ein
  System, die Business Analysten in Anwendungsfalldiagrammen in UML
  festgehalten haben;
\item
  Softwareentwickler realisieren Arbeitsabläufe, die
  Wirtschaftsanalytiker in Aktivitätsdiagrammen beschrieben haben;
\item
  Systemingenieure implementieren, installieren und betreiben
  Softwaresysteme basierend auf einem Implementationsplan, der als
  Verteilungsdiagramm vorliegt.
\end{itemize}

UML ist dabei Bezeichner für die meisten bei einer Modellierung
wichtigen Begriffe und legt mögliche Beziehungen zwischen diesen
Begriffen fest. UML definiert weiter grafische Notationen für diese
Begriffe und für Modelle statischer Strukturen und dynamischer Abläufe,
die man mit diesen Begriffen formulieren kann.

\begin{quote}
\textbf{Merke:} Die grafische Notation ist jedoch nur ein Aspekt, der
durch UML geregelt wird. UML legt in erster Linie fest, mit welchen
Begriffen und welchen Beziehungen zwischen diesen Begriffen sogenannte
Modelle spezifiziert werden.
\end{quote}

Was ist UML nicht:

\begin{itemize}
\tightlist
\item
  vollständige, eindeutige Abbildung aller Anwendungsfälle
\item
  keine Programmiersprache
\item
  keine rein formale Sprache
\item
  kein vollständiger Ersatz für textuelle Beschreibungen
\item
  keine Methode oder Vorgehensmodell
\end{itemize}

\hypertarget{geschichte}{%
\subsection{Geschichte}\label{geschichte}}

UML (aktuell UML 2.5) ist durch die Object Management Group (OMG) als
auch die ISO (ISO/IEC 19505 für Version 2.4.1) genormt.

\begin{figure}
\centering
\includegraphics{./img/13_UML/OO-historie.png}
\caption{OOPGeschichte}
\end{figure}

\hypertarget{uml-werkzeuge}{%
\subsection{UML Werkzeuge}\label{uml-werkzeuge}}

\begin{itemize}
\item
  Tools zur Modellierung - Unterstützung des Erstellungsprozesses,
  Überwachung der Konformität zur graphischen Notation der UML

  \emph{Herausforderungen:} Transformation und Datenaustausch zwischen
  unterschiedlichen Tools
\item
  Quellcoderzeugung - Generierung von Sourcecode aus den Modellen

  \emph{Herausforderungen:} Synchronisation der beiden Repräsentationen,
  Abbildung widersprüchlicher Aussagen aus verschiedenen Diagrammtypen

  (Beispiel mit Visual Studio folgt am Ende der Vorlesung.)
\item
  Reverse Engineering / Dokumentation - UML-Werkzeug bilden Quelltext
  als Eingabe liest auf entsprechende UML-Diagramme und Modelldaten ab

  \emph{Herausforderungen:} Abstraktionskonzept der Modelle führt zu
  verallgemeinernden Darstellungen, die ggf. Konzepte des Codes nicht
  reflektieren.
\end{itemize}

\begin{figure}
\centering
\includegraphics{./img/13_UML/Doxygen.png}
\caption{OOPGeschichte}
\end{figure}

\textbf{Darstellung von UML im Rahmen dieser Vorlesung}

Die Vorlesungsunterlagen der Veranstaltung ``Softwareentwicklung''
setzen auf die domainspezifische Beschreibungssprache plantUML auf, die
verschiedene Aspekte in einer

http://plantuml.com/de/

\begin{verbatim}
@startuml
class Car

Driver - Car : drives >
Car *- Wheel : have 4 >
Car -- Person : < owns

@enduml
\end{verbatim}

@plantUML.eval(png)

\begin{verbatim}
@startuml
robust "Web Browser" as WB
concise "Web User" as WU

@0
WU is Idle
WB is Idle

@100
WU is Waiting
WB is Processing

@300
WB is Waiting
@enduml
\end{verbatim}

@plantUML.eval(png)

\hypertarget{diagramm-typen}{%
\subsection{Diagramm-Typen}\label{diagramm-typen}}

\begin{figure}
\centering
\includegraphics{./img/13_UML/UML-Diagrammhierarchie.png}
\caption{OOPGeschichte}
\end{figure}

\textbf{Strukturdiagramme}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.18\columnwidth}\raggedright
Diagrammtyp\strut
\end{minipage} & \begin{minipage}[b]{0.76\columnwidth}\raggedright
Zentrale Frage\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Klassendiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Welche Klassen bilden das Systemverhalten ab und in welcher Beziehung
stehen diese?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Paketdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Wie kann ich mein Modell in Module strukturieren?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Objektdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Welche Instanzen bestehen zu einem bestimmten Zeitpunkt im System?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Kompositionsstrukturdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Welche Elemente sind Bestandteile einer Klasse, Komponente, eines
Subsystems?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Komponentendiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Wie lassen sich die Klassen zu wiederverwendbaren Komponenten
zusammenfassen und wie werden deren Beziehungen definiert?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
Verteilungsdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Wie sieht das Einsatzumfeld des Systems aus?\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Verhaltensdiagramme}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.23\columnwidth}\raggedright
Diagrammtyp\strut
\end{minipage} & \begin{minipage}[b]{0.71\columnwidth}\raggedright
Zentrale Frage\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Use-Case-Diagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Was leistet mein System überhaupt? Welche Anwendungen müssen abgedeckt
werden?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Aktivitätsdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Wie lassen sich die Stufen eines Prozesses beschreiben?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Zustandsautomat\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Welche Abfolge von Zuständen wird für eine eine Sequenz von
Einganginformationen realisiert\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Sequenzdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Wer tauscht mit wem welche Informationen aus? Wie bedingen sich lokale
Abläufe untereinander?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Kommunikationsdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Wer tauscht mit wem welche Informationen aus?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Timing-Diagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Wie hängen die Zustände verschiedener Akteure zeitlich voneinander
ab?\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.23\columnwidth}\raggedright
Interaktionsübersichtsdiagramm\strut
\end{minipage} & \begin{minipage}[t]{0.71\columnwidth}\raggedright
Wann läuft welche Interaktion ab?\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Begrifflichkeiten}

Ein UML-Modell ergibt sich aus der Menge aller seiner Diagramme.
Entsprechend werden verschiedene Diagrammtypen genutzt um
unterschiedliche Perspektiven auf ein realweltliches Problem zu
entwickeln.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/JSj1oi9030NW_PmYpFA7ARG7-Ed2fLrwW3WJsq3IWIIzlwAYhXxlVRpP0oqEbIHq2uWEnkiMqDYe1lSzRTm8bFHAvgzIsQfGIbNG7V9bEPUbDnB9W0xFTVh54-DggFhbyNsU88yPIlb_v33yvO_EjBT3vGu0}
\caption{Modelle}
\end{figure}

\hypertarget{aufgaben-12}{%
\section{Aufgaben}\label{aufgaben-12}}

\begin{itemize}
\tightlist
\item
  {[} {]} Bearbeiten Sie die Aufgabe 3 im GitHub Classroom
\item
  {[} {]} Experimentieren Sie mit
  \href{https://umbrello.kde.org/}{Umbrello}
\end{itemize}

\hypertarget{modellierung-von-software-1}{%
\chapter{Modellierung von Software}\label{modellierung-von-software-1}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Ausgewählte\ UML\ Diagrammtypen}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/14_UML_ModellierungII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{neues-aus-github-1}{%
\section{Neues aus Github}\label{neues-aus-github-1}}

\textbf{Wann wird gearbeitet?}

\begin{longtable}[]{@{}rrrrrrrrrrrrrrrrrrrrrr@{}}
\toprule
Stunde & 0 & 1 & 2 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16 &
17 & 18 & 19 & 20 & 21 & 22 & 23\tabularnewline
\midrule
\endhead
1 & nan & nan & nan & nan & nan & nan & nan & 2 & nan & 3 & 2 & nan &
nan & nan & 1 & nan & nan & nan & nan & nan & nan\tabularnewline
2 & nan & nan & nan & nan & 2 & nan & nan & nan & 2 & 8 & nan & 10 & 24
& 3 & nan & nan & nan & nan & nan & nan & nan\tabularnewline
3 & nan & nan & nan & nan & nan & nan & nan & 1 & 4 & 6 & 7 & 25 & 22 &
nan & nan & nan & nan & nan & 1 & nan & 2\tabularnewline
4 & 2 & nan & nan & 2 & 2 & nan & 5 & 8 & 7 & nan & nan & 29 & 16 & 14 &
12 & nan & 2 & 1 & nan & nan & nan\tabularnewline
5 & nan & nan & 1 & nan & nan & 2 & nan & 12 & 10 & 3 & 1 & 2 & 2 & nan
& 4 & 3 & nan & nan & nan & nan & nan\tabularnewline
6 & nan & nan & nan & nan & nan & 1 & nan & nan & nan & 1 & 2 & 4 & 7 &
7 & 2 & nan & nan & 4 & 1 & nan & nan\tabularnewline
7 & nan & nan & nan & nan & nan & nan & nan & 2 & 4 & 3 & 8 & 5 & 4 & 2
& 4 & nan & nan & nan & nan & nan & nan\tabularnewline
\bottomrule
\end{longtable}

\textbf{Was ist ein guter Commit?}

Das folgende Diagramm zeigt die Commits pro Aufgabe

\begin{longtable}[]{@{}rrrrrrrrrrrrrrrrrr@{}}
\toprule
Task & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 &
15 & 16\tabularnewline
\midrule
\endhead
3 & 7 & 15 & 12 & 8 & 18 & 10 & 5 & 8 & 45 & 21 & 5 & 8 & 18 & 8 & 6 & 6
& 3\tabularnewline
4 & nan & nan & nan & 15 & 13 & 18 & 3 & 5 & 5 & 9 & 4 & 3 & 19 & 2 & 3
& 24 & nan\tabularnewline
\bottomrule
\end{longtable}

\ldots{} und wie viele unterschiedliche Dateien wurden dabei editiert?

\begin{longtable}[]{@{}rrrrrrrrrrrrrrrrrr@{}}
\toprule
Task & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 &
15 & 16\tabularnewline
\midrule
\endhead
3 & 5 & 3 & 2 & 15 & 4 & 5 & 2 & 6 & 3 & 16 & 2 & 2 & 7 & 2 & 2 & 4 &
2\tabularnewline
4 & nan & nan & nan & 26 & 11 & 7 & 5 & 6 & 8 & 6 & 5 & 7 & 7 & 1 & 2 &
6 & nan\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{uml-diagrammtypen}{%
\section{UML Diagrammtypen}\label{uml-diagrammtypen}}

\includegraphics{./img/13_UML/UML-Diagrammhierarchie.png} \footnote{https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/UML-Diagrammhierarchie.svg/1200px-UML-Diagrammhierarchie.svg.png,
  Autor ``Stkl''- derivative work: File: UML-Diagrammhierarchie.png:
  Sae1962, CC BY-SA 4.0}

Im folgenden werden wir uns aus den beiden Hauptkategorien jeweils
folgende Diagrammtypen genauer anschauen:

\begin{itemize}
\item
  Verhaltensdiagramme

  \begin{itemize}
  \tightlist
  \item
    Anwendungsfall Diagramm
  \item
    Aktivitätsdiagramm
  \item
    Sequenzdiagramm
  \end{itemize}
\item
  Strukturdiagramm

  \begin{itemize}
  \tightlist
  \item
    Klassendiagramm
  \item
    Objektdiagramm
  \end{itemize}
\end{itemize}

\hypertarget{anwendungsfall-diagramm}{%
\subsection{Anwendungsfall Diagramm}\label{anwendungsfall-diagramm}}

\begin{quote}
Das Anwendungsfalldiagramm (Use-Case Diagramm) abstrahiert das erwartete
Verhalten eines Systems und wird dafür eingesetzt, die Anforderungen an
ein System zu spezifizieren.
\end{quote}

Ein Anwendungsfalldiagramm stellt keine Ablaufbeschreibung dar! Diese
kann stattdessen mit einem Aktivitäts-, einem Sequenz- oder einem
Kollaborationsdiagramm (ab UML 2.x Kommunikationsdiagramm) dargestellt
werden.

\textbf{Basiskonzepte}

Elemente:

\begin{itemize}
\tightlist
\item
  Systemgrenzen werden durch Rechtecke gekennzeichnet.
\item
  Akteure werden als „Strichmännchen`` dargestellt, dies können sowohl
  Personen (Kunden, Administratoren) als auch technische Systeme sein
  (manchmal auch ein Bandsymbol verwendet). Sie ordnen den Symbolen
  Rollen zu
\item
  Anwendungsfälle werden in Ellipsen dargestellt. Üblich ist die
  Kombination aus Verb und ein Substantiv \texttt{Kundendaten\ Ändern}.
\item
  Beziehungen zwischen Akteuren und Anwendungsfällen müssen durch Linien
  gekennzeichnet werden. Man unterscheidet ``Association'', ``Include'',
  ``Extend'' und ``Generalization''.
\end{itemize}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/RL11Rkf03DtFAInMi63n-HUWeAverGLIkpQ9IKPndCZZgGHLRzDZTCV5EY4f6gIk_6I_Pp-_TJ1KYoqxfgE1TQ2-gWrAhrIOxyI5nakFYYtqM3HOqTvEJ32CKIecXuLr2hievI_Urrt_Z9AuEdMU1ko3kPiCNeIzK4XK-700ymSrtn33WO8HCya2C40CjCL0_nmaoYQDK4eeenPrY4LzJrev66t0SlbdRtv5KgAHmEKhOPL5JiYkpTzGIP9LEdG6_P6f6gubKlxTP8gOerHmZYsyaeR1utkd1rBoDgbk2NowB8JP1gK9fs3Kml7ohV2uNUvGasWsFBQ_JbPkghd5VCaO9MpeZ3MFspBvVpVLExbRavInvHy0}
\caption{Modelle}
\end{figure}

\textbf{Verfeinerung}

Use-Case Diagramme erlauben die Abstraktion von Elementen auf der Basis
von Generalisierungen. So können Akteure von einander erben und
redundante Beschreibungen von Verhalten über
\texttt{\textless{}\textless{}extend\textgreater{}\textgreater{}} oder
\texttt{\textless{}\textless{}include\textgreater{}\textgreater{}}
(unter bestimmten Bedingungen) erweitert werden.

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.40\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.40\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
\texttt{\textless{}\textless{}include\textgreater{}\textgreater{}}
Beziehung\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
\texttt{\textless{}\textless{}extend\textgreater{}\textgreater{}}
Beziehung\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Bedeutung\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
Ablauf von A schließt den Ablauf von B immer ein\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
Ablauf von A kann optional um B erweitert werden\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Anwendung\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
Hierachische Zerlegung\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
Abbildung von Sonderfällen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Abhängigkeiten\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
A muss B bei der Modellierung berücksichtigen\strut
\end{minipage} & \begin{minipage}[t]{0.40\columnwidth}\raggedright
Unabhängige Modellierung möglich\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/bLAnQiCm4Dtr5OUdPaWW6OinWT9cA8GEIQSkidorXTLJa4vG4l8t-OPEsVnZbPrGkqqBwVQiU-_TtJlFFKl7uSq8gTWwM4ZF0rXYZkxy_MIDtg8Mmg5YIQL1K1MgsWQ6dGWUbVG8wxifI0-9M22xva0rM5UW8p4U2tnd9AyjmSPgOlz2i9IgygeAEQoSfXffaeY1r-paTUyzqhL6aNooQHU0SGOtAqbRf57_i2P6Lqd3mzSu-G3FUlQYENX6g3J9u7ECY-jEABuIwcZz1AT1Hp_g3wWZak7LD1--qvyJ7LPp5pOCEI8L7UL21PF9toF1BQIf9cL2WLacVZVzZuCW6qb9cZvRbsEXgGnKPXd4m7UFpR4oSM4dgOOIDwOvHd_7-wGzsd8gBXE9hTl2SXf15tZRhJjc4PjT8PXz4-p5F8Buytu2}
\caption{PartyUCD}
\end{figure}

\textbf{Anwendungsfälle}

\begin{itemize}
\tightlist
\item
  Darstellung der wichtigsten Systemfunktionen
\item
  Austausch mit dem Anwender und dem Management auf der Basis logischer,
  handhabbarer Teile
\item
  Dokumentation des Systemüberblicks und der Außenschnittstellen
\item
  Indentifikation von Anwendungsfällen
\end{itemize}

\textbf{Vermeiden Sie \ldots{}}

\begin{itemize}
\tightlist
\item
  \ldots{} eine zu detaillierte Beschreibung von Operationen und
  Funktionen
\item
  \ldots{} nicht funktionale Anforderungen mit einem Use-Case abbilden
  zu wollen
\item
  \ldots{} Use-Case Analysen aus Entwicklersicht durchzuführen
\item
  \ldots{} zu viele Use-Cases in einem Diagramm abzubilden (max. 10)
\end{itemize}

\hypertarget{aktivituxe4tsdiagramm}{%
\subsection{Aktivitätsdiagramm}\label{aktivituxe4tsdiagramm}}

\begin{quote}
Aktivitätsdiagramme stellen die Vernetzung von elementaren Aktionen und
deren Verbindungen mit Kontroll- und Datenflüssen grafisch dar.
\end{quote}

\textbf{Aktivitätsmodellierung in UML1}

\textbar{} \textbar{}

\textbar{}Aktivitätsdiagramme.plantUML \textbar{} ActivityUser.plantUML
\textbar{}

Bis UML 1.x waren Aktivitätsdiagramme eine Mischung aus
Zustandsdiagramm, Petrinetz und Ereignisdiagramm, was zu theoretischen
und praktischen Problemen führte.

\textbf{Erweiterung des Konzeptes in UML2}

\begin{quote}
``Was früher Aktivitäten waren sind heute Aktionen.''
\end{quote}

UML2 strukturiert das Konzept der Aktivitätsmodellierung neu und führt
als übergeordnete Gliederungsebene Aktivitäten ein, die Aktionen,
Objektknoten sowie Kontrollelemente der Ablaufsteuerung und verbindende
Kanten umfasst. Die Grundidee ist dabei, dass neben dem Kontrollfluss
auch der Objektfluss modelliert wird.

\begin{itemize}
\tightlist
\item
  Aktivitäten definieren Strukturierungselemente für Aktionen, die durch
  Ein- und Ausgangsparameter, Bedingungen, zugehörige Aktionen und
  Objekte sowie einen Bezeichner gekennzeichnet sind.
\end{itemize}

\begin{verbatim}

     .---------------------------------------------------.
     | Flächenberechnung Rechteck     ≪ precondition ≫   |
     |                                   Höhe ≥ 0        |
 +---+----+                              Breite ≥ 0      |
 | Höhe   |----ᗒ                                         |
 +---+----+                                          +---+----+
     |                                          ----ᗒ| Fläche |
 +---+----+                                          +---+----+
 | Breite |----ᗒ                                         |
 +---+----+                                              |
     |                                                   |
     .---------------------------------------------------.
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Aktionen stehen für den Aufruf eines Verhaltens oder die Bearbeitung
  von Daten, die innerhalb einer Aktivität nicht weiter zerlegt wird.
\end{itemize}

\begin{verbatim}

 +--------------------------+
 |   ≪ localPrecondition ≫  |\
 |                          +-+
 |  Papier vorhanden          |
 +----------------------------+
               \
                \
     .-----------------------.         .-------------------------.
     | Einladung verschicken |  -----ᗒ | Getränke einkaufen      |
     .-----------------------.         .-------------------------.
                  \
                   \
         +----------------------------+
         | ≪ localPostcondition ≫     |\
         |                            +-+
         |  Hälfte der Gäste angenommen |
         +------------------------------+
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Objekte repräsentieren Daten und Werte, die innerhalb der Aktivität
  manipuliert werden. Damit ergibt sich ein nebeneinander von Kontroll-
  und Objektfluss.
\end{itemize}

\begin{verbatim}
                      Kontrollfluss
     .-------------.                    .-------------.
     | Aktion      |------------------ᗒ | Aktion      |
     .-------------.                    .-------------.

 ---------------------------------------------------------------

             Ausgabe-                 Eingabe-
              pin                      pin
                       Objektfluss
    .-------------._                   _.-------------.
    | Aktion      |_|----------------ᗒ|_| Aktion      |
    .-------------.                     .-------------.


    .-------------.   +-------------+     .-------------.
    | Aktion      |---| Objekt      |---ᗒ | Aktion      |
    .-------------.   +-------------+     .-------------.
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Signale und Ereignisse sind die Schnittstellen für das Auslösen einer
  Aktion
\end{itemize}

\begin{verbatim}

 +--------------.       .----------------+       .------------------------.
 |    Sende      \       \  Erster Gast  |------ᗒ| Vorbereitungen beenden |
 |    Signal     /       /  eingetroffen |       .------------------------.
 +--------------.       .----------------+
\end{verbatim}

\textbf{Beispiel}

\begin{figure}
\centering
\includegraphics{./img/14_UML_II/ActivityDiagram.png}
\caption{Aktivitätsdiagramme}
\end{figure}

\textbf{Anwendungsfälle}

\begin{itemize}
\tightlist
\item
  Verfeinerung von Anwendungsfällen (aus den Use Case Diagrammen)
\item
  Darstellung von Abläufen mit fachlichen Ausführungsbedingungen
\item
  Darstellung für Aktionen im Fehlerfall oder Ausnahmesituationen
\end{itemize}

!?\href{https://www.youtube.com/watch?v=VaKCZOhVJkQ}{Link}

\hypertarget{sequenzdiagramm}{%
\subsection{Sequenzdiagramm}\label{sequenzdiagramm}}

\begin{quote}
Sequenzdiagramme beschreiben den Austausch von Nachrichten zwischen
Objekten mittels Lebenslinien.
\end{quote}

Ein Sequenzdiagramms besteht aus einem Kopf- und einem Inhaltsbereich.
Von jedem Kommunikationspartner geht eine Lebenslinie (gestrichelt) aus.
Es sind zwei synchrone Operationsaufrufe, erkennbar an den Pfeilen mit
ausgefüllter Pfeilspitze, dargestellt. Notationsvarianten für synchrone
und asynchrone Nachrichten

Eine Nachricht wird in einem Sequenzdiagramm durch einen Pfeil
dargestellt, wobei der Name der Nachricht über den Pfeil geschrieben
wird. Nachrichten können:

\begin{itemize}
\tightlist
\item
  Operationsaufrufe einer Klasse sein
\item
  Ergebnisse einer Operation
\item
  Signale
\item
  Interaktionen mit dem Nutzern
\item
  das Setzen einer Variablen
\end{itemize}

Synchrone Nachrichten werden mit einer gefüllten Pfeilspitze, asynchrone
Nachrichten mit einer offenen Pfeilspitze gezeichnet.

Die schmalen Rechtecke, die auf den Lebenslinien liegen, sind
Aktivierungsbalken, die den Focus of Control anzeigen, also jenen
Bereich, in dem ein Objekt über den Kontrollfluss verfügt, und aktiv an
Interaktionen beteiligt ist.

\textbf{Beispiel}

\begin{figure}
\centering
\includegraphics{./img/14_UML_II/SequenzCheckEmail.png}
\caption{Aktivitätsdiagramme}
\end{figure}

\textbf{Bestandteile}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.15\columnwidth}\raggedright
Name\strut
\end{minipage} & \begin{minipage}[b]{0.79\columnwidth}\raggedright
Beschreibung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Objekt\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Dient zur Darstellung einer Klasse oder eines Objekts im
Kopfbereich.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Nachrichtensequenzen\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Modelliert den Informationsfluss zwischen den Objekten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Aktivitätsbalken\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Repräsentiert die Zeit, die ein Objekt zum Abschließen einer Aufgabe
benötigt.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Paket\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Strukturiert das Sequenzdiagramm\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Lebenslinien-Symbol\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Stellt durch die Ausdehnung nach unten den Zeitverlauf dar.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Fragmente\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Kapseln Sequenzen in „Wenn-dann``-Szenarien, optionalen Interaktionen,
Schleifen, etc.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Alternativen-Symbol\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Stellt eine Auswahl zwischen zwei oder mehr Nachrichtensequenzen (die
sich in der Regel gegenseitig ausschließen) dar\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.15\columnwidth}\raggedright
Interaktionsreferenzen\strut
\end{minipage} & \begin{minipage}[t]{0.79\columnwidth}\raggedright
Binden Submodelle und deren Ergebnisse ein deren\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Beispiel}

\textbar{}

\textbar{}Alkoholkontrolle.plantUML \textbar{}

\hypertarget{klassendiagramme}{%
\subsection{Klassendiagramme}\label{klassendiagramme}}

\begin{quote}
Ein Klassendiagramm ist eine grafischen Darstellung (Modellierung) von
Klassen, Schnittstellen sowie deren Beziehungen.
\end{quote}

\textbf{Beispiel}

Nehmen wir an, sie planen die Software für ein Online-Handel System. Es
soll sowohl verschieden Nutzertypen (\emph{Customer} und
\emph{Administrator}) als auch die Objekt \emph{ShoppingCart} und
\emph{Order} umfassen.

\begin{verbatim}
@startuml
left to right direction
skinparam classAttributeIconSize 0
abstract class User{
  -userId: string
  -password: string
  -email: string
  -loginStatus: string
  +verifyLogin():bool
  +login()
}

class Customer{
  -customerName: string
  +register()
  +updateProfile()
}

class Administrator{
  -adminName: string
  +updateCatlog(): bool
}

class ShoppingCart{
  -cartId: int
  +addCartItem()
  +updateQuantity()
  +checkOut()
}

class Order{
  -orderId: int
  -customerId: int
  -shippingId: int
  -dateCreated: date
  -dateShipped: date
  -status: string
  +updateQuantity()
  +checkOut()
}

class ShippingInfo{
  -shipingId: int
  -shipingType: string
  +updateShipingInfo()
}

User <|-- Customer
User <|-- Administrator
Customer "1" *-- "0..*" ShoppingCart
Customer "1" *-- "0..*" Order
Order "1" *-- "1" ShippingInfo

@enduml
\end{verbatim}

\hypertarget{klassen}{%
\subsubsection{Klassen}\label{klassen}}

Klassen werden durch Rechtecke dargestellt, die entweder nur den Namen
der Klasse (fett gedruckt) tragen oder zusätzlich auch Attribute,
Operationen und Eigenschaften spezifiziert haben. Oberhalb des
Klassennamens können Schlüsselwörter in Guillemets und unterhalb des
Klassennamens in geschweiften Klammern zusätzliche Eigenschaften (wie
\{abstrakt\}) stehen.

Elemente der Darstellung :

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.14\columnwidth}\raggedright
Eigenschaften\strut
\end{minipage} & \begin{minipage}[b]{0.80\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Attribute\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
beschreiben die Struktur der Objekte: Bestandteile und darin enthalten
Daten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Operationen\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
Beschreiben das Verhalten der Objekte (Methoden)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Zusicherungen\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
Bedingungen, Voraussetzungen und Regeln, die die Objekte erfüllen
müssen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.14\columnwidth}\raggedright
Beziehungen\strut
\end{minipage} & \begin{minipage}[t]{0.80\columnwidth}\raggedright
Beziehungen einer Klasse zu anderen Klassen\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Wenn die Klasse keine Eigenschaften oder Operationen besitzt, kann die
unterste horizontale Linie entfallen.

\begin{figure}
\centering
\includegraphics{./img/14_UML_II/ClassTypes.png}
\caption{OOPGeschichte}
\end{figure}

\textbf{Objekte vs.~Klassen}

\begin{longtable}[]{@{}ll@{}}
\toprule
Klassendiagramm & Beispielhaftes Objektdiagramm\tabularnewline
\midrule
\endhead
&\tabularnewline
\bottomrule
\end{longtable}

Darstellung motiviert nach \emph{What is Object Diagram?},
https://www.visual-paradigm.com/guide/uml-unified-modeling-language/what-is-object-diagram/,
Autor unbekannt

\begin{quote}
\textbf{Merke:} Vermeiden Sie bei der Benennung von Klassen, Attributen,
Operationen usw. sprachspezifische Zeichen
\end{quote}

Modellierung in UML

\begin{verbatim}
@startuml

@enduml
\end{verbatim}

\begin{verbatim}
@startuml
skinparam classAttributeIconSize 0

class Zähler{
  +i: int = 12345
}
@enduml
\end{verbatim}

Ausführbarer Code in Python 2

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ Zähler:}
    \CommentTok{"""A simple example class"""}
\NormalTok{    i }\OperatorTok{=} \DecValTok{12345}

\NormalTok{A }\OperatorTok{=}\NormalTok{ Zähler()}
\BuiltInTok{print}\NormalTok{(A.i)}
\end{Highlighting}
\end{Shaded}

Ausführbarer Code in C++ 20

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{#include }\ImportTok{<iostream>}

\NormalTok{class Zähler\{}
\NormalTok{  public:}
   \DataTypeTok{int}\NormalTok{ i = }\DecValTok{12345}\NormalTok{;}
\NormalTok{\};   }

\DataTypeTok{int}\NormalTok{ main()}
\NormalTok{\{}
\NormalTok{  Zähler A = Zähler();}
\NormalTok{  std::cout << A.i;}
  \ControlFlowTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Sichtbarkeitsattribute}

\begin{verbatim}

| Zugriffsmodifizierer | Innerhalb eines Assemblys       || Außerhalb eines Assemblys      |
|                      | Vererbung      | Instanzierung  || Vererbung     | Instanzierung  |
| -------------------- | -------------- | -------------- || ------------- | -------------- |
| `public`             | ja             | ja             || ja            | ja             |
| `private`            | nein           | nein           || nein          | nein           |
| `protected`          | ja             | nein           || ja            | nein           |
| `internal`           | ja             | ja             || nein          | nein           |
| `ìnternal protected` | ja             | ja             || ja            | nein           |
\end{verbatim}

\textbf{public, private}

Die Sichtbarkeitsattribute \texttt{public} und \texttt{private} sind
unabhängig vom Vererbungs-, Instanzierungs- oder Paketstatus einer
Klasse. Im Beispiel kannn der TrafficOperator nicht auf die
Geschwindigkeiten der Instanzen von Car zurückgreifen.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/NP51pjCm48NtFiLJLd-XhNwsMRK2KR6eYbJ4Xh9mx4aonBKZUr944RVX6EnwCPoaWEZspJVVFCkR93hAS7OgTUnx7VKPnkcKjYAHgq7edGd-o5V2ishP4Wn7uqXD45xh-5q1AwIUo9QmOQWSpGd9SGoVvcmc5ddq4hi_emN-hlnGT-M7gEkQpQ6dg2NSzH-fvNmrbUF5Jvydopvupi3MkPobfyMeU5X6yQh0YzKAnNEvNgF884eKJIIk1TS1UgWBfNmGWeGUeSQCJ6MXNSBx6B9ClYrFliz5sQ0XmPwa3PQMo6daYnP2-XV_9toiLEADJZXKNwWJTDhxiGGiKtRjA9dsAtlBJKSib6VEKSHRtSOh3GsTV6uTRxzCDxs1_1A92RhAa6VJ2YuKRp-zfUZNQaFUvg_z3G00}
\caption{PublicPrivate}
\end{figure}

\textbf{protected}

Die abgeleitete Klassen Bus und PassagerCar erben von Car und übernehmen
damit deren Methoden. Die Zahl der Sitze wird beispielsweise mit ihrem
Initialisierungswert von 5 auf 40 gesetzt. Zudem muss die Methode
\texttt{StopAtStation} auch auf die Geschwindigkeit zurückgreifen
können.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/XKy_Jm8n5D_lK_nI5z10CD7beWd8v8J94HVZqEkzWuPUUsbV7L2_kuKgXXjqQPhV_pSFB3t7pXHXfsqllUoWZ0nXmUnr7PaUbRELtXDcnLOt1AMzCbJ8Eh2NYhCQI-dV2s22q1Cr9HeNQqD7nCQk9hzgAv8S4dA1G5mTPAEiofvnegwm-Q76E8Ly5aKkUKeFsGtvt3RCBg4junwtluw76FuGtioEdSijgTrQgnrn6EKP5Rj-mHLBriucx1Iuzh9jjLhrv2MxxnNFjDNAK8cqw-Nr6D0vgnE_C2PX8IUa7-u-9fF3AfGGv6l6cxFYn9nTU2uP54DS2rmcXvYLqod4qBZnf5l6FaB6zbzt7ZGqpSasiJDV}
\caption{Protected}
\end{figure}

\textbf{internal}

Ein Member vom Typ \texttt{protected\ internal} einer Basisklasse kann
von jedem Typ innerhalb seiner enthaltenden Assembly aus zugegriffen
werden.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/JOwzRkf044RxVOfFha38YDjQ2463T2b3b2PACUoExH7hjRK_HKZ8iqTcRONspCmvim-HV4oTLU4gRY1F7RIb40unUhcaoFzrxyvoOsnKAuQXnMlBQY1zfORnqfDvzLJNeh7T7djhsEzs-5B87hnnAzho280IOM0s5KoVBfOVx0U1utd4Yqpppl8nNA6PXykdgxkwAvNzf-HqbDwDWHAQVAWmFLHLKpoyVwZHTPOkMOfyecwn_5CSn0-M76T5ozB45a-r5OxsCn_CDHJ_2fGbYasrNgEOEgXGD9wbZhWbKAeBDRjHVkymhQazEvCw-mi0}
\caption{Protected}
\end{figure}

\begin{quote}
\textbf{Merke: } Der UML Standard kennt nur \texttt{+\ public},
\texttt{-\ private}, \texttt{\#\ protected} und
\texttt{\textasciitilde{}\ internal}. Das C\# spezifische
\texttt{internal\ protected} ist als weitere
Differenzierungsmöglichlichkeit nicht vorgesehen.
\end{quote}

\textbf{Attribute}

\begin{quote}
\textbf{Merke:} In der C\# Welt sprechen wir bei Attributen von
Membervariablen und Feldern.
\end{quote}

Im einfachsten Fall wird ein Attribut durch einen Namen repräsentiert,
der in der Klasse eindeutig sein muss - Die Klasse bildet damit den
Namensraum der enthaltenen Attribute.

Entsprechend der Spezifikation sind folgende Elemente eines Attributes
definierbar:

\begin{verbatim}
[Sichtbarkeit] [/] Name [: Typ] [ Multiplizität ] [= Vorgabewert] [{Eigenschaftswert}]
\end{verbatim}

\begin{itemize}
\item
  \emph{Sichtbarkeit} \ldots{} vgl. vorheriger Absatz Das ``/''
  bedeutet, dass es sich um ein abgeleitetes Attribut handelt, dessen
  Daten von anderen Attributen abhängt
\item
  \emph{Name} \ldots{} des Attributes, Leer und Sonderzeichen sollten
  weggelassen werden, um zu vermeiden, dass Sie bei der Implementierung
  Probleme generieren.
\item
  \emph{Typ} \ldots{} UML verwendet zwar einige vordefinierte Typen
  (Integer, String, Boolean) beinhaltet aber keine Einschränkungen zu
  deren Wertebereich!
\item
  \emph{Multiplizität} \ldots{} die Zahlenwerte in der rechteckigen
  Klammer legen eine Ober- und Untergrenze der Anzahl (Kardinalitäten)
  von Instanzen eines Datentyps fest.
\end{itemize}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.09\columnwidth}\raggedright
Beispiel\strut
\end{minipage} & \begin{minipage}[b]{0.85\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{0..1}\strut
\end{minipage} & \begin{minipage}[t]{0.85\columnwidth}\raggedright
optionales Attribut, das aber höchstens in einer Instanz zugeordnet
wird\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{1..1}\strut
\end{minipage} & \begin{minipage}[t]{0.85\columnwidth}\raggedright
zwingendes Attribut\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{0..n}\strut
\end{minipage} & \begin{minipage}[t]{0.85\columnwidth}\raggedright
optionales Attribute mit beliebiger Anzahl\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{1..*}\strut
\end{minipage} & \begin{minipage}[t]{0.85\columnwidth}\raggedright
zwingend mit beliebiger Anzahl größer Null\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.09\columnwidth}\raggedright
\texttt{n..m}\strut
\end{minipage} & \begin{minipage}[t]{0.85\columnwidth}\raggedright
allgemein beschränkte Anzahl größer 0\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{itemize}
\item
  \emph{Vorgabewerte} \ldots{} definieren die automatische Festlegung
  des Attributes auf einen bestimmten Wert
\item
  \emph{Eigenschaftswerte} \ldots{} bestimmen die besondere
  Charakteristik des Attributes
\end{itemize}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Eigenschaft\strut
\end{minipage} & \begin{minipage}[b]{0.82\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{readOnly}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
unveränderlicher Wert\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{subsets}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
definiert die zugelassen Belegung als Untermenge eines anderen
Attributs\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{redefines}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
überschreiben eines ererbten Attributes\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{ordered}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Inhaltes eines Attributes treten in geordneter Reihenfolge ohne
Dublikate auf\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{bag}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Attribute dürfen ungeordnet und mit Dublikaten versehen enthalten
sein\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{sequence}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
legt fest, dass der Inhalt sortiert, aber ohne Dublikate ist\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{composite}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Daraus ergeben sich UML-korrekte Darstellungen

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.24\columnwidth}\raggedright
Attributdeklaration\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright
Korrekt\strut
\end{minipage} & \begin{minipage}[b]{0.62\columnwidth}\raggedright
Bemerkung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{public\ zähler:int}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Umlaute sind nicht verboten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{/\ alter}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Datentypen müssen nicht zwingend angegeben werden\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{privat\ adressen:\ String\ {[}1..*{]}}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Menge der Zeichenketten\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.24\columnwidth}\raggedright
\texttt{protected\ bruder\ Person}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
ja\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Datentyp kann neben den Basistypen jede andere Klasse oder eine
Schnittstelle sein\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.24\columnwidth}\raggedright
String\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Name des Attributes fehlt\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.24\columnwidth}\raggedright
privat, public name: String\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.62\columnwidth}\raggedright
Fehler wegen mehrfachen Zugriffsattributen\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/LP1FImCn4CNl-HIFUXHhrzO_18HQyE2v7WJna4q66yncbcGMr6Nzx4Pj3RqDFtxlmRnr5fDaw8BARpxs9faEDfYSxqIIRmUX1yjnwpy92xNpZc1zie7KhuJxTzFrWKO5c4EWqV1H2ZcjxEB0nYn6l9tG3stm5XgEoqMunNBUh8fnLbDBZPOva8c5drI-qiWxJeA2log-rDYMCxwMijaZPPbXJ6GSn_0nALJnIcFpl9ZFcvVHSjTpza97mlL_qrxZv2YH-v7EgtQZ9hKVOdCqmTFVkvDQKtHbt6y0}
\caption{Protected}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{namespace}\NormalTok{ Rextester}
\NormalTok{\{}
  \KeywordTok{class}\NormalTok{ Example}
\NormalTok{  \{}
    \DataTypeTok{int}\NormalTok{ attribute1;}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ attribute2;}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{double}\NormalTok{ pi = }\FloatTok{3.14}\NormalTok{;}
    \KeywordTok{private} \DataTypeTok{bool}\NormalTok{ attribute3;}
    \KeywordTok{protected} \DataTypeTok{short}\NormalTok{ attribute4;}
    \KeywordTok{internal} \DataTypeTok{const} \DataTypeTok{string}\NormalTok{ attribute5 = }\StringTok{"Test"}\NormalTok{;}
\NormalTok{    B attribute6;}
\NormalTok{    System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Speciallized}\NormalTok{.}\FunctionTok{StringCollection}\NormalTok{ attribute7;}
    \KeywordTok{private} \DataTypeTok{int}\NormalTok{ wert;}
\NormalTok{    Object attribute8\{}
      \KeywordTok{get}\NormalTok{\{}\KeywordTok{return}\NormalTok{ wert * }\DecValTok{10}\NormalTok{;\}}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Operationen}

\begin{quote}
\textbf{Merke:} In der C\# Welt sprechen wir bei Operationen von
Methoden.
\end{quote}

Operationen werden durch mindestens ihren Nahmen sowie wahlfrei weitere
Angaben definiert. Folgende Aspekte können entsprechend der UML
Spezifikation beschrieben werden:

\begin{verbatim}
[Sichtbarkeit] Name (Parameterliste) [: Rückgabetyp] [{Eigenschaftswert}]
\end{verbatim}

Dabei ist die Parameterliste durch folgende Elemente definiert:

\begin{verbatim}
[Übergaberichtung] Name [: Typ] [Multiplizität] [= Vorgabewert][{Eigenschaftswert}]
\end{verbatim}

\begin{itemize}
\item
  \emph{Sichbarkeit} \ldots{} analog Attribute
\item
  \emph{Name} \ldots{} analog Attribute
\item
  \emph{Parameterliste} \ldots{} Aufzählung der durch die aufrufende
  Methode übergebenden Parameter, die im folgenden nicht benannten
  Elemente folgend den Vorgaben, die bereits für die Attribute erfasst
  wurden:

  \begin{itemize}
  \item
    \emph{Übergaberichtung} \ldots{} Spezifiziert die Form des Zugriffes
    (\texttt{in} = nur lesender Zugriff, \texttt{out} = nur schreibend
    (reiner Rückgabewert), \texttt{inout} = lesender und schreibender
    Zugriff)
  \item
    \emph{Vorgabewert} \ldots{} default-Wert einer Übergabevariablen
  \end{itemize}
\item
  \emph{Rückgabetyp} \ldots{} Datentyp oder Klasse, der nach der
  Operationsausführung zurückgegeben wird.
\item
  \emph{Eigenschaftswert} \ldots{} Angaben zu besonderen Charakteristika
  der Operation
\end{itemize}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/HO_1IiH044JlynK5NhAAYzdLIq1O5G-UzoWUnfb66oSzeTC1DSHlTpQ1pQtegbT57thpQaERNF_5qddrBKBoVVzWflm-6Bs4B4V-9TouJuw4m1eIkJc4vs_VTeb61-0AOoap3XDoHrfKbhhQdAphzRAhM33lr0rO3FUusongLF8nI_gPJip5okmBamTRi1qQFCsjVslYjZhx-mP7KvOFlDRRxUKRngoHbE9KPXxTv0uaiJpy3m00}
\caption{Protected}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{class}\NormalTok{ Example}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{operation1}\NormalTok{()\{}
    \CommentTok{// Implementierung}
\NormalTok{  \}}

  \KeywordTok{private} \DataTypeTok{int} \FunctionTok{operation2}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ param1 = }\DecValTok{5}\NormalTok{)}
\NormalTok{  \{}
    \CommentTok{// Implementierung}
    \KeywordTok{return}\NormalTok{ value;}
\NormalTok{  \}}

  \KeywordTok{protected} \DataTypeTok{void} \FunctionTok{operation3}\NormalTok{ (}\KeywordTok{ref}\NormalTok{ C param3)}
\NormalTok{  \{}
    \CommentTok{// Implementierung}
\NormalTok{    param3 = ...}
\NormalTok{  \}}

  \KeywordTok{internal}\NormalTok{ B }\FunctionTok{operation4}\NormalTok{ (}\KeywordTok{out}\NormalTok{ StringCollection param3)}
\NormalTok{  \{}
    \CommentTok{// Implementierung}
    \KeywordTok{return}\NormalTok{ value;}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{schnittstellen}{%
\subsubsection{Schnittstellen}\label{schnittstellen}}

Eine Schnittstelle wird ähnlich wie eine Klasse mit einem Rechteck
dargestellt, zur Unterscheidung aber mit dem Schlüsselwort
\texttt{interface} gekennzeichnet.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/NP1D3e9038NtFKMNke0J48BHZOc91p0kIgbnp30aCtNXZtSN5K9nsUzxRvffbPIYNbiFPzS8ieli1O7gf95OaJsbXAjXtBcaanlfklDUM5qNm0MLU28M_4InABOZA4iZfyPV17wrPvxFTzg2aNOrJCnaisp-a1q67IFTlWw6puu07u2uho_2UZYYU6abw8QKUfpSNHPBU44beUdFzmO0}
\caption{Protected}
\end{figure}

Eine alternative Darstellung erfolgt in der LolliPop Notation, die die
grafische Darstellung etwas entkoppelt.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/ZP0n3e9044NxESMKK7W22Q7GmaHZOMaibkK3gykIx0wDnhDu62_cOg8anC9fNzwRoHH1b9UXizIQ2goDrnPCnWbyhJJuq7iny8Aj2GBEiiq7vVcDE0wCgmSqS9oie-TLmqYNRsHx1DtEoPr8MnK2hvJ0bSfTU2pjopEq74yCYmvE8bN47CmLIJf9EpmVrIZ-9ytkJzB5jFON_EQ92hWgVkO5}
\caption{Loolipop}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{interface}\NormalTok{ Sortierliste\{}
  \DataTypeTok{void} \FunctionTok{einfuegen}\NormalTok{ (Eintrag e);}
  \DataTypeTok{void} \FunctionTok{loeschen}\NormalTok{ (Eintrag e);}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Datenbank : SortierteListe}
\NormalTok{\{}
  \DataTypeTok{void} \FunctionTok{einfuegen}\NormalTok{ (Eintrag e) \{}\CommentTok{//Implementierung\};}
  \DataTypeTok{void} \FunctionTok{loeschen}\NormalTok{ (Eintrag e) \{}\CommentTok{//Implementierung\};}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{beziehungen}{%
\subsubsection{Beziehungen}\label{beziehungen}}

Die Möglichkeiten der Verknüpfung zwischen Klassen und Interfaces lassen
sich wie folgt gliedern:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Beziehung\strut
\end{minipage} & \begin{minipage}[b]{0.49\columnwidth}\raggedright
Darstellung\strut
\end{minipage} & \begin{minipage}[b]{0.30\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Generalisierung\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
gerichtete Beziehung zwischen einer generelleren und einer spezielleren
Klasse (Vererbung)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Assoziationen (ohne Anpassung)\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
beschreiben die Verknüpfung allgemein\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Assoziation (Komposition/Aggregation)\strut
\end{minipage} & \begin{minipage}[t]{0.49\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
Bildet Beziehungen von einem Ganzen und seinen Teilen ab\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{verwendung-von-uml-tools}{%
\section{Verwendung von UML Tools}\label{verwendung-von-uml-tools}}

Verwendung von Klassendiagrammen

\begin{itemize}
\tightlist
\item
  \ldots{} unter Umbrello (UML Diagramm Generierung / Code Generierung)
\item
  \ldots{} unter Microsoft Studio
  \href{https://docs.microsoft.com/de-de/visualstudio/ide/class-designer/how-to-add-class-diagrams-to-projects?view=vs-2019}{Link})
\end{itemize}

!?\href{https://www.youtube.com/watch?v=syYyQ7LlcPc}{VisualStudio}

\begin{itemize}
\tightlist
\item
  \ldots{} unter Visual Studio Code mit PlantUML
\end{itemize}

\begin{quote}
\textbf{Aufgabe:} Wer findet eine ``automatisierbare'' Lösung?
\end{quote}

\hypertarget{aufgaben-13}{%
\section{Aufgaben}\label{aufgaben-13}}

\begin{itemize}
\tightlist
\item
  {[} {]} Experimentieren Sie mit der automatischen Extraktion von UML
  Diagrammen für Ihre Computer-Simulation aus den Übungen
\item
  {[} {]} Evaluieren Sie das Add-On ``Class Designer'' für die Visual
  Studio Umgebung
\end{itemize}

\begin{figure}
\centering
\includegraphics{./img/14_UML_II/ClassDesigner.png}
\caption{ClassDesigner}
\end{figure}

\hypertarget{modellierung-von-software-2}{%
\chapter{Modellierung von Software}\label{modellierung-von-software-2}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Fallbeispiel\ UML\ Modellierung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/15_UML_ModellierungIII.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{beispielszenario-uml-modellierung}{%
\section{Beispielszenario
UML-Modellierung}\label{beispielszenario-uml-modellierung}}

Das folgende Beispiel entspricht der Analyse, die auf der Webseite
\href{http://www.highscore.de/uml/titelseite.html}{Link} von Boris
Schäling beschrieben wird (CC BY-NC-ND 3.0 DE)\footnote{Boris Schäling,
  ``Der moderne Softwareentwicklungsprozess mit UML, Kapitel 3: Das
  Aktivitätsdiagramm'' http://www.highscore.de/uml/titelseite.html}.

Hier sind auch weitergehende Informationen und Designdiskussionen zu
finden. Die entsprechenden Texte sind jeweils in kursiver Schrift
gehalten, Ergänzungen für die Einbettung in dieser Vorlesung
entsprechend hervorgehoben. Ein zusätzliches Durcharbeiten der
Originalunterlagen wird empfohlen.

Der Anforderungskatalog an den beispielhaft zur realisierenden
Onlineshop gliedert sich wie folgt:

\begin{itemize}
\item
  \emph{Alle im Online-Shop erhältlichen Artikel besitzen eine
  eindeutige Artikelnummer, einen Namen und einen Preis. Außerdem sollen
  Artikel aus dem Angebot entfernt werden können, ohne ihre Daten aus
  dem System zu löschen.}
\item
  \emph{Während des Bestellvorgangs geben Kunden eine Rechnungs- und
  Lieferanschrift ein. Grundsätzlich wird zwischen diesen beiden
  Anschriften nicht unterschieden. Wenn ein Kunde es verlangt, kann er
  jedoch unterschiedliche Adressen für Rechnung und Lieferung angeben.}
\item
  \emph{Die Rechnungs- und Lieferanschrift bestehen aus der Anrede, die
  Kunden aus einer Liste wählen, dem Vor- und Nachnamen, der Straße,
  Hausnummer, Postleitzahl und dem Ort. Da Bestellungen europaweit
  ausgeliefert werden, wählen Kunden außerdem ihr Land aus einer Liste
  aus. Für die Zustellung über einen Paketdienst ins Ausland ist es
  notwendig, dass Kunden auch ihre Telefonnummer angeben. Darüber hinaus
  müssen sie ihre Email-Adresse angeben, an die am Ende des
  Bestellvorgangs eine Bestätigungsmail geschickt wird.}
\item
  \emph{Kunden dürfen wählen, auf welche Weise sie ihre Bestellung
  bezahlen möchten. Als Zahlungsmethoden stehen Nachnahme, Bankeinzug
  und Vorauskasse zur Verfügung. Je nach gewählter Zahlungsmethode
  fallen zusätzliche Kosten an. Außerdem muss beachtet werden, dass je
  nach Land, in das die Bestellung ausgeliefert werden soll,
  unterschiedlich hohe Kosten für Zahlungsmethoden anfallen: Zum
  Beispiel ist die Nachnahmegebühr im Inland geringer als die
  Nachnahmegebühr bei einem Versand ins Ausland.}
\item
  \emph{Was für Kosten für Zahlungsmethoden gilt, trifft auch auf
  Verpackungs- und Versandkosten zu: Diese fallen je nach Land
  unterschiedlich hoch aus.}
\item
  \emph{Es dürfen nur Bestellungen aus Ländern entgegengenommen werden,
  bei denen die Kosten von mindestens einer Zahlungsmethode bekannt
  sind. Ist also für ein Land nicht bekannt, was ein Versand per
  Nachnahme, Bankeinzug oder Vorauskasse an Kosten verursacht, darf für
  dieses Land keine Bestellung entgegengenommen werden. Dieses Land darf
  also nicht bei Eingabe einer Lieferanschrift ausgewählt werden
  können.}
\item
  \emph{Es dürfen für eine Bestellung in ein Land nur die
  Zahlungsmethoden angeboten werden, für die die Kosten der
  Zahlungsmethoden für dieses Land bekannt sind. Ist zum Beispiel nicht
  bekannt, was ein Versand per Nachnahme nach Italien kosten würde, darf
  die Nachnahme als Zahlungsmethode für Bestellungen aus Italien
  natürlich nicht angeboten werden. Sind lediglich die Kosten für eine
  Zahlungsmethode bekannt, hat der Kunde keine Wahl und wird automatisch
  zu dieser Zahlungsmethode weitergeleitet.}
\item
  \emph{Wenn der Wert einer Bestellung eine festgelegte Grenze
  überschreitet, werden keine Verpackungs- und Versandkosten in Rechnung
  gestellt.}
\item
  \emph{Kundendaten müssen bei der Eingabe auf Vollständigkeit und
  Richtigkeit überprüft werden, soweit dies technisch möglich ist.
  Fehlen Daten oder sind Daten falsch angegeben, müssen verständliche
  Fehlermeldungen ausgegeben werden, die gleichzeitig erklären, wie der
  Fehler behoben werden kann.}
\item
  \emph{In vielen Ländern, in die geliefert wird, gibt es einen
  Distributor, an den Bestellungen im Online-Shop weitergeleitet werden.
  Das muss auf sicherem Weg geschehen, da mit Kunden- und Bestelldaten
  natürlich verantwortungsvoll umgegangen wird. Gleichzeitig soll diese
  Weitergabe jedoch automatisiert sein, um den Aufwand zur Auslieferung
  von Bestellungen niedrig zu halten. Da diese Distributoren mit
  unterschiedlichen Softwaresystemen arbeiten, müssen Kunden- und
  Bestelldaten im jeweils richtigen Format weitergegeben werden.}
\item
  \emph{Da es nicht für jedes Land, in das geliefert wird, einen dort
  ansässigen Distributor gibt, sind einige Distributoren für mehrere
  Länder verantwortlich.}
\end{itemize}

Nach welchen Aspekten lassen die Anforderungen des Kunden strukturieren:

\begin{itemize}
\tightlist
\item
  Datenformate und -inhalte ``Die Rechnungsadresse besteht aus Anrede
  \ldots{}''
\item
  Verhalten

  \begin{itemize}
  \tightlist
  \item
    Kundensicht - ``Kunden dürfen wählen''
  \item
    Betreibersicht - ``Diese {[}Versandkosten{]} fallen ja nach Land
    unterschiedlich hoch aus''
  \end{itemize}
\item
  Systemparameter
\end{itemize}

\hypertarget{use-case-diagramm}{%
\subsection{Use-Case Diagramm}\label{use-case-diagramm}}

\textbf{Basisabläufe}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/TOmnJWCn44Lxd-ANKEGE8QAZeA2Zcsp-sjREZbVsM0WGj-4OTBaO2oiXWKWtUk_DtpUNwdtMe1mTNb1pJ8vJhXmy5mjjohP8bHcB39D4FlYp4bzQB2g335ugxhgT6C8FnhrfDhPK5hm6005RWzqELpVLyqI5zFPqVazAk_xjhGsfvj71R977l_vHadQBRQQdih9_Hsx5QHZF7nK7lcmV5_OER4xz3kJOkE8r26zXlvvzray0}
\caption{UseCaseOnlineShopII}
\end{figure}

Welche Elemente unserer Anforderungsliste werden in Bezug auf
Anwendungsfälle mit dieser Darstellung nicht abgedeckt?

\textbf{Verfeinerung des Anwendungsfalldiagramms}

\begin{itemize}
\tightlist
\item
  systeminterne Prüfung der Anschriften
\item
  Abbildung von Alternativen und unterschiedlichen Konsequenzen bei der
  Wahl der Zahlungsmethode
\end{itemize}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/RP11Jnin48NlyokUSaeEh0IzHQi80b6Hsa8bsWlgnUnETgquuyWUgos8VzEVmIr_h7RIXWNbPhzvCthVEuzgWgQr8yTBXNe4s_MArWPkr7gXkBAoCS6iiJ7DodHyfxyTeuoDT8x9DEe3FYLfcUWWurQS5Owzt-29WF55KBjY1vFYp-sVth5CO29Iv4iJ-NHdaTZqmUOSRANZXxUMCnJFbL4MBBSl0ND-DBrBqk6e_mEXF9lynFt5zUVlDn_llYo-NTzUBOfhTBzVZclMthUCVwag0avE25ZyKfPI0RvwAne9c1jPiPN7r8s8y1gigcR3z9kmVLcMCDEwjjAurF9iHW1XNrE-VzWTQkCvHsMtGp8FaRCiaoDBfqFj7HeHYLV6wD9BQqlyAPvUSwFZ7QS-LpzaZnWFYDCXOEdevep6x-vFK5TL7c2AkkQotsQs_C_g-7_p4w9dEi-Zj7P_0G00}
\caption{UseCaseOnlineShopII}
\end{figure}

Was fehlt noch?

\textbf{Anwendungsfälle des Distributors}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/TOz1IyD048Nl-olUiHvIi4SffTRMYmU5uCNRDfcaGpUpONQMek8_y-OVCubG2-9juBtlySqwcLVBNN3foD9xzHrwNnrzIwMz1e9IPLxQG2vGOx08vVPWg7bCE8hpbKN5bfCfx_DmEtU6y2Y1XOho47kyEs2s8SdsHYg-8q6M6ay-fLDK0x6qj2UvWazuBdTtj-NkUcGUXXf9CRKtb8n2gBsHe8ud2T4F8IwXnG31uT89HN6U_3TPm3cSQvZFLvYzv5QvQTAUbAg3SPkbHQzVdyqeUeFbagKAkQRLwfTT_B3RIP8xA4ye2UwZTjumhh5Dd_oTSHzkJLBdBdm3}
\caption{UseCaseOnlineShopIII}
\end{figure}

Welche Zusammenhänge konnten wir bisher nicht abbilden?

\hypertarget{aktivituxe4tsdiagramme}{%
\subsection{Aktivitätsdiagramme}\label{aktivituxe4tsdiagramme}}

Die Aktivitäten rund um die Eingabe der Anschrift lassen sich im
einfachsten Fall als Sequenz Eingaben verstehen. Unter UML 1 könnte man
das folgendermaßen darstellen:

\begin{longtable}[]{@{}ll@{}}
\toprule
Variante I & Variante II\tabularnewline
\midrule
\endhead
\includegraphics{https://www.plantuml.com/plantuml/png/PSzD2i8m40NWVKuHkimHTDFk54G5mVtOFfj2CfN9547nB6wyIIzcK3V1vNppmxmwAObECHX1gyHzWAsSQpYrNeQpMWpSumIsQ-Ugk_cCcuLjMD31qfIkyyi7y3BZSHIc2FujVN5BhV_NWmhDJnIsojTuYX5Iy7vC6Z3eZNme6ZlHejuGTyL7ISUBUPWQtEM4Rm00}
&
\includegraphics{https://www.plantuml.com/plantuml/png/SoWkIImgAStDuIfAJIv9p4lFILLGqj9op2jEpYZAJ2jHICtCIqzDIirJyFJKqbAgvWAhvqhBByfMuB9ISCmhIar9LKWiBIu_l2GZ9pNFcai1B9UOdfYP1r8Hbb-KbvYRcWSp25E5Ns9o1W4bmIL5YOVdf-9MeAUdPysLcfS24GOwCh-0gvRB0IW2z1e0}\tabularnewline
\bottomrule
\end{longtable}

UML 2 für eine stärkere Differenzierung in die Aktivitätsdiagramme ein.
Was sind die Hauptmerkmale?

Leider Unterstützt \emph{plantUML} die Features diese Feature noch
nicht, so dass hier auf eine Grafik des Originaltutorials
zurückgegriffen wird:

\begin{figure}
\centering
\includegraphics{./img/15_UML_III/aktivitaet_zugriffsberechtigungueberpruefen.gif}
\caption{ActivityDiagram}
\end{figure}

\hypertarget{klassendiagramme-1}{%
\subsection{Klassendiagramme}\label{klassendiagramme-1}}

Konzentrieren wir uns zunächst auf einzelne Aspekte der Modellierung, um
darauf aufbauend die

das gesamte Diagramm zu entwerfen.

\textbf{Ausgangspunkt Angebot / Artikel}

\emph{Angebote} sind Sammlungen von \emph{Artikeln} die in einer
Kategorie (Sportgerät, Kleidung, usw.) liegen. Wie fassen wir also die
Datenanforderungen aus unserer Spezifikation zusammen?

Assoziationen und Eigenschaften sind äquivalent in der Darstellung,
entsprechend repräsentieren die folgenden beiden Diagramme eine analoge
Aussage.

\begin{longtable}[]{@{}ll@{}}
\toprule
Variante I & Variante II\tabularnewline
\midrule
\endhead
\includegraphics{https://www.plantuml.com/plantuml/png/DOsnQYin44Nx-OfX-pNljIg27TAu2G53UgtsMXuiZS9er2JapzBbnnAMR3Vd39Tpx1xDHotKxw9lqMBbL6Bl9tUJPJZEgUb5ti7_gE3gx8rDyirv5KDoQKetMS59B1KGRMi-QSRIV2TpkQDy4FEyWuvQOO7FwiYmxVKSAm9Vt4Jp9buCqWC_jR4KREOLTlt-oakqm8-j5KIbJwA_7a__9vxd1_uzmk4mxJ4wGjTHomy0}
&
\includegraphics{https://www.plantuml.com/plantuml/png/NSknIWD14CRnVfvYk5Aue6qAoObD6X42DcAnT_TbCsHtLcPd6yKti_F5XEDI9Dt7_FwpgnxCMqvKpwAVmKBcAOLQ1tUJiJdsKz63V87lAU7ex8LDuibv5iFaKfHECeCdiIc1QFdcGIF6uj_4tFDWBcUaxMMyFsmsTn_qSudNCz4wkEyVcVVgYB0jTzole2rdM7VT7Tn4uvAzX8mRVIvjJ5ZqrI3rXfzAIGYw-1li-FSRns0TxQ1po-aV}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Integration des Warenkorbes}

Der Warenkorb bildet die Menge der bestellten Artikel ab, entsprechend
wird hier eine 1:n-Beziehung zwischen der Klasse Warenkorb und der
Klasse \texttt{BestellteArtikel} definiert. \texttt{BestellteArtikel}
erbt dabei von Artikel und erweitert die Felder um den Eintrag Anzahl.

Zudem bilden wir in der Klasse Warenkorb unsere Anforderung nach einer
Bestellumfang gebundenen Versandkostenhöhe ab. Es wird davon
ausgegangen, dass der Kunde hier eine Landes- und Versandart und
Zahlungsmethodenunabhängige Lösung wünscht. Daher besitzt die Klasse
Warenkorb neben der Assoziation zur Klasse Artikel eine statische
Eigenschaft KostenfreiAb (diese ist unterstrichen). Die Membervariable
gibt einen Euro-Betrag an, ab dem für die Lieferung der bestellten Ware
keine Verpackungs- und Versandkosten in Rechnung gestellt werden.

\includegraphics{https://www.plantuml.com/plantuml/png/bP3FIiD048Vl-nH3JlunHQz1f2rUYY12GS-JP9eCtSpAxCH3QzxCcozcMHArr8kdtPdzVNmxCu-6QdtdNToolA9Y1vN761TcocLljAg2h7b7SEqyRGmiW7BJ6jIiL1a7SItN11LhvScvHCD26Yg3JPKQRydl7K0-5T9t7Ma1Ap5gIDFJ8tPKmDgKfKcD9oME1To7llIKEi-acy-FfiG3kWp14ueRHisIef7tHiS-sM7hVqHJ-WMLP1kqJB5zD3Ik1dW8qKWsIhmeVvalMnPYESC_Vty5U6mvB-0jS3s2sCV_WeDpRbmYP3SPvFaT72x5R9PD6tJZ2RVlUNuolFkUBx7PHNOQcPFKVUU_0000}

Die Klasse Bestellung umfasst zwei private Eigenschaften vom Typ
Anschrift: Lieferanschrift und Rechnungsanschrift. Dabei gibt es genau
eine Rechnungsanschrift, eine Lieferanschrift ist aber nicht zwingend
ist. Ist keine Lieferanschrift angegeben, wird der Warenkorb an die
Rechnungsanschrift ausgeliefert.

Bestellung fasst jeweils ein Objekt vom Typ Warenkorb und eines vom Typ
Anschrift zusammen. Anhand der Komposition wird deutlich, dass eine
Bestellung ohne die anderen beiden Klassen nicht existieren kann.

Die Klasse Anschrift enthält zahlreiche private Eigenschaften vom Typ
\texttt{string}. Bis auf die Telefonnummer sind alle Angaben Pflicht.
Hinzu kommt ein Member vom Objekttyp Land, das neben der nationalen
Zuordnung auch die Höhe der Versand- und Verpackungskosten umfasst.

\includegraphics{https://www.plantuml.com/plantuml/png/RP6nRi9044Jx-ueLPIGZqhg8C4eJ1P4eHAI8KfpFQtpoiOVsraqGtvAFoOzbiS08Azrvni_ZcPidiIpTBfZKUjfRjZjmmQPKYB0lEy4d5sdjln5c9c0j817ORnk1oZCwyP5Cuoi4vza5DAQduSCoKXkvF1Y0xA0fujqHdcCIf9hH5sKEZx4h5JcUcGMg6K97snvQUgoHBINNiAybX-9o_9nDf_TV0pVeFLOGOuKvhFN_QNjIDf79xcwabNNDMDEJ_VsvaLvOBez3sj9IrGV1QlG1s20dTTk-v53lxEojQxLQ-iTzHrqsqciTl6iqSH5ZG4iQQQwRm5ts0DTTnyum0kGmWUmDjU0fRjXl0kRwJgR4gOYP8rLw-ty0}

\textbf{Zahlungsmethoden}

Das Anforderungsset des Kunden beschreibt 3 Zahlungsmethoden für die
Abrechnung der Bestellung: Bankeinzug, Nachnahme, Vorauskasse. Lediglich
im Falle des Bankeinzuges müssen weitere Daten erhoben werden. Bitte
beachten Sie, das die Basisklasse Zahlungsmethode als abstrakte Klasse
definiert wurde, um zu vermeiden, dass davon (sinnlose) Instanzen
gebildet werden können.

\includegraphics{https://www.plantuml.com/plantuml/png/TOxFIWCn4CRlUOe1RyAMUYqYRHMaABqKF2WUPhFJPjXa8fF9fTety-QBwLfgfT1RliptvpSjXcerHLTwbZTKJE0ZbZ8pKswhqS9dMV6MOEmYhGqiW_8c67Iiv8spkC0TWMVraPpxJSESYb6CLJRl3g1vP5gJeXGVbDSsWTdX-J8UZQvUtSvXMqpHstuUdZ4CwPB8GkveQBc0Usg_FeDEu2xNDfBR_SsXzCIohVkvXooMfQP4FzwLASjc-5xCPyl_UhwuFSYXoXsXuRAvWLC6TwBX-gDfO8a-28PqvloK5MlfiPGpXYEwcv9qDSLl}

\textbf{Und nun alles zusammen}

Was bisher fehlte, war der Distributor, der, wie in unserem Use-Case
Diagramm modelliert, per Benutzername und Kennwort auf den Online-Shop
zugreifen möchte, um Bestell- und Kundendaten herunterzuladen. Die
Klasse Distributor ist entsprechend mit den Klassen Bestellung und Land
verknüpft. Diese Assoziationen drücken aus, dass der Distributor auf
beliebig viele Bestellungen zugreifen kann und für mindestens ein Land
verantwortlich ist, in das er Bestellungen auszuliefern hat. Die Klasse
Format umfasst die Methoden zur Generierung der Ausgabeformate für die
Daten, da davon ausgegangen wird, die dass die weitere Bearbeitung mit
alternativen Programmen realisiert wird.

\includegraphics{https://www.plantuml.com/plantuml/png/RP51IyD048Nl-ok67WjRz2fIcYA281uK5BnDDcDtoMPMPcOlfJzUIsW3IQ_lUxmtZzcfeLWTijC-yIyA3X0ogZPcajfgz18AVwGZmPsBgIC8IK8cvx1L4mmssk4ROwvyq84ibexSgBuYTyxjIOto6SFQRm6-K8Zx8ksSDAmXIlenU80L-7SAaS-XUD5Nu2QFzzkneE43jMKK6h7KKpu7t6yswzMbmkX27hrVNZ1XVxg6pC-RRtp341dZGF_DfmK6zra4g_QeUjlXziWz9JxMmst-b7JyGf7hscdPd3uN6T0MyZJ2xOYxEkG_}

\hypertarget{modellierung-von-software-3}{%
\chapter{Modellierung von Software}\label{modellierung-von-software-3}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Einbettung\ des\ Testens\ in\ den\ Softwareentwicklungsprozess}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/16_Testen.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{organisatorisches-1}{%
\section{Organisatorisches}\label{organisatorisches-1}}

\begin{itemize}
\tightlist
\item
  Alternative Prüfungsleistung für die Veranstaltung Softwareentwicklung
\item
  Prüfungsvorleistung für Einführung in die Softwareentwicklung
\end{itemize}

\hypertarget{neues-aus-der-github-woche}{%
\section{Neues aus der GitHub Woche}\label{neues-aus-der-github-woche}}

Wie stabil sind die Teams?

\begin{longtable}[]{@{}rlll@{}}
\toprule
teamKey & 3 & 4 & 5\tabularnewline
\midrule
\endhead
0 & {[}2 3{]} & &\tabularnewline
1 & {[}4 5{]} & {[}4 5{]} &\tabularnewline
2 & {[}6 7{]} & {[}6 7{]} &\tabularnewline
3 & {[}8 9{]} & {[}31 8 9{]} & {[}8 9{]}\tabularnewline
4 & {[}10 11{]} & {[}10 11{]} & {[}10 11{]}\tabularnewline
5 & {[}12 13{]} & {[}12 13{]} &\tabularnewline
6 & {[}14{]} & {[}14{]} &\tabularnewline
7 & {[}15 16{]} & {[}15{]} &\tabularnewline
8 & {[}17 18{]} & {[}17{]} &\tabularnewline
9 & {[}19 20{]} & {[}19 20{]} & {[}19{]}\tabularnewline
10 & {[}21 22{]} & {[}21 22{]} &\tabularnewline
11 & {[}23 24{]} & {[}23 24{]} &\tabularnewline
12 & {[}25 26{]} & {[}26 25{]} & {[}25 26{]}\tabularnewline
13 & {[}27 28{]} & {[}27 28{]} &\tabularnewline
14 & {[}29 30 31{]} & {[}29 30{]} &\tabularnewline
15 & {[}32 33{]} & {[}32 33{]} & {[}33 32{]}\tabularnewline
16 & {[}34{]} & {[}34{]} & {[}34{]}\tabularnewline
17 & & {[} 2 15{]} &\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{softwarefehler}{%
\section{Softwarefehler}\label{softwarefehler}}

Bekannte Softwarefehler und deren Folgen:

\begin{itemize}
\item
  Beim Kampfflugzeug F-16 brachte der Autopilot das Flugzeug in
  Rückenlage, wenn der Äquator überflogen wurde. Dies kam daher, dass
  man keine „negativen`` Breitengrade als Eingabedaten bedacht hatte.
  Dieser Fehler wurde sehr spät während der Entwicklung der F-16 anhand
  eines Simulators entdeckt und beseitigt.
\item
  1999 verpasste die NASA-Sonde Mars Climate Orbiter den Landeanflug auf
  den Mars, weil die Programmierer unterschiedliche Maßsysteme
  verwendeten (ein Team verwendete das metrische und das andere das
  angloamerikanische) und beim Datenaustausch es so zu falschen
  Berechnungen kam. Eine Software wurde so programmiert, dass sie sich
  nicht an die vereinbarte Schnittstelle hielt, in der die metrische
  Einheit Newton × Sekunde festgelegt war. Die NASA verlor dadurch die
  Sonde.
\item
  Zwischen 1985 und 1987 gab es mehrere Unfälle mit dem medizinischen
  Bestrahlungsgerät Therac-25. Infolge einer Überdosis, die durch
  fehlerhafte Programmierung und fehlende Sicherungsmaßnahmen verursacht
  wurde, mussten Organe entfernt werden, und es verstarben drei
  Patienten.
\item
  Das Jahr-2000-Problem, auch als Millennium-Bug (zu deutsch
  „Millennium-Fehler``) oder Y2K-Bug bezeichnet, ist ein
  Computer­problem, das im Wesentlichen durch die Behandlung von
  Jahreszahlen als zweistellige Angabe innerhalb von Computersystemen
  entstanden ist.
\end{itemize}

Softwarefehler sind sowohl sicherheitstechnisch wie ökonomisch ein
erhebliches Risiko. Eine Studie der Zeitschrift iX ermittelte 2013 für
Deutschland folgende Werte:

\begin{itemize}
\tightlist
\item
  Ca. 84,4 Mrd. Euro betragen die jährlichen Verluste durch
  Softwarefehler in Mittelstands- und Großunternehmen
\item
  Ca. 14,4 Mrd. Euro jährlich (35,9 \% des IT-Budgets) werden für die
  Beseitigung von Programmfehlern verwendet;
\item
  Ca. 70 Mrd. Euro betragen die Produktivitätsverluste durch
  Computerausfälle aufgrund fehlerhafter Software
\end{itemize}

\textbf{Was sind Softwarefehler eigentlich?}

Ein Programm- oder Softwarefehler ist, angelehnt an die allgemeine
Definition für „Fehler``

\begin{quote}
„Nichterfüllung einer Anforderung`` {[}EN ISO 9000:2005{]}
\end{quote}

Konkret definiert sich der Fehler danach als

\begin{quote}
„Abweichung des IST (beobachtete, ermittelte, berechnete Zustände oder
Vorgänge) vom SOLL (festgelegte, korrekte Zustände und Vorgänge), wenn
sie die vordefinierte Toleranzgrenze {[}die auch 0 sein kann{]}
überschreitet.``
\end{quote}

Im Rahmen dieser Veranstaltung lassen wir Lexikalische Fehler und
Syntaxfehler außen vor. Diese sind in der Regel über den Compiler
identifizierbar. Darüber hinaus existieren aber :

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Fehlertyp\strut
\end{minipage} & \begin{minipage}[b]{0.82\columnwidth}\raggedright
Folgen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Logisch/semantische Fehler\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Anweisung ist zwar syntaktisch fehlerfrei, aber inhaltlich trotzdem
fehlerhaft (plus statt minus, kleiner statt kleiner gleich, fehlende
Synchronisation, usw.)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Designfehler\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Strukturelle Mängel auf der Modul oder Systemebene, die das
Zusammenspiel der Komponenten, deren Erweiterung, usw. verhindern.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
Fehler im Bedienkonzept\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Unintuitive Benutztung, das Programm ``fühlt sich komisch an''\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Darüber hinaus ist es wichtig zwischen Laufzeit- und Designzeitfehlern
zu unterscheiden.

\textbf{Wann entstehen Fehler im Projekt?}

Problem- und Systemanalyse:

\begin{itemize}
\tightlist
\item
  Die Anforderungen und Qualitätsmerkmale werden nicht festgelegt.
\item
  Es fehlen eindeutige Begriffsdefinitionen.
\end{itemize}

Systementwurf:

\begin{itemize}
\tightlist
\item
  Die Systemarchitektur ist gar nicht oder nur mit großem Aufwand
  erweiterbar.
\item
  Das System ist nicht modular aufgebaut, die Daten sind nicht
  gekapselt.
\end{itemize}

Feinentwurf:

\begin{itemize}
\tightlist
\item
  Schnittstellen sind nicht hinreichend spezifiziert
\item
  Interaktionsmodelle weisen Lücken auf
\end{itemize}

Codierung

\begin{itemize}
\tightlist
\item
  Programmier-Standards bzw. -Richtlinien werden nicht beachtet.
\item
  Die Namensvergabe ist ungünstig.
\end{itemize}

Betrieb und Wartung:

\begin{itemize}
\tightlist
\item
  Die Dokumentation fehlt ganz, ist veraltet oder nicht adäquat.
\item
  Die Schulung der Anwender wird vernachlässigt.
\item
  Das Konfigurationsmanagement ist unzureichend.
\end{itemize}

\begin{verbatim}

          ^
 Fehler-  | +---------+
 kosten   | |         |
          | |         |
          | |         |
          | |         |
          | |         +----------+
          | |         |          |
          | |         |          +----------+
          | |         |          |          +----------+
          | |         |          |          |          +---------+
          | | Analyse | System-  | Imple-   | Integra- | Betrieb |
          | |         | entwurf  | mentier- | tion &   | und     |
          | |         |          | ung      | Tests    | Wartung |
          ----------------------------------------------------------->
                                              Software Lebenszyklus

\end{verbatim}

\hypertarget{testen-als-teil-der-qualituxe4tssicherung}{%
\section{Testen als Teil der
Qualitätssicherung}\label{testen-als-teil-der-qualituxe4tssicherung}}

\textbf{Welche Tests werden in das Projekt integriert?}

\begin{verbatim}

         +------------------------------------------------------>   Zeit
         |
         |      Analyse                             Abnahmetest       KUNDE
         |          \                                   ^
         |           v                                 /          -.
         |        Grobentwurf                   Systemtests        |
         |             \                             ^             |
         |              v                           /              |
         |           Feinentwurf             Integrationstests      \  ENTWICKLER
 Detail- |                \                       ^                 /
 grad    |                 v                     /                 |
         |             Implementierung  --> Modultests             |
         |                                                        -'
         v
\end{verbatim}

Der Modultest, auch Komponententest oder Unittest genannt, ist ein Test
auf der Ebene der einzelnen Module der Software. Testgegenstand ist die
Funktionalität innerhalb einzelner abgrenzbarer Teile der Software
(Module, Programme oder Unterprogramme, Units oder Klassen). Testziel
dieser häufig durch den Softwareentwickler selbst durchgeführten Tests
ist der Nachweis der technischen Lauffähigkeit und korrekter fachlicher
(Teil-) Ergebnisse.

Der Integrationstest bzw. Interaktionstest testet die Zusammenarbeit
voneinander abhängiger Komponenten. Der Testschwerpunkt liegt auf den
Schnittstellen der beteiligten Komponenten und soll korrekte Ergebnisse
über komplette Abläufe hinweg nachweisen.

Der Systemtest ist die Teststufe, bei der das gesamte System gegen die
gesamten Anforderungen (funktionale und nicht-funktionale Anforderungen)
getestet wird. Gewöhnlich findet der Test auf einer Testumgebung statt
und wird mit Testdaten durchgeführt. Die Testumgebung soll die
Produktivumgebung des Kunden simulieren, d.~h. ihr möglichst ähnlich
sein. In der Regel wird der Systemtest durch die realisierende
Organisation durchgeführt.

Ein Abnahmetest, Verfahrenstest, Akzeptanztest oder auch User Acceptance
Test (UAT) ist das Testen der gelieferten Software durch den Kunden. Der
erfolgreiche Abschluss dieser Teststufe ist meist Voraussetzung für die
rechtswirksame Übernahme der Software und deren Bezahlung. Dieser Test
kann unter Umständen (z. B. bei neuen Anwendungen) bereits auf der
Produktionsumgebung mit Kopien aus Echtdaten durchgeführt werden.

\textbf{Warum geht es dann trotzdem schief?}

\begin{itemize}
\tightlist
\item
  Es ist angeblich keine Zeit für systematische Tests vorhanden
  (Termindruck).
\item
  Die Notwendigkeit für systematische Tests wird nicht erkannt.
\item
  Die Tests werden manuell realisiert.
\item
  Die Erstellung von Testspezifikationen für systematische Tests wird
  nicht entwicklungsbegleitend durchgeführt.
\item
  Die Testebenen weisen eine unterschiedliche Realisierung auf
  (Modultests top, Systemtests flop)
\end{itemize}

\hypertarget{definition}{%
\subsection{Definition}\label{definition}}

Es gibt unterschiedliche Definitionen für den Softwaretest:

\begin{quote}
„the process of operating a system or component under specified
conditions, observing or recording the results and making an evaluation
of some aspects of the system or component.`` {[}ANSI/IEEE Std.
610.12-1990 {]}
\end{quote}

\begin{quote}
„Test {[}\ldots{}{]} der überprüfbare und jederzeit wiederholbare
Nachweis der Korrektheit eines Softwarebausteines relativ zu vorher
festgelegten Anforderungen`` ist. \footnote{Ernst Denert:
  Software-Engineering. Methodische Projektabwicklung. Springer, Berlin
  u. a. 1991, ISBN 3-540-53404-0.}
\end{quote}

\begin{quote}
"Unter Testen versteht man den Prozess des Planens, der Vorbereitung und
der Messung, mit dem Ziel, die Eigenschaften eines IT-Systems
festzustellen und den Unterschied zwischen dem tatsächlichen und dem
erforderlichen Zustand aufzuzeigen. \footnote{Martin Pol, Tim Koomen,
  Andreas Spillner: Management und Optimierung des Testprozesses. Ein
  praktischer Leitfaden für erfolgreiches Testen von Software mit TPI
  und TMap. 2., aktualisierte Auflage. dpunkt.Verlag, Heidelberg 2002,
  ISBN 3-89864-156-2.}
\end{quote}

Welche Unterschiede sehen Sie in den Definitionen?

\hypertarget{ablauf-beim-testen}{%
\subsection{Ablauf beim Testen}\label{ablauf-beim-testen}}

\begin{verbatim}
                   +------------------------------------------------+
                   |                                                |
             +-----+-----+      +-----------+      +------------+   |    +------------+
          +->| Testfälle |-+ +->| Testdaten |-+ +->| Ergebnisse |-+ | +->| Protokolle |
          |  +-----------+ | |  +-----------+ | |  +------------+ | | |  +------------+
          |                | |                | |                 | | |
          |                | |                | |                 | | |
          |                | |                | |                 | | |
          |                v |                v |                 v v |
  .---------------.  .---------------.  .--------------.  .---------------.
  | Entwerfen der |->| Erstellen der |->| Testaus-     |->| Vergleich der |
  | Testfälle     |  | Testdaten     |  | führung      |  | Ergebnisse    |
  .---------------.  .---------------.  .--------------.  .---------------.
\end{verbatim}

Abbildung motiviert durch \footnote{Ian Sommerville: Software
  Engineering, Pearson Education, 6. Auflage, 2001}

\hypertarget{klassifikation-testmethoden}{%
\subsection{Klassifikation
Testmethoden}\label{klassifikation-testmethoden}}

\begin{verbatim}
                            Prüfmethoden
                                  |
                +-----------------+------------------+
                |                                    |
            statisch                              dynamisch
                |                                    |
    +-----------+----+              +----------------+----------------+
    |                |              |                |                |
  verifi-         analy-         struktur-     spezifikations-    diversifi-
  zierend         sierend        orientiert    orientiert         zierend
                               (white box)     (black box)
                                    |
                            +-------+--------+
                            |                |
                      kontrollfluss-     datenfluss-
                      orientiert         bezogen                               .

\end{verbatim}

Abbildung motivierte aus \footnote{Peter Liggesmeyer,
  ``Software-Qualität - Testen, Analysieren und Verifizieren von
  Software'', Springer, 2002}

\textbf{Statische Code Analysen}

Statische Code-Analyse ist ein statisches Software-Testverfahren, das
zur Übersetzungszeit durchgeführt wird. Der Quelltext wird hierbei einer
Reihe formaler Prüfungen unterzogen, bei denen bestimmte Sorten von
Fehlern entdeckt werden können, noch bevor die entsprechende Software
(z. B. im Modultest) ausgeführt wird. Die Methodik gehört zu den
falsifizierenden Verfahren, d.~h., es wird die Anwesenheit von Fehlern
bestimmt.

\begin{itemize}
\item
  \textbf{Codeanalyse} \ldots{} In Anlehnung an das klassische Programm
  Lint wird der Vorgang der Analyse eines Codefragments auch als linten
  (englisch linting) bezeichnet.

  Das folgende Beispiel zeigt die Ausgabe des Tools SonarLinter
  angewendet auf die initiale Implementierung einer Konsolenanwendung
  unter Visual Studio 2017. Welche Fehler können Sie ausmachen?
\end{itemize}

\begin{figure}
\centering
\includegraphics{./img/16_Testen/SonarLinterVS.png}
\caption{instruction-set}
\end{figure}

Eine Übersicht zu den Standard-Regeln findet sich unter
\href{https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/DOCUMENTATION.md}{Link}.

\begin{itemize}
\item
  Codereviews \ldots{} Reviews sind manuelle Überprüfungen der
  Arbeitsergebnisse der Softwareentwicklung. Jedes Arbeitsergebnis kann
  einer Durchsicht durch eine andere Person unterzogen werden.

  Der untersuchte Gegenstand eines Reviews kann verschieden sein. Es
  wird vor allem zwischen einem Code-Review (Quelltext) und einem
  Architektur-Review (Softwarearchitektur, insbesondere
  Design-Dokumente) unterschieden.
\end{itemize}

\textbf{Dynamische Code Analysen}

Dynamische Software-Testverfahren sind bestimmte Prüfmethoden, um mit
Softwaretests Fehler in der Software aufzudecken. Besonders sollen
Programmfehler erkannt werden, die in Abhängigkeit von dynamischen
Laufzeitparametern auftreten, wie variierende Eingabeparameter,
Laufzeitumgebung oder Nutzer-Interaktion. Wesentliche Aufgabe der
einzelnen Verfahren ist die Bestimmung geeigneter Testfälle für den Test
der Software.

\begin{itemize}
\item
  strukturorientiert \ldots{} Strukturorientierte Verfahren bestimmen
  Testfälle auf Basis des Softwarequellcodes (Whiteboxtest). Dabei steht
  entweder die enthaltenen Daten oder aber die Kontrollstruktur, die die
  Verarbeitung der Daten steuert, im Fokus.
\item
  spezifikationsorientiert \ldots{} die sogenannten Black-Box Verfahren
  werden zum Abgleich des vorgegebenen, spezifizierten und des realen
  Verhaltens einer Methode genutzt. Beim Modultest wird z. B. gegen die
  Modulspezifikation getestet, beim Schnittstellentest gegen die
  Schnittstellenspezifikation und beim Abnahmetest gegen die fachlichen
  Anforderungen, wie sie etwa in einem Pflichtenheft niedergelegt sind.
\item
  diversifizierend .. Diese Tests analysieren die Ergebnisse
  verschiedener Versionen einer Software gegeneinander. Es findet
  entsprechend kein Vergleich zwischen den Testergebnissen und der
  Spezifikation statt! Zudem kann im Gegensatz zu den funktions- und
  strukturorientierten Testmethoden kein Vollständigkeitskriterium
  definiert werden. Die notwendigen Testdaten werden mittels einer der
  anderen Techniken, per Zufall oder Aufzeichnung einer Benutzer-Session
  erstellt.
\end{itemize}

\hypertarget{planung-von-tests}{%
\section{Planung von Tests}\label{planung-von-tests}}

Im folgenden sollen unterschiedliche Black- und White-Box-Tests
angewandt werden um eine Klasse MyMathFunctions, die zwei Methoden
implementiert, zu testen:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \CommentTok{//Fakultät der Zahl i}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i) \{...\}}
  \CommentTok{// Grösstergemeinsamer Teiler von i, j und k}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{ggt}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i, }\DataTypeTok{int}\NormalTok{ j, }\DataTypeTok{int}\NormalTok{ k) \{...\}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Ein vollständiges Testen aller \texttt{int} Werte (\(2^{31}\) bis
\(2^{31}-1\)) bedeutet für die Funktion \texttt{fak()} \(2^{32}\) und
für \texttt{ggt()} \(2^{32} \cdot 2^{32} \cdot 2^{32}\) Kombinationen.
Testen aller möglichen Eingaben ist damit nicht möglich. Für Variablen
mit unbestimmtem Wertebereich (\texttt{string}) lässt sich nicht einmal
die Menge der möglichen Kombinationen darstellen.

\hypertarget{black-box-testing-spezifikationsorientiert}{%
\subsection{Black-Box-Testing /
Spezifikationsorientiert}\label{black-box-testing-spezifikationsorientiert}}

\begin{quote}
Black-Box-Testing \ldots{} Grundlage der Testfallentwicklung ist die
Spezifikation des Moduls. Die Interna des Softwareelements sind nicht
bekannt.
\end{quote}

Die Güte der Testfälle ist definiert über die Abdeckung möglicher
Kombinationen der Eingangsparameter.

Für Black-Box-Testing existieren unterschiedliche Ausprägungen:

\begin{itemize}
\tightlist
\item
  Äquivalenzklassenanalyse
\item
  Grenzwertanalyse
  \href{https://www.youtube.com/watch?v=GshMbff3mzw}{Link}
\item
  Ursache Wirkungsgraphen
\item
  Zustandsbasierte Testmethoden
\end{itemize}

Problematisch ist dabei, dass spezifische Lösungen, wie zum Beispiel in
folgendem Fall. Der Entwickler hat hier beschlossen die Performance der
Berechnung der Fakultät zu steigern, um die Performance des Algorithmus
für Werte kleiner 5 zu verbessern (hypothetisches Beispiel!).

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i)\{}
    \KeywordTok{if}\NormalTok{ ( i==}\DecValTok{1}\NormalTok{ ) }\KeywordTok{return} \DecValTok{0}\NormalTok{;}
    \FunctionTok{elseif}\NormalTok{ (i == }\DecValTok{2}\NormalTok{) }\KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    elseif  ... Ergebnisse für }\DecValTok{3}\NormalTok{ und }\DecValTok{4}\NormalTok{ ...}
    \FunctionTok{elseif}\NormalTok{ (i == }\DecValTok{5}\NormalTok{) }\KeywordTok{return} \DecValTok{120}\NormalTok{;}
    \KeywordTok{else} \KeywordTok{return}\NormalTok{ i * }\FunctionTok{fak}\NormalTok{(i}\DecValTok{-1}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Mit den alleinigen Testfällen \texttt{fak(5)==120}, \texttt{fak(6)==720}
und \texttt{fak(10)==3628800} bleiben mögliche Fehler für
\texttt{fak(1)} und \texttt{fak(2)} verborgen.

\hypertarget{white-box-testing-strukturorientiert}{%
\subsection{White-Box-Testing /
Strukturorientiert}\label{white-box-testing-strukturorientiert}}

\begin{quote}
White-Box-Testing \ldots{} beim „quelltextbasierten Testen`` sind die
Interna des getesteten Softwareelements bekannt und werden zur
Bestimmung der Testfälle verwendet
\end{quote}

White-Box-Testing-Verfahren zerlegen das Programm (statisch oder
dynamisch) entsprechend dem Kontrollfluss. Die Güte der Testfälle wird
danach beurteilt, wie groß der Anteil der abgedeckten Programmpfade ist.
Die Bewertung kann dabei anhand differenzierter Metriken erfolgen:

\begin{itemize}
\tightlist
\item
  Zeilenabdeckung
\item
  Anweisungsüberdeckung
\item
  Zweigüberdeckung
\item
  Pfadüberdeckung
\item
  \ldots{}
\end{itemize}

\textbf{C\_0 Anweisungsüberdeckung}

Anweisungsüberdeckung (auch \(C_0\)-Test genannt) zerlegt das Programm
statisch in seine Anweisungen und bestimmt den Anteil der in den
Testfällen berücksichtigten Anweisungen. Üblich ist eine Prüfung von
95\%-100\% aller Anweisungen durch als \(C-0\)-Kriterium anzustreben:

\[
C_0 = \frac{Anzahl überdeckte Anzahl}{Gesamtanzahl der Anweisungen}
\]

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i)\{                    }\CommentTok{// Anweisung}
    \KeywordTok{if}\NormalTok{ ( i==}\DecValTok{1}\NormalTok{ ) }\KeywordTok{return} \DecValTok{0}\NormalTok{;                    }\CommentTok{// 1}
    \FunctionTok{elseif}\NormalTok{ (i == }\DecValTok{2}\NormalTok{) }\KeywordTok{return} \DecValTok{1}\NormalTok{;                }\CommentTok{// 2}
\NormalTok{    elseif  ... Ergebnisse für }\DecValTok{3}\NormalTok{ und }\DecValTok{4}\NormalTok{ ...   }\CommentTok{// 3 - 4}
    \FunctionTok{elseif}\NormalTok{ (i == }\DecValTok{5}\NormalTok{) }\KeywordTok{return} \DecValTok{120}\NormalTok{;              }\CommentTok{// 5}
    \KeywordTok{else} \KeywordTok{return}\NormalTok{ i * }\FunctionTok{fak}\NormalTok{(i}\DecValTok{-1}\NormalTok{);                }\CommentTok{// 6}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der oben genannten Black-Box-Test \(i = \{5, 6, 10\}\) adressierte
lediglich 2 der Anweisungen und generiert damit ein
\(C_0 = \frac{2}{6} = 0.33\). Mit dem Wissen um die Codestruktur, kann
der White-Box-Test sehr schnell den Nachweis erbringen, dass das
gezeigte Black-Box-Vorgehen nur unzureichend die Qualität des Codes
abprüft.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i)\{                    }\CommentTok{// Anweisung}
    \DataTypeTok{int}\NormalTok{ [] facArray = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [}\DecValTok{10}\NormalTok{];          }\CommentTok{// 1}
\NormalTok{    facArray[}\DecValTok{0}\NormalTok{] = }\DecValTok{1}\NormalTok{;                         }\CommentTok{// 2}
\NormalTok{    facArray[}\DecValTok{1}\NormalTok{] = }\DecValTok{1}\NormalTok{;}
\NormalTok{    ...}
\NormalTok{    facArray[}\DecValTok{9}\NormalTok{] = }\DecValTok{1}\NormalTok{;                         }\CommentTok{// 9}
    \CommentTok{// besser:}
    \CommentTok{// int [] facArray = new int[] \{ 1, 3, 5, 7, 9 \};}
    \KeywordTok{if}\NormalTok{ ( i<}\DecValTok{10}\NormalTok{ ) }\KeywordTok{return}\NormalTok{ fakArray[i];          }\CommentTok{// 10 + 11}
    \KeywordTok{else} \KeywordTok{return}\NormalTok{ i * }\FunctionTok{fak}\NormalTok{(i}\DecValTok{-1}\NormalTok{);                }\CommentTok{// 12}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Mit dem Testfall \(i = 1\) lassen sich hingegen vermeindlich
\(11/12 = 0.91\) der Anweisungen abdecken, die Fehleinschätzung ist aber
offensichtlich. Gleichwohl sind die fest hinterlegten Werte aus
Erfahrung heraus auch besonders anfällig für Copy-\&-Paste-Fehler.

\textbf{C\_1 Zweigüberdeckungstest}

Der Zweigüberdeckungstest umfasst den Anweisungsüberdeckungstest
vollständig. Für den C1--Test müssen strengere Kriterien erfüllt werden
als beim Anweisungsüberdeckungstest. Im Bereich des
kontrollflussorientierten Testens wird der Zweigüberdeckungstest als
Minimalkriterium angewendet. Mit Hilfe des Zweigüberdeckungstests lassen
sich nicht ausführbare Programmzweige aufspüren. Anhand dessen kann man
dann Softwareteile, die oft durchlaufen werden, gezielt optimieren.

Die \href{https://de.wikipedia.org/wiki/McCabe-Metrik}{Zyklomatische
Komplexität} gibt an, wie viele Testfälle höchstens nötig sind, um eine
Zweigüberdeckung zu erreichen.

\[
C_1 = \frac{Anzahl überdeckten Zweige}{Gesamtanzahl der Zweige}
\]

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i)\{                    }\CommentTok{// Verzweigungen}
    \DataTypeTok{int}\NormalTok{ [] facArray = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{ [}\DecValTok{10}\NormalTok{];          }\CommentTok{//}
\NormalTok{    facArray[}\DecValTok{0}\NormalTok{] = }\DecValTok{1}\NormalTok{;                         }\CommentTok{//}
\NormalTok{    facArray[}\DecValTok{1}\NormalTok{] = }\DecValTok{1}\NormalTok{;}
\NormalTok{    ...}
\NormalTok{    facArray[}\DecValTok{9}\NormalTok{] = }\DecValTok{1}\NormalTok{;                         }\CommentTok{//}
    \CommentTok{// besser:}
    \CommentTok{// int [] facArray = new int[] \{ 1, 3, 5, 7, 9 \};}
    \KeywordTok{if}\NormalTok{ ( i<}\DecValTok{10}\NormalTok{ ) }\KeywordTok{return}\NormalTok{ fakArray[i];          }\CommentTok{// 1. Verzweigung}
    \KeywordTok{else} \KeywordTok{return}\NormalTok{ i * }\FunctionTok{fak}\NormalTok{(i}\DecValTok{-1}\NormalTok{);                }\CommentTok{//}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Mit dem Testfall \(i = 1\) ergibt sich eine \(C_1\)-Abdeckung von
\(0.5\).

\textbf{C\_2 Pfadüberdeckung}

Das \(C_1\) Kriterium berücksichtigt keine Schleifen im zu
untersuchenden Code. Der ``Pfad'' beschreibt gegenüber dem ``Zweig''
aber eben auch die mehrfache Ausführung ein und des selben Zweiges.
Diese Untersuchung muss entsprechend Schleifen in variabler
Durchlaufzahl umsetzten.

\textbf{C\_3 Bedingungsüberdeckungstest}

\(C_3\) Tests extrahieren die Bedingungen die zum Eintritt in die
Schleifen führen und generieren Testfälle, die alle Kombinationen
abdecken.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{class}\NormalTok{ MyMathFunctions\{}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{fak}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i)\{                    }\CommentTok{// Verzweigungen}
\NormalTok{    boolean a, b;}
    \KeywordTok{if}\NormalTok{ (a || b) \{ ... \}}
    \KeywordTok{else}\NormalTok{ \{ ... \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.04\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.48\columnwidth}\raggedright
Test\strut
\end{minipage} & \begin{minipage}[b]{0.39\columnwidth}\raggedright
Testfälle im Beispiel\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.04\columnwidth}\raggedright
C\_3a\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
Einfachbedingungsüberdeckungstest\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
2 (a = b = true sowie a = b = false)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
C\_3b\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
Mehrfachbedingungsüberdeckungstest\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
\(2^n\)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
C\_3c\strut
\end{minipage} & \begin{minipage}[t]{0.48\columnwidth}\raggedright
minimaler Mehrfachbedingungsüberdeckungstest\strut
\end{minipage} & \begin{minipage}[t]{0.39\columnwidth}\raggedright
\(<=2^n\)\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{und-jetzt-konkret}{%
\section{Und jetzt konkret!}\label{und-jetzt-konkret}}

\begin{figure}
\centering
\includegraphics{https://media.giphy.com/media/1msEFc2RYrY1AJL5hH/giphy-downsized.gif}
\caption{alt-text}
\end{figure}

\begin{quote}
\textbf{Zu Erinnerung:} Testen ist der Vergleich eines Ergebnisses mit
einem erwarteten Resultat.
\end{quote}

\hypertarget{exkurs-attribute-in-c}{%
\subsection{Exkurs: Attribute in C}\label{exkurs-attribute-in-c}}

Im Folgenden werden wir Atttribute als Hilfsmittel verwenden.
Entsprechend soll an dieser Stelle ein kurzer Einschub die Möglichkeiten
dieser Zuordnung von Metainformationen zum C\# Code verdeutlichen.

Attribute erlaube es Zusatzinformationen oder Bedingungen in Code
(Assemblys, Typen, Methoden, Eigenschaften usw.) einzubinden. Nach dem
Zuordnen eines Attributs zu einer Programmentität kann das Attribut zur
Laufzeit mit einer Technik namens Reflektion abgefragt werden.

In C\# sind Attribute Klassen, die von der Attribute-Basisklasse erben.
Alle Klassen, die von Attribute erben, können als eine Art von „Tag``
für andere Codeelemente verwendet werden. Beispielsweise gibt es das
Attribut ObsoleteAttribute. Mit diesem Attribut wird gekennzeichnet,
dass der Code veraltet ist und nicht mehr verwendet werden sollte.

Beispiele für Standardattribute sind:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.29\columnwidth}\raggedright
Name\strut
\end{minipage} & \begin{minipage}[b]{0.65\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.29\columnwidth}\raggedright
\texttt{{[}Obsolete{]}},
\texttt{{[}Obsolete("ThisClass\ is\ obsolete.\ Use\ ThisClass2\ instead.")}{]}\strut
\end{minipage} & \begin{minipage}[t]{0.65\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.29\columnwidth}\raggedright
\texttt{{[}Conditional("Test"){]}}\strut
\end{minipage} & \begin{minipage}[t]{0.65\columnwidth}\raggedright
Wenn die Zeichenfolge nicht einer \#define-Anweisung entspricht, werden
alle Aufrufe dieser Methode (aber nicht die Methode selbst) durch den
C\#-Compiler entfernt.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Attribute werden in rechteckigen Klammern den jeweiligen Codeelementen
vorangestellt. Es können mehrere davon kombiniert werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{#define}\NormalTok{ CONDITION1}
\KeywordTok{#define}\NormalTok{ CONDITION2}
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Diagnostics}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Test}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Standard Code "}\NormalTok{);}
    \FunctionTok{Method0}\NormalTok{(}\DecValTok{0}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Calling Method1"}\NormalTok{);}
    \FunctionTok{Method1}\NormalTok{(}\DecValTok{3}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Calling Method2"}\NormalTok{);}
    \FunctionTok{Method2}\NormalTok{();}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method0}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Here we run actual algorithm."}\NormalTok{);}
\NormalTok{  \}}

\NormalTok{  [}\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION1"}\NormalTok{)]}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method1}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"CONDITION1 is defined"}\NormalTok{);}
\NormalTok{  \}}

\NormalTok{  [}\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION1"}\NormalTok{), }\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION2"}\NormalTok{)]}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method2}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"CONDITION1 or CONDITION2 is defined"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Festlegung der Kompilierungsvorgänge anhand von Hinhalten der
eigentlichen Code Dateien scheint ``unglücklich''. Es bietet sich
natürlich an, die zugehörigen Konfigurationen in unsere Projektdateien
auszulagern.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Diagnostics}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Test}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Standard Code "}\NormalTok{);}
    \FunctionTok{Method0}\NormalTok{(}\DecValTok{0}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Calling Method1"}\NormalTok{);}
    \FunctionTok{Method1}\NormalTok{(}\DecValTok{3}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Calling Method2"}\NormalTok{);}
    \FunctionTok{Method2}\NormalTok{();}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method0}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Here we run actual algorithm."}\NormalTok{);}
\NormalTok{  \}}

\NormalTok{  [}\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION1"}\NormalTok{)]}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method1}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"CONDITION1 is defined"}\NormalTok{);}
\NormalTok{  \}}

\NormalTok{  [}\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION1"}\NormalTok{), }\FunctionTok{Conditional}\NormalTok{(}\StringTok{"CONDITION2"}\NormalTok{)]}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Method2}\NormalTok{()}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"CONDITION1 or CONDITION2 is defined"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net5.0</TargetFramework>
    <DefineConstants>CONDITION2;</DefineConstants>
  </PropertyGroup>
</Project>
\end{verbatim}

\hypertarget{idee-1-eigenen-testmethoden}{%
\subsection{Idee 1: Eigenen
Testmethoden}\label{idee-1-eigenen-testmethoden}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\CommentTok{// Zu testende Klasse}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Calculator}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int} \FunctionTok{DivideTwoValues}\NormalTok{(}\DataTypeTok{double}\NormalTok{ x, }\DataTypeTok{double}\NormalTok{ y, }\KeywordTok{ref} \DataTypeTok{double}\NormalTok{ result)\{}
    \KeywordTok{if}\NormalTok{ (y != }\DecValTok{0}\NormalTok{)\{}
\NormalTok{      result = x / y;}
      \KeywordTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{    \}}
    \KeywordTok{else} \KeywordTok{return} \DecValTok{-1}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{// Testklasse}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ TestCalculator\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Test_DivideMethod}\NormalTok{()\{}
    \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ state = Calculator.}\FunctionTok{DivideTwoValues}\NormalTok{(}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{, }\KeywordTok{ref}\NormalTok{ result);}
    \KeywordTok{if}\NormalTok{ ((state == }\DecValTok{0}\NormalTok{) & (result == }\FloatTok{0.75}\NormalTok{))}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Test bestanden !"}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{else}\NormalTok{\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Test fehlgeschlagen"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{// Anwendungsprogramm}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
    \CommentTok{//double result = 0;}
    \CommentTok{//int state = Calculator.DivideTwoValues(3,4, ref result);}
    \CommentTok{//Console.WriteLine($"Das Ergebnis lautet \{result\}, der State \{state\}.");}
\NormalTok{    TestCalculator.}\FunctionTok{Test_DivideMethod}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Welche Funktionalität fehlt Ihnen in diesem Setup? Welche weitergehenden
Features würden Sie für unsere Testmethoden vorschlagen.

\hypertarget{idee-2-test-frameworks}{%
\subsection{Idee 2: Test-Frameworks}\label{idee-2-test-frameworks}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{[TestClass]   }\CommentTok{// <-- Framework spezifisch}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ CalculatorTests}
\NormalTok{\{}
\NormalTok{    [TestMethod]   }\CommentTok{// <-- Framework spezifisch}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{TestMethod1}\NormalTok{()}
\NormalTok{    \{}
        \CommentTok{// Arrange}
        \DataTypeTok{double}\NormalTok{ result;}
        \DataTypeTok{double}\NormalTok{ x = }\DecValTok{3}\NormalTok{, y = }\DecValTok{4}\NormalTok{;}
        \DataTypeTok{int}\NormalTok{ state;}
        \DataTypeTok{double}\NormalTok{ expected = }\FloatTok{0.75}\NormalTok{;}

        \CommentTok{// Act}
        \DataTypeTok{int}\NormalTok{ state = Calculator.}\FunctionTok{DivideTwoValues}\NormalTok{(x, y, }\KeywordTok{ref}\NormalTok{ result);}

        \CommentTok{// Assert}
\NormalTok{        Assert.}\FunctionTok{AreEqual}\NormalTok{(result, expected);}
        \CommentTok{//       ^---- Framework specifisch}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Vorteile:

\begin{itemize}
\tightlist
\item
  Leistungsfähige API (automatisierte Tests, variable Input-Parameter,
  Berücksichtigung von Exceptions)
\item
  ``Standardisiertes'' Nutzungskonzept
\item
  Integration in die Entwicklungsumgebungen
\end{itemize}

Nachteil:

\begin{itemize}
\tightlist
\item
  verschiedene Interpretationen und Performance der Frameworks
\end{itemize}

Die wichtigsten Tools unter C\# sind \href{https://xunit.net/}{xUnit},
\href{https://nunit.org/}{nunit},
\href{https://docs.microsoft.com/de-de/dotnet/core/testing/unit-testing-with-mstest}{MSTest}.
Einen guten Überblick zum Vergleich der Schlüsselworte liefert
\href{http://www.anarsolutions.com/automated-unit-testing-tools-comparison/}{Link}

Hierzu nutzen wir das xunit Framework. Eine Folge von Tests für unsere
\texttt{DivideTwoValues()} Methode könnte dann wie folgt aussehen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ Xunit;}

\KeywordTok{namespace}\NormalTok{ MyMathMethods.}\FunctionTok{Test}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{class}\NormalTok{ Test_DivideTwoValues}
\NormalTok{    \{}
\NormalTok{        [Fact]}
        \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Check_StateEqualPositiveInputs}\NormalTok{()}
\NormalTok{        \{}
            \CommentTok{// Arrange}
            \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}
            \DataTypeTok{double}\NormalTok{ dividend = }\DecValTok{5}\NormalTok{;}
            \DataTypeTok{double}\NormalTok{ divisor = dividend;}
            \DataTypeTok{int}\NormalTok{ expected = }\DecValTok{0}\NormalTok{;}

            \CommentTok{// Act}
            \DataTypeTok{var}\NormalTok{ state = Calculator.}\FunctionTok{DivideTwoValues}\NormalTok{(dividend, divisor, }\KeywordTok{ref}\NormalTok{ result);}

            \CommentTok{// Assert}
\NormalTok{            Assert.}\FunctionTok{Equal}\NormalTok{(expected, state);}
\NormalTok{        \}}

\NormalTok{        [Fact]}
        \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Check_StateZeroAsDivended}\NormalTok{()}
\NormalTok{        \{}
            \CommentTok{// Arrange}
            \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}
            \DataTypeTok{double}\NormalTok{ dividend = }\DecValTok{5}\NormalTok{;}
            \DataTypeTok{double}\NormalTok{ divisor = }\DecValTok{0}\NormalTok{;}
            \DataTypeTok{int}\NormalTok{ expected = }\DecValTok{-1}\NormalTok{;}

            \CommentTok{// Act}
            \DataTypeTok{var}\NormalTok{ state = Calculator.}\FunctionTok{DivideTwoValues}\NormalTok{(dividend, divisor, }\KeywordTok{ref}\NormalTok{ result);}

            \CommentTok{// Assert}
\NormalTok{            Assert.}\FunctionTok{True}\NormalTok{(expected == state);}
\NormalTok{        \}}

\NormalTok{        [Theory]                                             }\CommentTok{// Übergabe von variablen Parametersets}
\NormalTok{        [}\FunctionTok{InlineData}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{5}\NormalTok{)]}
\NormalTok{        [}\FunctionTok{InlineData}\NormalTok{(}\DecValTok{5}\NormalTok{, }\DecValTok{2}\NormalTok{, }\FloatTok{2.5}\NormalTok{)]}
\NormalTok{        [}\FunctionTok{InlineData}\NormalTok{(}\DataTypeTok{double}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{, }\DataTypeTok{double}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{, }\DecValTok{1}\NormalTok{)]    }\CommentTok{// Edge Cases}
\NormalTok{        [}\FunctionTok{InlineData}\NormalTok{(}\DataTypeTok{double}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DataTypeTok{double}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{)]}
        \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Check_ResultCalculation}\NormalTok{(}\DataTypeTok{double}\NormalTok{ dividend, }\DataTypeTok{double}\NormalTok{ divisor, }\DataTypeTok{double}\NormalTok{ expected)}
\NormalTok{        \{}
            \CommentTok{// Arrange}
            \DataTypeTok{double}\NormalTok{ result = }\DecValTok{0}\NormalTok{;}

            \CommentTok{// Act}
            \DataTypeTok{var}\NormalTok{ state = Calculator.}\FunctionTok{DivideTwoValues}\NormalTok{(dividend, divisor, }\KeywordTok{ref}\NormalTok{ result);}

            \CommentTok{// Assert}
\NormalTok{            Assert.}\FunctionTok{Equal}\NormalTok{(expected, result);}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Wie setzen wir das Ganze um?

\begin{verbatim}
dotnet new sln -o unit-testing-example
cd unit-testing-example
dotnet new classlib -o CalcService         // Code der Divisionsoperation einfügen
mv CalcService/Class1.cs CalcService/Division.cs
dotnet sln add ./CalcService/CalcService.csproj
dotnet new xunit -o CalcService.Tests      // obigen Testcode einfügen
dotnet add ./CalcService.Tests/CalcService.Tests.csproj reference ./CalcService/CalcService.csproj
dotnet sln add ./CalcService.Tests/CalcService.Tests.csproj
\end{verbatim}

Damit entsteht eine \texttt{solution}, die zwei \texttt{project} umfasst
- die eigentliche Anwendung als \texttt{classlib} und die Testfälle.

\begin{verbatim}
.
├── CalcService
│   ├── CalcService.csproj
│   ├── Division.cs
├── CalcService.Tests
│   ├── CalcService.Tests.csproj
│   └── UnitTest1.cs
└── unit-testing-example.sln
\end{verbatim}

Das Ausführen der Tests ist nun mit \texttt{dotnet\ test} möglich.

Eine automatische Generierung von Test Merkmalen ist mit Hilfe
zusätzlicher Tools, die in dotnet integriert sind möglich.

\begin{verbatim}
dotnet add package coverlet.collector
dotnet tool install --global dotnet-reportgenerator-globaltool
dotnet tool install --global coverlet.console

dotnet test --collect:"XPlat Code Coverage" --results-directory:"./.coverage"
reportgenerator "-reports:.coverage/**/*.cobertura.xml" "-targetdir:.coverage-report/" "-reporttypes:HTML;"
\end{verbatim}

Das Argument ``XPlat Code Coverage'' bezieht sich auf das Zwischenformat
der Darstellung. Das \texttt{./.coverage} dient zur Angabe des
Verzeichnisses, in dem die Ergebnisse gespeichert werden sollen. Wenn
keines angegeben wird, wird standardmäßig ein TestResults-Verzeichnis
innerhalb jedes Projekts verwendet. \texttt{reportgenerator} erzeugt
dann die entsprechende html-Repräsentation.

\begin{figure}
\centering
\includegraphics{./img/16_Testen/ReportGenerator.png}
\caption{instruction-set}
\end{figure}

\hypertarget{dokumentation-und-build-tools}{%
\chapter{Dokumentation und
Build-Tools}\label{dokumentation-und-build-tools}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Realisierung\ von\ Dokumentationen,\ Anwendung\ von\ Build-Tools}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/17_Dokumentation_BuildTools.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{dokumentation}{%
\section{Dokumentation}\label{dokumentation}}

\textbf{Wer braucht schon eine Doku?}

\begin{quote}
\emph{Eine Softwaredokumentation ist mangelhaft, wenn in ihr in
nennenswertem Umfang Bildschirmdialoge nicht (mehr) aktuell sind, nicht
mit den im Programm vorhandenen Dialogen übereinstimmen oder gar nicht
dokumentiert sind. \ldots{} Eine Softwaredokumentation ist mangelhaft,
wenn sie den Anwender nicht in die Lage versetzt, die Software im
Bedarfsfalle erneut oder auf einer anderen Anlage zu installieren.}
{[}LG Bonn, 19.12.2003{]}
\end{quote}

Als Softwaredokumentation bezeichnet man die Beschreibung einer Software
für Entwickler, Anwender und Benutzer. Entsprechend den
unterschiedlichen Rollen, wird erläutert, wie die Software funktioniert,
was sie erzeugt und verarbeitet (z. B. Daten), wie sie zu benutzen ist,
was zu ihrem Betrieb erforderlich ist und auf welchen Grundlagen sie
entwickelt wurde.

\emph{Klassifikation 1 - Intern/Extern} \ldots{} bezieht sich dabei auf
die Frage, ob das Ganze für den internen Gebrauch oder den externen
Gebrauch, also zur Weitergabe an Kunden, realisiert werden muss.
Letztgenannte Variante unterliegt einer Vielzahl von rechtlichen
Normierungen und Standards.

\emph{Klassifikation 2 - Inhalt}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.04\columnwidth}\raggedright
Art der Dokumentation\strut
\end{minipage} & \begin{minipage}[b]{0.90\columnwidth}\raggedright
Bezug\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Installationsdokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
Beschreibung der erforderlichen Hardware und Software, mögliche
Betriebssysteme und -Versionen, vorausgesetzte Software-Umgebung wie
etwa Standardbibliotheken und Laufzeitsysteme. Erläuterung der
Prozeduren zur Installation, außerdem zur Pflege (Updates) und
De-Installation, bei kleinen Produkten eine Readme-Datei.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Benutzerdokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
Informationsmaterial für die tatsächlichen Endbenutzer, etwa über die
Benutzerschnittstelle. Den Anwendern kann auch die Methodendokumentation
zugänglich gemacht werden, um Hintergrundinformationen und ein
allgemeines Verständnis für die Funktionen der Software zu
vermitteln.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Datendokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
Oft sind nähere Beschreibungen zu den Daten erforderlich. Es sind die
Interpretation der Informationen in der realen Welt, Formate,
Datentypen, Beschränkungen (Wertebereich, Größe) zu benennen. Die
Datendokumentation kann oft in zwei Bereiche aufgeteilt werden: Innere
Datenstrukturen, wie sie nur für Programmierer sichtbar sind und Äußere
Datendokumentation für solche Datenelemente, die für Anwender sichtbar
sind -- von Endbenutzern einzugebende und von der Software ausgegebene
Informationen. Dazu gehört auch die detaillierte Beschreibung möglicher
Import-/Exportschnittstellen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Testdokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
Nachweis von Testfällen, mit denen die ordnungsgemäße Funktion jeder
Version des Produkts getestet werden können, sowie Verfahren und
Szenarien, mit denen in der Vergangenheit erfolgreich die Richtigkeit
überprüft wurde.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Entwicklungsdokumentation\strut
\end{minipage} & \begin{minipage}[t]{0.90\columnwidth}\raggedright
Nachweis der einzelnen Versionen auf Grund von Veränderungen, der
jeweils zugrundegelegten Ziele und Anforderungen und der als Vorgaben
benutzten Konzepte (z. B. in Lastenheften und Pflichtenheften);
beteiligte Personen und Organisationseinheiten; erfolgreiche und
erfolglose Entwicklungsrichtungen; Planungs- und Entscheidungsunterlagen
etc.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Häufig fasst ein Projekt alle Arten der Dokumentation gleichermaßen
zusammen. Im folgenden soll zum Beispiel die Implementierung der avrlibc
für Mikrocontroller der AtTiny, AtMega und XMega Familie auf die
entsprechenden Beiträge hin untersucht werden.

https://www.nongnu.org/avr-libc/

\emph{Klassifikation 3 - Autoren}

Entwickler:

\begin{itemize}
\tightlist
\item
  empfindet die Softwaredokumentation oft als lästiges Übel
\item
  generiert ggf. sehr spezifische Dokumentationen ohne Anspruch auf
  Allgemeinverständlichkeit
\item
  ist aber der unmittelbare Experte!
\end{itemize}

Technischer Redakteur:

\begin{itemize}
\tightlist
\item
  fehlendes technisches Detailwissen, dichter am Wissensstand des Kunden
\item
  geeignetes Abstraktionsvermögen
\item
  erfahren im Dokumentenmanagement
\end{itemize}

\hypertarget{programmiererdokumentation}{%
\subsection{Programmiererdokumentation}\label{programmiererdokumentation}}

\begin{quote}
``Code is like humor. When you have to explain it, it's bad.''
\end{quote}

\begin{quote}
``Warum soll ich dokumentieren, es ist doch mein Code!''
\end{quote}

\begin{quote}
``Bei einem gut geschriebenen und formatierten Code braucht man weniger
zu dokumentieren.''
\end{quote}

Denken Sie in Zielgruppen, wenn Sie die Dokumentation erstellen. Welche
Hilfestellung erwartet welcher Nutzer der Implementierung? Welche
Voraussetzungen können Sie annehmen?

Entsprechend differenzieren wir Zielgruppen und fragen uns welche
Personenkreise wir davon bedienen wollen. Aus dieser Fragestellung
ergeben sich die Schwerpunkte der Dokumentationsarbeit:

\begin{itemize}
\tightlist
\item
  Praktiker \ldots{} starker Bezug zur Umsetzung, benötigt
  Code-Kommentare, Code-Beispiele
\item
  Systematiker \ldots{} liest zuerst einmal die Grundlagen, bemüht sich
  alle Hintergrundinfo zu API/Framework, zu erfassen. benötigt
  Architekturbeschreibung, Konzepte allgemeiner Programmieraufgaben
  (Error handling, Lokalisierung \&Co.)
\item
  Bedarfsleser \ldots{} situationsgetriebene Auswertung der
  Dokumentation, erwartet Antworten auf spezifische Fragen, benötigt
  Code-Kommentare, Hintergrundinformationen und Code-Beispiele
\end{itemize}

\includegraphics{https://www.plantuml.com/plantuml/png/XP1FRzD04CNl-oc6NDfAiKq27AXGL2ino6fIgZXHuOJMzjXPTVz4Esj2-VHuRLACP2cdrRxvpNkZTqUEMzSeoQwMvlXYHNrmC7yx-mYnuh-D3WkZff3g8WHZGJW2NbL22kwGGeYbXArV8TWYeVs9PSYkiiVLjs0j2jI4GLgYTg8IQ6zXa-xW-dFhKwBZGj8K214EpXtfDefguGvDxWCZVYB9S_9l80gZAQYC3OwIQtzgb4kJHugJGnkjqsNoa2KtZBqHkf1DYV39huiyYf-ofL7AwCNeB1FgAFrbvM9a-Gjgj5n6Uq9BBT2zr_iisSwcC16wpMu1YFK9TObsqeemkHbWyrR1NnUnTqEtHBkJA9xb6FY-zxiCVcYL3TUyHeNQdUUiuBRyUqUZQy9N1-04oSFkALtUhvCjguH4Y1_J7olpt7W7xeJH7bfzlT_F-ddsGWvLEKRC6JbZUNs6l9vzptR9Xh6kFWY2nJ2mQs5CxCa-jMjq-7zTwZExXiR-v-okcG70sByq2CCpzh_OPOreStRdQrJo3m00}
Abbildung motiviert aus \footnote{Uwe Friedrichsen, Optimale
  Systemdokumentation mit agilen Prinzipien, 06/11,
  https://www.codecentric.de/publikation/optimale-systemdokumentation-mit-agilen-prinzipien/}

Entsprechend ergeben sich vielfältige Dokumentationstypen, die ggf.
erfasst werden sollten:

\begin{itemize}
\tightlist
\item
  Programmier Kochbuch
\item
  Wiki
\item
  Code Kommentare
\item
  API Dokumentation
\end{itemize}

die in unterschiedlichen Formaten (online, offline, html, pdf, doc,
usw.) realisiert werden können.

\hypertarget{benutzerdokumentation}{%
\subsection{Benutzerdokumentation}\label{benutzerdokumentation}}

Auch die Benutzerdokumentation muss einer starken
Zielgruppenorientierung unterliegen sowie unterschiedliche Konzepte der
Handhabung einer Software beschreiben. Für Handbücher lassen sich zum
Beispiel folgende Typen unterscheiden:

\begin{itemize}
\tightlist
\item
  Trainings-Handbuch
\item
  Referenz-Handbuch
\item
  Referenzkarte (auch als Cheat-Sheets bezeichnet)
\item
  Benutzer-Leitfaden
\end{itemize}

vgl. zum Beispiel Python Pandas
\href{https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf}{Cheat Sheet}

\hypertarget{realisierung-der-dokumentation-in-csharp}{%
\subsection{Realisierung der Dokumentation in
Csharp}\label{realisierung-der-dokumentation-in-csharp}}

\begin{quote}
Merke: Anhand einer Semantik werden aus formlosen Kommentaren
automatisch auswertbare Elemente einer Benutzerdokumentation!
\end{quote}

Gliederungselemente für die Dokumentationsgenerierung sind dabei:

\begin{itemize}
\tightlist
\item
  Zuordnungen von Informationen zu Klassen, Methoden, Variablen
\item
  Erläuterung von Methodensignaturen (Input/Outputs)
\item
  Beschreibung der Funktion von Variablen, Properties usw.
\item
  Integration von Beispielcode
\end{itemize}

Unter C\# wird hinsichtlich der Darstellung zusätzlich zwischen
Kommentaren mit \texttt{//} oder \texttt{/*\ \ */} und
Dokumentationsinhalten unterschieden, die mit \texttt{///} eingeleitet
werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\CommentTok{// Eine zweielementige Vektorklasse ohne Methoden}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Vector \{}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ X;}
  \KeywordTok{public} \DataTypeTok{double}\NormalTok{ Y;}
  \KeywordTok{public} \FunctionTok{Vector}\NormalTok{ (}\DataTypeTok{double}\NormalTok{ x, }\DataTypeTok{double}\NormalTok{ y)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{X}\NormalTok{ = x;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{Y}\NormalTok{ = y;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \KeywordTok{operator}\NormalTok{ !=(Vector p1, Vector p2)\{}
    \CommentTok{// hier hatte ich keine Lust mehr}
    \CommentTok{// TODO die Methode müsste noch implemenntiert werden.}
    \KeywordTok{return} \KeywordTok{true}\NormalTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{/// }\KeywordTok{<summary>}
\CommentTok{///  KLasse mit dem Einsprungspunkt für die Main zu Testzwecken.}
\CommentTok{/// }\KeywordTok{</summary>}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \CommentTok{/// }\KeywordTok{<summary>}
  \CommentTok{///  Main Funktion mit expemplarischer Initialisierung zweier Vektoren.}
  \CommentTok{/// }\KeywordTok{</summary>}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Vector a = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{);}
\NormalTok{    Vector b = }\KeywordTok{new} \FunctionTok{Vector}\NormalTok{ (}\DecValTok{9}\NormalTok{,}\DecValTok{6}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{ (a == b);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Über entsprechende Tags lassen sich den Dokumentationsfragmenten
Bedeutungen geben, die eine entsprechende Gliederung und Zuordnung
erlaubt:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.12\columnwidth}\raggedright
Tag\strut
\end{minipage} & \begin{minipage}[b]{0.82\columnwidth}\raggedright
Erlärung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}summary\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Umfasst kurze Informationen über einen Typ oder Member.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}remarks\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Ergänzt weiterführende Informationen zu Typen und Membern.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}returns\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Beschreibt den Rückgabewert einer Methode\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}value\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Beschreibt Bedeutung einer Eigenschaft\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}example\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Ermöglicht mit \texttt{\textless{}code\textgreater{}} die Einbettung von
(Code-)Beispielen.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}para\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Ermöglicht die Beschreibung der Eingabeparameter einer Methode\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}c\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Indikator für Inline-Codefragmente\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}exception\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Erlaubt die Beschreibung möglicher Exceptions, die in einer Methode
auftreten können.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.12\columnwidth}\raggedright
\texttt{\textless{}see\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.82\columnwidth}\raggedright
Klickbare Links in Verbindung mit
\texttt{\textless{}cref\textgreater{}}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Was lässt sich damit umsetzen?

\begin{Shaded}
\begin{Highlighting}[]
  \CommentTok{// Divides an integer by another and returns the result}
  \CommentTok{// Codebeispiel aus der Microsoft Dokumentation}
  \CommentTok{// siehe https://docs.microsoft.com/de-de/dotnet/csharp/codedoc}

  \CommentTok{/// }\KeywordTok{<summary>}
  \CommentTok{/// Divides an integer }\KeywordTok{<paramref}\OtherTok{ name=}\DataTypeTok{"a"}\KeywordTok{/>}\CommentTok{ by another integer }\KeywordTok{<paramref}\OtherTok{ name=}\DataTypeTok{"b"}\KeywordTok{/>}\CommentTok{ and returns the result.}
  \CommentTok{/// }\KeywordTok{</summary>}
  \CommentTok{/// }\KeywordTok{<returns>}
  \CommentTok{/// The quotient of two integers.}
  \CommentTok{/// }\KeywordTok{</returns>}
  \CommentTok{/// }\KeywordTok{<example>}
  \CommentTok{/// }\KeywordTok{<code>}
  \CommentTok{/// int c = Math.Divide(4, 5);}
  \CommentTok{/// if (c > 1)}
  \CommentTok{/// \{}
  \CommentTok{///     Console.WriteLine(c);}
  \CommentTok{/// \}}
  \CommentTok{/// }\KeywordTok{</code>}
  \CommentTok{/// }\KeywordTok{</example>}
  \CommentTok{/// }\KeywordTok{<exception}\OtherTok{ cref=}\DataTypeTok{"System.DivideByZeroException"}\KeywordTok{>}\CommentTok{Thrown when }\KeywordTok{<paramref}\OtherTok{ name=}\DataTypeTok{"b"}\KeywordTok{/>}\CommentTok{ is equal to 0.}\KeywordTok{</exception>}
  \CommentTok{/// See }\KeywordTok{<see}\OtherTok{ cref=}\DataTypeTok{"Math.Divide(double, double)"}\KeywordTok{/>}\CommentTok{ to divide doubles.}
  \CommentTok{/// }\KeywordTok{<seealso}\OtherTok{ cref=}\DataTypeTok{"Math.Add(int, int)"}\KeywordTok{/>}
  \CommentTok{/// }\KeywordTok{<seealso}\OtherTok{ cref=}\DataTypeTok{"Math.Subtract(int, int)"}\KeywordTok{/>}
  \CommentTok{/// }\KeywordTok{<seealso}\OtherTok{ cref=}\DataTypeTok{"Math.Multiply(int, int)"}\KeywordTok{/>}
  \CommentTok{/// }\KeywordTok{<param}\OtherTok{ name=}\DataTypeTok{"a"}\KeywordTok{>}\CommentTok{An integer dividend.}\KeywordTok{</param>}
  \CommentTok{/// }\KeywordTok{<param}\OtherTok{ name=}\DataTypeTok{"b"}\KeywordTok{>}\CommentTok{An integer divisor.}\KeywordTok{</param>}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Divide}\NormalTok{(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{  \{}
      \KeywordTok{return}\NormalTok{ a / b;}
\NormalTok{  \}}
\end{Highlighting}
\end{Shaded}

Offensichtlich bläht diese Struktur den Code, der im Beispiel aus
insgesamt 4 Zeilen besteht unschön auf. Die Lesbarkeit, die ja
eigentlich gesteigert werden sollte leidet darunter. Welche
Lösungsmöglichkeit sehen Sie?

\textbf{Separate Dokumentationsdateien}

Mit dem \texttt{\textless{}include\textgreater{}}-Tag lassen sich
externe Dokumentationen während des Generierungsprozesses referenzieren.
Damit umfasst die Dokumentation lediglich einen entsprechenden Link in
Kombination mit einem einfachen Kommentar.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<docs>}
    \KeywordTok{<members}\OtherTok{ name=}\StringTok{"math"}\KeywordTok{>}
        \KeywordTok{<Math>}
            \KeywordTok{<summary>}
\NormalTok{            The main }\KeywordTok{<c>}\NormalTok{Math}\KeywordTok{</c>}\NormalTok{ class.}
\NormalTok{            Contains all methods for performing basic math functions.}
            \KeywordTok{</summary>}
            \KeywordTok{<remarks>}
            \KeywordTok{<para>}\NormalTok{This class can add, subtract, multiply and divide.}\KeywordTok{</para>}
            \KeywordTok{<para>}\NormalTok{These operations can be performed on both integers and doubles.}\KeywordTok{</para>}
            \KeywordTok{</remarks>}
        \KeywordTok{</Math>}
        \KeywordTok{<AddInt>}
            \KeywordTok{<summary>}
\NormalTok{            Adds two integers }\KeywordTok{<paramref}\OtherTok{ name=}\StringTok{"a"}\KeywordTok{/>}\NormalTok{ and }\KeywordTok{<paramref}\OtherTok{ name=}\StringTok{"b"}\KeywordTok{/>}\NormalTok{ and returns the result.}
            \KeywordTok{</summary>}
            \KeywordTok{<returns>}
\NormalTok{            The sum of two integers.}
            \KeywordTok{</returns>}
        \KeywordTok{</AddInt>}
        \KeywordTok{<DivideInt>}
            \KeywordTok{<summary>}
\NormalTok{            Divides an integer }\KeywordTok{<paramref}\OtherTok{ name=}\StringTok{"a"}\KeywordTok{/>}\NormalTok{ by another integer }\KeywordTok{<paramref}\OtherTok{ name=}\StringTok{"b"}\KeywordTok{/>}\NormalTok{ and returns the result.}
            \KeywordTok{</summary>}
            \KeywordTok{<returns>}
\NormalTok{            The quotient of two integers.}
            \KeywordTok{</returns>}
        \KeywordTok{</DivideInt>}
    \KeywordTok{</members>}
\KeywordTok{</docs>}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Adds two integers and returns the result}
\CommentTok{/// }\KeywordTok{<include}\OtherTok{ file=}\DataTypeTok{'docs.xml'}\OtherTok{ path=}\DataTypeTok{'docs/members[@name="math"]/AddInt/*'}\KeywordTok{/>}
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Add}\NormalTok{(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{\{}
    \CommentTok{// If any parameter is equal to the max value of an integer}
    \CommentTok{// and the other is greater than zero}
    \KeywordTok{if}\NormalTok{ ((a == }\DataTypeTok{int}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{ && b > }\DecValTok{0}\NormalTok{) || (b == }\DataTypeTok{int}\NormalTok{.}\FunctionTok{MaxValue}\NormalTok{ && a > }\DecValTok{0}\NormalTok{))}
        \KeywordTok{throw} \KeywordTok{new}\NormalTok{ System.}\FunctionTok{OverflowException}\NormalTok{();}

    \KeywordTok{return}\NormalTok{ a + b;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Leider funktioniert dieser Mechanismus unter dem gleich vorzustellen
Tool Doxygen nicht.

\textbf{Konkrete Umsetzung mit C\#}

\textbf{Anwendung 1:} Generierung separater XML Dateien zur Verwendung
in Visual Studio Code oder Visual Studio. Um die entsprechende XML Datei
sollte den gleichen Namen tragen wie das Assembly und sich im gleichen
Ordner befinden.

\begin{verbatim}
csc -out:MyAssembly.exe File.cs -doc:MyAssembly.xml
\end{verbatim}

Aufbauend auf den Inhalten der XML Datei ist IntelliSense in Visual
Studio dann in der Lage, die Textinformationen zu Klassen und Membern
bei der Eingabe anzuzeigen.

\begin{figure}
\centering
\includegraphics{./img/17_Dokumentation/vs_intelliSense.png}
\caption{IntelliSense}
\end{figure}

Sie können die Parameterinformation manuell aufrufen, indem Sie
STRG+UMSCHALT+LEERTASTE drücken (die alternativen Methoden mit der Maus
braucht ohnehin niemand).

\textbf{Anwendung 2:} Die XML basierten Dokumentationsinhalte können in
html oder pdf Dokumente transformiert werden, um eine losgelöste
Dokumentation darzustellen. Hierfür können externe Tools herangezogen
werden. Beispiele dafür sind
\href{https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html}{Javadoc},
\href{http://www.sphinx-doc.org/en/master/}{Sphinx} oder
\href{http://www.doxygen.nl/index.html}{Doxygen}. Ursprünglich bot
Microsoft eine eigene Toolchain für die Code-Generierung an, diese wird
gegenwärtig unter dem Projektnamen Sandcastle als Open-Source Projekt
weitergeführt.

https://github.com/EWSoftware/SHFB

Im folgenden soll beispielhaft auf die Anwendung von Doxygen eingegangen
werden.

\begin{figure}
\centering
\includegraphics{./img/17_Dokumentation/Doyxgen_infoflow.png}
\caption{doxygen}
\end{figure}

!?\href{https://www.youtube.com/watch?v=-V_vHZPOZfY}{doxygenmovie}

Die Anwendung von Doxygen wird im folgenden Foliensatz anhand eines
Beipielprojektes gezeigt. Dabei werden zwei Verbesserungen der
Darstellung realisiert.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Auswertung der Doxygen Ausgaben im Hinblick auf die Abdeckung der
  Dokumentation.
\item
  Einbindung des Quellcodes über das SOURCE\_BROWSER Flag.

  Anpassung des entsprechenden Eintrages von \texttt{NO} auf
  \texttt{YES}.
\end{enumerate}

\begin{verbatim}
# If the SOURCE_BROWSER tag is set to YES then a list of source files will be
# generated. Documented entities will be cross-referenced with these sources.
#
# Note: To get rid of all source code in the generated output, make sure that
# also VERBATIM_HEADERS is set to NO.
# The default value is: NO.

SOURCE_BROWSER         = NO
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Integration des Projektfiles README.md in die Dokumentation.
\end{enumerate}

\begin{verbatim}
INPUT                 += README.md
USE_MDFILE_AS_MAINPAGE = README.md
\end{verbatim}

\hypertarget{paketmanagement}{%
\section{Paketmanagement}\label{paketmanagement}}

\begin{quote}
\textbf{Merke:} Erfinde das Rad nicht neu!
\end{quote}

Wie schaffen es erfahrene Entwickler innerhalb kürzester Zeit Prototypen
mit beeindruckender Funktionalität zu entwerfen? Sicher, die Erfahrung
spielt hier eine Große Rolle aber auch die Wiederverwendung von
existierendem Code. Häufig wiederkehrende Aufgaben wie zum Beispiel:

\begin{itemize}
\tightlist
\item
  das Logging
\item
  der Zugriff auf Datenquellen
\item
  mathematische Operationen
\item
  Datenkapselung und Abstraktion
\item
  \ldots{}
\end{itemize}

werden bereits durch umfangreiche Bibliotheken implementiert und werden
entsprechend nicht neu geschrieben.

Ok, dann ziehe ich mir eben die zugehörigen Repositories in mein Projekt
und kann die Bibliotheken nutzen. In individuell genutzten
Implementierungen mag das ein gangbarer Weg sein, aber das Wissen um die
zugehörigen Abhängigkeiten - Welche Subbibliotheken und welches .NET
Framework werden vorausgesetzt? - liegt so nur implizit vor.

Entsprechend brauchen wir ein Tool, mit dem wir die Abhängigkeiten UND
den eigentlichen Code kombinieren und einem Projekt hinzufügen können.
\texttt{NuGet} löst diese Aufgabe für .NET und schließt auch gleich die
Mechanismen zur Freigabe von Code ein. NuGet definiert dabei, wie Pakete
für .NET erstellt, gehostet und verarbeitet werden.

Ein \texttt{NuGet}-Paket ist eine gepackte Datei mit der Erweiterung
\texttt{.nupkg} die: + den kompilierten Code (DLLs), + ein
beschreibendes Manifest, in dem Informationen wie die Versionsnummer des
Pakets, ggf. der Speicherort des Source Codes oder die Projektwebseite
enthalten sind sowie + die Abhängigkeiten von anderen Paketen und dessen
Versionen enthalten sind Ein Entwickler, der seinen Code veröffentlichen
möchte generiert die zugehörige Struktur und läd diese auf einen
\texttt{NuGet} Server. Unter dem \href{https://www.nuget.org/}{Link}
kann dieser durchsucht werden.

\textbf{Anwendungsbeispiel: Symbolisches Lösen von Mathematischen
Gleichungen}

Eine entsprechende Bibliothek steht unter
\href{https://symbolics.mathdotnet.com/}{Projektwebseite}. Das Ganze
wird als \texttt{Nuget} Paket gehostet
\href{https://www.nuget.org/packages/MathNet.Symbolics/}{MathNet}.

Unter der Annahme, dass wir \texttt{dotnet} als Buildtool benutzen ist
die Einbindung denkbar einfach.

\begin{verbatim}
dotnet new console -o SymbolicMath
cd SymbolicMath
dotnet add package MathNet.Symbolics
Determining projects to restore...
Writing /tmp/tmpNsaYtc.tmp
info : Adding PackageReference for package 'MathNet.Symbolics' into project '/home/zug/Desktop/Vorlesungen/VL_Softwareentwicklung/code/16_Testen/ConditionalBuild/ConditionalBuild.csproj'.
info :   GET https://api.nuget.org/v3/registration5-gz-semver2/mathnet.symbolics/index.json
...
\end{verbatim}

Danach findet sich in unserer Projektdatei \texttt{.csproj} ein
entsprechender Eintrag

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}

  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}

  \KeywordTok{<ItemGroup>}
    \KeywordTok{<PackageReference}\OtherTok{ Include=}\StringTok{"MathNet.Symbolics"}\OtherTok{ Version=}\StringTok{"0.24.0"} \KeywordTok{/>}
  \KeywordTok{</ItemGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ MathNet.}\FunctionTok{Symbolics}\NormalTok{;}
\KeywordTok{using}\NormalTok{ Expr = MathNet.}\FunctionTok{Symbolics}\NormalTok{.}\FunctionTok{SymbolicExpression}\NormalTok{;  }\CommentTok{// Platzhalter für verkürzte Schreibweise}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{  \{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Beispiele für die Verwendung des MathNet.Symbolics Paketes"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ x = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"x"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ y = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"y"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ a = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"a"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ b = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"b"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ c = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"c"}\NormalTok{);}
    \DataTypeTok{var}\NormalTok{ d = Expr.}\FunctionTok{Variable}\NormalTok{(}\StringTok{"d"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"a+a ="}\NormalTok{ + (a + a + a).}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"(2 + 1 / x - 1) ="}\NormalTok{ + (}\DecValTok{2}\NormalTok{ + }\DecValTok{1}\NormalTok{ / x - }\DecValTok{1}\NormalTok{).}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"((a / b / (c * a)) * (c * d / a) / d) ="}\NormalTok{ + ((a / b / (c * a)) * (c * d / a) / d).}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Der zugehörige Latex Code lautet "}\NormalTok{ + ((a / b / (c * a)) * (c * d / a) / d).}\FunctionTok{ToLaTeX}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net5.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="MathNet.Symbolics" Version="0.24.0" />
  </ItemGroup>
</Project>
\end{verbatim}

\hypertarget{build-tools}{%
\section{Build Tools}\label{build-tools}}

\textbf{Konzepte}

Wir haben bisher über das Compilieren des Codes und die Realisierung von
Tests gesprochen, nun kommt auch noch die Erstellung einer Dokumentation
hinzu \ldots{} und für all diese Teilaspekte gibt es jeweils eigne
Tools. Das möchte doch niemand manuell angehen!

\begin{verbatim}
mcs program.cs
mono program.exe
doxygen Doxyfile
...
\end{verbatim}

Wie kann man den Codeerstellungsprozess automatisieren und organisieren
ohne jedes mal über eine Vielzahl von CLI-Parametern nachdenken zu
müssen? Welche Aspekte sollte diese Straffung des Entwicklungsflusses
abdecken:

\begin{itemize}
\tightlist
\item
  Auflösung der Abhängigkeiten von anderen Paketen
\item
  Kompilierung
\item
  Anwendung von Qualitätsmetriken
\item
  Programmausführung
\item
  Tests
\item
  Generierung der Dokumentation
\end{itemize}

Dabei wäre es sinnvoll, wenn ausgehend von einer tatsächlichen
Veränderung der Eingabendateien eine Realsierung des gewünschten Targets
erfolgt.

\begin{longtable}[]{@{}lcccc@{}}
\toprule
Vorgang & Kompilierung & Tests & Qualitätscheck & Doku\tabularnewline
\midrule
\endhead
Änderung in einer Code Datei & X & X & X & X\tabularnewline
Hinzufügen eines Tests & & X & &\tabularnewline
Anpassen einer Dokumentationsdatei & & & & X\tabularnewline
\bottomrule
\end{longtable}

Um diese Idee abzubilden müssen wir offenbar Abhängigkeiten beschreiben,
die ausgehend von einer Veränderung, eine bestimmte Folge von Aktionen
auslösen. Ausgangspunkt für diese Aktionen können unterschiedliche
Quellen sein (vgl. Generierung der Dokumentation in obiger Tabelle).

\hypertarget{dotnet}{%
\subsection{dotnet}\label{dotnet}}

\texttt{dotnet} ist ein Tool für das Verwalten von .NET-Quellcode und
Binärdateien. Das Programm stellt Befehle zur Verfügung, die bestimmte
Aufgaben erfüllen, die zudem jeweils über eigene Argumente verfügen.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.16\columnwidth}\raggedright
Befehl\strut
\end{minipage} & \begin{minipage}[b]{0.78\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.16\columnwidth}\raggedright
dotnet new\strut
\end{minipage} & \begin{minipage}[t]{0.78\columnwidth}\raggedright
Initialisiert ein C\#- oder F\#-Projekt für eine bestimmte
Vorlage.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
dotnet restore\strut
\end{minipage} & \begin{minipage}[t]{0.78\columnwidth}\raggedright
Stellt die Abhängigkeiten für eine bestimmte Anwendung wieder her.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
dotnet build\strut
\end{minipage} & \begin{minipage}[t]{0.78\columnwidth}\raggedright
Erstellt eine .NET Core-Anwendung.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
dotnet clean\strut
\end{minipage} & \begin{minipage}[t]{0.78\columnwidth}\raggedright
Bereinigen von Buildausgaben.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
dotnet test\strut
\end{minipage} & \begin{minipage}[t]{0.78\columnwidth}\raggedright
Ausführen der entsprechenden Testanwendungen\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Beispielanwendung: Entwerfen Sie eine C\# Programm, dass Excel-Files
erstellt, für die bestimmte Felder vorinitialisiert sind.

\begin{verbatim}
export DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
dotnet --help
dotnet new console -n MyExcelGenerator
cd MyExcelGenerator
cat MyExcelGenerator.csproj
dotnet add package EPPlus
cat MyExcelGenerator.csproj
... Program.cs anpassen ... siehe Codebeispiel im Codeordner
dotnet build
dotnet run
soffice -calc myworkbook.xlsx
\end{verbatim}

\texttt{dotnet} ermöglicht keine Defintion von Abhängigkeiten (ohne auf
MSBuild zurückzugreifen) standardisiert aber den Erstellungs- und
Testprozess, sowie das Pakethandling!

\hypertarget{msbuild}{%
\subsection{MSBuild}\label{msbuild}}

MSBuild ist Build-Tool, das insbesondere für das Erstellen von
.NET-basierten Anwendungen genutzt wird. Microsofts Visual Studio ist in
wesentlichem Maße von MSBuild abhängig; MSBuild selbst ist aber nicht
von Visual Studio abhängig. Dadurch lassen sich mit MSBuild auch
Visual-Studio-Projekte ohne den Einsatz von Visual Studio bauen.

Im Wesentlichen besteht MSBuild aus der Datei \texttt{msbuild.exe} und
dll-Dateien, die auch im .NET Framework enthalten sind, und XML-Schemas,
nach deren Vorgaben die von msbuild.exe verwendeten Projektdateien
aufgebaut sind. Wegen der XML-Basiertheit wird MSBuild auch als
Auszeichnungssprache eingeordnet.

\begin{verbatim}
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="A">
    <Message Text="Hello World!"/>
  </Target>
</Project>
\end{verbatim}

Innerhalb der xml-Struktur definieren Sie sogenannte Targets als
Einsprungpunkte für den Erstellungsprozess. Im Beispiel sind dies
zunächst nur HelloWorld-Ausgaben, im Weiteren wirde dies auf konkrete
Kompiliervorgänge ausgeweitet.

Ein spezifisches Target kann mit
\texttt{msbuild~filename\ /t:targetname} aufgerufen werden.

\begin{verbatim}
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="A">
    <Message Text="Hello World! A"/>
  </Target>
    <Target Name="B" DependsOnTargets="A">
    <Message Text="Hello World! B"/>
  </Target>
</Project>
\end{verbatim}

Ein minimales Konfigurationsfile für die Build-Prozess einer einzelnen
C\# Datei könnte folgende Konfiguration haben:

\begin{verbatim}
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <Compile Include="helloworld.cs" />
  </ItemGroup>
  <Target Name="Build">
    <Csc Sources="@(Compile)"/>
  </Target>
</Project>
\end{verbatim}

Ein Beispiel für eigene Experimente findet sich unter
`code/17\_ToolChain/msbuildProject'

Die zuvor besprochenen dotnet Befehle bauen auf MSBuild auf und kapseln
diese. Die Ausführung von \texttt{dotnet\ build} entspricht
\texttt{dotnet\ msbuild\ -restore\ -target:Build}.

Arbeiten Sie auch die Dokumentation von MSBuild durch, diese stellt auch
das umfangreiche Featureset (vordefinierte Targets, integierte Tools,
die Möglichkeit externe Anwendungen einzubetten) vor, das deutlich über
die Beispiele hinausgeht.

https://docs.microsoft.com/de-de/visualstudio/msbuild/msbuild?view=vs-2019

\hypertarget{make}{%
\subsection{Make}\label{make}}

\texttt{make} wird beispielsweise, um in Projekten, die aus vielen
verschiedenen Dateien mit Quellcode bestehen, automatisiert alle
Arbeitsschritte (Übersetzung, Linken, Dateien kopieren etc.) zu steuern,
bis hin zum fertigen, ausführbaren Programm.

\texttt{make} liest ein sogenanntes \emph{Makefile} (ACHTUNG
Großschreibung erforderlich) und realisiert den beschriebenen
Übersetzungsprozesses entsprechend der Abhängigkeiten.

\begin{verbatim}
A: B
  generate_A

B: D E
  generate_B
\end{verbatim}

Daneben können Sie entsprechende Makros \texttt{\$(MAKRO\_NAME)},
\texttt{wildcard} und Platzhalter verwenden, um die Beschreibung
effizienter und kompakter zu gestalten. Ein typisches Makefile für eine
eingebettetes C Projekt (Arduino) stellt sich wie folgt dar:

\begin{verbatim}
# Source, Executable, Includes, Library Defines
INCL   = loop.h defs.h
SRC    = a.c b.c d.c      # c Code-Dateien
OBJ    = $(SRC:.c=.o)
LIBS   = -lgen
EXE    = program

 # Compiler, Linker Defines
CC      = /usr/bin/gcc
CFLAGS  = -ansi -pedantic -Wall -O2
LIBPATH = -L.
LDFLAGS = -o $(EXE) $(LIBPATH) $(LIBS)
RM      = /bin/rm -f

# Compile and Assemble C Source Files into Object Files
%.o: %.c
       $(CC) -c $(CFLAGS) $*.c

# Link all Object Files with external Libraries into Binaries
$(EXE): $(OBJ)
       $(CC) $(LDFLAGS) $(OBJ)

# Objects depend on these Libraries
$(OBJ): $(INCL)


# Clean Up Objects, Exectuables, Dumps out of source directory
clean:
       $(RM) $(OBJ) $(EXE) core a.out
\end{verbatim}

\begin{quote}
MERKE: Die Einschübe im MAKEFILE sind keine Leerzeichen, sondern
Tabulatorshifts!
\end{quote}

Das Hilfsprogramm make ist Teil des POSIX-Standards.

\hypertarget{continuous-integration}{%
\chapter{Continuous Integration}\label{continuous-integration}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Verwendung\ der\ Buildtools\ und\ der\ Features\ von\ GitHub\ in\ einer\ CI\ Toolchain}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/18_ContinuousIntegration.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{exkurs-alternative-konzepte-der-programmentwicklung}{%
\section{Exkurs: Alternative Konzepte der
Programmentwicklung}\label{exkurs-alternative-konzepte-der-programmentwicklung}}

Das Jupyter Notebook ist eine Open-Source-Webanwendung Dokumente zu
erstellen und zu teilen, die Live-Code, Gleichungen,
Berechnungsergebnisse, Visualisierungen und andere Multimedia-Ressourcen
zusammen mit erklärendem Text in einem einzigen Dokument integrieren.
Dabei werden Markdown-Elemente mit verschiedenen Ausführungsumgebungen
unterschiedlicher Sprachen (sogenannten Kernels) kombiniert. Notebooks
sind insbesondere im Data Science-Kontext präsent, wo ganze
Verarbeitungsketten von der Datenbereinigung und -transformation,
numerische Simulation, explorative Datenanalyse, Datenvisualisierung,
statistische Modellierung, maschinelles Lernen, Deep Learning usw. damit
in Python umgesetzt werden.

Ein Jupyter-Notebook strukturiert die Implementierung in einzelnen
Codeblöcke, die in beliebiger Reihung ausgeführt werden können. Zunächst
geben Datenwissenschaftler Programmiercode oder Text in rechteckige
``Zellen'' auf einer Front-End-Webseite ein. Der Browser leitet den Code
dann an einen Back-End-``Kernel'' weiter, der den Code ausführt und die
Ergebnisse zurück gibt. Es wurden bereits viele Jupyter-Kernel erstellt,
die Dutzende von Programmiersprachen - unter anderem C\# - unterstützen.
Die Kernel müssen sich nicht auf dem lokalen Computer befinden.

Damit ist es eine interaktive Datenverarbeitung möglich, eine Umgebung,
in der Benutzer Code ausführen, beobachten was passiert, interaktive
Änderungen einpflegen usw. Aus diesem Grund eignet sich das Format gut
um Tutorials oder interaktive Handbücher zu erstellen.

Neben lokalen Jupyter Installationen bieten sich verschiedene Webdienste
an:

\begin{longtable}[]{@{}llll@{}}
\toprule
\begin{minipage}[b]{0.21\columnwidth}\raggedright
Projekt\strut
\end{minipage} & \begin{minipage}[b]{0.28\columnwidth}\raggedright
Link\strut
\end{minipage} & \begin{minipage}[b]{0.14\columnwidth}\raggedright
Kernel\strut
\end{minipage} & \begin{minipage}[b]{0.25\columnwidth}\raggedright
Besonderheit\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Collaboratory-Projekt von Google\strut
\end{minipage} & \begin{minipage}[t]{0.28\columnwidth}\raggedright
\href{https://colab.research.google.com/}{colab}\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
Python\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
GPU Unterstützung, Teamarbeit möglich\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Binder\strut
\end{minipage} & \begin{minipage}[t]{0.28\columnwidth}\raggedright
\href{https://mybinder.org/}{binder}\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
Python, R, Julia, \ldots{}\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.21\columnwidth}\raggedright
Kaggle\strut
\end{minipage} & \begin{minipage}[t]{0.28\columnwidth}\raggedright
\href{https://www.kaggle.com/}{kaggle}\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
Python, R\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
Sammlung von ausführbaren Lerninhalten\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Eine gut Übersicht zu den Features bietet die Webseite
\href{https://www.dataschool.io/cloud-services-for-jupyter-notebook/}{DataSchool}.

\begin{quote}
\textbf{Visual Studio Code integriert ein eigenes Plugin für die
Ausführung von .Net Interactive Sessions
\href{https://dev.to/kenakamu/time-to-learn-c-with-notebook-2gfj}{Tutorial}}
\end{quote}

\begin{quote}
\textbf{Nachteil 1:} Die Kombinierbarkeit von Markdown und ausführbarem
Sourcecode ist die zentrale Stärke von Jupyter Notebooks aber auch ihre
Schwäche!
\end{quote}

Das übergreifende Datenformat macht die Nachvollziehbarkeit von Code
Änderungen schwer. Vor jedem Commit sollten entsprechend zumindest die
Ausgaben gelöscht werden.

\begin{verbatim}
"cells": [
  {
   "cell_type": "markdown",
   "id": "33b4a983",
   "metadata": {},
   "source": [
    "# C# in Jupyter Notebooks"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "6c91aadb",
   "metadata": {},
   "outputs": [],
   "source": [
    "Console.WriteLine(\"Jupyter + .Net\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "bc55e2c6",
   "metadata": {},
   "outputs": [],
   "source": [
    "var i = 5;\n",
    "var j = 6;"
   ]
  },
\end{verbatim}

\begin{quote}
\textbf{Nachteil 2:} Die beliebige Reihung der Aufrufe lässt einen
mitunter die Übersicht verlieren.
\end{quote}

\begin{quote}
\textbf{Merke:} Jupyter Notebooks sind ein hervorragendes Werkzeug für
schnelle Prototypen, API-Dokumentationen oder Vorträge mit Live Hacks
aber ungeeignet für Projekte {[}persönliche Meinung des Vortragenden
:-){]}.
\end{quote}

\hypertarget{continuous-integration-ci}{%
\section{Continuous integration (CI)}\label{continuous-integration-ci}}

\begin{verbatim}

         +------------------------------------------------------>   Zeit
         |
         |      Analyse                             Abnahmetest       KUNDE
         |          \                                   ^
         |           v                                 /          -.
         |        Grobentwurf                   Systemtests        |
         |             \                             ^             |
         |              v                           /              |
         |           Feinentwurf             Integrationstests      \  ENTWICKLER
 Detail- |                \                       ^                 /
 grad    |                 v                     /                 |
         |             Implementierung  --> Modultests             |
         |                                                        -'
         v
\end{verbatim}

Continuous integration (CI) zielt darauf ab, die Qualität der Software
zu verbessern und die Lieferzeit zu verkürzen, indem die das
Gesamtprojekt kontinuierlich realisiert wird. Darauf aufbauend können
die Konzepte der Qualitätskontroller automatisiert auf einer höheren
Integrationsebene umgesetzt werden.

\textbf{Tests lokal ausführen} \ldots{} erste Stufe der CI ist die
Durchführung lokaler Unit-Test in der lokalen Umgebung des Entwicklers.
Auf diese Weise wird vermieden, dass die individuelle, aktuelle
Entwicklungsarbeit das Gesamtprojekt beeinflusst.

\textbf{Code in CI kompilieren} \ldots{} ein Build-Server kompiliert den
Code periodisch oder sogar nach jedem Commit und meldet die Ergebnisse
an die Entwickler.

\textbf{Tests in CI durchführen} \ldots{} Zusätzlich zu automatisierten
Unit-Tests werden kontinuierliche Prozesse der Qualitätskontrolle
implementieren, die statische Analysen durchführen, die Leistung
vermessen und profilieren, Dokumentationen extrahieren, etc.

\textbf{Bereitstellen eines Artifacts von CI} \ldots{} Nun ist CI oft
mit kontinuierlicher Bereitstellung oder kontinuierlichem Einsatz in der
so genannten CI/CD-Pipeline verflochten. CI stellt sicher, dass die auf
der Hauptleitung eingecheckte Software immer in einem Zustand ist, der
den Benutzern zur Verfügung gestellt werden kann, und CD macht den
Bereitstellungsprozess vollständig automatisiert.

Damit ergeben sich folgende Aktivitäten, die für einen CI Realisierung
benötigt werden:

\begin{itemize}
\tightlist
\item
  Aufbau und Management eines zentralen Code-Repositorys.
\item
  Aufbau und Management eines zentralen Build-Tools.
\item
  Schreiben von automatisierten Tests und Integration in ein
  Feedbacksystem
\item
  Darstellung von Build-Resultaten und Artifacts
\end{itemize}

\begin{quote}
Merke: Unterschätzen Sie den Aufwand für die Realisierung und Wartung
der Tool-Chain nicht. Häufig müssen hier zu Begimn des Projektes
grundsätzliche Entscheidungen getroffen werden, die zumindest
mittelfristige Auswirkungen auf das Projekt haben.
\end{quote}

\hypertarget{ci-umsetzung-mit-github}{%
\section{CI Umsetzung mit GitHub}\label{ci-umsetzung-mit-github}}

Welche Elemente machen somit eine CI Pipeline aus:

\begin{itemize}
\tightlist
\item
  \textbf{Wann} (Trigger) soll
\item
  \textbf{Was} (Job)
\item
  \textbf{Wo} (Runner) ausgeführt werden um
\item
  \textbf{Welches Ergebnis} (Artefakt) zu generieren
\end{itemize}

Beschrieben werden die Pipelines unter GitHub and Gitlab in YAML einer
Auszeichnungssprache für Datenstrukturen über sogenannte Folgen. Die
YAML-Datei, die die Pipeline-Konfiguration spezifizieren müssen im
GitHub-Repositorys im Verzeichnis .github/workflows liegen.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Kommentare sind auch erlaubt}
\FunctionTok{scalar :}\AttributeTok{ }\DecValTok{5}
\FunctionTok{collection:}
    \FunctionTok{variable1 :}\AttributeTok{ Tralla}
    \FunctionTok{variable2 :}\AttributeTok{ Trulla}
\FunctionTok{    variable3:} \StringTok{|}
\NormalTok{            Hier steht jetzt plötzlich}
\NormalTok{            Ein Ausdruck mit mehreren Zeilen}
\FunctionTok{list:}
    \KeywordTok{-} \FunctionTok{variableA:}\AttributeTok{ Wert1}
    \KeywordTok{-} \FunctionTok{variableB:}\AttributeTok{ }\DecValTok{5}
\end{Highlighting}
\end{Shaded}

Die Grundstruktur folgt dabei einer Kombination der Elemente
\texttt{name}, \texttt{on} (Wann) und \texttt{jobs} (was):

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Generate Documentation}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}
    \KeywordTok{-}\NormalTok{ master}
    \FunctionTok{paths:}
    \KeywordTok{-} \StringTok{'docs/**'}

\FunctionTok{jobs:}
  \FunctionTok{build:}
    \FunctionTok{name:}\AttributeTok{ Build}
    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}
    \FunctionTok{steps:}
      \KeywordTok{-} \FunctionTok{run:}\AttributeTok{ scripts/generate_documentation.sh}
        \FunctionTok{env:}
\end{Highlighting}
\end{Shaded}

\textbf{Trigger}

Das Ausführen einer Pipeline wird aus verschiedenen Quellen resultieren
und mit Bedingungen verknüpft werden.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{on:}\AttributeTok{ push}

\FunctionTok{on:}\AttributeTok{ }\KeywordTok{[}\NormalTok{push}\KeywordTok{,}\NormalTok{ pull_request}\KeywordTok{]}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}
      \KeywordTok{-}\NormalTok{ master}
  \FunctionTok{pull_request:}
    \FunctionTok{branches:}
      \KeywordTok{-}\NormalTok{ master}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}
    \KeywordTok{-}\NormalTok{ master}
    \FunctionTok{paths:}
    \KeywordTok{-} \StringTok{'docs/**'}

\FunctionTok{on:}
  \FunctionTok{schedule:}
    \KeywordTok{-} \FunctionTok{cron:}\AttributeTok{  }\StringTok{'5 * * * *'}
\end{Highlighting}
\end{Shaded}

\textbf{Runner}

Die Ausführung des ``Was'' kann auf jedem Rechner in Form eines Runners
erfolgen, der entweder bei GitHub oder unabhängig gehostet wird. Wenn
ein Runner einen Job aufnimmt, führt er die Aktionen des Jobs aus und
meldet den Fortschritt, die Protokolle und die Endergebnisse an GitHub
zurück.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}

\FunctionTok{runs-on:}\AttributeTok{ }\KeywordTok{[}\NormalTok{self-hosted}\KeywordTok{,}\NormalTok{ linux}\KeywordTok{,}\NormalTok{ ARM32}\KeywordTok{]}

\FunctionTok{strategy:}
  \FunctionTok{matrix:}
    \FunctionTok{os:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ubuntu}\FloatTok{-16.04}\KeywordTok{,}\NormalTok{ ubuntu}\FloatTok{-18.04}\KeywordTok{]}
    \FunctionTok{node:}\AttributeTok{ }\KeywordTok{[}\DecValTok{6}\KeywordTok{,} \DecValTok{8}\KeywordTok{,} \DecValTok{10}\KeywordTok{]}
\end{Highlighting}
\end{Shaded}

\textbf{Jobs}

Der Runner stellt eine Ausführungsumgebung bereit innerhalb derer Sie
nun alle auch lokal möglichen Operationen umsetzen können. Ein häufig
verwendeter Ansatz ist die Verwendung von
\href{\%7Bhttps://www.youtube.com/watch?v=utI9Dcd5iY0}{docker}-Containern,
die eine Softwarekonfiguration bereitstellen.

Der Marketplace \href{https://github.com/marketplace?type=actions}{Link}
stellt verschieden Actions bereit, die häufige Verwendung finden. Das
bedeutet, dass man sich die Funktionalität nicht selbstständig
zusammentragen muss, sondern allein über die Parameterisierung eine
Anpassung vornimmt.

Für den Buildprozess einer .NET Anwendung werden im folgenden Beispiel
Actions für das auschecken und die Bereitstellung des .NET Cores der
Version 3.1.1 genutzt.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{name:}\AttributeTok{ .NET Build App}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}
  \FunctionTok{pull_request:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}

\FunctionTok{jobs:}
  \FunctionTok{build:}

    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}

    \FunctionTok{steps:}
    \KeywordTok{-} \FunctionTok{uses:}\AttributeTok{ actions/checkout@v2}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Setup .NET Core}
      \FunctionTok{uses:}\AttributeTok{ actions/setup-dotnet@v1}
      \FunctionTok{with:}
        \FunctionTok{dotnet-version:}\AttributeTok{ }\FloatTok{3.1.101}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Install dependencies}
\FunctionTok{      run:} \StringTok{|}
\NormalTok{        cd src/App}
\NormalTok{        dotnet restore}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Build}
\FunctionTok{      run:} \StringTok{|}
\NormalTok{        cd src/App}
\NormalTok{        dotnet build --configuration Release --no-restore}
\end{Highlighting}
\end{Shaded}

\textbf{Ergebnis}

Artefakte ermöglichen es, Daten zwischen Aufträgen in einem Workflow
auszutauschen und Daten zu speichern, sobald dieser Workflow
abgeschlossen ist.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{-} \FunctionTok{uses:}\AttributeTok{ actions/upload-artifact@v2}
  \FunctionTok{with:}
    \FunctionTok{name:}\AttributeTok{ my-artifact}
    \FunctionTok{path:}\AttributeTok{ path/to/artifact/world.txt}
\end{Highlighting}
\end{Shaded}

Die Stärken von GitHub-Actions liegen in der unmittelbaren Integration
in das Repository-System. Damit entfällt die Bereitstellung einer
weiteren Infrastruktur zumal automatische Check-ins von Ergebnissen
einer CI Toolchain sehr kompakt möglich sind.

Welche Mängel gibt es noch im Gebrauch der GitHub-Actions?

\begin{itemize}
\tightlist
\item
  Workflows können nur eingeschränkt wiederverwendet werden.
\item
  Testergebnisse und Analyseresultate können nicht über integrierte
  Formate ausgegeben werden (Wir sehen es gleich bei der Visualisierung
  der Unit-Tests im Beispiel)
\item
  die Sequenz der Ausführungen mehrerer Pipelines ist nicht steuerbar
\item
  die Liste der verfügbaren Actions ist noch sehr überschaubar
\end{itemize}

\begin{quote}
Merke: Man merkt an einigen Stellen der GitHub CI Implmentierung an,
dass diese noch recht jung ist. Features die für andere Tools etabliert
sind, fehlen noch.
\end{quote}

Alternative Realisierungen lassen sich zum Beispiel mit
\href{https://www.jenkins.io/}{Jenkins} oder
\href{https://travis-ci.org/}{TravisCI} unabhängig von einem
ursprünglichen Versionsmanagementsystem evaluieren.

\hypertarget{anwendungsbeispiel-1}{%
\section{Anwendungsbeispiel 1}\label{anwendungsbeispiel-1}}

Geben Sie die jeweiligen Anteile der verschiedenen Mitstreiter an einem
Projekt in der README.md aus. Wer hat zum Beispiel wie viele Codezeilen
realisiert.

Werfen wir dazu einen Blick auf das
\href{https://github.com/SebastianZug/test_contributor_feedback}{Anwendungsbeispiel}.
Folgende Bearbeitungsschritte werden im zugehörigen Python Skript
durchlaufen:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.03\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[b]{0.91\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.03\columnwidth}\raggedright
1.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Extrahieren der Informationen mit Hilfe des Paketes
\texttt{github2pandas}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
2.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Generierung der Basisdatentabelle durch Merge von \texttt{pdEdits} und
\texttt{pdCommits}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
3.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Aggregieren der hinzugefügten und gelöschten Zeilen durch
\texttt{groupby}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
4.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Austauschen der Daten in der \texttt{README.md} Datei\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
5.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Generieren eines neuen Diagramms das bereits in der \texttt{README.md}
Datei eingebunden ist.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.03\columnwidth}\raggedright
6.\strut
\end{minipage} & \begin{minipage}[t]{0.91\columnwidth}\raggedright
Commit und Push Operation mit den neuen Daten\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Die zweimalige Ausführung der Action pro Tag wird durch einen Timer
getriggert.

\hypertarget{anwendungsbeispiel-2}{%
\section{Anwendungsbeispiel 2}\label{anwendungsbeispiel-2}}

Wir wollen folgenden Entwurf in einem kontinuierlichen Entwicklungsfluss
realisieren.

\includegraphics{https://www.plantuml.com/plantuml/png/dL9DRzmW4BtpA-QOrNQbdds8aZIgMbNzKBnIpnCyiT42Om7kgdNtltSmmjbiBbLyOXwFzs6uYGb3cfnLyM3yY04TQ8intgOKpEEKwBDctve_1E_LO3e2ROAsfDI8-e0zmQqt3csS5Jx6552dSXv-K9eLm0v6Ij_GKGEjAFfUi6tUFCUWWl7AUF1dE-z00CiQas7Vm0EpYvk5FLU_4-pH7lRy_UWfN6rU-BIMQ5n41vv2RE3kTw8DDB_OTEga5Fd95L6GiEMxDrwEPx0YYye51bzCqWFvTVw4rcR9qlu3BkrXcrV_MmgsbrLYgIAoLVYU-oASLsyLhloorH86FSZuaKD9cqE3g0ZnZZdNEhswy3t59BU-NdQPryvdVW-Kfk3ZL-AZM2-_lXPupVh9_5HPBst7SNKBt0TqRYwC77Qt-tkTKoWHVHvgB46k9TG585HLfPuP5QYCykhB6t6K1kwYYWCVuScGbVKD-MvozXy0}

Für das Projekt entwerfen wir folgende Struktur:

\begin{verbatim}
├── doc
│   └── ...                      <- Generierte Dokumentation
├── Doxyfile                     <- Konfigurationsfile für die Doku
├── README.md                    <- Beschreibung des Projektes
├── src                          <- Sourcecode der Anwendung
│   ├── Animals
│   │   ├── Rooms.cs
│   │   ├── Cat.cs
│   │   ├── Dog.cs
│   │   ├── Pet.cs
│   │   ├── bin
│   │   │   └── Debug
│   │   │       └── ...
│   │   ├── obj
│   │   │   └── ...
│   │   └── Animals.csproj       <- .NET Projektdatei
|   │
│   └── App
│       ├── Program.cs           <- "Main" Klasse
│       └── App.csproj
├── test                         <- Unit-Tests für die Anwendung
│   └── AnimalsTests
│       ├── AnimalsTests.csproj  <- .NET Projektdatei
│       ├── bin
│       │   └── Debug
│       │       └── ...
│       ├── obj
│       │   └──  ...
│       └── PetTest.cs
└── .github
    └── workflow                 <- CI Toolchain
\end{verbatim}

Sie finden das Projekt unter
\url{https://github.com/SebastianZug/CSharpExample}.

\hypertarget{realisierung-der-projektstruktur}{%
\subsection{Realisierung der
Projektstruktur}\label{realisierung-der-projektstruktur}}

\begin{verbatim}
mkdir src
cd src
mkdir Animals
dotnet new classlib
cd ..
mkdir App
cd App
dotnet new console
\end{verbatim}

Allerdings fehlt jetzt noch die Verbindung zwischen den beiden
Projekten! Entsprechend müssen wir die zugehörigen Referenzen in den
Project-Files integrieren. Dies kann entweder in der Konsole oder
mittels Textoperation erfolgen.

\begin{verbatim}
dotnet add reference ..\Animals\Animals.csproj
\end{verbatim}

\begin{verbatim}
<ItemGroup>
  <ProjectReference Include="..\Animals\Animals.csproj" />
</ItemGroup>
\end{verbatim}

Unsere Anwendung ruft einige der Funktionalitäten des \texttt{classlib}
Projektes auf.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ Pets;}

\KeywordTok{namespace}\NormalTok{ ConsoleApplication \{}
    \KeywordTok{public} \KeywordTok{class}\NormalTok{ MyLittleZoo \{}
        \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{ (}\DataTypeTok{string}\NormalTok{[] args) \{}
\NormalTok{            Dog Willy = }\KeywordTok{new} \FunctionTok{Dog}\NormalTok{(}\StringTok{"Willy"}\NormalTok{, Rooms.}\FunctionTok{DiningRoom}\NormalTok{);}
\NormalTok{            Cat Kitty = }\KeywordTok{new} \FunctionTok{Cat}\NormalTok{ (}\StringTok{"KatziTatzi"}\NormalTok{, Rooms.}\FunctionTok{Kitchen}\NormalTok{);}
\NormalTok{            List<Pet> pets = }\KeywordTok{new}\NormalTok{ List<Pet> \{Willy, Kitty\};}

            \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ pet }\KeywordTok{in}\NormalTok{ pets) \{}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{ (pet.}\FunctionTok{TalkToOwner}\NormalTok{ ());}
\NormalTok{            \}}

\NormalTok{            Willy.}\FunctionTok{SearchForCat}\NormalTok{(Kitty);}
\NormalTok{            Willy.}\FunctionTok{LocalizedInRoom}\NormalTok{ = Rooms.}\FunctionTok{Kitchen}\NormalTok{;}
\NormalTok{            Willy.}\FunctionTok{SearchForCat}\NormalTok{(Kitty);}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{automatischer-build-prozess}{%
\subsection{Automatischer Build
Prozess}\label{automatischer-build-prozess}}

Der automatische Buildprozess ist im einfachsten Fall eine Kopie des
lokalen. Allerdings ist das Resultat in diesem Fall nur bedingt
aussagekräftig. Vielmehr wollen wir mit dem serverseitigen Test ja die
Übertragbarkeit unserer Lösung auf unterschiedliche Betriebssysteme
/.NET Frameworks evaluieren.

Für den ersten Fall müssen wir im Action File statt eines einfachen
\texttt{run-on} eine Matrix von Runnern angeben. Im zweiten Fall muss
auch der zugehörige Programmcode angepasst werden. Informieren Sie sich
unter
\href{https://docs.microsoft.com/de-de/dotnet/standard/frameworks}{Link},
wie Sie unterschiedliche Frameworks adressieren können.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{name:}\AttributeTok{ .NET Build App}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}
  \FunctionTok{pull_request:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}

\FunctionTok{jobs:}
  \FunctionTok{build:}

    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}

    \FunctionTok{steps:}
    \KeywordTok{-} \FunctionTok{uses:}\AttributeTok{ actions/checkout@v2}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Setup .NET Core}
      \FunctionTok{uses:}\AttributeTok{ actions/setup-dotnet@v1}
      \FunctionTok{with:}
        \FunctionTok{dotnet-version:}\AttributeTok{ }\FloatTok{3.1.101}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Install dependencies}
\FunctionTok{      run:} \StringTok{|}
\NormalTok{        cd src/App}
\NormalTok{        dotnet restore}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Build}
\FunctionTok{      run:} \StringTok{|}
\NormalTok{        cd src/App}
\NormalTok{        dotnet build --configuration Release --no-restore}
\end{Highlighting}
\end{Shaded}

\hypertarget{generierung-der-dokumentation}{%
\subsection{Generierung der
Dokumentation}\label{generierung-der-dokumentation}}

Die Dokumentation wird unter Hinzuziehung von Doxygen erzeugt. Dieser
Vorgang besteht aus drei Schritten:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  dem Checkout des aktuellen Projektes in den Runner
\item
  dem Erzeugen der HTML Dokumentation ausgehend von der Konfiguration in
  der Datei
  \href{https://github.com/SebastianZug/CSharpExample/blob/master/Doxyfile}{Doxyfile}
\item
  dem Publizieren des Ergebnisses im Branch \texttt{gh-pages}.
\end{enumerate}

Mit dem letzten Schritt entsteht eine Projektwebseite, die die
Dokumentation enthält. Zusätzlich wurde im Doxyfile die Integration des
README.md Files als ``Masterseite'' konfiguriert.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{...}
\NormalTok{INPUT                 += ./README.md \textbackslash{}}
\NormalTok{                         ./src/Animals}

\NormalTok{USE_MDFILE_AS_MAINPAGE = ./README.md}
\NormalTok{...}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]

\FunctionTok{name:}\AttributeTok{ Doxygen}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}
  \FunctionTok{pull_request:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}

\FunctionTok{jobs:}
  \FunctionTok{build:}

    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}

    \FunctionTok{steps:}
    \KeywordTok{-} \FunctionTok{uses:}\AttributeTok{ actions/checkout@v2}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Doxygen Action}
      \FunctionTok{uses:}\AttributeTok{ mattnotmitt/doxygen-action@v1.1.0}
      \FunctionTok{with:}
        \FunctionTok{doxyfile-path:}\AttributeTok{ }\StringTok{"./Doxyfile"}
        \FunctionTok{working-directory:}\AttributeTok{ }\StringTok{"."}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Deploy}
      \FunctionTok{uses:}\AttributeTok{ peaceiris/actions-gh-pages@v3}
      \FunctionTok{with:}
        \FunctionTok{publish_dir:}\AttributeTok{ ./docs}
\end{Highlighting}
\end{Shaded}

Die Darstellung ist unter
\url{https://sebastianzug.github.io/CSharpExample/} für das Projekt
sichtbar.

\hypertarget{erweiterung-der-tests}{%
\subsection{Erweiterung der Tests}\label{erweiterung-der-tests}}

Bisher werden nur die Ausgaben von \texttt{Dog} und \texttt{Cat}
untersucht. Lassen Sie uns einen Test integrieren, der die Methode
\texttt{.SearchForCat()} evaluiert.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{[Theory]}
\NormalTok{[}\FunctionTok{InlineData}\NormalTok{(Rooms.}\FunctionTok{Kitchen}\NormalTok{, Rooms.}\FunctionTok{DiningRoom}\NormalTok{, }\KeywordTok{false}\NormalTok{)]}
\NormalTok{[}\FunctionTok{InlineData}\NormalTok{(Rooms.}\FunctionTok{Kitchen}\NormalTok{, Rooms.}\FunctionTok{Kitchen}\NormalTok{, }\KeywordTok{true}\NormalTok{)]}
\KeywordTok{public} \DataTypeTok{void} \FunctionTok{DocCheckCatSearching}\NormalTok{(Rooms kittysLocation, Rooms willysLocation, }\DataTypeTok{bool}\NormalTok{ pattern) \{}
\NormalTok{    Cat Kitty = }\KeywordTok{new} \FunctionTok{Cat}\NormalTok{ (}\StringTok{"KatziTatzi"}\NormalTok{, kittysLocation);}
\NormalTok{    Dog Willy = }\KeywordTok{new} \FunctionTok{Dog}\NormalTok{(}\StringTok{"Willy"}\NormalTok{, willysLocation);}
    \DataTypeTok{bool}\NormalTok{ actual = Willy.}\FunctionTok{SearchForCat}\NormalTok{(Kitty);}
\NormalTok{    Assert.}\FunctionTok{Equal}\NormalTok{ (pattern, actual);}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Tests sollen nun als CI-Tests auf dem GitHub-Server ausgeführt
werden. Entsprechend ist die Integration einer neuen Action notwendig.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{name:}\AttributeTok{ .NET Test Animals}

\FunctionTok{on:}
  \FunctionTok{push:}
    \FunctionTok{branches:}\AttributeTok{ }\KeywordTok{[}\NormalTok{ master }\KeywordTok{]}

\FunctionTok{jobs:}
  \FunctionTok{build:}

    \FunctionTok{runs-on:}\AttributeTok{ ubuntu-latest}

    \FunctionTok{steps:}
    \KeywordTok{-} \FunctionTok{uses:}\AttributeTok{ actions/checkout@v2}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Setup .NET Core}
      \FunctionTok{uses:}\AttributeTok{ actions/setup-dotnet@v1}
      \FunctionTok{with:}
        \FunctionTok{dotnet-version:}\AttributeTok{ }\FloatTok{3.1.101}
    \KeywordTok{-} \FunctionTok{name:}\AttributeTok{ Run Tests}
\FunctionTok{      run:} \StringTok{|}
\NormalTok{        cd src/Tests}
\NormalTok{        dotnet test}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-der-woche}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche}}

{[} {]} Klonen Sie mein Repository von
\url{https://github.com/SebastianZug/CSharpExample} {[} {]} Ergänzen Sie
in der Build Action ein weiteres Target, zum Beispiel ``Windows'' {[}
{]} Erweitern Sie das Ganze um weitere Unit-Tests, ergänzen Sie den
Eintrag in der README.md Datei {[} {]} Übernehmen Sie das Konzept der
automatischen Generierung eines Klassendiagramm aus den Übungsblättern,
so dass auf dem Deckblatt der Dokumentation die aktuelle
Klassenstruktur, die automatisch generiert wurde, sichtbar wird.

\hypertarget{generics}{%
\chapter{Generics}\label{generics}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Generics\ und\ deren\ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/19_Generics.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{motivation-1}{%
\section{Motivation}\label{motivation-1}}

Versuchen wir nach dem Exkurs zur UML Modellierung und den Werkzeugen,
den roten Faden der C\# Programmierung wieder aufzunehmen. In dieser
Woche wollen wir uns mit der Frage der \emph{Generics} und damit der
Frage beschäftigen, wie wir ohne eine spezifische Berücksichtigung von
Datentypen wiederverwendbareren Code schreiben können.

Nehmen wir an, dass Sie ohne die entsprechenden .NET-Bibliotheken eine
Liste für \texttt{int}-Werte implementieren sollen. Warum funktioniert
das Ganze nicht mit unserem bisherigen Array-Konzept?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{.}\FunctionTok{Emit}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
      \DataTypeTok{var}\NormalTok{ myArray = }\KeywordTok{new}\NormalTok{[] \{ }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{ \};}
      \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i }\KeywordTok{in}\NormalTok{ myArray)}
\NormalTok{      \{}
\NormalTok{          System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\} "}\NormalTok{, i);}
\NormalTok{      \}}
\NormalTok{      Type valueType = myArray.}\FunctionTok{GetType}\NormalTok{();}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{myArray: Type is \{0\}"}\NormalTok{, valueType);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{myArray is Array? \{0\}"}\NormalTok{, valueType.}\FunctionTok{IsArray}\NormalTok{);}
      \CommentTok{//myArray.Add(7);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Dokumentation von \texttt{Array} findet sich unter
https://docs.microsoft.com/de-de/dotnet/api/system.array?view=netcore-3.1

\begin{quote}
\textbf{Merke:} Arrays sind in C\# statisch definiert und haben keine
veränderliche Größe.
\end{quote}

Lassen Sie uns einen alternativen Ansatz bestreiten. Wir implementieren
ein eigenes Konzept, dass eine verkettete Liste repräsentiert.

\begin{verbatim}
  Start
   |
   |   +----------+      +----------+      +----------+      +----------+
   +-->| Wert [0] |  +-->| Wert [1] |  +-->| Wert [2] |  +-->| Wert [2] |  +-->
       | Referenz |--+   | Referenz |--+   | Referenz |--+   | Referenz |--+
       +----------+      +----------+      +----------+      +----------+
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Node\{}
    \KeywordTok{public}\NormalTok{ Node next;}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ value;}
    \KeywordTok{public} \FunctionTok{Node}\NormalTok{(Node next, }\DataTypeTok{int}\NormalTok{ value)\{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{next}\NormalTok{ = next;}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{value}\NormalTok{ = value;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ LinkedList\{}
    \KeywordTok{public}\NormalTok{ Node head;}
    \KeywordTok{public} \FunctionTok{LinkedList}\NormalTok{(}\DataTypeTok{int}\NormalTok{ initial) \{}
\NormalTok{        head = }\KeywordTok{new} \FunctionTok{Node}\NormalTok{(}\KeywordTok{null}\NormalTok{, initial);}
\NormalTok{    \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(}\DataTypeTok{int}\NormalTok{ value)\{}
\NormalTok{      Node current = head;}
      \KeywordTok{while}\NormalTok{ (current.}\FunctionTok{next}\NormalTok{ != }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{          current = current.}\FunctionTok{next}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{      current.}\FunctionTok{next}\NormalTok{ = }\KeywordTok{new} \FunctionTok{Node}\NormalTok{(}\KeywordTok{null}\NormalTok{, value);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{int} \KeywordTok{this}\NormalTok{[}\DataTypeTok{int}\NormalTok{ index]\{}
      \KeywordTok{get}\NormalTok{ \{}
\NormalTok{          Node current = head;}
          \DataTypeTok{int}\NormalTok{ count = }\DecValTok{0}\NormalTok{;}
          \KeywordTok{while}\NormalTok{ (current != }\KeywordTok{null}\NormalTok{)\{}
              \KeywordTok{if}\NormalTok{ (count == index)\{}
                 \KeywordTok{return}\NormalTok{ current.}\FunctionTok{value}\NormalTok{;}
\NormalTok{              \}}
\NormalTok{              current = current.}\FunctionTok{next}\NormalTok{;}
\NormalTok{              count++;}
\NormalTok{          \}}
          \KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      LinkedList linkedList = }\KeywordTok{new} \FunctionTok{LinkedList}\NormalTok{(}\DecValTok{121}\NormalTok{);}
\NormalTok{      linkedList.}\FunctionTok{Add}\NormalTok{(}\DecValTok{140}\NormalTok{);}
\NormalTok{      linkedList.}\FunctionTok{Add}\NormalTok{(}\DecValTok{280}\NormalTok{);}
\NormalTok{      linkedList.}\FunctionTok{Add}\NormalTok{(}\DecValTok{309}\NormalTok{);}
      \DataTypeTok{int}\NormalTok{ i = }\DecValTok{2}\NormalTok{;}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"Der Wert des \{i\}. Eintages ist \{linkedList[i]\}."}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Was sind die Nachteile in dieses Konstrukts auf der Listenebene? Welche
Lösungsansätze sehen Sie?

Im Hinblick auf die Wiederverwendbarkeit stellt sich noch eine weiteres
Problem - die Lösung ist typabhängig, die Speicherung eines anderen
Datentypen macht eine Neuimplementierung notwendig. Zählen Sie doch mal
durch, wie oft wir aus dem \texttt{int} ein \texttt{float} machen
müssten, um eine Übertragbarkeit auf Fließkommazahlen zu realisieren.
Damit entstünde dann aber auch ein überwiegend redundanter Code, der
eine konsistente Realisierung und Wartung erheblich erschwert.

Lösungsansatz könnte die Arbeit mit dem allgemeinen
\texttt{Object}-Datentyp sein. Mittels Boxing und Unboxing würden die
spezifischen Datentypen auf diesen abgebildet.

\begin{quote}
Merke (Wiederholung): Alle C\# Datentypen sind von \texttt{Object}
abgeleitet.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{int}\NormalTok{ i = }\DecValTok{123}\NormalTok{;}
\DataTypeTok{object}\NormalTok{ o = i;  }\CommentTok{// The following line boxes i.}

\NormalTok{o = }\DecValTok{123}\NormalTok{;}
\NormalTok{i = (}\DataTypeTok{int}\NormalTok{)o;    }\CommentTok{// unboxing}
\end{Highlighting}
\end{Shaded}

Nachteilig daran ist, dass

\begin{itemize}
\tightlist
\item
  diese Operation Laufzeit kostet,
\item
  beim Auslesen der Daten eine externe (außerhalb unserer Liste
  liegende) Cast-Operation erforderlich macht.
  \texttt{float\ x\ =\ (float)\ linkedList{[}i{]}},
\item
  die Klasse würde alle Datentypen akzeptieren. Unter Umständen ist das
  aber nicht gewünscht weil zum Beispiel mit Zahlenwerten arithmetische
  Operationen ausgeführt werden sollen. Eine Beschränkung ist aber nicht
  möglich.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Cat\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{catchMouse}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Dies kann allein die Katze!"}\NormalTok{);}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Miau"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Dog\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{huntCat}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Dies kann allein der Hund!"}\NormalTok{);}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{makeSound}\NormalTok{()\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wuff"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Cat Kitty = }\KeywordTok{new} \FunctionTok{Cat}\NormalTok{();}
\NormalTok{    Dog Wally = }\KeywordTok{new} \FunctionTok{Dog}\NormalTok{();}
\NormalTok{    Object Animal = Kitty;}
\NormalTok{    (Animal }\KeywordTok{as}\NormalTok{ Cat).}\FunctionTok{catchMouse}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\emph{``Of course, we love bugs \ldots{} but not on run-time!''}
(Youtube Tutorial Generics in .NET)
\end{quote}

\hypertarget{generische-typen}{%
\section{Generische Typen}\label{generische-typen}}

``Generics'' sind seit der Version 2.0 Elemente der .Net-Sprachen und
der Common Language Runtime (CLR). Sie definieren das Konzept der
Typparameter, wodurch Klassen und Methoden keiner konkreten Zuordnung zu
einem Datentyp unterworfen werden. Platzhalter übernehmen die generische
Repräsentation des Typen, die Ersetzung erfolgt zur Laufzeit.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Generische Klassenspezifikation}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ LinkedList<T>\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(T value)\{}
\NormalTok{    ...}
\NormalTok{  \}}
  \KeywordTok{public}\NormalTok{ T }\KeywordTok{this}\NormalTok{[}\DataTypeTok{int}\NormalTok{ index]\{}
\NormalTok{    ...}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{// Instanzierung mit verschiedenen Datentypen}
\NormalTok{LinkedList<}\DataTypeTok{float}\NormalTok{> list1 = }\KeywordTok{new}\NormalTok{ LinkedList<}\DataTypeTok{float}\NormalTok{>(}\FloatTok{3.14}\NormalTok{);}
\NormalTok{LinkedList<ExampleClass> list2 = }\KeywordTok{new}\NormalTok{ LinkedList<ExampleClass>(myExampleClass);}
\NormalTok{LinkedList<ExampleStruct> list3 = }\KeywordTok{new}\NormalTok{ LinkedList<ExampleStruct>(myExampleStruct);}
\end{Highlighting}
\end{Shaded}

Die Vorteile des Konzepts sind offensichtlich:

\begin{itemize}
\tightlist
\item
  Der Compiler kann eine spezifische Typprüfung durchführen.
\item
  Die Operationen sind effektiver, weil keine Typumwandlungen (wie beim
  Umweg über \texttt{Object}) realisiert werden müssen.
\item
  Programme werden lesbarer.
\end{itemize}

Generische Klassen und Methoden vereinen Wiederverwendbarkeit,
Typsicherheit und Effizienz so, wie es ihre nicht generischen
Gegenstücke nicht können. Generics werden am häufigsten für Auflistungen
und deren Methoden verwendet.

Was passiert eigentlich hinter den Kulissen? Im Unterschied zu C++
Templates werden C\# Generics nicht zur Compile-Zeit konkretisiert,
sondern zunächst in einen generischen Zwischencode übersetzt. Die
eigentliche Konkretisierung findet zur Laufzeit statt, wobei Referenz-
und Wertdatentypen unterschiedlich behandelt werden. Für jeden Werttyp,
der den Platzhalter ersetzt wird eine konkrete Klasse erzeugt, während
sich alle Referenztypen eine einzige Konkretisierung teilen. Das
Laufzeitsystem erzeugt den typentsprechenden Code erst erst mit ersten
Instanzierung der konkreten Klasse.

Die Parameterisierung eines generischen Typs beschränkt sich nicht nur
auf einen Typ sondern kann mehrere Typen umfassen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ MyGenericClass<T, U>}
\NormalTok{\{}
\NormalTok{    ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Hinsichtlich der Namenswahl für die generischen Typen sind sie frei,
sollten aber berücksichtigen, dass für den Leser ggf. unklar ist, wie
welcher konkrete Datentyp realisiert werden kann. Die
Einbuchstabenvariante ``T'' sollte nur genutzt werden, wenn in Bezug auf
einen Container die Bedeutung wirklich klar ist.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Stack<T>\{}
  \DataTypeTok{int}\NormalTok{ position = }\DecValTok{0}\NormalTok{;}
\NormalTok{  T[] data = }\KeywordTok{new}\NormalTok{ T[}\DecValTok{100}\NormalTok{];}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Push}\NormalTok{(T newObj)\{}
    \KeywordTok{if}\NormalTok{ (position < }\DecValTok{100}\NormalTok{)\{}
\NormalTok{      data[position++] = newObj;}
\NormalTok{    \}}
    \KeywordTok{else}\NormalTok{\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Array size exceeded!"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}

  \KeywordTok{public}\NormalTok{ T }\FunctionTok{Pop}\NormalTok{()\{}
    \KeywordTok{return}\NormalTok{ data[position--];}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \DataTypeTok{string}\NormalTok{ output = }\StringTok{""}\NormalTok{;}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i=}\DecValTok{0}\NormalTok{; i<position; i++)\{}
\NormalTok{       output = output + }\StringTok{" "}\NormalTok{ + data[i].}\FunctionTok{ToString}\NormalTok{();}
\NormalTok{    \}}
    \KeywordTok{return}\NormalTok{ output;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
      \DataTypeTok{var}\NormalTok{ myStack = }\KeywordTok{new}\NormalTok{ Stack<}\DataTypeTok{int}\NormalTok{>();}
\NormalTok{      myStack.}\FunctionTok{Push}\NormalTok{(}\DecValTok{3}\NormalTok{);}
\NormalTok{      myStack.}\FunctionTok{Push}\NormalTok{(}\DecValTok{12}\NormalTok{);}
      \CommentTok{//myStack.Push("Hallo!");}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(myStack);}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{generische-methoden}{%
\section{Generische Methoden}\label{generische-methoden}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \CommentTok{// Tauscht zwei Variablen lhs und rhs}
  \KeywordTok{static} \DataTypeTok{void}\NormalTok{ Swap<T>(}\KeywordTok{ref}\NormalTok{ T lhs, }\KeywordTok{ref}\NormalTok{ T rhs)}
\NormalTok{  \{}
\NormalTok{     T temp;}
\NormalTok{     temp = lhs;}
\NormalTok{     lhs = rhs;}
\NormalTok{     rhs = temp;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hier wurde die generische Methode aufgerufen"}\NormalTok{);}
\NormalTok{  \}}

  \CommentTok{// Tauscht zwei Variablen lhs und rhs}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Swap}\NormalTok{(}\KeywordTok{ref} \DataTypeTok{int}\NormalTok{ lhs, }\KeywordTok{ref} \DataTypeTok{int}\NormalTok{ rhs)}
\NormalTok{  \{}
     \DataTypeTok{int}\NormalTok{ temp;}
\NormalTok{     temp = lhs;}
\NormalTok{     lhs = rhs;}
\NormalTok{     rhs = temp;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hier wurde die konkrete Methode aufgerufen"}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
     \DataTypeTok{int}\NormalTok{ a = }\DecValTok{99}\NormalTok{;}
     \DataTypeTok{int}\NormalTok{ b = }\DecValTok{1}\NormalTok{;}
     \CommentTok{//    ^}
     \CommentTok{//    ------ Abstimmung der Typen}
     \CommentTok{//    v}
\NormalTok{     Swap<}\DataTypeTok{int}\NormalTok{>(}\KeywordTok{ref}\NormalTok{ a, }\KeywordTok{ref}\NormalTok{ b);}
\NormalTok{     System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"a="}\NormalTok{ + a + }\StringTok{" ,b="}\NormalTok{ + b);}
     \FunctionTok{Swap}\NormalTok{(}\KeywordTok{ref}\NormalTok{ a, }\KeywordTok{ref}\NormalTok{ b);}
\NormalTok{     System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"a="}\NormalTok{ + a + }\StringTok{" ,b="}\NormalTok{ + b);}
     \DataTypeTok{float}\NormalTok{ x = 99F;}
     \DataTypeTok{float}\NormalTok{ y = }\FloatTok{1.2345F}\NormalTok{;}
\NormalTok{     Swap<}\DataTypeTok{float}\NormalTok{>(}\KeywordTok{ref}\NormalTok{ x, }\KeywordTok{ref}\NormalTok{ y);}
\NormalTok{     System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x="}\NormalTok{ + x + }\StringTok{" ,y="}\NormalTok{ + y);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Sie können das Typargument auch weglassen, der Compiler löst den Typ
entsprechend auf. Eine Einschränkung oder ein Rückgabewert genügen ihm
zur Ableitung des Typparameters nicht. Damit ist ein Typrückschluss bei
Methoden ohne Parameter nicht möglich! Damit bewirken:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Swap<}\DataTypeTok{int}\NormalTok{>(}\KeywordTok{ref}\NormalTok{ a, }\KeywordTok{ref}\NormalTok{ b);  }\CommentTok{// und}
\FunctionTok{Swap}\NormalTok{(}\KeywordTok{ref}\NormalTok{ a, }\KeywordTok{ref}\NormalTok{ b);}
\end{Highlighting}
\end{Shaded}

einen analogen Aufruf.

Welches Fragestellungen ergeben sich aus dem Codefragment:

\begin{itemize}
\tightlist
\item
  Was passiert, wenn eine ``identische'' nicht-generische Methode
  bereitsteht? (vgl. Zeile 18 in obigem Beispiel)
\item
  Welche Probleme entstehen, wenn die generische Methode in eine
  generische Klasse eingefügt wird?
\item
  Wie stellen wir sicher, dass spezifische Methoden für den Datentyp
  überhaupt existieren?
\end{itemize}

Die erste Frage lässt sich schnell beantworten, in diesem Fall wird die
nicht-generische Methode aus Effizienzgründen vorgezogen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ DoAnything<T>\{}

  \CommentTok{// Tauscht zwei Variablen lhs und rhs}
  \KeywordTok{static} \DataTypeTok{void}\NormalTok{ Swap<T>(}\KeywordTok{ref}\NormalTok{ T lhs, }\KeywordTok{ref}\NormalTok{ T rhs)}
\NormalTok{  \{}
\NormalTok{       T temp;}
\NormalTok{       temp = lhs;}
\NormalTok{       lhs = rhs;}
\NormalTok{       rhs = temp;}
\NormalTok{  \}}

\NormalTok{  ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Wenn eine generische Methode definiert wird, die die gleichen
Typparameter wie die übergeordnete Klasse verwendet (hier \texttt{T}),
gibt der Compiler die Warnung CS0693 aus. Innerhalb des
Gültigkeitsbereichs der Methode wird der ``äußere Klassentyp'' durch den
``inneren Methodentyp'' ausgeblendet. Damit soll der Entwickler, der
ggf. zwei unterschiedliche Typen avisiert darauf hingewiesen werden,
dass diese hier keine Berücksichtigung finden.

``` .NET Dokumentation Compilerwarnung (Stufe 3) CS0693

Der Typparameter ``Typparameter'' hat denselben Namen wie der
Typparameter des äußeren Typs ``Typ''.

Dieser Fehler tritt bei einem generischen Member, z. B. einer Methode in
einer generischen Klasse, auf. Da der Typparameter der Methode nicht
notwendigerweise mit dem Typparameter der Klasse übereinstimmt, können
Sie ihm nicht den gleichen Namen geben. Weitere Informationen finden Sie
unter Generic Methods (Generische Methoden).

Um diese Situation zu vermeiden, verwenden Sie für einen der
Typparameter einen anderen Namen. ```

Verwenden Sie Beschränkungen, analog zu den generischen Typen, sinnvolle
Einschränkungen für die Typparametern in Methoden gewährleisten. Das
folgende Beispiel gibt als Beschränkung die Implementierung des
Interfaces IComparable an, um unseren Vergleich zu realisieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \KeywordTok{static} \DataTypeTok{void}\NormalTok{ SwapIfGreater<T>(}\KeywordTok{ref}\NormalTok{ T lhs, }\KeywordTok{ref}\NormalTok{ T rhs) where T : System.}\FunctionTok{IComparable}\NormalTok{<T> \{}
\NormalTok{    T temp;}
    \KeywordTok{if}\NormalTok{ (lhs.}\FunctionTok{CompareTo}\NormalTok{(rhs) > }\DecValTok{0}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        temp = lhs;}
\NormalTok{        lhs = rhs;}
\NormalTok{        rhs = temp;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ a = }\DecValTok{99}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ b = }\DecValTok{1}\NormalTok{;}
\NormalTok{    SwapIfGreater<}\DataTypeTok{int}\NormalTok{>(}\KeywordTok{ref}\NormalTok{ a, }\KeywordTok{ref}\NormalTok{ b);}
\NormalTok{    System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"a="}\NormalTok{ + a + }\StringTok{" ,b="}\NormalTok{ + b);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Was verbirgt sich hinter dem Interface \texttt{IComparable}? Werfen Sie
einen Blick auf die entsprechende Dokumentation und benennen Sie die
Methoden, die in Klassen, die dieses Interface implementieren,
existieren müssen.

https://docs.microsoft.com/de-de/dotnet/api/system.icomparable?view=netframework-4.8

\begin{quote}
Achtung: Dieses Beispiel benutzt die typbehaftete Variante des
IComparable Interfaces! Diese generiert über das Boxing und Unboxing
einen unnötigen Aufwand und ist wie zu Beginn gezeigt nicht typsicher.
Ersetzen Sie IComparable durch Icomparable .
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal : IComparable \{}
  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{private} \DataTypeTok{int}\NormalTok{ weight;}

  \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ weight)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{weight}\NormalTok{ = weight;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name\{}
    \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ name;\}}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Weight\{}
    \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ weight;\}}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \KeywordTok{return}\NormalTok{ name + }\StringTok{" weights "}\NormalTok{ + weight + }\StringTok{" kg"}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{CompareTo}\NormalTok{ (}\DataTypeTok{object}\NormalTok{ obj)\{}
    \KeywordTok{if}\NormalTok{ (obj == }\KeywordTok{null}\NormalTok{)}
       \KeywordTok{throw} \KeywordTok{new} \FunctionTok{ArgumentException}\NormalTok{(}\StringTok{"Object is not a valid"}\NormalTok{);}
    \KeywordTok{else}\NormalTok{ \{}
\NormalTok{      Animal otherAnimal = obj }\KeywordTok{as}\NormalTok{ Animal;}
      \KeywordTok{return}\NormalTok{ (otherAnimal.}\FunctionTok{weight}\NormalTok{ - weight);}
\NormalTok{      \}}
\NormalTok{    \}}
\NormalTok{  \}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \KeywordTok{static} \DataTypeTok{void}\NormalTok{ SwapIfGreater<T>(}\KeywordTok{ref}\NormalTok{ T lhs, }\KeywordTok{ref}\NormalTok{ T rhs) where T : System.}\FunctionTok{IComparable}\NormalTok{\{}
\NormalTok{    T temp;}
    \KeywordTok{if}\NormalTok{ (lhs.}\FunctionTok{CompareTo}\NormalTok{(rhs) > }\DecValTok{0}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        temp = lhs;}
\NormalTok{        lhs = rhs;}
\NormalTok{        rhs = temp;}
\NormalTok{    \}}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Animal AnimalA = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(AnimalA);}
\NormalTok{    Animal AnimalB = }\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Wally"}\NormalTok{, }\DecValTok{30}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(AnimalB);}
\NormalTok{    SwapIfGreater<Animal>(}\KeywordTok{ref}\NormalTok{ AnimalA, }\KeywordTok{ref}\NormalTok{ AnimalB);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"After ordering ..."}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(AnimalA);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(AnimalB);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{beschruxe4nkungen}{%
\section{Beschränkungen}\label{beschruxe4nkungen}}

Wie bereits bei den generischen Methoden angedeutet können wir mittels
``Beschränkungen'' sicherstellen, dass eine gültige Operation für einen
Datentyp existiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \KeywordTok{static} \DataTypeTok{int}\NormalTok{ Plus<T>(T x, T y)\{}
     \KeywordTok{return}\NormalTok{ (x + y);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ a = }\DecValTok{1}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ b = }\DecValTok{2}\NormalTok{;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(Plus<}\DataTypeTok{int}\NormalTok{>(a, b));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Folglich ist es notwendig die Allgemeinheit der generischen Methoden
oder Klassen zu beschränken. Man definiert Beschänkungen oder
\emph{Constraints}, die die Breite der verwendbaren Datentypen
einschränken. Die Typprüfung bezieht diese Informationen dann ein.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.31\columnwidth}\raggedright
Beschränkung\strut
\end{minipage} & \begin{minipage}[b]{0.63\columnwidth}\raggedright
Das Typargument muss \ldots{}\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.31\columnwidth}\raggedright
\texttt{where\ T\ :\ struct}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
\ldots{} ein Werttyp sein.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.31\columnwidth}\raggedright
\texttt{where\ T\ :\ class}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
\ldots{} ein Verweistyp sein.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.31\columnwidth}\raggedright
\texttt{where\ T\ :\ \textless{}Basisklasse\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
\ldots{} die Basisklasse sein oder von ihr abgeleitete sein.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.31\columnwidth}\raggedright
\texttt{where\ T\ :\ \textless{}Schnittstelle\textgreater{}}\strut
\end{minipage} & \begin{minipage}[t]{0.63\columnwidth}\raggedright
\ldots{} die Schnittstelle sein oder diese implementieren.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Das folgende Beispiel setzt die Möglichkeiten der Beschränkung
konsequent um und lässt nur \texttt{Employee} selbst oder abgeleitete
Typen zu. Damit wird sichergestellt, dass die Methoden, die in
GenericList verwendet werden, im Parametertypen auch existieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Human}
\NormalTok{\{}
    \KeywordTok{public} \FunctionTok{Employee}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s, }\DataTypeTok{int}\NormalTok{ i) => (Name, ID) = (s, i);}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ ID \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Employee : Human}
\NormalTok{\{}
\NormalTok{...}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Customer : Human}
\NormalTok{\{}
\NormalTok{...}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ GenericList<T> where T : Human, IComparable \{}

    \CommentTok{// hier werden Methoden oder Felder der Klasse Employee unter Ausnutzung}
    \CommentTok{// der Vergleichbarkeit genutzt.}

\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Da die Konkretisierung von Generics erst zur Laufzeit realisiert werden,
ist es ggf. notwendig die spezifischen Parameter des Datentyps zur
Laufzeit auszuwerten. Im folgenden sollen die Beispiele die Bedeutung
diese Vorgehens aufzeigen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Base \{\}}

\KeywordTok{class}\NormalTok{ SampleClass<T> where T : Base}
\NormalTok{\{}
  \DataTypeTok{void} \FunctionTok{Swap}\NormalTok{(}\KeywordTok{ref}\NormalTok{ T lhs, }\KeywordTok{ref}\NormalTok{ T rhs) \{ \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Type t = }\KeywordTok{typeof}\NormalTok{(SampleClass<>);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Liegt ein generischer Typ vor? \{0\}"}\NormalTok{,}
\NormalTok{                t.}\FunctionTok{IsGenericTypeDefinition}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wie ist der Typparameter benannt? \{0\}"}\NormalTok{,}
\NormalTok{                            t.}\FunctionTok{GetGenericArguments}\NormalTok{());}

\NormalTok{    Type[] defparams = t.}\FunctionTok{GetGenericArguments}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (Type tp }\KeywordTok{in}\NormalTok{ defparams)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}r\textbackslash{}n}\StringTok{Type parameter: \{0\}"}\NormalTok{, tp.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{      Type[] tpConstraints = tp.}\FunctionTok{GetGenericParameterConstraints}\NormalTok{();}
      \KeywordTok{foreach}\NormalTok{ (Type constr }\KeywordTok{in}\NormalTok{ tpConstraints)\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}t}\StringTok{\{0\}"}\NormalTok{, constr);}
\NormalTok{      \}}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{vererbung-bei-generischen-typen}{%
\section{Vererbung bei generischen
Typen}\label{vererbung-bei-generischen-typen}}

In der UML werden generische Typen über eine separate Box in der oberen
linken Ecke der Klassendarstellung im Klassendiagramm realisiert.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/BSqn2i9048NXVaunfNOUG2I2ZNLEC6uUEBYxaPaN2yMx6yNoUppuXwG5brObRzxl5jQqLCiyak6NXJYNkO_-XExawXEqU9GAaTzBHt1_Cjf1NwBgFH7SV8Vjoa2R7_ZpBGFwj9O-}
\caption{UseCaseOnlineShopII}
\end{figure}

Generischen Typen können wie andere Typen von einer Klasse erben und
Interfaces implementieren. Die Basisklassen können dabei selbst wieder
generische sein.

\begin{longtable}[]{@{}lll@{}}
\toprule
Ableitung & Die generische Klasse A erbt \ldots{} &
Bemerkung\tabularnewline
\midrule
\endhead
\texttt{class\ A\textless{}X\textgreater{}:\ B\ \{\}} & \ldots{} vom
konkreten Typ B. &\tabularnewline
\texttt{class\ A\textless{}X\textgreater{}:\ B\textless{}int\textgreater{}\ \{\}}
& \ldots{} vom konkretisierten generischen Typ B &\tabularnewline
\texttt{class\ A\textless{}X\textgreater{}:\ B\textless{}X\textgreater{}\ \{\}}
& \ldots{} vom generischen Typ mit gleichem Platzhalter &\tabularnewline
\texttt{class\ A:\ B\textless{}X\textgreater{}\ \{...\}} & & nicht
erlaubt!\tabularnewline
\bottomrule
\end{longtable}

Beispiele

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ BaseNode \{ \}}
\KeywordTok{class}\NormalTok{ BaseNodeGeneric<T> \{ \}}

\KeywordTok{class}\NormalTok{ NodeConcrete<T> : BaseNode \{ \}            }\CommentTok{// concrete type}
\KeywordTok{class}\NormalTok{ NodeClosed<T> : BaseNodeGeneric<}\DataTypeTok{int}\NormalTok{> \{ \}  }\CommentTok{//closed constructed type}
\KeywordTok{class}\NormalTok{ NodeOpen<T> : BaseNodeGeneric<T> \{ \}      }\CommentTok{//open constructed type}
\end{Highlighting}
\end{Shaded}

Spannend wird die Typparameterisierung für generische Klassen, die von
offenen konstruierten Typen erben. Hier müssen für sämtliche
Basisklassen-Typparameter Typargumente bereitgestellt werden.

\begin{verbatim}
class BaseNodeMultiple<T, U> { }

//No error
class Node4<T> : BaseNodeMultiple<T, int> { }

//No error
class Node5<T, U> : BaseNodeMultiple<T, U> { }

//Generates an error
//class Node6<T> : BaseNodeMultiple<T, U> { }
\end{verbatim}

Im letzten Fall kann ausgehend von der Spezifikation von
\texttt{Node6\textless{}int\textgreater{}\ A\ =\ new\ Node6\textless{}int\textgreater{}();}
der Compiler nicht auf die konkrete Realisierung von \texttt{U}
schließen.

\hypertarget{anwendung}{%
\section{Anwendung}\label{anwendung}}

Erläutern Sie die Anwendung von generischen Typen anhand des folgenden
UML-Diagramms.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/PP3FQlCm4CJlUeezVX_5eMTXH5nwQ6aQ0abllSZMaYoHraLQK-YVTwyKXReXjvtP-OqMBPFOA5FmAXs9tsoq0GPlK-f48lMJuECmyfO-46xLWHp2G77mgDGf1IlY8xeL9Mbty7x0Y1eUfc3PmAS2QE20rcbOZmwpl87EkN-x_wTn4ucbYEzpMGMXRMsV9Df1Z2aTiBO1DMIBU5zqvmMZXdihEBCTxp49-h8xKNT8BvmIacWWbZdvDB734gdJzZUHdGr62bFGq8-ZBuWwt_JLD1TF_F5hZPf_8hkBHNNPPuq06jgs9tR6l6PervYwDbVKCucDFP9WhEWLUN66KKjaDmN_0m00}
\caption{ObjectBasedList}
\end{figure}

Im folgenden Beispiel soll eine Liste für zwei Klassen dienen, die
unterschiedliche Felder umfassen. Die Werte der Felder und die Feldnamen
sollen ausgegeben werden.

Anmerkung: In der verwendeten Konfiguration gibt
\texttt{GetType().GetFields()} lediglich die als public markierten
Felder zurück. Entsprechend wurden diese in Angestellter und Kunde
definiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}

\KeywordTok{public} \KeywordTok{abstract} \KeywordTok{class}\NormalTok{ Human\{}
   \KeywordTok{public} \FunctionTok{Human}\NormalTok{ (}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ alter)\{}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{Name}\NormalTok{ = name;}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{Alter}\NormalTok{ = alter;}
\NormalTok{   \}}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
   \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Alter;}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Angestellter : Human\{}
   \KeywordTok{public} \DataTypeTok{int}\NormalTok{ BeiUnsSeit = }\DecValTok{0}\NormalTok{;}
   \KeywordTok{public} \FunctionTok{Angestellter}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ alter, }\DataTypeTok{int}\NormalTok{ beiUnsSeit) : }\KeywordTok{base}\NormalTok{(name, alter)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{BeiUnsSeit}\NormalTok{ = beiUnsSeit;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Kunde : Human\{}
   \KeywordTok{public} \DataTypeTok{int}\NormalTok{ KundeSeit = }\DecValTok{0}\NormalTok{;}
   \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ Premium = }\KeywordTok{true}\NormalTok{;}
   \KeywordTok{public} \FunctionTok{Kunde}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ alter, }\DataTypeTok{int}\NormalTok{ kundeSeit) : }\KeywordTok{base}\NormalTok{(name, alter)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{KundeSeit}\NormalTok{ = kundeSeit;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ LinkedList<T> where T : Human}
\NormalTok{\{}
  \KeywordTok{private} \KeywordTok{class}\NormalTok{ Node\{}
      \KeywordTok{public}\NormalTok{ Node next;}
      \KeywordTok{public}\NormalTok{ T data;}
      \KeywordTok{public} \FunctionTok{Node}\NormalTok{(Node next, T data)\{}
          \KeywordTok{this}\NormalTok{.}\FunctionTok{next}\NormalTok{ = next;}
          \KeywordTok{this}\NormalTok{.}\FunctionTok{data}\NormalTok{ = data;}
\NormalTok{      \}}
\NormalTok{  \}}

  \KeywordTok{private}\NormalTok{ Node head;}
  \KeywordTok{public} \FunctionTok{LinkedList}\NormalTok{(T initial) \{}
\NormalTok{      head = }\KeywordTok{new} \FunctionTok{Node}\NormalTok{(}\KeywordTok{null}\NormalTok{, initial);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(T value)\{}
\NormalTok{      Node current = head;}
      \KeywordTok{while}\NormalTok{ (current.}\FunctionTok{next}\NormalTok{ != }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{          current = current.}\FunctionTok{next}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{      current.}\FunctionTok{next}\NormalTok{ = }\KeywordTok{new} \FunctionTok{Node}\NormalTok{(}\KeywordTok{null}\NormalTok{, value);}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{()\{}
\NormalTok{      Node current = head;}
      \DataTypeTok{var}\NormalTok{ Fields = current.}\FunctionTok{data}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{GetFields}\NormalTok{();}
      \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ Field }\KeywordTok{in}\NormalTok{ Fields)}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0,-20\}"}\NormalTok{,Field.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{();}
      \KeywordTok{while}\NormalTok{ (}\KeywordTok{true}\NormalTok{) \{}
\NormalTok{          Fields = current.}\FunctionTok{data}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{GetFields}\NormalTok{();}
          \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ Field }\KeywordTok{in}\NormalTok{ Fields)\{}
\NormalTok{            Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0,-20\}"}\NormalTok{, Field.}\FunctionTok{GetValue}\NormalTok{(current.}\FunctionTok{data}\NormalTok{));}
\NormalTok{          \}}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{();}
          \KeywordTok{if}\NormalTok{ (current.}\FunctionTok{next}\NormalTok{ == }\KeywordTok{null}\NormalTok{) }\KeywordTok{break}\NormalTok{;}
\NormalTok{          current = current.}\FunctionTok{next}\NormalTok{;}
\NormalTok{      \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    LinkedList<Angestellter> AngestelltenListe = }\KeywordTok{new}\NormalTok{ LinkedList<Angestellter>(}\KeywordTok{new} \FunctionTok{Angestellter}\NormalTok{(}\StringTok{"Peter"}\NormalTok{, }\DecValTok{42}\NormalTok{, }\DecValTok{4}\NormalTok{));}
\NormalTok{    AngestelltenListe.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Angestellter}\NormalTok{(}\StringTok{"Viola"}\NormalTok{, }\DecValTok{39}\NormalTok{, }\DecValTok{14}\NormalTok{));}
\NormalTok{    AngestelltenListe.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Angestellter}\NormalTok{(}\StringTok{"Miriam"}\NormalTok{, }\DecValTok{32}\NormalTok{, }\DecValTok{5}\NormalTok{));}
\NormalTok{    AngestelltenListe.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{    LinkedList<Kunde> KundeListe = }\KeywordTok{new}\NormalTok{ LinkedList<Kunde>(}\KeywordTok{new} \FunctionTok{Kunde}\NormalTok{(}\StringTok{"Garfield"}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{4}\NormalTok{));}
\NormalTok{    KundeListe.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Kunde}\NormalTok{(}\StringTok{"Bart"}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{14}\NormalTok{));}
\NormalTok{    KundeListe.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Kunde}\NormalTok{(}\StringTok{"Tim"}\NormalTok{, }\DecValTok{19}\NormalTok{, }\DecValTok{5}\NormalTok{));}
\NormalTok{    KundeListe.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{aufgaben-der-woche-1}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche-1}}

\begin{itemize}
\tightlist
\item
  {[} {]} Integrieren Sie in die oben gezeigte Liste Suchfunktionen, die
  nach bestimmten Namen oder Typen filtert.
\end{itemize}

\hypertarget{collections}{%
\chapter{Collections}\label{collections}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Containertypen\ und\ deren\ Implementierung\ in\ C\#}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/20_Container.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{collections-1}{%
\section{Collections}\label{collections-1}}

\begin{quote}
\textbf{Merke:} Sogenannte Container sind ein zentrales Element jeder
Klassenbibliothek. Sie erlauben die Abbildung verschiedener Entitäten in
einem Objekt. Im Kontext von C\# wird dabei von \emph{Collections}
gesprochen.
\end{quote}

In der vergangen Vorlesung haben wir über die Vorteile von generischen
Speicherstrukturen am Beispiel der Liste gesprochen. Allerdings ist die
Möglichkeit durch die Struktur hindurchzuiterieren nicht immer die
günstigste. In dieser Vorlesung wollen wir alternative Konzepte und
deren Implementierung im C\# Framework untersuchen.

Beginnen wir zunächst mit einem Vergleich einiger listenähnlichen
Konstrukte. Diese sind in den Namespaces \texttt{System.Collections} und
\texttt{System.Collections.Generic} enthalten. Um zu vermeiden, dass
diese beständig mitgeführt werden, betten wir sie mit \texttt{using} in
unseren Code ein.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
    \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Animal[] arrayOfAnimals = }\KeywordTok{new}\NormalTok{ Animal[}\DecValTok{3}\NormalTok{]}
\NormalTok{        \{}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Beethoven"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Wally"}\NormalTok{),}
\NormalTok{        \};}
\NormalTok{        ArrayList listOfAnimals = }\KeywordTok{new} \FunctionTok{ArrayList}\NormalTok{()}
\NormalTok{        \{}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Beethoven"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Wally"}\NormalTok{),}
\NormalTok{        \};}
\NormalTok{        List<Animal> genericlistOfAnimals = }\KeywordTok{new}\NormalTok{ List<Animal>()}
\NormalTok{        \{}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Beethoven"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{),}
            \KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Wally"}\NormalTok{),}
\NormalTok{        \};}
        \KeywordTok{foreach}\NormalTok{ (Animal pet }\KeywordTok{in}\NormalTok{ listOfAnimals)\{}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(pet.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        \}}
\NormalTok{        listOfAnimals.}\FunctionTok{RemoveAt}\NormalTok{(}\DecValTok{1}\NormalTok{);}
\NormalTok{        listOfAnimals.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Flipper"}\NormalTok{));}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{();}
        \KeywordTok{foreach}\NormalTok{ (Animal pet }\KeywordTok{in}\NormalTok{ listOfAnimals)\{}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(pet.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        \}}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Dabei setzen die vielfältigen Methoden Anforderungen an die im Container
gespeicherten Werte.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Point}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ x;}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{ y;}
    \KeywordTok{public} \FunctionTok{Point}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{x}\NormalTok{ = x;}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{y}\NormalTok{ = y;}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ ArrayExamples  \{}

  \CommentTok{// Return true if X times Y is greater than 100000.}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{bool} \FunctionTok{ProductGT10}\NormalTok{(Point p)}
\NormalTok{  \{}
      \KeywordTok{return}\NormalTok{ p.}\FunctionTok{x}\NormalTok{ * p.}\FunctionTok{y}\NormalTok{ > }\DecValTok{100000}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{  \{}
     \CommentTok{// Example 1 - Setzen}
\NormalTok{     String[,] myArr2 = }\KeywordTok{new}\NormalTok{ String[}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{];}
\NormalTok{     myArr2.}\FunctionTok{SetValue}\NormalTok{( }\StringTok{"one-three"}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{ );}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{( }\StringTok{"[1,3]:   \{0\}"}\NormalTok{, myArr2.}\FunctionTok{GetValue}\NormalTok{( }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{ ) );}

     \CommentTok{// Example 2 - Sortieren}
\NormalTok{     String[] words = \{ }\StringTok{"The"}\NormalTok{, }\StringTok{"QUICK"}\NormalTok{, }\StringTok{"BROWN"}\NormalTok{, }\StringTok{"FOX"}\NormalTok{, }\StringTok{"jumps"}\NormalTok{,}
                        \StringTok{"over"}\NormalTok{, }\StringTok{"the"}\NormalTok{, }\StringTok{"lazy"}\NormalTok{, }\StringTok{"dog"}\NormalTok{ \};}
\NormalTok{     Array.}\FunctionTok{Sort}\NormalTok{(words, }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{);}
     \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ word }\KeywordTok{in}\NormalTok{ words)\{}
\NormalTok{         Console.}\FunctionTok{Write}\NormalTok{(word + }\StringTok{" "}\NormalTok{);}
\NormalTok{     \}}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}

     \CommentTok{// Example 3 - Suchen}
     \CommentTok{// Create an array of five Point structures.}
\NormalTok{     Point[] points = \{ }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{100}\NormalTok{, }\DecValTok{200}\NormalTok{),}
         \KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{150}\NormalTok{, }\DecValTok{250}\NormalTok{), }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{250}\NormalTok{, }\DecValTok{375}\NormalTok{),}
         \KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{275}\NormalTok{, }\DecValTok{395}\NormalTok{), }\KeywordTok{new} \FunctionTok{Point}\NormalTok{(}\DecValTok{295}\NormalTok{, }\DecValTok{450}\NormalTok{) \};}
     \CommentTok{// Find the first Point structure for which X times Y}
     \CommentTok{// is greater than 100000.}
\NormalTok{     Point first = Array.}\FunctionTok{Find}\NormalTok{(points, ProductGT10);}
     \CommentTok{// Display the first structure found.}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Found: X = \{0\}, Y = \{1\}"}\NormalTok{, first.}\FunctionTok{x}\NormalTok{, first.}\FunctionTok{y}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Worin liegt der Unterschied zu den bereits bekannten \texttt{Array}
Implementierung?

\begin{longtable}[]{@{}llll@{}}
\toprule
\begin{minipage}[b]{0.16\columnwidth}\raggedright
Feature\strut
\end{minipage} & \begin{minipage}[b]{0.25\columnwidth}\raggedright
Array\strut
\end{minipage} & \begin{minipage}[b]{0.32\columnwidth}\raggedright
\texttt{ArrayList}\strut
\end{minipage} & \begin{minipage}[b]{0.16\columnwidth}\raggedright
\texttt{Array\textless{}T\textgreater{}}\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.16\columnwidth}\raggedright
Generisch?\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
nein\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
Anzahl der Elemente\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
feste Größe\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
variabel\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
variabel\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
Datentyp\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
muss homogen sein (typsicher)\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
kann variieren (nicht streng typisiert)\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
muss homogen sein\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
null\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
nicht akzeptiert\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
wird akzeptiert\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
wird akzeptiert\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright
Dimensionen\strut
\end{minipage} & \begin{minipage}[t]{0.25\columnwidth}\raggedright
multidimensional \texttt{array{[}X{]}{[}Y{]}}\strut
\end{minipage} & \begin{minipage}[t]{0.32\columnwidth}\raggedright
-\strut
\end{minipage} & \begin{minipage}[t]{0.16\columnwidth}\raggedright
-\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Die Methoden von \texttt{ArrayList} sind zum Beispiel unter
https://docs.microsoft.com/de-de/dotnet/api/system.collections.arraylist?view=netcore-3.1
zu finden.

Neben den genannten existieren weitere Typen, die spezifischere Aufgaben
umsetzen. Diese können entweder als sequenzielle oder als assoziative
Container klassifiziert werden.

Container (in der C\#-Welt sprechen wir von Collections) können durch
die folgenden drei Eigenschaften charakterisiert werden:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Zugriff, d.h. die Art und Weise, wie auf die Objekte des Containers
  zugegriffen wird. Im Falle von Arrays erfolgt der Zugriff über den
  Array-Index. Im Falle von Stapeln (\emph{Stack}) erfolgt der Zugriff
  nach der LIFO-Reihenfolge (last in, first out) und im Falle von
  Warteschlangen (\emph{Queue}) nach der FIFO-Reihenfolge (first in,
  first out);
\item
  Speicherung, d.h. die Art und Weise, wie die Objekte des Containers
  gelagert werden;
\item
  Durchlaufen, d.h. die Art und Weise, wie die Objekte des Containers
  iteriert werden.
\end{enumerate}

Von den Containerklassen wird entsprechend erwartet, dass sie folgende
Methoden implementieren:

\begin{itemize}
\tightlist
\item
  einen leeren Container erzeugen (Konstruktor);
\item
  Einfügen von Objekten in den Container;
\item
  Objekte aus dem Container löschen;
\item
  alle Objekte im Container löschen;
\item
  auf die Objekte im Container zugreifen;
\item
  auf die Anzahl der Objekte im Container zugreifen.
\end{itemize}

Sequenzielle-Container speichern jedes Objekt unabhängig voneinander.
Auf Objekte kann direkt oder mit einem Iterator zugegriffen werden.

Ein assoziativer Container verwendet ein assoziatives Array, eine Karte
oder ein Wörterbuch, das aus Schlüssel-Wert-Paaren besteht, so dass
jeder Schlüssel höchstens einmal im Container erscheint. Der Schlüssel
wird verwendet, um den Wert, d.h. das Objekt, zu finden, falls es im
Container gespeichert ist.

Welche Container-Typen sind programmiersprachenunabhängig gängig?

\begin{longtable}[]{@{}lll@{}}
\toprule
Typ & Unmittelbarer Zugriff & Beschreibung\tabularnewline
\midrule
\endhead
Dictionary & via Key & Wert-Schlüssel Paar\tabularnewline
Liste & via Index & Folge von Elementen mit einem Index als
Schlüssel\tabularnewline
Queue & nur jeweils erstes Objekt & FIFO (First-In-First-Out)
Speicher\tabularnewline
Stack & nur jeweils letztes Objekt & LIFO (Last-In-First-Out)
Speicher\tabularnewline
Set & & Werte ohne Dublikate\tabularnewline
\ldots{} & &\tabularnewline
\bottomrule
\end{longtable}

Und wie sieht es mit der Performance aus? Der Beitrag des Autors
\texttt{Serj-Tm} auf Stackoverflow vergleicht in einem Codebeispiel
unterschiedliche Operationen für verschiedene Container-Typen.

\begin{longtable}[]{@{}llll@{}}
\toprule
Array & \texttt{List\textless{}T\textgreater{}} & Penalties &
Method\tabularnewline
\midrule
\endhead
00:00:01.3932446 & 00:00:01.6677450 & 1 vs 1,2 & Generate\tabularnewline
00:00:00.1856069 & 00:00:01.0291365 & 1 vs 5,5 & Sum\tabularnewline
00:00:00.4350745 & 00:00:00.9422126 & 1 vs 2,2 &
BlockCopy\tabularnewline
00:00:00.2029309 & 00:00:00.4272936 & 1 vs 2,1 & Sort\tabularnewline
\bottomrule
\end{longtable}

Fragenkatalog für die Auswahl von Collections:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.47\columnwidth}\raggedright
Frage\strut
\end{minipage} & \begin{minipage}[b]{0.47\columnwidth}\raggedright
Mögliche Lösungen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Sollen Elemente nach dem Auslesen verworfen werden?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{Queue\textless{}T\textgreater{}},
\texttt{Stack\textless{}T\textgreater{}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Benötigen Sie Zugriff auf die Elemente in einer bestimmten
Reihenfolge?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{Queue\textless{}T\textgreater{}}
vs.~\texttt{LinkedList\textless{}T\textgreater{}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Wird die Collection in einer nebenläufigen Anwendung eingesetzt?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Benötigen Sie Zugriff auf jedes Element über den Index?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{ArrayList}, \texttt{StringCollection} und
\texttt{List\textless{}T\textgreater{}} vs.~assoziativer Container\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Sollen die Dateninhalte unveränderlich sein?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{ImmutableArray\textless{}T\textgreater{}},
\texttt{ImmutableList\textless{}T\textgreater{}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Erfolgt die Indizierung anhand der Position oder anhand eines
Schlüssels?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Müssen Sie die Elemente abweichend von ihrer Eingabereihenfolge
sortieren?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{SortedList\textless{}TKey,TValue\textgreater{}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.47\columnwidth}\raggedright
Soll der Container nur Zeichenfolgen annehmen?\strut
\end{minipage} & \begin{minipage}[t]{0.47\columnwidth}\raggedright
\texttt{StringCollection}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{containerimplementierung-in-csharp}{%
\section{Containerimplementierung in
Csharp}\label{containerimplementierung-in-csharp}}

Um die Konzepte der Implementierung der Container in C\# zu verstehen,
versuchen wir uns nochmal an einem eigenen Konstrukt. Wir
systematisieren dazu die Idee der verlinkten Liste aus der vorangegangen
Veranstaltung und fokussieren uns zunächst auf die Möglichkeit mit den
C\#-Bordmitteln über dieser Liste zu iterieren.

Zur Erinnerung, für die Möglichkeit der Iteration über einer
Datenstruktur mittels \texttt{foreach} bedarf es der Implementierung der
Interfaces \texttt{IEnumerable} und \texttt{IEnumerator}. Wir verbleiben
dabei auf der generischen Seite.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ GenericList<T> : IEnumerable<T>}
\NormalTok{\{}
    \KeywordTok{protected}\NormalTok{ Node head;}
    \KeywordTok{protected}\NormalTok{ Node current = }\KeywordTok{null}\NormalTok{;}
    \CommentTok{// Nested class is also generic on T}
    \KeywordTok{protected} \KeywordTok{class}\NormalTok{ Node}
\NormalTok{    \{}
        \KeywordTok{public}\NormalTok{ Node next;}
        \KeywordTok{private}\NormalTok{ T data;}
        \KeywordTok{public} \FunctionTok{Node}\NormalTok{(T t)\{}
\NormalTok{            next = }\KeywordTok{null}\NormalTok{;}
\NormalTok{            data = t;}
\NormalTok{        \}}
        \KeywordTok{public}\NormalTok{ Node Next \{}
            \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ next; \}}
            \KeywordTok{set}\NormalTok{ \{ next = value; \}}
\NormalTok{        \}}
        \KeywordTok{public}\NormalTok{ T Data \{}
            \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ data; \}}
            \KeywordTok{set}\NormalTok{ \{ data = value; \}}
\NormalTok{        \}}
\NormalTok{    \}}

    \KeywordTok{public} \FunctionTok{GenericList}\NormalTok{()\{}
\NormalTok{        head = }\KeywordTok{null}\NormalTok{;}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Add}\NormalTok{(T t)  \{}
\NormalTok{        Node n = }\KeywordTok{new} \FunctionTok{Node}\NormalTok{(t);}
\NormalTok{        n.}\FunctionTok{Next}\NormalTok{ = head;}
\NormalTok{        head = n;}
\NormalTok{    \}}

    \CommentTok{// Implementation of the iterator}
    \KeywordTok{public}\NormalTok{ IEnumerator<T> }\FunctionTok{GetEnumerator}\NormalTok{()\{}
\NormalTok{        Node current = head;}
        \KeywordTok{while}\NormalTok{ (current != }\KeywordTok{null}\NormalTok{)}
\NormalTok{        \{}
            \KeywordTok{yield} \KeywordTok{return}\NormalTok{ current.}\FunctionTok{Data}\NormalTok{;}
\NormalTok{            current = current.}\FunctionTok{Next}\NormalTok{;}
\NormalTok{        \}}
\NormalTok{    \}}

\NormalTok{    IEnumerator IEnumerable.}\FunctionTok{GetEnumerator}\NormalTok{()\{}
        \KeywordTok{return} \FunctionTok{GetEnumerator}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Animal}
\NormalTok{\{}
    \DataTypeTok{string}\NormalTok{ name;}
    \DataTypeTok{int}\NormalTok{ age;}
    \KeywordTok{public} \FunctionTok{Animal}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s, }\DataTypeTok{int}\NormalTok{ i)\{}
\NormalTok{        name = s;}
\NormalTok{        age = i;}
\NormalTok{    \}}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{() => name + }\StringTok{" : "}\NormalTok{ + age;}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{        GenericList<Animal> animalList = }\KeywordTok{new}\NormalTok{ GenericList<Animal>();}
\NormalTok{    animalList.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Beethoven"}\NormalTok{, }\DecValTok{8}\NormalTok{));}
\NormalTok{    animalList.}\FunctionTok{Add}\NormalTok{(}\KeywordTok{new} \FunctionTok{Animal}\NormalTok{(}\StringTok{"Kitty"}\NormalTok{, }\DecValTok{4}\NormalTok{));}
        \KeywordTok{foreach}\NormalTok{ (Animal a }\KeywordTok{in}\NormalTok{ animalList)}
\NormalTok{        \{}
\NormalTok{            System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(a.}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
\textbf{Achtung:} Das Beispiel implmentiert das Iteratorkonzept mittels
\href{https://docs.microsoft.com/de-de/dotnet/csharp/language-reference/keywords/yield}{\texttt{yield}}.
Damit lässt sich einige Tipparbeit sparen, die bei der konventionellen
Umsetzung anfallen würde, vgl
\href{https://docs.microsoft.com/de-de/troubleshoot/dotnet/csharp/make-class-foreach-statement}{Link}.
\end{quote}

Die Methoden für das Handling der Daten beschränken sich aber auf ein
\texttt{Add()} und die Iteration - hier braucht es noch deutlich mehr,
um anwendbar zu sein. Um diese Funktionalität umzusetzen, greift die
C\#-Collections Implementierung auf eine ganze Reihe von Interfaces
zurück, die den einzelnen Containern die notwendige Funktion geben.

\begin{verbatim}

                Non-generic                             Generic

            +----------------+                     +-----------------+
            | IEnumerator    |                     | IEnumerator﹤T﹥  |
            +----------------+                     +-----------------+

            +----------------+                     +-----------------+
            | IEnumerable    | ⊲------------------ | IEnumerable﹤T﹥  |
            +----------------+                     +-----------------+
                    ∆                                       ∆
                    |                                       |
            +----------------+                     +-----------------+
            | ICollection    |                     | ICollection﹤T﹥  |
            +----------------+                     +-----------------+
                    ∆                                       ∆
                    |                                       |
        .-----------+----------.                  .---------+----------.
        |                      |                  |                    |
 +----------------+  +----------------+   +-----------------+  +----------------+
 | IDictionary    |  | IList          |   | IDictionary﹤T﹥  |  | IList﹤T﹥       |
 +----------------+  +----------------+   +-----------------+  +----------------+
\end{verbatim}

An dieser Stelle greift das Interface \texttt{ICollection} und definiert
die Methoden \texttt{Add}, \texttt{Clear}, \texttt{Contains},
\texttt{CopyTo} und \texttt{Remove}. Mit \texttt{Contains} kann geprüft
werden, ob ein bestimmter Wert im Container enthalten ist.
\texttt{CopyTo} extrahiert die Werte des Containers in ein Array. Dabei
können bestimmte Ranges definiert werden. Die anderen Methoden sind
selbsterklärend.

\begin{longtable}[]{@{}ll@{}}
\toprule
Schnittstelle & Spezifizierte Funktionen\tabularnewline
\midrule
\endhead
IEnumerable & GetEnumerator()\tabularnewline
ICollection & Count(), Add(), Remove()\tabularnewline
IList & IndexOf(), Insert(), RemoveAt()\tabularnewline
IDictionary & Keys(), Values(), TryGetValue()\tabularnewline
\bottomrule
\end{longtable}

Folgendes Klassendiagramm zeigt die Teile der in C\# implementierten
Collection-Types und deren Relationen zu den entsprechenden Interfaces.

\includegraphics{https://www.plantuml.com/plantuml/png/VP5FIyD04CNlyoaMl8afVe0GAlw1OZr8nVjsCzeXcrsPp1uKFxma4tN9jhqDx_VcCRnP3s9PKkzXw2XyMBQzSTuEmuq8qpu9RbmCE_f2Smq7Qj4uOkTHvoUKGsnrVY3qBS2qR3Rt8VN8LYAR-gKnTKr1aD-imwOn2zFUOsdwzTn6xz49nN3QiwL19deStz6qR_dJr8zNvdMPCll-KYxU6J7CwdF2XAMy4-kwKjvIwB0zdbIUiOYCBBfxZeyfImvvavTLazSFUODLzQrmDaFMZSBC3Tfh8KEsirgDy5-0xCWJR0mjMQQE8sYHIrMVeK9saJwZaDSOsjJx7m00}

Im Folgenden sollen Beispiele für die aufgeführten Datenstrukturen
dargestellt werden.

\begin{longtable}[]{@{}llll@{}}
\toprule
\begin{minipage}[b]{0.04\columnwidth}\raggedright
C\# Collection\strut
\end{minipage} & \begin{minipage}[b]{0.14\columnwidth}\raggedright
Bezeichnung\strut
\end{minipage} & \begin{minipage}[b]{0.36\columnwidth}\raggedright
Bedeutung\strut
\end{minipage} & \begin{minipage}[b]{0.34\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.04\columnwidth}\raggedright
List\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
unsortiertes Datenfeld indizierbarer Elemente\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
Im Unterschied zum Array ``beliebig'' erweiterbar\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.list-1?view=netframework-4.8}{Link}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
SortedList\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
sortiertes Datenfeld\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
Abbildung der Reihenfolge über einen numerischen Schlüssel\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.sortedlist-2?view=netframework-4.8}{Link}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Stack\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
LIFO Datenstruktur\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.stack-1?view=netframework-4.8}{Link}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Queue\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
FIFO Datenstruktur\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.queue-1?view=netframework-4.8}{Link}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.04\columnwidth}\raggedright
Dictionary\strut
\end{minipage} & \begin{minipage}[t]{0.14\columnwidth}\raggedright
assoziatives Datenfeld\strut
\end{minipage} & \begin{minipage}[t]{0.36\columnwidth}\raggedright
\ldots{} Datenstruktur mit nicht-numerischen (fortlaufenden )
Schlüsseln, um die enthaltenen Elemente zu adressieren.\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.dictionary-2?view=netframework-4.8}{Link}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{anwendung-der-generic-collections}{%
\section{Anwendung der Generic
Collections}\label{anwendung-der-generic-collections}}

\textbf{List}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// Initialisieren mit Basiswerten, Ergänzungen der Liste}
    \DataTypeTok{var}\NormalTok{ animals = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{string}\NormalTok{>() \{ }\StringTok{"bird"}\NormalTok{, }\StringTok{"dog"}\NormalTok{ \};}
\NormalTok{    animals.}\FunctionTok{Add}\NormalTok{(}\StringTok{"cat"}\NormalTok{);}
\NormalTok{    animals.}\FunctionTok{Add}\NormalTok{(}\StringTok{"lion"}\NormalTok{);}
    \CommentTok{// Fügt mehrere Objekte in die Liste ein}
\NormalTok{    animals.}\FunctionTok{InsertRange}\NormalTok{(}\DecValTok{1}\NormalTok{, }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"frog"}\NormalTok{, }\StringTok{"snake"}\NormalTok{ \});}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{string}\NormalTok{ value }\KeywordTok{in}\NormalTok{ animals)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"RESULT: "}\NormalTok{ + value);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"In der Liste finden sich "}\NormalTok{ + animals.}\FunctionTok{Count}\NormalTok{ + }\StringTok{" Elemente"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Für die Liste reservierter Speicher (Einträge) "}\NormalTok{ + animals.}\FunctionTok{Capacity}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"lion findet sich an "}\NormalTok{ + animals.}\FunctionTok{IndexOf}\NormalTok{(}\StringTok{"lion"}\NormalTok{) + }\StringTok{" Stelle"}\NormalTok{);}
\NormalTok{    animals.}\FunctionTok{Remove}\NormalTok{(}\StringTok{"lion"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"In der Liste finden sich nun "}\NormalTok{ + animals.}\FunctionTok{Count}\NormalTok{ + }\StringTok{" Elemente"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Dictionary\textless{}T, U\textgreater{}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     Dictionary<}\DataTypeTok{string}\NormalTok{, }\DataTypeTok{int}\NormalTok{> Telefonbuch = }\KeywordTok{new}\NormalTok{ Dictionary<}\DataTypeTok{string}\NormalTok{, }\DataTypeTok{int}\NormalTok{>();}
\NormalTok{     Telefonbuch.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Peter"}\NormalTok{, }\DecValTok{1234}\NormalTok{);}
\NormalTok{     Telefonbuch.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Paula"}\NormalTok{, }\DecValTok{5234}\NormalTok{);}
     \KeywordTok{foreach}\NormalTok{( }\DataTypeTok{string}\NormalTok{ s }\KeywordTok{in}\NormalTok{ Telefonbuch.}\FunctionTok{Keys}\NormalTok{   )}
\NormalTok{     \{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"Key = \{0\}}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, s);}
\NormalTok{     \}}
     \CommentTok{// Enthält das Dictionary bestimmte Einträge?}
     \KeywordTok{if}\NormalTok{ (Telefonbuch.}\FunctionTok{ContainsKey}\NormalTok{(}\StringTok{"Paula"}\NormalTok{))\{}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(Telefonbuch[}\StringTok{"Paula"}\NormalTok{]);}
\NormalTok{     \}}
     \CommentTok{// Effektiver Zugriff}
     \DataTypeTok{int}\NormalTok{ value;}
     \DataTypeTok{string}\NormalTok{ key = }\StringTok{"Peter"}\NormalTok{;}
     \KeywordTok{if}\NormalTok{ (Telefonbuch.}\FunctionTok{TryGetValue}\NormalTok{(key, }\KeywordTok{out}\NormalTok{ value))}
\NormalTok{     \{}
\NormalTok{         Telefonbuch[key] = value + }\DecValTok{1}\NormalTok{;}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wert von "}\NormalTok{ + key + }\StringTok{" "}\NormalTok{ + Telefonbuch[key]);}
\NormalTok{     \}}
     \CommentTok{// Mehrfache Nennung eines Eintrages}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{HashSet}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     HashSet<}\DataTypeTok{string}\NormalTok{> Telefonbuch1 = }\KeywordTok{new}\NormalTok{ HashSet<}\DataTypeTok{string}\NormalTok{>();}
\NormalTok{     Telefonbuch1.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Peter"}\NormalTok{);}
\NormalTok{     Telefonbuch1.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Paula"}\NormalTok{);}
\NormalTok{     Telefonbuch1.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Nadja"}\NormalTok{);}
\NormalTok{     Telefonbuch1.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Paula"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"Telefonbuch 1: "}\NormalTok{);}
     \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s }\KeywordTok{in}\NormalTok{ Telefonbuch1)\{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(s + }\StringTok{" "}\NormalTok{);}
\NormalTok{     \}}

\NormalTok{     HashSet<}\DataTypeTok{string}\NormalTok{> Telefonbuch2 = }\KeywordTok{new}\NormalTok{ HashSet<}\DataTypeTok{string}\NormalTok{>();}
\NormalTok{     Telefonbuch2.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Klaus"}\NormalTok{);}
\NormalTok{     Telefonbuch2.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Paula"}\NormalTok{);}
\NormalTok{     Telefonbuch2.}\FunctionTok{Add}\NormalTok{(}\StringTok{"Nadja"}\NormalTok{);}
\NormalTok{     Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Telefonbuch 2: "}\NormalTok{);}
     \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s }\KeywordTok{in}\NormalTok{ Telefonbuch2)\{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(s + }\StringTok{" "}\NormalTok{);}
\NormalTok{     \}}

     \CommentTok{//Telefonbuch1.ExceptWith(Telefonbuch2);}
\NormalTok{     Telefonbuch1.}\FunctionTok{UnionWith}\NormalTok{(Telefonbuch2);}
\NormalTok{     Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Merge       2: "}\NormalTok{);}
     \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s }\KeywordTok{in}\NormalTok{ Telefonbuch1)\{}
\NormalTok{        Console.}\FunctionTok{Write}\NormalTok{(s + }\StringTok{" "}\NormalTok{);}
\NormalTok{     \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{achtung}{%
\section{Achtung!}\label{achtung}}

Die heute besprochenen Inhalte finden sich in verschiedenen Formen in
allen höheren Programmiersprachen wieder.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# initialize my_set}
\NormalTok{my_set }\OperatorTok{=}\NormalTok{ \{}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{\}}
\BuiltInTok{print}\NormalTok{(my_set)}

\CommentTok{# my_set[0]}
\CommentTok{# if you uncomment the above line}
\CommentTok{# you will get an error}
\CommentTok{# TypeError: 'set' object does not support indexing}

\CommentTok{# add an element}
\CommentTok{# Output: \{1, 2, 3\}}
\NormalTok{my_set.add(}\DecValTok{2}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(my_set)}

\CommentTok{# add multiple elements}
\NormalTok{my_set.update([}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{])}
\BuiltInTok{print}\NormalTok{(my_set)}

\NormalTok{your_set }\OperatorTok{=}\NormalTok{ \{}\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{6}\NormalTok{, }\DecValTok{7}\NormalTok{, }\DecValTok{8}\NormalTok{\}}
\BuiltInTok{print}\NormalTok{(your_set)}

\BuiltInTok{print}\NormalTok{(my_set }\OperatorTok{|}\NormalTok{ your_set)}
\end{Highlighting}
\end{Shaded}

@Pyodide.eval

\hypertarget{aufgaben-der-woche-2}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche-2}}

\begin{itemize}
\tightlist
\item
  {[} {]} Erklären Sie, warum \texttt{Array} keine \texttt{Add}-Methode
  umfasst, obwohl es das Interface \texttt{IList} implementiert, dass
  wiederum diese einschließt. Tipp: Rufen Sie Ihr wissen um die
  explizite Methodenimplementierung noch mal auf.
\item
  {[} {]} Die Erläuterung zu den Beschränkungen beim Einsatz von
  Generics im Dokumemt 19 basiert auf der nicht generischen
  Implementierung des Interfaces \texttt{IComparable}. Ersetzen Sie
  diese im Codebeispiel durch die generische Variante.
\item
  {[} {]} Evaluieren Sie verschiedene Container in Bezug auf Methoden
  zum Einfügen, Löschen, etc. Generieren Sie dazu entsprechende
  künstliche Objekte, die Sie manipulieren \emph{``Füge 100.000 int
  Werte in eine Liste ein.''}. Messen Sie die dafür benötigten Zeiten.
\end{itemize}

\hypertarget{delegaten}{%
\chapter{Delegaten}\label{delegaten}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Deleganten\ -\ Konzepte\ und\ \ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/21_Delegaten.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{motivation-und-konzept-der-delegaten}{%
\section{Motivation und Konzept der
Delegaten}\label{motivation-und-konzept-der-delegaten}}

Ihre Aufgabe besteht darin folgendes Code-Fragment so umzuarbeiten, so
dass unterschiedliche Formen der Nutzer-Notifikation (neben
Konsolenausgaben auch Emails, Instant-Messager Nachrichten, Tonsignale)
möglich sind. Welche Ideen haben Sie dazu?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ VideoEncodingService\{}

  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ userId;}
  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ filename;}

  \KeywordTok{public} \FunctionTok{VideoEncodingService}\NormalTok{(}\DataTypeTok{string}\NormalTok{ filename, }\DataTypeTok{string}\NormalTok{ userId)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{userId}\NormalTok{ = userId;}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{filename}\NormalTok{ = filename;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{StartVideoEncoding}\NormalTok{()\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The encoding job takes a while!"}\NormalTok{);}
     \FunctionTok{NotifyUser}\NormalTok{();}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{NotifyUser}\NormalTok{()\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Dear user \{0\}, your encoding job \{1\} was finished"}\NormalTok{,}
\NormalTok{                          userId, filename);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     VideoEncodingService myMovie = }\KeywordTok{new} \FunctionTok{VideoEncodingService}\NormalTok{(}\StringTok{"007.mpeg"}\NormalTok{, }\StringTok{"12321"}\NormalTok{);}
\NormalTok{     myMovie.}\FunctionTok{StartVideoEncoding}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Gegen das Hinzufügen weiterer Ausgabemethoden in die Klasse
\texttt{VideoEncodingService} spricht die Tatsache, dass dies nicht
deren zentrale Aufgabe ist. Eigentlich sollte sich die Klasse gar nicht
darum kümmern müssen, welche Art der Notifikation genutzt werden soll,
dies sollte dem Nutzer überlassen bleiben.

Folglich wäre es sinnvoll, wenn wir \texttt{StartVideoEncoding} eine
Funktion als Parameter übergeben könnten, die wir unabhängig von der
eigentlichen Klasse definiert haben.

\begin{Shaded}
\begin{Highlighting}[]
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{TriggerMe}\NormalTok{()\{}
    \CommentTok{// TODO}
\NormalTok{  \}}

\NormalTok{  VideoEncodingService myMovie = }\KeywordTok{new} \FunctionTok{VideoEncodingService}\NormalTok{(}\StringTok{"007.mpeg"}\NormalTok{,}
                                                          \StringTok{"12321"}\NormalTok{,}
\NormalTok{                                                          triggerMe);}
\end{Highlighting}
\end{Shaded}

\begin{quote}
In C würden wir an dieser Stelle von einem Funktionspointer sprechen.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// https://www.geeksforgeeks.org/function-pointer-in-c/}

\PreprocessorTok{#include }\ImportTok{<stdio.h>}
\DataTypeTok{void}\NormalTok{ add(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{\{}
\NormalTok{    printf(}\StringTok{"Addition is %d}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, a+b);}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ subtract(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{\{}
\NormalTok{    printf(}\StringTok{"Subtraction is %d}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, a-b);}
\NormalTok{\}}

\DataTypeTok{void}\NormalTok{ multiply(}\DataTypeTok{int}\NormalTok{ a, }\DataTypeTok{int}\NormalTok{ b)}
\NormalTok{\{}
\NormalTok{    printf(}\StringTok{"Multiplication is %d}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, a*b);}
\NormalTok{\}}

\DataTypeTok{int}\NormalTok{ main()}
\NormalTok{\{}
    \CommentTok{// fun_ptr_arr is an array of function pointers}
    \DataTypeTok{void}\NormalTok{ (*fun_ptr_arr[])(}\DataTypeTok{int}\NormalTok{, }\DataTypeTok{int}\NormalTok{) = \{add, subtract, multiply\};}
    \DataTypeTok{unsigned} \DataTypeTok{int}\NormalTok{ ch, a = }\DecValTok{15}\NormalTok{, b = }\DecValTok{10}\NormalTok{;}

\NormalTok{    printf(}\StringTok{"Enter Choice: 0 for add, 1 for subtract and 2 "}
            \StringTok{"for multiply}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}
\NormalTok{    scanf(}\StringTok{"%d"}\NormalTok{, &ch);}

    \ControlFlowTok{if}\NormalTok{ (ch > }\DecValTok{2}\NormalTok{) }\ControlFlowTok{return} \DecValTok{0}\NormalTok{;}

\NormalTok{    (*fun_ptr_arr[ch])(a, b);}

    \ControlFlowTok{return} \DecValTok{0}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{grundidee}{%
\subsection{Grundidee}\label{grundidee}}

\begin{quote}
Merke: Ein Delegat ist eine Methodentyp und dient zur Deklaration von
Variablen, die auf eine Methode verweisen.
\end{quote}

Für die Anwendung sind drei Vorgänge nötig:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Anlegen des Delegaten (Spezifikation einer Signatur)
\item
  Instantiierung (Zuweisung einer signaturkorrekten Methode)
\item
  Aufruf der Instanz
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Schritt 1}
\CommentTok{//[Zugriffsattribut] delegate Rückgabewert DelegatenName(Parameterliste);}
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{int} \FunctionTok{Rechenoperation}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y);}

\KeywordTok{static} \DataTypeTok{int} \FunctionTok{Addition}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
  \KeywordTok{return}\NormalTok{ x + y;}
\NormalTok{\}}

\KeywordTok{static} \DataTypeTok{int} \FunctionTok{Modulo}\NormalTok{(}\DataTypeTok{int}\NormalTok{ dividend, }\DataTypeTok{int}\NormalTok{ divisor)\{}
  \KeywordTok{return}\NormalTok{ divident % divisor;}
\NormalTok{\}}

\CommentTok{// Schritt 2 - Instanzieren}
\NormalTok{Rechenoperation myCalc = }\KeywordTok{new} \FunctionTok{Rechenoperation}\NormalTok{(Addition);}
\CommentTok{// oder}
\NormalTok{Rechenoperation myCalc = Addition;}

\CommentTok{// Schritt 3 - Ausführen}
\FunctionTok{myCalc}\NormalTok{(}\DecValTok{7}\NormalTok{, }\DecValTok{9}\NormalTok{);}
\end{Highlighting}
\end{Shaded}

Lassen Sie uns dieses Konzept auf unsere
\texttt{VideoEncodingService}-Klasse anwenden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\CommentTok{// Schritt 1}
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{NotifyUser}\NormalTok{(}\DataTypeTok{string}\NormalTok{ userId, }\DataTypeTok{string}\NormalTok{ filename);}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ VideoEncodingService}
\NormalTok{\{}
  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ userId;}
  \KeywordTok{private} \DataTypeTok{string}\NormalTok{ filename;}

  \KeywordTok{public} \FunctionTok{VideoEncodingService}\NormalTok{(}\DataTypeTok{string}\NormalTok{ filename, }\DataTypeTok{string}\NormalTok{ userId)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{userId}\NormalTok{ = userId;}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{filename}\NormalTok{ = filename;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{StartVideoEncoding}\NormalTok{(NotifyUser notifier)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"The encoding job takes a while!"}\NormalTok{);}
      \CommentTok{// Schritt 3}
      \FunctionTok{notifier}\NormalTok{(userId, filename);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \CommentTok{// Die Notifikationsmethode ist nun Bestandteil der "Nutzerklasse"}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{NotifyUserByText}\NormalTok{(}\DataTypeTok{string}\NormalTok{ userId, }\DataTypeTok{string}\NormalTok{ filename)\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Dear user \{0\}, your encoding job \{1\} was finished"}\NormalTok{,}
\NormalTok{                      userId, filename);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     VideoEncodingService myMovie = }\KeywordTok{new} \FunctionTok{VideoEncodingService}\NormalTok{(}\StringTok{"007.mpeg"}\NormalTok{, }\StringTok{"12321"}\NormalTok{);}
     \CommentTok{// Schritt 2}
\NormalTok{     NotifyUser notifyMe = }\KeywordTok{new} \FunctionTok{NotifyUser}\NormalTok{(NotifyUserByText);}
\NormalTok{     myMovie.}\FunctionTok{StartVideoEncoding}\NormalTok{(notifyMe);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{was-passiert-hinter-den-kulissen}{%
\subsection{Was passiert hinter den
Kulissen?}\label{was-passiert-hinter-den-kulissen}}

Was wird anhand des Aufrufes

\begin{verbatim}
NotifyUser notifyMe = new NotifyUser(NotifyUserByText);
\end{verbatim}

deutlich? Handelt es sich bei \texttt{notifyMe} wirklich nur um eine
Methode?

Delegattypen werden von der \texttt{Delegate}-Klasse im .NET Framework
abgeleitet.

https://docs.microsoft.com/de-de/dotnet/api/system.delegate?view=netframework-4.8

Wenn der C\#-Compiler Delegiertentypen verarbeitet, erzeugt er
automatisch eine versiegelte Klassenableitung aus
\texttt{System.MulticastDelegate}. Diese Klasse (in Verbindung mit ihrer
Basisklasse, \texttt{System.Delegate}) stellt die notwendige
Infrastruktur zur Verfügung, damit der Delegierte eine Liste von
Methoden vorhalten kann. Der Compiler erzeugt insbesondere drei
Methoden, um diese aufzurufen:

\begin{itemize}
\tightlist
\item
  die synchrone Invoke()-Methode, die aber nicht explizit von Ihrem
  C\#-Code aufgerufen wird
\item
  die asynchrone \texttt{BeginInvoke()} und
\item
  \texttt{EndInvoke()} als Methoden, die die Möglichkeit bieten, die die
  eigentliche Methode in einem separaten Ausführungsthread zu handhaben.
\end{itemize}

Entsprechend der Codezeile \texttt{delegate\ int\ Transformer(int\ x);}
generiert der Compiler eine spezielle
\texttt{sealed\ class\ Transformers}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{sealed} \KeywordTok{class}\NormalTok{ Transformer : System.}\FunctionTok{MulticastDelegate}
\NormalTok{\{}
\NormalTok{  ...}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{Invoke}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x);}
  \KeywordTok{public}\NormalTok{ IAsyncResult }\FunctionTok{BeginInvoke}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, AsyncCallback cb, }\DataTypeTok{object}\NormalTok{ state);}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{EndInvoke}\NormalTok{(IAsyncResult resut);}
\NormalTok{  ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Seit C\# 2.0 ist die Syntax für die Zuweisung einer Methode an eine
Delegate-Variable vereinfacht. Statt

\begin{verbatim}
NotifyUser notifyMe = new NotifyUser(this.NotifyUserByText);
\end{verbatim}

kann nunmehr auch

\begin{verbatim}
NotifyUser notifyMe = this.NotifyUserByText;
NotifyUser notifyMe = NotifyUserByText;
\end{verbatim}

verwendet werden.

\hypertarget{multicast-delegaten}{%
\subsection{Multicast Delegaten}\label{multicast-delegaten}}

Sollten wir uns mit dem Aufruf einer Methode zufrieden geben?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{delegate} \DataTypeTok{int} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y);}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Add}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x + y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x + y;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Multiply}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x * y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x * y;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Divide}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x / y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x / y;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// alte Variante}
    \CommentTok{// Calc computer1 = new Calc(Divide);}
    \CommentTok{// neue Variante:}
    \CommentTok{// Calc computer2 = Divide;}
\NormalTok{    Calc computer3 = Add;}
\NormalTok{    computer3 += Multiply;}
\NormalTok{    computer3 += Multiply;}
\NormalTok{    computer3 += Divide;}
\NormalTok{    computer3 -= Add;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Zahl von eingebundenen Delegates \{0\}"}\NormalTok{,}
\NormalTok{                      computer3.}\FunctionTok{GetInvocationList}\NormalTok{().}\FunctionTok{GetLength}\NormalTok{(}\DecValTok{0}\NormalTok{));}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Ergebnis des letzten Methodenaufrufes \{0\}"}\NormalTok{,}
                                                      \FunctionTok{computer3}\NormalTok{(}\DecValTok{15}\NormalTok{, }\DecValTok{5}\NormalTok{));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Merke: Der Rückgabewert des Aufrufes entspricht dem der letzten Methode.
\end{quote}

\hypertarget{schnittstellen-vs.-delegaten}{%
\subsection{Schnittstellen
vs.~Delegaten}\label{schnittstellen-vs.-delegaten}}

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{void} \KeywordTok{delegate} \FunctionTok{XYZ}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p);}

\KeywordTok{interface}\NormalTok{ IXyz \{}
    \DataTypeTok{void} \FunctionTok{doit}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p);}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ One \{}
    \CommentTok{// All four methods below can be used to implement the XYZ delegate}
    \DataTypeTok{void} \FunctionTok{XYZ1}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p) \{...\}}
    \DataTypeTok{void} \FunctionTok{XYZ2}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p) \{...\}}
    \DataTypeTok{void} \FunctionTok{XYZ3}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p) \{...\}}
    \DataTypeTok{void} \FunctionTok{XYZ4}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p) \{...\}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Two : IXyz \{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{doit}\NormalTok{(}\DataTypeTok{int}\NormalTok{ p) \{}
        \CommentTok{// Only this method could be used to call an implementation through an interface}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Sowohl Delegaten als auch Schnittstellen ermöglichen einem
Klassendesigner, Typdeklarationen und Implementierungen zu trennen. Eine
bestimmte Schnittstelle kann von jeder Klasse oder Struktur geerbt und
implementiert werden. Ein Delegat kann für eine Methode in einer
beliebigen Klasse erstellt werden, sofern die Methode zur
Methodensignatur des Delegaten passt.

\begin{quote}
Merke: In beiden Fällen kann die Schnittstellenreferenz oder ein Delegat
von einem Objekt verwendet werden, das keine Kenntnis von der Klasse
hat, die die Schnittstellen- oder Delegatmethode implementiert.
\end{quote}

Wann ist welche der beiden Varianten vorzuziehen? Verwenden Sie einen
Delegaten unter folgenden Umständen:

\begin{itemize}
\tightlist
\item
  Ein Ereignis-Entwurfsmuster wird verwendet.
\item
  Es ist wünschenswert, eine statische Methode einzukapseln.
\item
  Der Aufrufer muss nicht auf andere Eigenschaften, Methoden oder
  Schnittstellen des Objekts zugreifen, das die Methode implementiert.
\item
  Eine einfache Zusammensetzung ist erwünscht.
\item
  Eine Klasse benötigt möglicherweise mehr als eine Implementierung der
  Methode (siehe oben).
\end{itemize}

Verwenden Sie eine Schnittstelle wenn:

\begin{itemize}
\tightlist
\item
  Es gibt eine Gruppe verwandter Methoden, die aufgerufen werden können.
\item
  Eine Klasse benötigt nur eine Implementierung der Methodesignatur.
\item
  Die Klasse, die die Schnittstelle verwendet, möchte diese
  Schnittstelle in andere Schnittstellen- oder Klassentypen umwandeln.
\item
  Die implementierte Methode ist mit dem Typ oder der Identität der
  Klasse verknüpft, z. B. mit Vergleichsmethoden.
\end{itemize}

Ein Beispiel für die kombinierte Anwendung eines Delegaten ist
\texttt{IComparable} oder die generische Version
\texttt{IComparable\textless{}T\textgreater{}}. \texttt{IComparable}
deklariert die \texttt{CompareTo}-Methode, die eine Ganzzahl zurückgibt,
die eine Beziehung angibt, die kleiner, gleich oder größer als zwei
Objekte desselben Typs ist. Damit kann \texttt{IComparable} Grundlage
für einen Sortieralgorithmus verwendet werden. Alternativ kann aber auch
eine Delegatenvergleichsmethode übergeben werden.

Obwohl die Verwendung einer Delegatenvergleichsmethode als Grundlage
eines Sortieralgorithmus gültig ist, gestaltet sich die fehlende
Zuordnung nicht ideal. Da die Fähigkeit zum Vergleichen zur Klasse
gehört und sich der Vergleichsalgorithmus zur Laufzeit nicht ändert, ist
eine Einzelmethodenschnittstelle ideal.

Vergleichen Sie dazu
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.list-1.sort?view=net-5.0}{Link}!

\hypertarget{praktische-implementierung}{%
\section{Praktische Implementierung}\label{praktische-implementierung}}

Neben dem Basiskonzept der Delegaten können in C\# spezifischere
Realisierungen umgesetzt werden, die die Anwendung flexibler bzw.
effizienter machen.

\hypertarget{anonyme-lambda-funktionen}{%
\subsection{Anonyme / Lambda
Funktionen}\label{anonyme-lambda-funktionen}}

Entwicklungshistorie von C\# in Bezug auf Delegaten

\begin{longtable}[]{@{}ll@{}}
\toprule
Version & Delegatendefinition\tabularnewline
\midrule
\endhead
\(<2.0\) & benannte Methoden\tabularnewline
\(>= 2.0\) & anonyme Methoden\tabularnewline
ab \(3.0\) & Lambdaausdrücke\tabularnewline
\bottomrule
\end{longtable}

Dabei lösen Lambdaausdrücke die anonymen Methoden als bevorzugten Weg
zum Schreiben von Inlinecode ab. Allerdings bieten anonyme Methode eine
Funktion, über die Lambdaausdrücke nicht verfügen. Anonyme Methoden
ermöglichen das Auslassen der Parameterliste. Das bedeutet, dass eine
anonyme Methode in Delegaten mit verschiedenen Signaturen konvertiert
werden kann.

\textbf{Anonyme Methoden}

Das Erstellen anonymer Methoden verkürzt den Code, da nunmehr ein
Codeblock als Delegatparameter übergeben wird.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Declare a delegate pointing at an anonymous function.}
\NormalTok{Del d = }\KeywordTok{delegate}\NormalTok{(}\DataTypeTok{int}\NormalTok{ k) \{ }\CommentTok{/* ... */}\NormalTok{ \};}
\end{Highlighting}
\end{Shaded}

Das folgende Codebeispiel illustriert die Verwendung. Dabei wird auch
deutlich, wie eine Methodenreferenz durch einen anderen ersetzt werden
kann.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\CommentTok{// Declare a delegate.}
\KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{Printer}\NormalTok{(}\DataTypeTok{string}\NormalTok{ s);}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program\{}

  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{DoWork}\NormalTok{(}\DataTypeTok{string}\NormalTok{ k)}
\NormalTok{  \{}
\NormalTok{      System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(k);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// Anonyme Deklaration}
\NormalTok{    Printer p = }\KeywordTok{delegate}\NormalTok{(}\DataTypeTok{string}\NormalTok{ j)}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(j);}
\NormalTok{    \};}

    \FunctionTok{p}\NormalTok{(}\StringTok{"The delegate using the anonymous method is called."}\NormalTok{);}
    \CommentTok{// Der existierende Delegat wird nun mit einer konkreten Methode}
    \CommentTok{// verknüpft}
\NormalTok{    p = DoWork;}

    \CommentTok{// alternativ könnte man auch einen neuen Delegaten anlegen}
    \CommentTok{//Printer p1 = new Printer(DoWork);}
    \FunctionTok{p}\NormalTok{(}\StringTok{"The delegate using the named method is called."}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Lambda Funktionen}

Ein Lambdaausdruck ist ein Codeblock, der wie ein Objekt behandelt wird.
Er kann als Argument an eine Methode übergeben werden und er kann auch
von Methodenaufrufen zurückgegeben werden.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(<Paramter>) => \{ expression or statement; \}}

\NormalTok{(}\DataTypeTok{int}\NormalTok{ a) => a * }\DecValTok{2}\NormalTok{;             }\CommentTok{// einzelner Ausdruck - Ausdruckslambda}
\NormalTok{(}\DataTypeTok{int}\NormalTok{ a) => \{ }\KeywordTok{return}\NormalTok{ a * }\DecValTok{2}\NormalTok{; \}; }\CommentTok{// Anweisungsblock    - Anweisungslambda}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{int} \FunctionTok{Del}\NormalTok{( }\DataTypeTok{int}\NormalTok{ Value);}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      Del obj = (Value) => \{}
              \DataTypeTok{int}\NormalTok{ x=Value*}\DecValTok{2}\NormalTok{;}
              \KeywordTok{return}\NormalTok{ x;}
\NormalTok{      \};}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{obj}\NormalTok{(}\DecValTok{5}\NormalTok{));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Jeder Lambdaausdruck kann in einen Delegat-Typ konvertiert werden. Der
Delegattyp, in den ein Lambdaausdruck konvertiert werden kann, wird
durch die Typen seiner Parameter und Rückgabewerte definiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;  }
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;  }

\KeywordTok{public} \KeywordTok{static} \KeywordTok{class}\NormalTok{ demo  }
\NormalTok{\{  }
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()  }
\NormalTok{  \{  }
\NormalTok{      List<}\DataTypeTok{int}\NormalTok{> list = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{int}\NormalTok{>() \{ }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{6}\NormalTok{ \};  }
\NormalTok{      List<}\DataTypeTok{int}\NormalTok{> evenNumbers = list.}\FunctionTok{FindAll}\NormalTok{(x => (x % }\DecValTok{2}\NormalTok{) == }\DecValTok{0}\NormalTok{);  }
      \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ num }\KeywordTok{in}\NormalTok{ evenNumbers)  }
\NormalTok{      \{  }
\NormalTok{          Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\} "}\NormalTok{, num);  }
\NormalTok{      \}  }
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{();  }
\NormalTok{      Console.}\FunctionTok{Read}\NormalTok{();  }
\NormalTok{  \}  }
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{generische-delegaten}{%
\subsection{Generische Delegaten}\label{generische-delegaten}}

Delegaten können auch als Generics realisiert werden. Das folgende
Beispiel wendet ein Delegate ``Transformer'' auf ein Array von Werten
an. Dabei stellt C\# sicher, dass der Typ der übergebenen Parameter in
der gesamten Verarbeitungskette übernommen wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\CommentTok{// Schritt I - Generisches Delegat}
\KeywordTok{delegate}\NormalTok{ T Transformer<T>(T x);}

\KeywordTok{class}\NormalTok{ Utility}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void}\NormalTok{ Transform<T>(}\KeywordTok{ref}\NormalTok{ T[] values, Transformer<T> trans)}
\NormalTok{  \{}
      \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < values.}\FunctionTok{Length}\NormalTok{; ++i)}
\NormalTok{          values[i] = }\FunctionTok{trans}\NormalTok{(values[i]);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \CommentTok{// Schritt II - Spezifische Methode, die der Delegatensignatur entspricht}
  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Square}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"This is method Square(int x)"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x*x;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{double} \FunctionTok{Square}\NormalTok{(}\DataTypeTok{double}\NormalTok{ x)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"This is method Square(double x)"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x*x;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{void}\NormalTok{ printArray<T>(T[] values)\{}
      \KeywordTok{foreach}\NormalTok{(T i }\KeywordTok{in}\NormalTok{ values)}
\NormalTok{          Console.}\FunctionTok{Write}\NormalTok{(i + }\StringTok{" "}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{[] values = \{ }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{ \};}
\NormalTok{    printArray<}\DataTypeTok{int}\NormalTok{>(values);}

\NormalTok{    Transformer <}\DataTypeTok{int}\NormalTok{> t = }\KeywordTok{new}\NormalTok{ Transformer<}\DataTypeTok{int}\NormalTok{>(Square);}
\NormalTok{    Utility.}\FunctionTok{Transform}\NormalTok{<}\DataTypeTok{int}\NormalTok{>(}\KeywordTok{ref}\NormalTok{ values, t);}
    \FunctionTok{printArray}\NormalTok{(values);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{action-func}{%
\subsection{Action / Func}\label{action-func}}

Der generischen Idee entsprechend kann man auf die explizite Definition
von eigenen Delegates vollständig verzichten. C\# implementiert dafür
zwei Typen vor:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{delegate}\NormalTok{ TResult Func<}\KeywordTok{out}\NormalTok{ TResult>();}
\KeywordTok{delegate}\NormalTok{ TResult Func<}\KeywordTok{in}\NormalTok{ T1, }\KeywordTok{out}\NormalTok{ TResult>(T1 arg1);}
\KeywordTok{delegate}\NormalTok{ TResult Func<}\KeywordTok{in}\NormalTok{ T1, }\KeywordTok{in}\NormalTok{ T2, }\KeywordTok{out}\NormalTok{ TResult>(T1 arg1, T2 arg2);}
\KeywordTok{delegate}\NormalTok{ TResult Func<}\KeywordTok{in}\NormalTok{ T1, }\KeywordTok{in}\NormalTok{ T2, }\KeywordTok{in}\NormalTok{ T3, }\KeywordTok{out}\NormalTok{ TResult>(T1 arg1, T2 arg2, T3 arg3);}

\KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{Action}\NormalTok{();}
\KeywordTok{delegate} \DataTypeTok{void}\NormalTok{ Action<}\KeywordTok{in}\NormalTok{ T1>(T1 arg1);}
\KeywordTok{delegate} \DataTypeTok{void}\NormalTok{ Action<}\KeywordTok{in}\NormalTok{ T1, }\KeywordTok{in}\NormalTok{ T2>(T1 arg1, T2);}
\KeywordTok{delegate} \DataTypeTok{void}\NormalTok{ Action<}\KeywordTok{in}\NormalTok{ T1, }\KeywordTok{in}\NormalTok{ T2, }\KeywordTok{in}\NormalTok{ T3>(T1 arg1, T2 arg2, T3 arg3);}
\end{Highlighting}
\end{Shaded}

Im folgenden Beispiel wir die Anwendung illustriert. Dabei werden 3
Delegates genutzt um die Funktionen \texttt{PrintHello} und
\texttt{Square()} zu referenzieren.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.18\columnwidth}\raggedright
Delegate-Variante\strut
\end{minipage} & \begin{minipage}[b]{0.76\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.18\columnwidth}\raggedright
myOutput\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
C\#1.0 Version mit konkreter Methode und individuellem Delegaten (Zeile
8)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
myActionOutput\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Generischer Delegatentyp ohne Rückgabewert \texttt{Action}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.18\columnwidth}\raggedright
myFuncOutput\strut
\end{minipage} & \begin{minipage}[t]{0.76\columnwidth}\raggedright
Generischer Delegatentyp mit Rückgabewert \texttt{Func}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{Output}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text);}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{PrintHello}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(text);}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Square}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"This is method Square(int x)"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x*x;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{double} \FunctionTok{Square}\NormalTok{(}\DataTypeTok{double}\NormalTok{ x)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"This is method Square(double x)"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x*x;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     Output myOutput = PrintHello;}
     \FunctionTok{myOutput}\NormalTok{(}\StringTok{"Das ist eine Textausgabe"}\NormalTok{);}
\NormalTok{     Action<}\DataTypeTok{string}\NormalTok{> myActionOutput = PrintHello;}
     \FunctionTok{myActionOutput}\NormalTok{(}\StringTok{"Das ist eine Action-Testausgabe!"}\NormalTok{);}
\NormalTok{     Func<}\DataTypeTok{float}\NormalTok{, }\DataTypeTok{float}\NormalTok{> myFuncOutput = Square;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\FunctionTok{myFuncOutput}\NormalTok{(}\DecValTok{5}\NormalTok{));}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Natürlich lassen sich auf \texttt{Func} und \texttt{Action} auch anonyme
Methoden und Lambda Expressions anwenden!

\begin{verbatim}
Func<string, string> MyLambdaAction = text => text + "modifed by Lambda";
Console.WriteLine(MyLambdaAction("Tests"));
\end{verbatim}

Warum würde die Verwendung von Action an dieser Stelle einen Fehler
generieren?

\hypertarget{aufgaben-der-woche-3}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche-3}}

\begin{itemize}
\tightlist
\item
  {[} {]} Vertiefen Sie das erlernte anhand von zusätzichen Materialien
\end{itemize}

!?\href{https://www.youtube.com/watch?v=R8Blt5c-Vi4}{alt-text}

\hypertarget{events}{%
\chapter{Events}\label{events}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Events\ und\ Delegaten\ in\ der\ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/22_Events.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{organisatorisches-2}{%
\section{Organisatorisches}\label{organisatorisches-2}}

\begin{quote}
\textbf{1. Alternative Prüfungsleistung}
\end{quote}

\begin{longtable}[]{@{}rl@{}}
\toprule
\begin{minipage}[b]{0.17\columnwidth}\raggedleft
Datum\strut
\end{minipage} & \begin{minipage}[b]{0.77\columnwidth}\raggedright
Bemerkung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
22. Juni 2021\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Rückmeldung der Gruppen zur Teilnahme an der praktischen
Prüfungsleistung (per Email an Prof.~Zug)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Anlegen eines Repositories und Erläuterung Ihrer Zielstellungen im
Wiki\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
bis 8. Juli 2021\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Spezifikation einer Fragestellung und zugehöriger Softwareentwurf\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
bis 15. Juli 2021\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Bestätigung der Idee und des Entwurfes\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Bearbeitung der Aufgabenstellung in einem GitHub Projekt mit
eingeladenen Betreuern\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedleft
27. Juli 2021\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
(Tag der Klausur) Abschluss der Bearbeitung, die Repos werden
gespiegelt.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{itemize}
\tightlist
\item
  Einrichten eines eignen Repositories
\item
  Einladen des Partners
\item
  Einladen von Frau Dr.~Rudolf (\texttt{galinarudollf}) und mir
  (\texttt{sebastianzug})
\item
  Einrichten eines Wikis für die Darstellung der Projektidee
\end{itemize}

\begin{quote}
\textbf{2. Warum eigentlich LiaScript?}
\end{quote}

\begin{quote}
\textbf{3. Tutor gesucht!}
\end{quote}

Für die Realisierung der Übungen in der Veranstaltung \emph{Prozedurale
Programmierung} suchen wir einen motivierten Studierenden der Freude
daran hat, Nicht-Informatikern den Einstieg in die Materie zu
erleichtern. Gegenstand der Veranstaltung sind die Grundzüge der
Programmierung in C, ein wenig Objektorientrierung in C++ und darauf
aufbauend etwas Anwendung mit einem Mikrocontroller.

\begin{quote}
\textbf{4. Morgen keine Vorlesung!}
\end{quote}

\hypertarget{nachgefragt}{%
\section{Nachgefragt}\label{nachgefragt}}

In der letzten Veranstaltung fragte einer von Ihnen wie der selektive
Zugriff auf die MultiCastDelegaten realisieren kann. Zur Erinnerung
MulticastDelegate verfügt über eine verknüpfte Liste von Delegaten, die
als Aufruf Liste bezeichnet wird und aus einem oder mehreren-Elementen
besteht. Wenn ein Multicast Delegat aufgerufen wird, werden die
Delegaten in der Aufruf Liste synchron in der Reihenfolge aufgerufen, in
der Sie angezeigt werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{int} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y);}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Add}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x + y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x + y;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Multiply}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x * y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x * y;}
\NormalTok{  \}}

  \KeywordTok{static} \DataTypeTok{int} \FunctionTok{Divide}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"x / y"}\NormalTok{);}
      \KeywordTok{return}\NormalTok{ x / y;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Calc computer3 = Add;}
\NormalTok{    computer3 += Multiply;}
\NormalTok{    computer3 += Multiply;}
\NormalTok{    computer3 += Divide;}
\NormalTok{    computer3 -= Add;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Zahl von eingebundenen Delegates \{0\}"}\NormalTok{,}
\NormalTok{                      computer3.}\FunctionTok{GetInvocationList}\NormalTok{().}\FunctionTok{GetLength}\NormalTok{(}\DecValTok{0}\NormalTok{));}

    \DataTypeTok{var}\NormalTok{ x = computer3.}\FunctionTok{GetInvocationList}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Typ der Invocation List \{0\}"}\NormalTok{, x.}\FunctionTok{GetType}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(x[}\DecValTok{0}\NormalTok{].}\FunctionTok{DynamicInvoke}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{));}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(x[}\DecValTok{1}\NormalTok{].}\FunctionTok{DynamicInvoke}\NormalTok{(}\DecValTok{3}\NormalTok{,}\DecValTok{5}\NormalTok{));                        }
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{wiederholung}{%
\section{Wiederholung}\label{wiederholung}}

Wie war das noch mal, welche Elemente (Member) zeichnen einen Klasse
unter C\# aus?

\textbf{Bezeichnung} \textbar{}\\
Konstanten \textbar{}\\
Felder \textbar{}\\
Methoden \textbar{}\\
Eigenschaften \textbar{}\\
Indexer \textbar{}\\
Ereignisse \textbar{}\\
Operatoren \textbar{}\\
Konstruktoren \textbar{}\\
Finalizer \textbar{}\\
Typen \textbar{}

\textbf{Bezeichnung} \textbar{} \textbf{Bedeutung} \textbar{}\\
Konstanten \textbar{} Konstante Werte innerhalb einer Klasse
\textbar{}\\
Felder \textbar{} Variablen der Klasse \textbar{}\\
Methoden \textbar{} Funktionen, die der Klasse zugeordnet sind
\textbar{}\\
Eigenschaften \textbar{} Aktionen beim Lesen und Schreiben auf
geschützter Variablen \textbar{}\\
Indexer \textbar{} Spezifikation eines Indexoperators für die Klasse
\textbar{}\\
Ereignisse \textbar{} ? \textbar{}\\
Operatoren \textbar{} Definition von eigenen Symbolen für die Arbeit mit
Instanzen der Klasse \textbar{}\\
Konstruktoren \textbar{} Bündelung von Aktionen zur Initialisierung der
Klasseninstanzen \textbar{}\\
Finalizer \textbar{} Aktionen, die vor dem ``Löschen'' der Instanz
ausgeführt werden \textbar{}\\
Typen \textbar{} Geschachtelte Typen, die innerhalb der Klasse definiert
werden \textbar{}

\hypertarget{motivation-und-idee-der-events}{%
\section{Motivation und Idee der
Events}\label{motivation-und-idee-der-events}}

Was haben wir mit den Delegaten erreicht? Wir sind in der Lage aus einer
Klasse, auf Methoden anderer Klassen zurückzugreifen, über die wir per
Referenz informiert wurden. Die aufgerufene Methode wird der aufrufenden
Klasse über einen Delegaten bekannt gegeben.

Damit sind die beiden Klassen nur über eine Funktionssignatur
miteinander ``lose'' gekoppelt. Welche Konzepte lassen sich damit
umsetzen?

\hypertarget{publish-subscribe-prinzip}{%
\subsection{Publish-Subscribe Prinzip}\label{publish-subscribe-prinzip}}

\includegraphics{img/22_Events/Publish-Subscribe-Architekturstil.png}

Publish-Subscribe (Pub / Sub) ist ein Nachrichtenmuster, bei dem
Publisher Nachrichten an Abonnenten senden. In der Softwarearchitektur
bietet Pub / Sub-Messaging Ereignisbenachrichtigungen für verteilte
Anwendungen, insbesondere für Anwendungen, die in kleinere, unabhängige
Bausteine ​​entkoppelt sind.

Das Publish/Subscribe-Nachrichtenmodell hat folgende Vorteile:

\begin{itemize}
\tightlist
\item
  Der Publisher braucht gar nicht zu wissen, wer Subscriber ist. Es
  erfolgt keine explizite Adressierung
\item
  Der Subscriber ist vom Publisher entkoppelt, er empfängt nur die
  Nachrichten, die für ihn auch relevant sind.
\item
  Der Subscriber kann sich jederzeit aus der Kommunikation zurückziehen
  oder ein anderes Topic subskribieren. Auf den Publisher hat das keine
  Auswirkung.
\item
  Damit ist die Messaging-Topologie dynamisch und flexibel. Zur Laufzeit
  können neue Subscriber hinzukommen.
\end{itemize}

C\# etabliert für die Nutzung der Pub-Sub Kommunikation \emph{Events}.
Dies sind spezielle Delegate-Variablen, die mit den Schlüsselwort
\texttt{event} als Felder von Klassen deklariert werden.

\hypertarget{events-in-c}{%
\subsection{Events in C}\label{events-in-c}}

Der Publisher ist eine Klasse, die ein Delegaten enthält. Der Publisher
entscheidet damit darüber, wann Nachrichten versand werden. Auf der
anderen Seite finden sich die Subscriber-Methoden, die ausgehend vom
aktivierten Delegaten im Publisher zur Ausführung kommen. Ein Subscriber
hat keine Kenntnis von anderen Subscribern. Events sind ein Feature aus
C\# dass dieses Pattern formalisiert.

\begin{quote}
Merke: Ein Event ist ein Klassenmember, dass diejenigen Features des
Delegatenkonzepts nutzt, um eine Publisher-Subscribe Interaktion zu
realisieren.
\end{quote}

Im einfachsten Fall lässt sich das Event-Konzept folgendermaßen
anwenden:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Schritt 1}
\CommentTok{// Wir definieren einen Delegat, der das Format der Subscriber Methoden}
\CommentTok{// (callbacks) spezifiziert - in diesem Beispiel ohne Parameter}
\CommentTok{// Hier wird ein nicht-generischer Handler genutzt.}
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{varAChangedHandler}\NormalTok{();}

\CommentTok{// Schritt 2}
\CommentTok{// Wir integrieren ein event in unser Publisher Klasse, dass den Delegaten}
\CommentTok{// abbildet}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Publisher\{}
  \KeywordTok{public} \KeywordTok{event}\NormalTok{ varAChangedHandler OnAChangedHandler;}

  \CommentTok{// Schritt 3}
  \CommentTok{// Wir implementieren das "Feuern" des Events}
  \KeywordTok{public} \FunctionTok{magicMethod}\NormalTok{()\{}
     \KeywordTok{if}\NormalTok{ (oldA != newA) }\FunctionTok{OnAChangedHandler}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{// Schritt 4}
\CommentTok{// Implementieren des Subscribers - in diesem Fall wurde eine separate Klasse}
\CommentTok{// gewählt. Natürlich kann die Methode, die der Signatur von}
\CommentTok{// varAChangedHandler entspricht, auch in der Publisher-Klasse implementiert}
\CommentTok{// sein}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Subscriber\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{m_OnPropertyChanged}\NormalTok{()\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"A was changed!"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{// Schritt 5}
\CommentTok{// "Einhängen" der Subscriber Methode in den Publisher-Delegate}
\KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{  Publisher myPub = }\KeywordTok{new} \FunctionTok{Publisher}\NormalTok{();}
\NormalTok{  Subscriber mySub = }\KeywordTok{new} \FunctionTok{Subscriber}\NormalTok{();}
\NormalTok{  myPub.}\FunctionTok{OnAChangedHandler}\NormalTok{ += }\KeywordTok{new} \FunctionTok{varAChangedHandler}\NormalTok{(mySub.}\FunctionTok{m_OnPropertyChanged}\NormalTok{);}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Entsprechend der Darstellung in
\href{https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/events/index}{Link}
sind Events durch folgende Eigenschaften definiert:

\begin{itemize}
\item
  Der Publisher bestimmt, wann ein Ereignis ausgelöst wird. Die
  Subscriber bestimmen, welche Aktion als Reaktion auf das Ereignis
  ausgeführt wird.
\item
  Ein Ereignis entstammt einem Publisher, kann aber mehrere Subscriber
  adressieren. Ein Abonnent kann mehrere Ereignisse von mehreren
  Herausgebern behandeln.
\item
  Ereignisse, die keine Subscriber haben, werden nie ausgelöst. Das
  bedeutet, dass ein Publisher die Subscriber kennen muss.
\item
  Ereignisse werden in der Regel verwendet, um Benutzeraktionen wie
  Mausklicks oder Menüauswahlen in GUI-Schnittstellen zu signalisieren.
\item
  In der .NET Framework-Klassenbibliothek basieren Ereignisse auf dem
  EventHandler-Delegaten und der EventArgs-Basisklasse.
\end{itemize}

\textbf{Was passiert hinter den Kulissen?}

Wenn wir ein \texttt{event} deklarieren

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Publisher\{}
  \KeywordTok{public} \KeywordTok{event}\NormalTok{ VarAChangedHandler AChanged;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

passieren folgende 3 Dinge:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Der Complier erzeugt einen privaten Delegaten mit sogenannten Event
  Accessoren (add und remove).
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{VarAChangedHandler aChanged; }\CommentTok{// private Delegate}
\KeywordTok{public} \KeywordTok{event}\NormalTok{ VarAChangedHandler AChanged}
\NormalTok{\{}
\NormalTok{  add \{aChanged += value;\}}
\NormalTok{  remove \{aChanged -= value;\}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Der Compiler sucht innerhalb der Publisher Klasse nach Referenzen, die
  auf AChanged und lenkt diese auf das private Delegate um.
\item
  Der Compiler mappt alle += Operationen außerhalb auf die
  Zugriffsmethoden add and remove.
\end{enumerate}

Ok, nett, aber das würde ich gern an einem Beispiel sehen!

\textbf{Beispiel 1}

Das Beispiel vereinfacht das Vorgehen, in dem es Publisher und
Subscriber in einer Funktion zusammenfasst. Damit kann auf das Event
uneingeschränkt zurückgegriffen werden. Dazu gehört auch, dass das Event
mit \texttt{Invoke} ausgelöst wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{DelEventHandler}\NormalTok{();}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \KeywordTok{event}\NormalTok{ DelEventHandler myEvent;}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        myEvent += }\KeywordTok{new} \FunctionTok{DelEventHandler}\NormalTok{(Fak1);}
\NormalTok{        myEvent += Fak2;}
\NormalTok{        myEvent += () => \{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fakultät 3"}\NormalTok{);\};}
\NormalTok{        myEvent.}\FunctionTok{Invoke}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Fak1}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fakultät 1"}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Fak2}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Fakultät 2"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Erweitern Sie den Code so, dass Parameter an die Callback-Methoden
  übergeben werden können
\end{itemize}

\textbf{Beispiel 2}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{DelPriceChangedHandler}\NormalTok{();}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Stock\{}
    \DataTypeTok{decimal}\NormalTok{ price = }\DecValTok{5}\NormalTok{;}
    \KeywordTok{public} \KeywordTok{event}\NormalTok{ DelPriceChangedHandler OnPropertyPriceChanged;}
    \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Price\{}
      \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ price; \}}
      \KeywordTok{set}\NormalTok{ \{ }\KeywordTok{if}\NormalTok{ (price != value)\{}
              \KeywordTok{if}\NormalTok{ (OnPropertyPriceChanged != }\KeywordTok{null}\NormalTok{)\{}
                 \FunctionTok{OnPropertyPriceChanged}\NormalTok{();}
\NormalTok{                 price = value;}
\NormalTok{              \}}
\NormalTok{            \}}
\NormalTok{          \}}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ MailService\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{stock_OnPropertyChanged}\NormalTok{()\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"MAIL - Price of stock was changed!"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Logging\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{stock_OnPropertyChanged}\NormalTok{()\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"LOG  -  Price of stock was changed!"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Stock GoogleStock = }\KeywordTok{new} \FunctionTok{Stock}\NormalTok{();}
\NormalTok{        GoogleStock.}\FunctionTok{OnPropertyPriceChanged}\NormalTok{ += MailService.}\FunctionTok{stock_OnPropertyChanged}\NormalTok{;}
\NormalTok{        GoogleStock.}\FunctionTok{OnPropertyPriceChanged}\NormalTok{ += Logging.}\FunctionTok{stock_OnPropertyChanged}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"We change the stock price now!"}\NormalTok{);}
\NormalTok{        GoogleStock.}\FunctionTok{Price}\NormalTok{ = }\DecValTok{10}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Ja, aber \ldots{} } Was unterscheidet eine Delegate von einem
Event? Was würde passieren, wenn wir das Key-Wort aus dem Code
entfernen?

Die Implementierung wäre nicht so robust, da folgende Möglichkeiten
offen ständen:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.55\columnwidth}\raggedright
Eingriff\strut
\end{minipage} & \begin{minipage}[b]{0.30\columnwidth}\raggedright
Bedeutung\strut
\end{minipage} & \begin{minipage}[b]{0.06\columnwidth}\raggedright
Verhindert\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.55\columnwidth}\raggedright
\texttt{GoogleStock.OnPropertyPriceChanged\ =\ null;}\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
Löscht alle Callback-Handler\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.55\columnwidth}\raggedright
\texttt{GoogleStock.OnPropertyPriceChanged\ =\ DelPriceChangedHandler(MailService.stock\_OnPropertyChanged);}\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
Setzt einen einzigen Handler (und löscht alle anderen)\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.55\columnwidth}\raggedright
\texttt{GoogleStock.OnPropertyPriceChanged.Invoke();}\strut
\end{minipage} & \begin{minipage}[t]{0.30\columnwidth}\raggedright
Auslösen des Events innerhalb eines Subscribers\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright
ja\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Was fehlt Ihnen an der Implementierung?

Richtig, die Möglichkeit auf die Daten zurückzugreifen.

\hypertarget{events---praktische-implementierung}{%
\section{Events - Praktische
Implementierung}\label{events---praktische-implementierung}}

Die Möglichkeit Parameter strukturiert und wiederverwendbar zu übergeben
und entsprechend generische EventHandler zu integrieren.

\hypertarget{parameter}{%
\subsection{Parameter}\label{parameter}}

Welche Informationen sollten an die Subscriber weitergereicht werden?
Zum einen der auslösende Publisher (Wer ist verantwortlich?) und ggf.
weitere Daten zum Event (Warum ist die Information eingetroffen?).

Im Beispiel konzentrieren wir uns auf ein Default-Delegate, dass
Bestandteil der .NET Umgebung ist

\texttt{EventHandler\ Delegate} siehe
https://docs.microsoft.com/de-de/dotnet/api/system.eventhandler?view=netframework-4.8

Der Delegat ist dabei wie folgt definiert:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{void} \FunctionTok{EventHandler}\NormalTok{(}\DataTypeTok{object}\NormalTok{ sender, EventArgs e)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\CommentTok{//Brauchen wir nicht mehr, vielmehr wird auf einen vordefinierten EventHandler}
\CommentTok{//zurückgegriffen.}
\CommentTok{//public delegate void DelPriceChangedHandler();}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Stock\{}
    \DataTypeTok{decimal}\NormalTok{ price = }\DecValTok{5}\NormalTok{;}
    \CommentTok{// Hier ersetzen wir unser Delegate "DelPriceChangedHandler" durch den}
    \CommentTok{// Standard-Typ EventHandler}
    \KeywordTok{public} \KeywordTok{event}\NormalTok{ EventHandler OnPropertyPriceChanged;}
    \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Price\{}
      \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ price; \}}
      \KeywordTok{set}\NormalTok{ \{ }\KeywordTok{if}\NormalTok{ (price != value)\{}
              \KeywordTok{if}\NormalTok{ (OnPropertyPriceChanged != }\KeywordTok{null}\NormalTok{)\{}
                 \FunctionTok{OnPropertyPriceChanged}\NormalTok{(}\KeywordTok{this}\NormalTok{, EventArgs.}\FunctionTok{Empty}\NormalTok{ );}
\NormalTok{                 price = value;}
\NormalTok{              \}}
\NormalTok{            \}}
\NormalTok{          \}}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ MailService\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{stock_OnPropertyChanged}\NormalTok{(}\DataTypeTok{object}\NormalTok{ sender, EventArgs e)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"MAIL - Price of stock was changed!"}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wer ruft? - \{0\}"}\NormalTok{, sender);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Werte? - \{0\}"}\NormalTok{, e);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()\{}
\NormalTok{        Stock GoogleStock = }\KeywordTok{new} \FunctionTok{Stock}\NormalTok{();}
\NormalTok{        GoogleStock.}\FunctionTok{OnPropertyPriceChanged}\NormalTok{ += }\KeywordTok{new}
                \FunctionTok{EventHandler}\NormalTok{(MailService.}\FunctionTok{stock_OnPropertyChanged}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"We changed the stock price now!"}\NormalTok{);}
\NormalTok{        GoogleStock.}\FunctionTok{Price}\NormalTok{ = }\DecValTok{10}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{generic-events}{%
\subsection{Generic Events}\label{generic-events}}

Nun wollen wir einen Schritt weitergehen und spezifischere Informationen
mit dem Event an die Subscriber weiterreichen. Dafür implementieren wir
eine von \texttt{EventArgs} abgeleitete Klasse.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ PriceChangedEventArgs : EventArgs}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Difference \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Diese soll den Unterschied zwischen altem und neuen Preis umfassen,
damit der Subscriber die Relevanz der Information beurteilen kann.

Damit brauchen wir aber auch ein neues Delegate für unser nun nicht mehr
Standard Event

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{void} \FunctionTok{EventHandler}\NormalTok{(}\DataTypeTok{object}\NormalTok{ sender, PriceChangedEventArgs e)}
\end{Highlighting}
\end{Shaded}

Um diese Anpassungen beim Datentyp zu realisieren exisitiert bereits
eine generischen Form von EventHandler mit der Signatur

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void}\NormalTok{ EventHandler<TEventArgs>(}\DataTypeTok{object}\NormalTok{ source,}
\NormalTok{                                              TEventArgs e)}
\NormalTok{                                              where TEventArgs: EventArgs;}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Reflection}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Stock\{}
    \DataTypeTok{decimal}\NormalTok{ price = }\DecValTok{5}\NormalTok{;}
    \KeywordTok{public} \KeywordTok{event}\NormalTok{ EventHandler<PriceChangedEventArgs> OnPropertyPriceChanged;}
    \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Price\{}
      \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ price; \}}
      \KeywordTok{set}\NormalTok{ \{ }\KeywordTok{if}\NormalTok{ (price != value)\{}
              \KeywordTok{if}\NormalTok{ (OnPropertyPriceChanged != }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{                 PriceChangedEventArgs myEventArgs = }\KeywordTok{new} \FunctionTok{PriceChangedEventArgs}\NormalTok{();}
\NormalTok{                 myEventArgs.}\FunctionTok{Difference}\NormalTok{ = price - value;}
                 \FunctionTok{OnPropertyPriceChanged}\NormalTok{(}\KeywordTok{this}\NormalTok{, myEventArgs );}
\NormalTok{                 price = value;}
\NormalTok{              \}}
\NormalTok{            \}}
\NormalTok{          \}}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ PriceChangedEventArgs : EventArgs}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{decimal}\NormalTok{ Difference \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ MailService\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{stock_OnPropertyChanged}\NormalTok{(}\DataTypeTok{object}\NormalTok{ sender, PriceChangedEventArgs e)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"MAIL - Price of stock was changed!"}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Wer ruft? - \{0\}"}\NormalTok{, sender);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Preisänderung? - \{0\}"}\NormalTok{, e.}\FunctionTok{Difference}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Stock GoogleStock = }\KeywordTok{new} \FunctionTok{Stock}\NormalTok{();}
\NormalTok{        GoogleStock.}\FunctionTok{OnPropertyPriceChanged}\NormalTok{ += }\KeywordTok{new}
\NormalTok{                EventHandler<PriceChangedEventArgs>(MailService.}\FunctionTok{stock_OnPropertyChanged}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"We manipulate the stock price now!"}\NormalTok{);}
\NormalTok{        GoogleStock.}\FunctionTok{Price}\NormalTok{ = }\DecValTok{10}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{threads}{%
\chapter{Threads}\label{threads}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Multithreading\ Konzepte\ und\ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/23_Threads.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{neues-aus-github-2}{%
\section{Neues aus GitHub}\label{neues-aus-github-2}}

\begin{longtable}[]{@{}rllllllrlllllllllrl@{}}
\toprule
\begin{minipage}[b]{0.02\columnwidth}\raggedleft
task\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
0\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
1\strut
\end{minipage} & \begin{minipage}[b]{0.02\columnwidth}\raggedright
2\strut
\end{minipage} & \begin{minipage}[b]{0.04\columnwidth}\raggedright
3\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
4\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
5\strut
\end{minipage} & \begin{minipage}[b]{0.01\columnwidth}\raggedleft
6\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
7\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
8\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
9\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
10\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
11\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
12\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
13\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright
14\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
15\strut
\end{minipage} & \begin{minipage}[b]{0.01\columnwidth}\raggedleft
16\strut
\end{minipage} & \begin{minipage}[b]{0.03\columnwidth}\raggedright
32\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
3\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}2, 3{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}4, 5{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}6, 7{]}\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}8, 9{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}10, 11{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}12, 13{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
14\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}15, 16{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}17, 18{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}19, 20{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}21, 22{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}23, 24{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}25, 26{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}27, 28{]}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
{[}29, 30, 31{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}32, 33{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
34\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
4\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}4, 5{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}6, 7{]}\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}31, 8, 9{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}10, 11{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}12, 13{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
14\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}15{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}17, 18{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}19, 20{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}21, 22{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}23, 24{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}26, 25{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}27, 28{]}\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
{[}29, 30{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}32, 33{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
34\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[} 2, 15{]}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
5\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}4, 5{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}7, 6{]}\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}8, 9{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}10, 11{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}13{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
3\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}17{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}19, 20{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}22, 21{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}24, 23{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}25, 26{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}33, 32{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
34\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[} 2, 15{]}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
6\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}5, 4{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}7, 6{]}\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}9 , 8{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}10, 11{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}13{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}17{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}19, 20{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}21{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}24, 23{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}26, 25{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
{[}29, 30{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}33, 32{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
34\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[} 2, 15{]}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
7\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
{[}4{]}\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}8, 9{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}11, 10{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}20, 19{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}21{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}24, 23{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}26, 25{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}33, 32{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
34\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}15, 2{]}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.02\columnwidth}\raggedleft
8\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.02\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.04\columnwidth}\raggedright
{[}9, 8{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}19{]}\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[}33, 32{]}\strut
\end{minipage} & \begin{minipage}[t]{0.01\columnwidth}\raggedleft
nan\strut
\end{minipage} & \begin{minipage}[t]{0.03\columnwidth}\raggedright
{[} 2, 15{]}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{quote}
Offenbar ist die Teamkoordination die zentrale Herausforderung für die
Umsetzung der Aufgaben. Um unsere Eingriffsmöglichkeiten hier besser
abzustimmen möchten wir Sie bitten uns ein entsprechendes Feedback zur
aktuellen Teamkonfiguration zu geben:
\end{quote}

Hier ist der Link: https://panel.ovgu.de/s/957ab2a9/de.html

\hypertarget{motivation---threads}{%
\section{Motivation - Threads}\label{motivation---threads}}

\textbf{Threads Basics}

Ein Ausführungs-Thread ist die kleinste Sequenz von programmierten
Anweisungen, die unabhängig von einem Scheduler verwaltet werden kann,
der typischerweise Teil des Betriebssystems ist. Die Implementierung von
Threads und Prozessen unterscheidet sich von Betriebssystem zu
Betriebssystem, aber in den meisten Fällen ist ein Thread ein
Bestandteil eines Prozesses. Innerhalb eines Prozesses können mehrere
Threads existieren, die gleichzeitig ausgeführt werden und Ressourcen
wie Speicher gemeinsam nutzen, während verschiedene Prozesse diese
Ressourcen nicht gemeinsam nutzen. Insbesondere teilen sich die Threads
eines Prozesses seinen ausführbaren Code und die Werte seiner dynamisch
zugewiesenen Variablen und seiner nicht thread-lokalen globalen
Variablen zu einem bestimmten Zeitpunkt.

\begin{figure}
\centering
\includegraphics{./img/23_Multithreading/ProcessVsThread.png}
\caption{Vererbungsbeispiel}
\end{figure}

Auf eine Single-Core Rechner organisiert das Betriebssystem Zeitscheiben
(unter Windows üblicherweise 20ms) um Nebenläufigkeit zu simulieren.
Eine Multiprozessor-Maschine kann aber auch direkt auf die
Rechenkapazität eines weiteren Prozessors ausweichen und eine echte
Parallelisierung umsetzen, die allerdings im Beispiel durch den
gemeinsamen Zugriff auf die Konsole limitiert ist.

\hypertarget{implmementierung-unter-c}{%
\section{Implmementierung unter C}\label{implmementierung-unter-c}}

Die Implementierung der Klasse Thread unter C\# umfasst dabei folgende
Definitionen:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{void} \FunctionTok{ThreadStart}\NormalTok{();}
\KeywordTok{public} \KeywordTok{enum} \FunctionTok{ThreadPriority}\NormalTok{ (Normal, AboveNormal, BelowNormal, Highest, Lowest);}
\KeywordTok{public} \KeywordTok{enum} \FunctionTok{TheadState}\NormalTok{ (Unstarted, Running, Suspended, Stopped, Aborted, ...);}

\KeywordTok{public} \KeywordTok{sealed} \KeywordTok{class}\NormalTok{ Thread\{}
  \KeywordTok{public} \FunctionTok{Thread}\NormalTok{ (ThreadStart startMethod);}
\NormalTok{  ...}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name \{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\};}
  \KeywordTok{public}\NormalTok{ ThreadPriority Priority \{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\};}
  \KeywordTok{public}\NormalTok{ ThreadState TreadState \{}\KeywordTok{get}\NormalTok{;\};}
  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ IsAlive \{}\KeywordTok{get}\NormalTok{;\};}
  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ IsBackground\{}\KeywordTok{get}\NormalTok{;\};}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Start}\NormalTok{();}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Join}\NormalTok{();}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Abort}\NormalTok{(Object);}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Sleep}\NormalTok{(}\DataTypeTok{int}\NormalTok{ milliseconds);}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Um die grundlegende Verwendung des Typs \texttt{Thread} zu
veranschaulichen, nehmen wir an, Sie haben eine Konsolenanwendung, in
der die \texttt{CurrentThread}-Eigenschaft ein Thread-Objekt abruft, das
den aktuell ausgeführten Thread repräsentiert.

Das folgende Beispiel kann aus spezifischen Sicherheitsgründen nicht
unter Rextester ausgeführt werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{        Thread t = Thread.}\FunctionTok{CurrentThread}\NormalTok{;}
\NormalTok{        t.}\FunctionTok{Name}\NormalTok{ = }\StringTok{"Primary_Thread"}\NormalTok{;}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Thread Name: \{0\}"}\NormalTok{, t.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Thread Status: \{0\}"}\NormalTok{, t.}\FunctionTok{IsAlive}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Priority: \{0\}"}\NormalTok{, t.}\FunctionTok{Priority}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Context ID: \{0\}"}\NormalTok{, Thread.}\FunctionTok{CurrentContext}\NormalTok{.}\FunctionTok{ContextID}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Current application domain: \{0\}"}\NormalTok{,Thread.}\FunctionTok{GetDomain}\NormalTok{().}\FunctionTok{FriendlyName}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Printer\{}
  \DataTypeTok{char}\NormalTok{ ch;}
  \DataTypeTok{int}\NormalTok{ sleepTime;}

  \KeywordTok{public} \FunctionTok{Printer}\NormalTok{(}\DataTypeTok{char}\NormalTok{ c, }\DataTypeTok{int}\NormalTok{ t)\{}
\NormalTok{    ch = c;}
\NormalTok{    sleepTime = t;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{()\{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{10}\NormalTok{;  i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(ch);}
\NormalTok{      Thread.}\FunctionTok{Sleep}\NormalTok{(sleepTime);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Printer a = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'a'}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\NormalTok{        Printer b = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'b'}\NormalTok{, }\DecValTok{50}\NormalTok{);}
\NormalTok{        Printer c = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'c'}\NormalTok{, }\DecValTok{70}\NormalTok{);}

        \DataTypeTok{var}\NormalTok{ watch = System.}\FunctionTok{Diagnostics}\NormalTok{.}\FunctionTok{Stopwatch}\NormalTok{.}\FunctionTok{StartNew}\NormalTok{();}
\NormalTok{        a.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{        b.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{        c.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{        watch.}\FunctionTok{Stop}\NormalTok{();}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Duration in ms: \{0\}"}\NormalTok{, watch.}\FunctionTok{ElapsedMilliseconds}\NormalTok{);        }

\NormalTok{        watch.}\FunctionTok{Restart}\NormalTok{();}
\NormalTok{        Thread PrinterA = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(a.}\FunctionTok{Print}\NormalTok{));}
\NormalTok{        Thread PrinterB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(b.}\FunctionTok{Print}\NormalTok{));}
\NormalTok{        PrinterA.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        PrinterB.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        c.}\FunctionTok{Print}\NormalTok{();   }\CommentTok{// Ausführung im Main-Thread}
\NormalTok{        watch.}\FunctionTok{Stop}\NormalTok{();}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Duration in ms: \{0\}"}\NormalTok{, watch.}\FunctionTok{ElapsedMilliseconds}\NormalTok{);   }
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{thread-interaktion}{%
\subsection{Thread-Interaktion}\label{thread-interaktion}}

\begin{verbatim}
                       .-----------.
                       | Unstarted |
                       .-----------.
                             |
                             v
                       .-----------.
+-+------------------->|  Started  |<--------------------------------+
| |                    .-----------.                                 |
| |                       |    ^                                     |
| | Interrupt or          v    |                                     |
| | sleep interval     .-----------.                                 |
| | expired            |  Running  |                                 |
| |                    .-----------.                                 |
| |                          |                                       |
| |        +-----------------+--------------+---------------+        |
| |        |                 |              |               |        |
| |        v                 v              v               v        |
| |  .-----------.    .-----------.   .-----------.   .-----------.  |
| +--| Wait/Join |    | Suspended |   |  Abort    |   |  Block    |--+
|    .-----------.    .-----------.   .-----------.   .-----------.
|                            |
+----------------------------+
        Resume                                               .
\end{verbatim}

Wie lässt sich eine Serialisierung von Threads realisieren? Im Beispiel
soll die Ausführung des Printers C erst starten, wenn die beiden anderen
Druckaufträge abgearbeitet wurden.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.17\columnwidth}\raggedright
Methode\strut
\end{minipage} & \begin{minipage}[b]{0.77\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{t.Join()}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Es wird so lange gewartet, bis der Thread t zum Abschluss gekommen
ist.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread.Sleep()}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Es wird für n Millisekunden gewartet.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread.Yield()}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
Gibt den erteilten Zugriff auf die CPU sofort zurück.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Printer\{}
  \DataTypeTok{char}\NormalTok{ ch;}
  \DataTypeTok{int}\NormalTok{ sleepTime;}
  \KeywordTok{public} \FunctionTok{Printer}\NormalTok{(}\DataTypeTok{char}\NormalTok{ c, }\DataTypeTok{int}\NormalTok{ t)\{}
\NormalTok{    ch = c;}
\NormalTok{    sleepTime = t;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{()\{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{10}\NormalTok{;  i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(ch);}
      \CommentTok{//Thread.Sleep(sleepTime);}
\NormalTok{      Thread.}\FunctionTok{Yield}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Printer a = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'a'}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\NormalTok{        Printer b = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'b'}\NormalTok{, }\DecValTok{50}\NormalTok{);}
\NormalTok{        Printer c = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'c'}\NormalTok{, }\DecValTok{70}\NormalTok{);}
\NormalTok{        Thread PrinterA = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(a.}\FunctionTok{Print}\NormalTok{));}
\NormalTok{        Thread PrinterB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(b.}\FunctionTok{Print}\NormalTok{));}
\NormalTok{        PrinterA.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        PrinterB.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1000}\NormalTok{);    }\CommentTok{// Zeitabhängige Verzögerung des Hauptthreads}
        \CommentTok{//PrinterA.Join();     // <-}
        \CommentTok{//PrinterB.Join();}
\NormalTok{        c.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Aus dem Gesamtkonzept des Threads ergeben sich mehrere Zustände, in
denen sich dieser befinden kann:

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.06\columnwidth}\raggedright
Zustand\strut
\end{minipage} & \begin{minipage}[b]{0.50\columnwidth}\raggedright
Bedeutung\strut
\end{minipage} & \begin{minipage}[b]{0.34\columnwidth}\raggedright
Transition\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.06\columnwidth}\raggedright
unstarted\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Thread ist initialisiert\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\texttt{t.Start();}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
running\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Thread befindet sich gerade in der Ausführung\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
WaitSleepJoin\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Thread wird wegen eines Sleep oder eines Join-Befehls nicht ausgeführt.
Er nutzt keine Prozessorzeit.\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
Ablauf des Zeitfensters, Ende des mit \texttt{Join()} referenzierten
Threads\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
Suspended\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Der Thread ist dauerhaft deaktiviert.\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\texttt{t.Resume()\ aktiviert\ ihn\ wieder}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.06\columnwidth}\raggedright
stopped\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Bearbeitung beendet\strut
\end{minipage} & \begin{minipage}[t]{0.34\columnwidth}\raggedright
\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Jeder Thread umfasst eine Feld vom Typ \texttt{ThreadState}, dass auf
verschiedenen Ebenen dessen Parameter abbildet. Um nur die für uns
relevanten Informationen zu erfassen, benutzen wir eine kleine Funktion.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{static}\NormalTok{ ThreadState }\FunctionTok{DetermineThreadState}\NormalTok{(}\KeywordTok{this}\NormalTok{ ThreadState ts)\{}
  \KeywordTok{return}\NormalTok{ ts & (ThreadState.}\FunctionTok{Unstarted}\NormalTok{ |}
\NormalTok{               ThreadState.}\FunctionTok{Running}\NormalTok{ |}
\NormalTok{               ThreadState.}\FunctionTok{WaitSleepJoin}\NormalTok{ |}
\NormalTok{               ThreadState.}\FunctionTok{Stopped}\NormalTok{);}

\DataTypeTok{bool}\NormalTok{ blocked = (Thread_a.}\FunctionTok{ThreadState}\NormalTok{ & ThreadState.}\FunctionTok{WaitSleepJoin}\NormalTok{) != }\DecValTok{0}\NormalTok{;}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Ein Thread in C\# zu einem beliebigen Zeitpunkt existiert in einem der
folgenden Zustände. Ein Thread liegt zu einem beliebigen Zeitpunkt nur
in einem Zustand vor.

\hypertarget{thread-initialisierung}{%
\subsection{Thread-Initialisierung}\label{thread-initialisierung}}

Wie wird der Thread-Objekt korrekt initialisiert? Viele Tutorials führen
Beispiele auf, die wie folgt strukturiert sind, während im obrigen
Beispiel der Konstruktoraufruf von \texttt{Thread} ein weiteren
Konstruktor \texttt{ThreadStart} adressiert:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Thread threadA = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(ExecuteA);}
\NormalTok{threadA.}\FunctionTok{Start}\NormalTok{();}
\CommentTok{// vs}
\NormalTok{Thread threadB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(ExecuteB));}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Calc  }
\NormalTok{\{}
    \DataTypeTok{int}\NormalTok{ paramA = }\DecValTok{0}\NormalTok{;}
    \DataTypeTok{int}\NormalTok{ paramB = }\DecValTok{0}\NormalTok{;}

    \KeywordTok{public} \FunctionTok{Calc}\NormalTok{(}\DataTypeTok{int}\NormalTok{ paramA, }\DataTypeTok{int}\NormalTok{ paramB)\{}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{paramA}\NormalTok{ = paramA;}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{paramB}\NormalTok{ = paramB;}
\NormalTok{    \}}

    \CommentTok{// Static method}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{getConst}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Static funtion const = \{0\}"}\NormalTok{, }\FloatTok{3.14}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{process}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Result = \{0\}"}\NormalTok{, paramA + paramB);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        ThreadStart threadDelegate = }\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(Calc.}\FunctionTok{getConst}\NormalTok{);}
\NormalTok{        Thread newThread = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(threadDelegate);}
\NormalTok{        newThread.}\FunctionTok{Start}\NormalTok{();}

\NormalTok{        newThread = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(Calc.}\FunctionTok{getConst}\NormalTok{);    }\CommentTok{// impliziter Cast zu ThreadStart}
\NormalTok{        newThread.}\FunctionTok{Start}\NormalTok{();}

\NormalTok{        Calc c = }\KeywordTok{new} \FunctionTok{Calc}\NormalTok{(}\DecValTok{5}\NormalTok{, }\DecValTok{6}\NormalTok{);}
\NormalTok{        threadDelegate = }\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(c.}\FunctionTok{process}\NormalTok{);}
\NormalTok{        newThread = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(threadDelegate);}
\NormalTok{        newThread.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Konstruktor der Klasse \texttt{Thread} hat aber folgende Signatur:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.17\columnwidth}\raggedright
Konstruktor\strut
\end{minipage} & \begin{minipage}[b]{0.77\columnwidth}\raggedright
Initialisiert eine neue Thread Klasse \ldots{}\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread(ThreadStart)}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
\ldots{} auf der Basis einer Instanz von ThreadStart\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread(ThreadStart,\ Int32)}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
\ldots{} auf der Basis eine Instanz von ThreadStart unter Angabe der
Größe des Stacks in Byte (aufgerundet auf entsprechende Page Size und
unter Berücksichtigung der globalen Mindestgröße)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread(ParameterizedThreadStart)}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
\ldots{} auf der Basis eine Instanz von ParameterizedThreadStart\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.17\columnwidth}\raggedright
\texttt{Thread(ParameterizedThreadStart,\ Int32)}\strut
\end{minipage} & \begin{minipage}[t]{0.77\columnwidth}\raggedright
\ldots{} auf der Basis eine Instanz von ParameterizedThreadStart unter
Angabe der Größe des Stacks\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// impliziter Cast zu ParameterizedThreadStart}
\NormalTok{Thread threadB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(ExecuteB);   }
\NormalTok{threadB.}\FunctionTok{Start}\NormalTok{(}\StringTok{"abc"}\NormalTok{);}

\CommentTok{// impliziter Cast und unmittelbarer Start}
\DataTypeTok{var}\NormalTok{ threadC }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(SomeMethod).}\FunctionTok{Start}\NormalTok{();}
\end{Highlighting}
\end{Shaded}

\textbf{Ergänzen Sie das oben aufgeführte Beispiel
\texttt{ThreadApplicationPrinter} um die Möglichkeit das auszugebene
Zeichen als Parameter zu übergeben!}

\hypertarget{datenaustausch-zwischen-threads}{%
\subsection{Datenaustausch zwischen
Threads}\label{datenaustausch-zwischen-threads}}

Jeder Thread realisiert dabei seinen eigenen Speicher, so dass die
lokalen Variablen separat abgelegt werden. Die Verwendung der lokalen
Variablen ist entsprechend geschützt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Execute}\NormalTok{(}\DataTypeTok{object}\NormalTok{ output)\{}
      \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{10}\NormalTok{;  i++)\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(output + i.}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{      \}}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
        \KeywordTok{new} \FunctionTok{Thread}\NormalTok{(Execute).}\FunctionTok{Start}\NormalTok{(}\StringTok{"New Tread :"}\NormalTok{);}
        \FunctionTok{Execute}\NormalTok{(}\StringTok{"MainTread :"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\textbf{Warum werden die beiden Threads ohne Unterbrechung sequentiell
abgearbeitet? Welche Ergänzung ist notwendig, um einen zyklischen
Wechsel zu erzwingen?}

Auf dem individuellen Stack eigenen Kopien der lokale Variablen
\texttt{count} angelegt, so dass die beiden Threads keine Interaktion
realisieren.

Was aber, wenn ein Datenaustausch realisiert werden soll? Eine
Möglichkeit der Interaktion sind entsprechende Felder innerhalb einer
gemeinsamen Objektinstanz.

Welches Problem ergibt sich aber dabei?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ InteractiveThreads}
\NormalTok{\{}
  \CommentTok{// Gemeinsames Member der Klasse}
    \CommentTok{//[ThreadStatic] // <- gemeinsames Member innerhalb eines Threads}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ count = }\DecValTok{0}\NormalTok{;}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{AddOne}\NormalTok{()\{}
\NormalTok{        count++;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Nachher \{0\}"}\NormalTok{, count);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        InteractiveThreads myThreads = }\KeywordTok{new} \FunctionTok{InteractiveThreads}\NormalTok{();}
        \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{100}\NormalTok{; i++)\{}
          \KeywordTok{new} \FunctionTok{Thread}\NormalTok{(myThreads.}\FunctionTok{AddOne}\NormalTok{).}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        \}}
\NormalTok{        Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{10000}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{ Fertig \{0\}"}\NormalTok{, InteractiveThreads.}\FunctionTok{count}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{locking}{%
\subsection{Locking}\label{locking}}

Locking und Threadsicherheit sind zentrale Herausforderungen bei der
Arbeit mit Multithread-Anwendungen. Wie können wir im vorhergehenden
Beispiel sicherstellen, dass zwischen dem Laden von threadcount in ein
Register, der Inkrementierung und dem zurückschreiben nicht ein anderer
Thread den Wert zwischenzeitlich manipuliert hat.

Für eine binäre Variable wird dabei von einem Test-And-Set Mechanisms
gesprochen der Thread-sicher sein muss. Wie können wir dies erreichen?
Die Prüfung und Manipulation muss atomar ausgeführt werden, dass heißt
an dieser Stelle darf der ausführende Thread nicht verdrängt werden.

Darauf aufbauend implementiert C\# verschiedene Methoden:

\begin{longtable}[]{@{}ll@{}}
\toprule
Threadsicherheit & Bemerkung\tabularnewline
\midrule
\endhead
``exclusive lock'' & Alleiniger Zugriff auf eine
Codeabschnitt\tabularnewline
Monitor & Erweiterter \texttt{lock} mit Berücksichtigung von
Ausnahmen\tabularnewline
Mutex & Prozessübergreifende exklusive Sperrung\tabularnewline
Semaphor & Zugriff auf einen Codeabschnitt durch n
Threads\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{static} \KeywordTok{readonly} \DataTypeTok{object}\NormalTok{ locker = }\KeywordTok{new} \DataTypeTok{object}\NormalTok{();}

\KeywordTok{lock}\NormalTok{(locker)\{}
  \CommentTok{// kritische Region}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ InteractiveThreads\{}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ count = }\DecValTok{0}\NormalTok{;}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{AddOne}\NormalTok{()\{}
    \KeywordTok{lock}\NormalTok{(}\KeywordTok{this}\NormalTok{)}
\NormalTok{    \{}
\NormalTok{        count = count + }\DecValTok{1}\NormalTok{;}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"count \{0\}"}\NormalTok{, count);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        InteractiveThreads myThreads = }\KeywordTok{new} \FunctionTok{InteractiveThreads}\NormalTok{();}
        \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{10}\NormalTok{; i++)\{}
          \KeywordTok{new} \FunctionTok{Thread}\NormalTok{(myThreads.}\FunctionTok{AddOne}\NormalTok{).}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        \}}
\NormalTok{        Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1000}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{hintergrund-und-vordergrund-threads}{%
\subsection{Hintergrund und
Vordergrund-Threads}\label{hintergrund-und-vordergrund-threads}}

Verwalteter Threads können als Hintergrund- oder Vordergrundthread
definiert sein. Hintergrundthreads unterscheiden sich von
Vordergrundthreads durch die Beibehaltung der Ausführungsumgebung nach
dem Abschluss. Sobald alle Vordergrundthreads in einem verwalteten
Prozess (wobei die EXE-Datei eine verwaltete Assembly ist) beendet sind,
beendet das System alle Hintergrundthreads und fährt herunter.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Printer\{}
  \DataTypeTok{char}\NormalTok{ ch;}
  \DataTypeTok{int}\NormalTok{ sleepTime;}

  \KeywordTok{public} \FunctionTok{Printer}\NormalTok{(}\DataTypeTok{char}\NormalTok{ c, }\DataTypeTok{int}\NormalTok{ t)\{}
\NormalTok{    ch = c;}
\NormalTok{    sleepTime = t;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{()\{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{10}\NormalTok{;  i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(ch);}
\NormalTok{      Thread.}\FunctionTok{Sleep}\NormalTok{(sleepTime);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{printThreadProperties}\NormalTok{(Thread currentThread)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} - \{1\} - \{2\}"}\NormalTok{, currentThread.}\FunctionTok{Name}\NormalTok{,}
\NormalTok{                                           currentThread.}\FunctionTok{Priority}\NormalTok{,}
\NormalTok{                                           currentThread.}\FunctionTok{IsBackground}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Thread MainThread = Thread.}\FunctionTok{CurrentThread}\NormalTok{;}
\NormalTok{        MainThread.}\FunctionTok{Name}\NormalTok{ = }\StringTok{"MainThread"}\NormalTok{;}
        \FunctionTok{printThreadProperties}\NormalTok{(MainThread);}
\NormalTok{        Printer a = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'a'}\NormalTok{, }\DecValTok{170}\NormalTok{);}
\NormalTok{        Printer b = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'b'}\NormalTok{, }\DecValTok{50}\NormalTok{);}
\NormalTok{        Printer c = }\KeywordTok{new} \FunctionTok{Printer}\NormalTok{ (}\CharTok{'c'}\NormalTok{, }\DecValTok{10}\NormalTok{);}
\NormalTok{        Thread PrinterA = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(a.}\FunctionTok{Print}\NormalTok{));}
\NormalTok{        PrinterA.}\FunctionTok{IsBackground}\NormalTok{ = }\KeywordTok{false}\NormalTok{;}
\NormalTok{        Thread PrinterB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{(}\KeywordTok{new} \FunctionTok{ThreadStart}\NormalTok{(b.}\FunctionTok{Print}\NormalTok{));}
        \FunctionTok{printThreadProperties}\NormalTok{(PrinterA);}
        \FunctionTok{printThreadProperties}\NormalTok{(PrinterB);}
\NormalTok{        PrinterA.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        PrinterB.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{        c.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{ausnahmebehandlung-mit-threads}{%
\subsection{Ausnahmebehandlung mit
Threads}\label{ausnahmebehandlung-mit-threads}}

Ab .NET Framework, Version 2.0, erlaubt die CLR bei den meisten
Ausnahmefehlern in Threads deren ordnungsgemäße Fortsetzung. Allerdings
ist zu beachten, dass die Fehlerbehandlung innerhalb des Threads zu
erfolgen hat. Unbehandelte Ausnahmen auf der Thread-Ebene führen in der
Regel zum Abbruch des gesamten Programms.

\begin{quote}
Verschieben Sie die Fehlerbehandlung in den Thread!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Calculate}\NormalTok{(}\DataTypeTok{object}\NormalTok{ value)\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\DecValTok{5}\NormalTok{ / (}\DataTypeTok{int}\NormalTok{)value);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Thread myThread = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{ (Calculate);}
    \KeywordTok{try}\NormalTok{\{}
\NormalTok{      myThread.}\FunctionTok{Start}\NormalTok{(}\DecValTok{0}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{catch}\NormalTok{(DivideByZeroException)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Achtung - Division durch Null"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Analog kann das Abbrechen eines Threads als Ausnahme erkannt und in
einer Behandlungsroutine organsiert werden.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Beispiel aus Mösenböck, Kompaktkurs C# 7, Seite 159}
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Operate}\NormalTok{()\{}
    \KeywordTok{try}\NormalTok{\{}
      \KeywordTok{try}\NormalTok{\{}
        \KeywordTok{try}\NormalTok{\{}
          \KeywordTok{while}\NormalTok{ (}\KeywordTok{true}\NormalTok{);}
\NormalTok{        \}}\KeywordTok{catch}\NormalTok{ (ThreadAbortException)\{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"inner aborted"}\NormalTok{);\}}
\NormalTok{      \}}\KeywordTok{catch}\NormalTok{ (ThreadAbortException)\{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"outer aborted"}\NormalTok{);\}}
\NormalTok{    \}}\KeywordTok{finally}\NormalTok{ \{Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"finally"}\NormalTok{);\}}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Thread myThread = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{ (Operate);}
\NormalTok{    myThread.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1}\NormalTok{);}
\NormalTok{    myThread.}\FunctionTok{Abort}\NormalTok{();   }\CommentTok{// <- Expliziter Abbruch des Threads}
\NormalTok{    myThread.}\FunctionTok{Join}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"done"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{thread-pool}{%
\section{Thread-Pool}\label{thread-pool}}

Wann immer ein neuer Thread gestartet wird, bedarf es einiger 100
Millisekunden, um Speicher anzufordern, ihn zu initialisieren, usw.
Diese relativ aufwändige Verfahren wird durch die Nutzung von
ThreadPools beschränkt, da diese als wiederverwendbare Threads
vorgesehen sind.

Die \texttt{System.Threading.ThreadPool}-Klasse stellt einer Anwendung
einen Pool von ``Arbeitsthreads'' bereit, die vom System verwaltet
werden und Ihnen die Möglichkeit bieten, sich mehr auf
Anwendungsaufgaben als auf die Threadverwaltung zu konzentrieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \CommentTok{// This thread procedure performs the task.}
  \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Operate}\NormalTok{(Object stateInfo)}
\NormalTok{  \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Hello from the thread pool."}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    ThreadPool.}\FunctionTok{QueueUserWorkItem}\NormalTok{(Operate);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Main thread does some work, then sleeps."}\NormalTok{);}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1000}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Main thread exits."}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Das klingt sehr praktisch, was aber sind die Einschränkungen?

\begin{itemize}
\tightlist
\item
  Für die Threads können keine Namen vergeben werden, damit wird das
  Debugging ggf. schwieriger.
\item
  Pooled Threads sind immer Background-Threads
\item
  Sie können keine individuellen Prioritäten festlegen.
\item
  Blockierte Threads im Pool senken die entsprechende Performance des
  Pools
\end{itemize}

\hypertarget{aufgaben-der-woche-4}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche-4}}

\begin{itemize}
\tightlist
\item
  {[} {]}
\end{itemize}

\hypertarget{tasks}{%
\chapter{Tasks}\label{tasks}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Tasks\ und\ deren\ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/24_Tasks.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{logging}{%
\section{Logging}\label{logging}}

Unsere Ausgaben in der Console können auf Dauer ziemlich nerven \ldots{}

\begin{quote}
Lösung: Verwenden Sie ein Logging Framework!
\end{quote}

\begin{itemize}
\tightlist
\item
  https://logging.apache.org/log4net/release/manual/configuration.html
\item
  https://blog.elmah.io/log4net-tutorial-the-complete-guide-for-beginners-and-pros/
\end{itemize}

\begin{verbatim}
<log4net>
    <!-- A1 is set to be a ConsoleAppender -->
    <appender name="A1" type="log4net.Appender.ConsoleAppender">
 
        <!-- A1 uses PatternLayout -->
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%-4timestamp [%thread] %-5level %logger %ndc - %message%newline" />
        </layout>
    </appender>
    
    <!-- Set root logger level to DEBUG and its only appender to A1 -->
    <root>
        <level value="DEBUG" />
        <appender-ref ref="A1" />
    </root>
</log4net>
\end{verbatim}

\hypertarget{tasks-1}{%
\section{Tasks}\label{tasks-1}}

Die prozdedurale/objektorientierte Programmierung basiert auf der Idee,
dass ausgehend von einem Hauptprogramm Methoden aufgerufen werden, deren
Abarbeitung realisiert wird und danach zum Hauptprogramm zurückgekehrt
wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{TransmitsMessage}\NormalTok{(}\DataTypeTok{string}\NormalTok{ output)\{}
\NormalTok{    Random rnd = }\KeywordTok{new} \FunctionTok{Random}\NormalTok{();}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(output);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \FunctionTok{TransmitsMessage}\NormalTok{(}\StringTok{"Here we are"}\NormalTok{);}
    \FunctionTok{TransmitsMessage}\NormalTok{(}\StringTok{"Best wishes from Freiberg"}\NormalTok{);}
    \FunctionTok{TransmitsMessage}\NormalTok{(}\StringTok{"Nice to meet you"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

An dieser Stelle spricht man von \textbf{synchronen} Methodenaufrufen.
Das Hauptprogramm (Rufer oder Caller) stoppt, wartet auf den Abschluss
des aufgerufenen Programms und setzt seine Bearbeitung erst dann fort.
Das blockierende Verhalten des Rufers generiert aber einen
entscheidenden Nachteil - eine fehlende Reaktionsfähigkeit für die Zeit,
in der die aufgerufene Methode zum Beispiel eine Netzwerkverbindung
aufbaut, Daten speichert oder Berechnungen realisiert.

Der Rufer könnte in dieser Zeit auch andere Arbeiten umsetzen. Dafür
muss er aber nach dem Methodenaufruf die Kontrolle zurück bekommen und
kann dann weiterarbeiten.

Ein Beispiel aus der ``Praxis'' - Vorbereitung eines Frühstücks:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Schenken Sie sich eine Tasse Kaffee ein.
\item
  Erhitzen Sie eine Pfanne, und braten Sie darin zwei Eier.
\item
  Braten Sie drei Scheiben Frühstücksspeck.
\item
  Toasten Sie zwei Scheiben Brot.
\item
  Bestreichen Sie das getoastete Brot mit Butter und Marmelade.
\item
  Schenken Sie sich ein Glas Orangensaft ein.
\end{enumerate}

Das anschauliche Beispiel entstammt der Microsoft Dokumentation und ist
unter
https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/concepts/async/
zu finden.

Eine Lösung für diesen Ansatz könnten Threads bieten.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{static} \KeywordTok{public} \DataTypeTok{int}\NormalTok{[] Result = \{ }\DecValTok{0}\NormalTok{, }\DecValTok{0}\NormalTok{, }\DecValTok{0}\NormalTok{\};}
  \KeywordTok{static}\NormalTok{ Random rnd = }\KeywordTok{new} \FunctionTok{Random}\NormalTok{();}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{TransmitsMessage}\NormalTok{(}\DataTypeTok{object}\NormalTok{ index)\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Thread \{0\} started!"}\NormalTok{, Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{ManagedThreadId}\NormalTok{);}
    \CommentTok{// doing some fancy things here}
    \DataTypeTok{int}\NormalTok{ delay = rnd.}\FunctionTok{Next}\NormalTok{(}\DecValTok{200}\NormalTok{, }\DecValTok{500}\NormalTok{);}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(delay);  }\CommentTok{// arbitrary duration}
\NormalTok{    Result[(}\DataTypeTok{int}\NormalTok{)index]= delay;}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Thread \{0\} says Hello"}\NormalTok{, Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{ManagedThreadId}\NormalTok{);}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Thread ThreadA = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{ (TransmitsMessage);}
\NormalTok{    ThreadA.}\FunctionTok{Start}\NormalTok{(}\DecValTok{0}\NormalTok{);}
\NormalTok{    Thread ThreadB = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{ (TransmitsMessage);}
\NormalTok{    ThreadB.}\FunctionTok{Start}\NormalTok{(}\DecValTok{1}\NormalTok{);}
\NormalTok{    Thread ThreadC = }\KeywordTok{new} \FunctionTok{Thread}\NormalTok{ (TransmitsMessage);}
\NormalTok{    ThreadC.}\FunctionTok{Start}\NormalTok{(}\DecValTok{2}\NormalTok{);}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i<}\DecValTok{50}\NormalTok{; i++)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"*"}\NormalTok{);}
\NormalTok{      Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Well done, so far!"}\NormalTok{);}
\NormalTok{    ThreadA.}\FunctionTok{Join}\NormalTok{();}
\NormalTok{    ThreadB.}\FunctionTok{Join}\NormalTok{();}
\NormalTok{    ThreadC.}\FunctionTok{Join}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Aus die Maus!"}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{(}\DataTypeTok{int}\NormalTok{ i }\KeywordTok{in}\NormalTok{ Result)\{}
\NormalTok{      Console.}\FunctionTok{Write}\NormalTok{(}\StringTok{"\{0\} "}\NormalTok{, i);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Welche Nachteile sehen Sie in dieser Lösung?

\hypertarget{task-modell-in-c}{%
\subsection{Task Modell in C}\label{task-modell-in-c}}

C\# stellt für die asynchrone Programmierung einen neuen Typen
\texttt{Task} zur Verfügung und für die \texttt{await} und
\texttt{async} Keywörter ein.

Die \texttt{Task}-Klasse bildet einen einzelnen Vorgang ab, gibt keinen
Wert zurück und wird in der Regel asynchron ausgeführt. \texttt{Task}
Objekte sind eine der zentralen Komponenten von der aufgabenbasierte
asynchrone Muster in .NET Framework 4 eingeführt wurden. Da die Arbeit,
indem geleistet eine Task Objekt in der Regel führt asynchron auf einem
Threadpool-Thread anstatt synchron auf dem Hauptanwendungsthread, Sie
verwenden die Thread Status-Eigenschaften des Threads, als auch die
\texttt{IsCanceled}, \texttt{IsCompleted}, und \texttt{IsFaulted}
Eigenschaften, um den Status eines Vorgangs zu bestimmen. In den meisten
Fällen wird ein Lambda-Ausdruck verwendet, um die eigentliche Aufgabe zu
spezifizieren.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Task\{}
  \KeywordTok{public} \FunctionTok{Task}\NormalTok{ (Action a);}
  \KeywordTok{public}\NormalTok{ TaskStatus Status \{}\KeywordTok{get}\NormalTok{;\}}
  \KeywordTok{public} \DataTypeTok{bool}\NormalTok{ IsCompleted \{}\KeywordTok{get}\NormalTok{;\}}
  \KeywordTok{public} \KeywordTok{static}\NormalTok{ Task }\FunctionTok{Run}\NormalTok{(Action a);}
  \KeywordTok{public} \KeywordTok{static}\NormalTok{ Task }\FunctionTok{Delay}\NormalTok{(}\DataTypeTok{int}\NormalTok{ n);}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Wait}\NormalTok{();}
\NormalTok{  ...}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Task<T>: Task\{}
  \KeywordTok{public} \FunctionTok{Task}\NormalTok{ (Func<T> f);}
\NormalTok{  ...}
  \KeywordTok{public} \KeywordTok{static}\NormalTok{ Task<T> }\FunctionTok{Run}\NormalTok{ (Func <T> f);}
\NormalTok{  ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die Anwendung erfolgt dabei dem Muster:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Task task = }\KeywordTok{new} \FunctionTok{Task}\NormalTok{(() => \{... Anweisungsblock ...\});}
\NormalTok{Task.}\FunctionTok{Start}\NormalTok{();}
\end{Highlighting}
\end{Shaded}

Hierbei wird deutlich, dass das \texttt{Task}-Objekt auf einem
\texttt{Thread} aufbaut und lediglich eine höhere Abstraktionsstufe
darstellt. Der verkürzte Aufruf mittels der statischen
\texttt{Run}-Methode realisiert das gleiche Verhalten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Task task = Task.}\FunctionTok{Run}\NormalTok{(() => \{... Anweisungsblock ...\});}
\end{Highlighting}
\end{Shaded}

Es wäre nun möglich diesen laufenden Task aus dem Main-Thread anhand
seiner Variablen \texttt{IsCompleted} zu überwachen oder mit
\texttt{join} erfassen, um die Fertigstellung zu erkennen. Dieses
Verhalten lässt sich zwar auch mit Threads umsetzen, mit dem höheren
Abstraktionsgrad lässt sich die Komplexität des Aufrufes aber
reduzieren.

Um für die Durchführung einer einzelnen Aufgabe zu warten, rufen Sie die
Task. \texttt{Wait} Methode. Ein Aufruf der Wait Methode blockiert den
aufrufenden Thread, bis die Instanz der Klasse die Ausführung
abgeschlossen hat.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Motiviert aus}
\CommentTok{// https://docs.microsoft.com/de-de/dotnet/api/system.threading.tasks.task?view=netframework-4.8}
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{.}\FunctionTok{Tasks}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Example}
\NormalTok{\{}
   \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{doSomething}\NormalTok{()\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Say hello!"}\NormalTok{);}
\NormalTok{   \}}

   \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{()}
\NormalTok{   \{}
\NormalTok{      Action<}\DataTypeTok{object}\NormalTok{> action = (}\DataTypeTok{object}\NormalTok{ obj) =>}
\NormalTok{                                    \{}
\NormalTok{                                       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Task=\{0\}, obj=\{1\}, Thread=\{2\}"}\NormalTok{,}
\NormalTok{                                       Task.}\FunctionTok{CurrentId}\NormalTok{, obj,}
\NormalTok{                                       Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{ManagedThreadId}\NormalTok{);}
\NormalTok{                                    \};}

      \CommentTok{// Create a task but do not start it.}
\NormalTok{      Task t1 = }\KeywordTok{new} \FunctionTok{Task}\NormalTok{(action, }\StringTok{"alpha"}\NormalTok{);}
\NormalTok{      t1.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"t1 has been launched. (Main Thread=\{0\})"}\NormalTok{,}
\NormalTok{                                Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{ManagedThreadId}\NormalTok{);}

      \CommentTok{// Nur der Vollständigkeit halber ...}
\NormalTok{      Task t2 = }\KeywordTok{new} \FunctionTok{Task}\NormalTok{(doSomething);}
\NormalTok{      t2.}\FunctionTok{Start}\NormalTok{();}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"t2 has been launched. (Main Thread=\{0\})"}\NormalTok{,}
\NormalTok{                                Thread.}\FunctionTok{CurrentThread}\NormalTok{.}\FunctionTok{ManagedThreadId}\NormalTok{);                            }


\NormalTok{      Task t3 = Task.}\FunctionTok{Run}\NormalTok{( () => \{}
                                  \CommentTok{// Just loop.}
                                  \DataTypeTok{int}\NormalTok{ ctr = }\DecValTok{0}\NormalTok{;}
                                  \KeywordTok{for}\NormalTok{ (ctr = }\DecValTok{0}\NormalTok{; ctr <= }\DecValTok{1000000}\NormalTok{; ctr++)}
\NormalTok{                                  \{\}}
\NormalTok{                                  Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Finished \{0\} loop iterations"}\NormalTok{,}
\NormalTok{                                                    ctr);}
\NormalTok{                               \} );}
\NormalTok{      t3.}\FunctionTok{Wait}\NormalTok{();}
\NormalTok{   \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\texttt{Wait} ermöglicht auch die Beschränkung der Wartezeit auf ein
bestimmtes Zeitintervall.Die \texttt{Wait(Int32)} und
\texttt{Wait(TimeSpan)} Methoden blockiert den aufrufenden Thread, bis
die Aufgabe abgeschlossen ist oder ein Timeoutintervall abläuft, welcher
Fall zuerst eintritt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{.}\FunctionTok{Tasks}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// Wait on a single task with a timeout specified.}
\NormalTok{    Task taskA = Task.}\FunctionTok{Run}\NormalTok{( () => Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{2000}\NormalTok{));}
    \KeywordTok{try}\NormalTok{ \{}
\NormalTok{      taskA.}\FunctionTok{Wait}\NormalTok{(}\DecValTok{1000}\NormalTok{);       }\CommentTok{// Wait for 1 second.}
      \DataTypeTok{bool}\NormalTok{ completed = taskA.}\FunctionTok{IsCompleted}\NormalTok{;}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Task A completed: \{0\}, Status: \{1\}"}\NormalTok{,}
\NormalTok{                       completed, taskA.}\FunctionTok{Status}\NormalTok{);}
      \KeywordTok{if}\NormalTok{ (! completed)}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Timed out before task A completed."}\NormalTok{);}
\NormalTok{     \}}
     \KeywordTok{catch}\NormalTok{ (AggregateException) \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Exception in taskA."}\NormalTok{);}
\NormalTok{     \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Für komplexe Taskstrukturen kann man diese zum Beispiel in Arrays
arrangieren. Für diese Reihe von Aufgaben jeweils durch Aufrufen der
\texttt{Wait} Methode zu warten wäre aufwändig und wenig praktisch.
\texttt{WaitAll} schließt diese Lücke und erlaubt eine übergreifende
Überwachung.

Das folgenden Beispiel werden zehn Aufgaben erstellt, die wartet, bis
alle zehn abgeschlossen werden, und klicken Sie dann ihren Status
angezeigt.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{.}\FunctionTok{Tasks}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// Wait for all tasks to complete.}
\NormalTok{    Task[] tasks = }\KeywordTok{new}\NormalTok{ Task[}\DecValTok{10}\NormalTok{];}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < }\DecValTok{10}\NormalTok{; i++)}
\NormalTok{    \{}
\NormalTok{        tasks[i] = Task.}\FunctionTok{Run}\NormalTok{(() => Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{2000}\NormalTok{));}
\NormalTok{    \}}

    \KeywordTok{try}\NormalTok{ \{}
\NormalTok{       Task.}\FunctionTok{WaitAll}\NormalTok{(tasks);}
\NormalTok{    \}}
    \KeywordTok{catch}\NormalTok{ (AggregateException ae) \{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"One or more exceptions occurred: "}\NormalTok{);}
       \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ ex }\KeywordTok{in}\NormalTok{ ae.}\FunctionTok{Flatten}\NormalTok{().}\FunctionTok{InnerExceptions}\NormalTok{)}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"   \{0\}"}\NormalTok{, ex.}\FunctionTok{Message}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Status of completed tasks:"}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ t }\KeywordTok{in}\NormalTok{ tasks)}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"   Task #\{0\}: \{1\}"}\NormalTok{, t.}\FunctionTok{Id}\NormalTok{, t.}\FunctionTok{Status}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Kanon der Möglichkeiten wird aber deutlich erweitert, wenn ein
konkreter Rückgabewert genutzt werden soll. Anstatt wie bei Threads mit
einer entsprechenden ``außen stehenden'' Variablen zu arbeiten, wird das
Ergebnis im \texttt{Task}-Objekt selbst gespeichert und kann dann
abgerufen werden. Dieser Aspekt wird über die generische Konfiguration
des Tasks abgebildet:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Task<}\DataTypeTok{int}\NormalTok{> task = Task.}\FunctionTok{Run}\NormalTok{(() => \{}\DataTypeTok{int}\NormalTok{ i;}
                                 \CommentTok{//... Anweisungsblock ...;}
                                 \KeywordTok{return}\NormalTok{ i\});}
\end{Highlighting}
\end{Shaded}

Wie ist dieser Aufruf zu verstehen? Unser Task gibt anders als bei der
synchronen Abarbeitung nicht unmittelbar mit dem Ende der Bearbeitung
einen Wert zurück, sondern verspricht zu einem späteren Zeitpunkt einen
Wert in einem bestimmten Format zu liefern. Dank der generischen
Realisierung können dies beliebige Objekte sein.

Wie aber erfolgt die Rückgabe wann?

\hypertarget{asynchrone-methoden}{%
\subsection{Asynchrone Methoden}\label{asynchrone-methoden}}

Eine asynchrone Methode ruft einen Task auf, setzt die eigene
Bearbeitung aber fort und wartet auf dessen Beendigung.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aync }\DataTypeTok{void} \FunctionTok{DoAsync}\NormalTok{()\{}
\NormalTok{  Task<}\DataTypeTok{int}\NormalTok{> task = Task.}\FunctionTok{Run}\NormalTok{(() => \{}\DataTypeTok{int}\NormalTok{ i;}
                                   \CommentTok{// Berechnungen}
                                   \KeywordTok{return}\NormalTok{ i;\}}
  \CommentTok{// Instruktionen I}
  \CommentTok{// Methoden, die nach der Rückkehr nach DoAsync ausgeführt werden.}
  \DataTypeTok{int}\NormalTok{ result = await task;}
  \CommentTok{// Instruktionen II}
  \CommentTok{// Hier wird nun mit dem Ergebnis result weitergearbeitet}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Das Ergebnis der Operation hängt dabei davon ab, welche Zeitabläufe sich
im Programmablauf ergeben.

\textbf{Fall I} Das Ergebnis der Lambdafunktion liegt vor, bevor DoAsync
die Zeile mit await erreicht hat (Quasi-Synchroner Fall)

\begin{verbatim}
      Rufer(main)
        |
        v
                           DoAnsync()
      DoAsync() - - - - - - - >|
                               |
                               v
                                                    ()=＞{..}
                      task=Task.Run(()=＞{..};   - - - >|
                               |                       |
              Instruktionen I  |        results        v
                               | < - - - - - - - - - - -
              Instruktionen II |
                               v
         < - - - - - - - - - - -
        |
        v
\end{verbatim}

\textbf{Fall II} Das Ergebnis der Lambdafunktion liegt erst später,
nachdem DoAsync die Zeile mit await erreicht hat (und bereits nach main
zurückgekehrt ist)

\begin{verbatim}
      Rufer(main)
        |
        v
                           DoAnsync()
      DoAsync() - - - - - - - >|
                               |
                               v
                                                    ()=＞{..}
                      task=Task.Run(()=＞{..}; - - - - >|
                               |                       |
              Instruktionen I  |        results        |
                               |                       |
         < - - - - - - - - - - -                       |
        |                                              |
        |                                              |
        |                      |<----------------------|
        |     Instruktionen II |
        |                      |
        |                      v
        v
\end{verbatim}

Zwei sehr anschauliche Beispiele finden sich im Code Ordner des
Projekts.

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.44\columnwidth}\raggedright
Beispiel\strut
\end{minipage} & \begin{minipage}[b]{0.50\columnwidth}\raggedright
Bemerkung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.44\columnwidth}\raggedright
\href{https://github.com/liaScript/CsharpCourse/blob/master/code/23_Tasks/AsyncExampleI.cs}{AsyncExampleI.cs}\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Generelle Einbettung des asynchronen Tasks\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.44\columnwidth}\raggedright
\href{https://github.com/liaScript/CsharpCourse/blob/master/code/23_Tasks/AsyncExampleII.cs}{AsyncExampleII.cs}\strut
\end{minipage} & \begin{minipage}[t]{0.50\columnwidth}\raggedright
Illustration der Interaktionsfähigkeit eines asynchronen Programmes, das
Berechnungen und Nutzereingaben gleichermaßen realisiert.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{aufgaben-der-woche-5}{%
\section{Aufgaben der Woche}\label{aufgaben-der-woche-5}}

\begin{itemize}
\tightlist
\item
  {[} {]}
\end{itemize}

\hypertarget{language-integrated-query}{%
\chapter{Language-Integrated Query}\label{language-integrated-query}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{LINQ\ Konzepte\ und\ Anwendung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/25_LINQ.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{motivation-2}{%
\section{Motivation}\label{motivation-2}}

Gegeben sei das Datenset eines Comic-Begeisterten in Form einer
generischen Liste \texttt{List\textless{}T\textgreater{}}.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Bestimmen Sie die Zahl der Einträge unseres Datensatzes
\item
  Filtern Sie die Liste der Comic Figuren nach dem Alter und
\item
  Sortieren Sie die Liste nach dem Anfangsbuchstaben des Namens.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Character\{}
  \KeywordTok{protected} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ Count;}
  \DataTypeTok{int}\NormalTok{ index;}
  \KeywordTok{public} \FunctionTok{Character}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ geburtsjahr)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{geburtsjahr}\NormalTok{ = geburtsjahr;}
\NormalTok{    index = Count;}
\NormalTok{    Count = Count + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \DataTypeTok{string}\NormalTok{ row = }\DataTypeTok{string}\NormalTok{.}\FunctionTok{Format}\NormalTok{(}\StringTok{"|\{0,6\} | \{1,-15\} | \{2,8\} |"}\NormalTok{,}
\NormalTok{                                    index, name, geburtsjahr);}
    \KeywordTok{return}\NormalTok{ row;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    List<Character> ComicHeros = }\KeywordTok{new}\NormalTok{ List<Character>\{}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Spiderman"}\NormalTok{, }\DecValTok{1962}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Donald Duck"}\NormalTok{, }\DecValTok{1931}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Superman"}\NormalTok{, }\DecValTok{1938}\NormalTok{)}
\NormalTok{    \};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Alle Einträge in der Datenbank:"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"| Index | Name            | Ursprung |"}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{ (Character c }\KeywordTok{in}\NormalTok{ ComicHeros)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(c);}
\NormalTok{    \}}
    \CommentTok{// Und nun? Wie filtern wir?}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die intuitive Lösung könnte folgendermaßen daher kommen:

Die Dokumentation von \texttt{List\textless{}T\textgreater{}} findet
sich unter folgendem
\href{https://docs.microsoft.com/de-de/dotnet/api/system.collections.generic.list-1.removeall?view=netcore-3.1}{Link}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Wir ``erinnern'' uns an das \texttt{Count} Member der Klasse
  \texttt{List}.
\item
  Für die Filteroperation implementieren Sie eine Loop. Sie können dazu
  \texttt{foreach} verwenden, weil
  \texttt{List\textless{}T\textgreater{}} das Interface
  \texttt{IEnumerable} implementiert.
\item
  Die Sortieroperation bedingt die Anwendung einer Vergleichsoperation
  zwischen den Elementen der Liste. Eine Variante ist die
  Implementierung des Interfaces \texttt{IComparable} zu diesem Zweck.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Character: IComparable\{}
  \KeywordTok{protected} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ geburtsjahr;}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ Count;}
  \DataTypeTok{int}\NormalTok{ index;}
  \KeywordTok{public} \FunctionTok{Character}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ geburtsjahr)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{geburtsjahr}\NormalTok{ = geburtsjahr;}
\NormalTok{    index = Count;}
\NormalTok{    Count = Count + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \DataTypeTok{string}\NormalTok{ row = }\DataTypeTok{string}\NormalTok{.}\FunctionTok{Format}\NormalTok{(}\StringTok{"|\{0,6\} | \{1,-15\} | \{2,8\} |"}\NormalTok{,}
\NormalTok{                                    index, name, geburtsjahr);}
    \KeywordTok{return}\NormalTok{ row;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{CompareTo}\NormalTok{(}\DataTypeTok{object}\NormalTok{ obj)\{}
    \KeywordTok{if}\NormalTok{ (obj == }\KeywordTok{null}\NormalTok{) }\KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    Character otherCharacter = obj }\KeywordTok{as}\NormalTok{ Character;}
    \KeywordTok{return} \DataTypeTok{string}\NormalTok{.}\FunctionTok{Compare}\NormalTok{(}\KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{, otherCharacter.}\FunctionTok{name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    List<Character> ComicHeros = }\KeywordTok{new}\NormalTok{ List<Character>\{}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Spiderman"}\NormalTok{, }\DecValTok{1962}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Donald Duck"}\NormalTok{, }\DecValTok{1931}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Superman"}\NormalTok{, }\DecValTok{1938}\NormalTok{)}
\NormalTok{    \};}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Einträge in der Datenbank: \{ComicHeros.Count\}"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Gefilterte Einträge in der Datenbank:"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"| Index | Name            | Ursprung |"}\NormalTok{);}
\NormalTok{    List<Character> ComicHerosFiltered = }\KeywordTok{new}\NormalTok{ List<Character>();}
    \KeywordTok{foreach}\NormalTok{ (Character c }\KeywordTok{in}\NormalTok{ ComicHeros)\{}
      \KeywordTok{if}\NormalTok{ (c.}\FunctionTok{geburtsjahr}\NormalTok{ < }\DecValTok{1950}\NormalTok{) ComicHerosFiltered.}\FunctionTok{Add}\NormalTok{(c);}
\NormalTok{    \}}
    \KeywordTok{foreach}\NormalTok{ (Character c }\KeywordTok{in}\NormalTok{ ComicHerosFiltered)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(c);}
\NormalTok{    \}}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Sortierte Einträge in der Datenbank:"}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"| Index | Name            | Ursprung |"}\NormalTok{);}
\NormalTok{    ComicHeros.}\FunctionTok{Sort}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (Character c }\KeywordTok{in}\NormalTok{ ComicHeros)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(c);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Eine Menge Aufwand für einen simple Operation! Welche zusätzlichen
Probleme werden auftreten, wenn Sie eine solche Kette aus
Datenerfassung, Verarbeitung und Ausgabe in realen Anwendungen umsetzen?
\end{quote}

Alternativ schauen wir uns weiter im Kanon der
\texttt{List\textless{}T\textgreater{}} Klasse um und realisieren die
Methoden \texttt{RemoveAll()} oder \texttt{Sort()}.

\texttt{RemoveAll()} zum Beispiel entfernt alle Elemente, die mit den
Bedingungen übereinstimmen, die durch das angegebene Prädikat definiert
werden. Interessant ist dabei die Umsetzung. Ein Prädikat ist eine
generischer Delegat der einen Instanzen eines Typs \texttt{T} auf ein
Kriterium hin evaluiert und einen Bool-Wert als Ausgabe generiert.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \DataTypeTok{int} \FunctionTok{RemoveAll}\NormalTok{ (Predicate<T> match);}
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{bool}\NormalTok{ Predicate<}\KeywordTok{in}\NormalTok{ T>(T obj);}
\end{Highlighting}
\end{Shaded}

Analog kann \texttt{Sort()} mit einem entsprechenden Delegaten
\texttt{Comparison} verknüpft werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \DataTypeTok{void} \FunctionTok{Sort}\NormalTok{ (Comparison<T> comparison);}
\KeywordTok{public} \KeywordTok{delegate} \DataTypeTok{int}\NormalTok{ Comparison<}\KeywordTok{in}\NormalTok{ T>(T x, T y);}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Character: IComparable\{}
  \KeywordTok{protected} \DataTypeTok{string}\NormalTok{ name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ year;}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ Count;}
  \DataTypeTok{int}\NormalTok{ index;}
  \KeywordTok{public} \FunctionTok{Character}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name, }\DataTypeTok{int}\NormalTok{ year)\{}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
    \KeywordTok{this}\NormalTok{.}\FunctionTok{year}\NormalTok{ = year;}
\NormalTok{    index = Count;}
\NormalTok{    Count = Count + }\DecValTok{1}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
    \DataTypeTok{string}\NormalTok{ row = }\DataTypeTok{string}\NormalTok{.}\FunctionTok{Format}\NormalTok{(}\StringTok{"|\{0,6\} | \{1,-15\} | \{2,8\} |"}\NormalTok{,}
\NormalTok{                                    index, name, year);}
    \KeywordTok{return}\NormalTok{ row;}
\NormalTok{  \}}

  \KeywordTok{public} \DataTypeTok{int} \FunctionTok{CompareTo}\NormalTok{(}\DataTypeTok{object}\NormalTok{ obj)\{}
    \KeywordTok{if}\NormalTok{ (obj == }\KeywordTok{null}\NormalTok{) }\KeywordTok{return} \DecValTok{1}\NormalTok{;}
\NormalTok{    Character otherCharacter = obj }\KeywordTok{as}\NormalTok{ Character;}
    \KeywordTok{return} \DataTypeTok{string}\NormalTok{.}\FunctionTok{Compare}\NormalTok{(}\KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{, otherCharacter.}\FunctionTok{name}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{bool} \FunctionTok{before1950}\NormalTok{(Character entry)}
\NormalTok{  \{}
    \KeywordTok{return}\NormalTok{ entry.}\FunctionTok{year}\NormalTok{ > }\DecValTok{1950}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{private} \KeywordTok{static} \DataTypeTok{int} \FunctionTok{sortByYear}\NormalTok{(Character x, Character y)}
\NormalTok{  \{}
     \DataTypeTok{int}\NormalTok{ output = }\DecValTok{0}\NormalTok{;}
     \KeywordTok{if}\NormalTok{ (y.}\FunctionTok{year}\NormalTok{ < x.}\FunctionTok{year}\NormalTok{) output = }\DecValTok{1}\NormalTok{;}
     \KeywordTok{if}\NormalTok{ (y.}\FunctionTok{year}\NormalTok{ > x.}\FunctionTok{year}\NormalTok{) output = }\DecValTok{-1}\NormalTok{;}
     \KeywordTok{return}\NormalTok{ output;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    List<Character> ComicHeros = }\KeywordTok{new}\NormalTok{ List<Character>\{}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Spiderman"}\NormalTok{, }\DecValTok{1962}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Donald Duck"}\NormalTok{, }\DecValTok{1931}\NormalTok{),}
       \KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Superman"}\NormalTok{, }\DecValTok{1938}\NormalTok{)}
\NormalTok{    \};}
\NormalTok{    ComicHeros.}\FunctionTok{RemoveAll}\NormalTok{(before1950);}
    \CommentTok{//ComicHeros.RemoveAll(x => x.year > 1950);}
    \CommentTok{//ComicHeros.Sort(sortByYear);}
    \KeywordTok{foreach}\NormalTok{ (Character c }\KeywordTok{in}\NormalTok{ ComicHeros)\{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(c);}
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Allerdings bleibt die Darstellung von komplexeren Abfragen wie
\texttt{filtere\ die\ Helden\ heraus,\ die\ vor\ 1950\ geboren\ sind,\ extrahiere\ die\ Vornamen\ und\ sortiere\ diese\ in\ Aufsteigender\ alphabetischer\ Folge}
zu einem unübersichtlichen Darstellungsformat.

Die Methoden für den Datenzugriff und die Manipulation abhängig vom
Datentyp (Felder, Objektlisten) und der Herkunft (XML-Dokumente,
Datenbanken, Excel-Dateien, usw.).

Welche alternativen Konzepte bestehen für die Verarbeitung von
datengetriebenen Anfragen?

\hypertarget{exkurs-sql}{%
\subsection{Exkurs SQL}\label{exkurs-sql}}

Hier folgt ein kurzer Einschub zum Thema \emph{Structured Query
Language} (SQL) \ldots{} um allen Teilnehmern eine sehr grundlegende
Sicht zu vermitteln:

SQL ist eine Datenbanksprache zur Definition von Datenstrukturen in
relationalen Datenbanken sowie zum Bearbeiten (Einfügen, Verändern,
Löschen) und Abfragen von darauf basierenden Datenbeständen.

Ausgangspunkt sind Datenbanktabellen, die Abfragen dienen dabei der
Generierung spezifischer Informationssets:

\begin{longtable}[]{@{}lllll@{}}
\toprule
Buchnummer & Autor & Verlag & Datum & Titel\tabularnewline
\midrule
\endhead
123456 & Hans Vielschreiber & Musterverlag & 2007 & Wir lernen
SQL\tabularnewline
123457 & J. Gutenberg & Gutenberg und Co. & 1452 & Drucken leicht
gemacht\tabularnewline
123458 & Galileo Galilei & Inquisition International & 1640 & Eppur si
muove\tabularnewline
123459 & Charles Darwin & Vatikan Verlag & 1860 & Adam und
Eva\tabularnewline
\bottomrule
\end{longtable}

\begin{itemize}
\tightlist
\item
  ``Alle Bücher mit Buchnummern von 123400 bis 123500''
\item
  ``Alle Buchnummern mit Autoren, die im 19. Jahrhundert erschienen.''
\item
  ``In welchem Jahrhundert veröffentlichte welcher Verlag die meisten
  Bücher?''
\item
  \ldots{}
\end{itemize}

SQL basiert auf der relationalen Algebra, ihre Syntax ist relativ
einfach aufgebaut und semantisch an die englische Umgangssprache
angelehnt. Die Bezeichnung SQL bezieht sich auf das englische Wort
``query'' (deutsch: „Abfrage``). Mit Abfragen werden die in einer
Datenbank gespeicherten Daten abgerufen, also dem Benutzer oder einer
Anwendersoftware zur Verfügung gestellt. Durch den Einsatz von SQL
strebt man die Unabhängigkeit der Anwendungen vom eingesetzten
Datenbankmanagementsystem an.

SQL-Aufrufe sind deklarativ, weil der Entwickler hier nur das WAS und
nicht das WIE festlegt. Dabei strukturieren sich die Befehle in 4
Kategorien:

\begin{itemize}
\tightlist
\item
  Befehle zur Abfrage und Aufbereitung der gesuchten Informationen
\item
  Befehle zur Datenmanipulation (Ändern, Einfügen, Löschen)
\item
  Befehle zur Definition des Datenbankschemas
\item
  Befehle für die Rechteverwaltung und Transaktionskontrolle.
\end{itemize}

Eine Datenbanktabelle stellt eine Datenbank-Relation dar. Die Relation
ist Namensgeber und Grundlage der relationalen Datenbanken.

\begin{figure}
\centering
\includegraphics{./img/25_LINQ/SQL-Beispiel.png}
\caption{OOPGeschichte}
\end{figure}

\textbf{Erzeugung der Tabellen}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ Student;}
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ Student }\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{from}\NormalTok{ ?;}
\end{Highlighting}
\end{Shaded}

\texttt{text\ -student.csv\ MatrNr,Name\ 26120,Fichte\ 25403,Jonas\ 27103,Fauler}
@AlaSQL.eval\_with\_csv

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ hoert;}
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ hoert }\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{from}\NormalTok{ ?;}
\end{Highlighting}
\end{Shaded}

\texttt{text\ -hoert.csv\ MatrNr,VorlNr\ 26120,5001\ 25403,5001\ 27103,5045}
@AlaSQL.eval\_with\_csv

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ Vorlesung;}
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ Vorlesung }\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{from}\NormalTok{ ?;}
\end{Highlighting}
\end{Shaded}

\texttt{text\ -vorlesung.csv\ VorlNr,Titel,PersNr\ 5001,ET,15\ 5022,IT,12\ 5045,DB,12}
@AlaSQL.eval\_with\_csv

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ Professor;}
\KeywordTok{INSERT} \KeywordTok{INTO}\NormalTok{ Professor }\KeywordTok{SELECT} \OperatorTok{*} \KeywordTok{from}\NormalTok{ ?;}
\end{Highlighting}
\end{Shaded}

\texttt{text\ -prof.csv\ PersNr,Name\ 12,Wirth\ 15,Tesla\ 20,Urlauber}
@AlaSQL.eval\_with\_csv

\textbf{Beispiele}

\texttt{sql\ \ \ \ Auslesen\ aller\ Spalten\ und\ aller\ Zeilen\ SELECT\ *\ FROM\ Student;}
@AlaSQL.eval

\texttt{sql\ \ \ \ \ Abfrage\ mit\ Spaltenauswahl\ SELECT\ VorlNr,\ Titel\ FROM\ Vorlesung;}
@AlaSQL.eval

\texttt{sql\ \ \ \ \ \ Abfrage\ mit\ eindeutigen\ Werten\ SELECT\ DISTINCT\ MatrNr\ FROM\ hoert;}
@AlaSQL.eval

\texttt{sql\ \ \ \ \ \ \ \ Abfrage\ mit\ Filter\ und\ Sortierung\ SELECT\ VorlNr,\ Titel\ FROM\ Vorlesung\ WHERE\ Titel\ =\ \textquotesingle{}ET\textquotesingle{};}
@AlaSQL.eval

\texttt{LIKE} kann mit verschiedenen Platzhaltern verwendet werden: \_
steht für ein einzelnes beliebiges Zeichen, \% steht für eine beliebige
Zeichenfolge. Manche Datenbanksysteme bieten weitere solche
Wildcard-Zeichen an, etwa für Zeichenmengen.

\texttt{ORDER\ BY} öffnet die Möglichkeit die Reihung anzupassen.

\texttt{sql\ \ \ Verbund\ SELECT\ Vorlesung.VorlNr,\ Vorlesung.Titel,\ Professor.PersNr,\ Professor.Name\ FROM\ Professor\ INNER\ JOIN\ Vorlesung\ ON\ Professor.PersNr\ =\ Vorlesung.PersNr;}
@AlaSQL.eval

\texttt{JOIN} erlaubt es die Relationen zwischen einzelnen
Datenbanktabellen aufzulösen. Dabei kann mit \texttt{INNER} und
\texttt{OUTER} bzw \texttt{LEFT} und \texttt{RIGHT} die Auswahl über der
Schnittmenge beschrieben werden.

\texttt{sql\ \ \ Gruppierung\ mit\ Aggregat-Funktionen\ SELECT\ COUNT(Vorlesung.PersNr)\ AS\ Anzahl,\ Professor.PersNr,\ Professor.Name\ FROM\ Professor\ LEFT\ JOIN\ Vorlesung\ ON\ Professor.PersNr\ =\ Vorlesung.PersNr\ GROUP\ BY\ Professor.Name,\ Professor.PersNr;}
@AlaSQL.eval

\hypertarget{linq-umsetzung}{%
\section{LINQ Umsetzung}\label{linq-umsetzung}}

\emph{Language Integrated Query} (LINQ) zielt auf die direkte
Integration von Abfragefunktionen in die Sprache. Dafür definieren C\#
(wie auch VB.NET und F\#) eigene Schlüsselwörter sowie eine Menge an
vorbestimmten LINQ-Methoden. Diese können aber durch den Anwender in der
jeweiligen Sprache erweitert werden.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ query =}
\NormalTok{   from e }\KeywordTok{in}\NormalTok{ employees}
\NormalTok{   where e.}\FunctionTok{DepartmentId}\NormalTok{ == }\DecValTok{5}
\NormalTok{   select e;}
\end{Highlighting}
\end{Shaded}

LINQ-Anweisungen sind unmittelbar als Quelltext in .NET-Programme
eingebettet. Somit kann der Code durch den Compiler auf Fehler geprüft
werden. Andere Verfahren wie \emph{ActiveX Data Objects} ADO und
\emph{Open Database Connectivity} ODBC hingegen verwenden
Abfragestrings. Diese können erst zur Laufzeit interpretiert werden;
dann wirken Fehler gravierender und sind schwieriger zu analysieren.

Innerhalb des Quellprogramms in C\# oder VB.NET präsentiert LINQ die
Abfrage-Ergebnisse als streng typisierte Aufzählungen. Somit
gewährleistet es Typsicherheit bereits zur Übersetzungszeit wobei ein
minimaler Codeeinsatz zur Realisierung von Filter-, Sortier- und
Gruppiervorgänge in Datenquellen investiert wird.

\begin{figure}
\centering
\includegraphics{./img/25_LINQ/AnbieterLINQ.png}
\caption{OOPGeschichte}
\end{figure}

Merkmale von LINQ

\begin{itemize}
\item
  Die Arbeit mit Abfrageausdrücken ist einfach, da sie viele vertraute
  Konstrukte der Sprache C\# verwenden.
\item
  Alle Variablen in einem Abfrageausdruck sind stark typisiert, obwohl
  dieser in der Regel nicht explizit angegeben wird. Der Compiler
  übernimmt die Ableitung.
\item
  Eine Abfrage wird erst ausgeführt, wenn Sie über der Abfragevariable
  iteriert wird. Folglich muss die Quelle in einer iterierbaren Form
  vorliegen.
\item
  Zur Kompilierzeit werden Abfrageausdrücke gemäß den in der
  C\#-Spezifikation festgelegten Regeln in Methodenaufrufe des
  Standardabfrageoperators konvertiert. Die Abfragesyntax ist aber
  einfacher zu lesen.
\item
  LINQ kombiniert Abfrageausdrücke und Methodenaufrufe (\texttt{count}
  oder \texttt{max}). Hierin liegt die Flexibilität des Konzeptes.
\end{itemize}

Diese Veranstaltung konzentriert sich auf die \emph{LINQ to Objects}
Realisierung von LINQ. Dabei können Abfragen mit einer beliebigen
\texttt{IEnumerable}- oder
\texttt{IEnumerable\textless{}T\textgreater{}}-Auflistungen angewandt
werden.

\hypertarget{exkurs-erweiterungsmethoden}{%
\subsection{Exkurs
``Erweiterungsmethoden''}\label{exkurs-erweiterungsmethoden}}

Erweiterungsmethoden ergänzen den Umfang von bestehenden Methoden einer
Klasse ohne selbst in diesem Typ deklariert worden zu sein. Man
beschreibt eine statische Methode und ordnet diese einer Klasse über den
Typ des ersten Parameters zu.

\begin{quote}
\textbf{Merke:} Erweiterungsmethoden stellen das bisherige Konzept der
Deklaration von Klassen (etwas) auf den Kopf. Sie ermöglichen es
zusätzliche Funktionalität ``anzuhängen''.
\end{quote}

Das folgende Beispiel unterstreicht den Unterschied zur bisher nur
angedeuteten Methode der partiellen Methoden, die eine verteilte
Implementierung einer Klasse erlaubt. Hierfür muss der Quellcode
vorliegen, die Erweiterungsmethode \texttt{Print()} kann auch auf eine
Bibliothek angewandt werden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{partial} \KeywordTok{class}\NormalTok{ myString}
\NormalTok{\{}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{ content;}
   \KeywordTok{public} \FunctionTok{myString}\NormalTok{(}\DataTypeTok{string}\NormalTok{ content)}
\NormalTok{   \{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{content}\NormalTok{ = content;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{partial} \KeywordTok{class}\NormalTok{ myString}
\NormalTok{\{}
   \KeywordTok{public} \DataTypeTok{void} \FunctionTok{sayHello}\NormalTok{() => Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Say Hello!"}\NormalTok{);}
\NormalTok{\}}

\CommentTok{// Erweiterungsmethode in einer separaten Klasse}
\KeywordTok{static} \KeywordTok{class}\NormalTok{ Exporter}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Print}\NormalTok{(}\KeywordTok{this}\NormalTok{ myString input, }\DataTypeTok{string}\NormalTok{ newString)}
\NormalTok{    \{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(input.}\FunctionTok{content}\NormalTok{ + newString);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{      myString text = }\KeywordTok{new} \FunctionTok{myString}\NormalTok{(}\StringTok{"Bla fasel"}\NormalTok{);}
\NormalTok{      text.}\FunctionTok{sayHello}\NormalTok{();}
\NormalTok{      text.}\FunctionTok{Print}\NormalTok{(}\StringTok{"-Hossa"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Erweiterungsmethoden schaffen uns die Möglichkeit weitere Funktionalität
zu integrieren und gleichzeitig Datenobjekte durch eine
Verarbeitungskette ``hindurchzureichen''. Erweitern Sie die statische
Klasse doch mal um eine Methode, die dem Inhalt der Membervariable
\texttt{content} zusätzlichen Information einfügt.

Das Ganze ist natürlich noch recht behäbig, weil wir zwingend von einem
bestimmten Typen ausgehen. Dies lässt sich über eine generische
Implementierung lösen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{abstract} \KeywordTok{class}\NormalTok{ myAbstractString\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ content;}
    \KeywordTok{public} \FunctionTok{myAbstractString}\NormalTok{(}\DataTypeTok{string}\NormalTok{ content)}
\NormalTok{    \{}
      \KeywordTok{this}\NormalTok{.}\FunctionTok{content}\NormalTok{ = content;}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{sayClassName}\NormalTok{() => Console.}\FunctionTok{WriteLine}\NormalTok{(}\KeywordTok{this}\NormalTok{.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{Name}\NormalTok{);}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ myString: myAbstractString}
\NormalTok{\{}
   \KeywordTok{public} \FunctionTok{myString}\NormalTok{(}\DataTypeTok{string}\NormalTok{ content): }\KeywordTok{base}\NormalTok{(content) \{\}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ yourString: myAbstractString}
\NormalTok{\{}
   \KeywordTok{public} \FunctionTok{yourString}\NormalTok{(}\DataTypeTok{string}\NormalTok{ content): }\KeywordTok{base}\NormalTok{(content) \{\}}
\NormalTok{\}}

\KeywordTok{static} \KeywordTok{class}\NormalTok{ Exporter}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void}\NormalTok{ Print<T>(}\KeywordTok{this}\NormalTok{ T input) where T: myAbstractString}
\NormalTok{    \{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(input.}\FunctionTok{content}\NormalTok{);}
\NormalTok{       input.}\FunctionTok{sayClassName}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
\NormalTok{      myString A = }\KeywordTok{new} \FunctionTok{myString}\NormalTok{(}\StringTok{"Bla fasel"}\NormalTok{);}
\NormalTok{      A.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{      yourString B = }\KeywordTok{new} \FunctionTok{yourString}\NormalTok{(}\StringTok{"Bla blub"}\NormalTok{);}
\NormalTok{      B.}\FunctionTok{Print}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Sie können Erweiterungsmethoden verwenden, um eine Klasse oder eine
Schnittstelle zu erweitern, jedoch nicht, um sie zu überschreiben.
Entsprechen wird eine Erweiterungsmethode mit dem gleichen Namen und der
gleichen Signatur wie eine Schnittstellen- oder Klassenmethode nie
aufgerufen.

\hypertarget{exkurs-anonyme-typen}{%
\subsection{Exkurs ``Anonyme Typen''}\label{exkurs-anonyme-typen}}

Anonyme Typen erlauben die Spezifikation eines Satzes von
schreibgeschützten Eigenschaften, ohne zunächst explizit einen Typ
definieren zu müssen. Der Typname wird dabei automatisch generiert.

Anonyme Typen enthalten mindestens eine schreibgeschützte Eigenschaft,
alle anderen Arten von Klassenmembern sind ausgeschlossen.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\CommentTok{//class Irgendwas\{}
\CommentTok{//  pubic string text;}
\CommentTok{//  public int zahl;}
\CommentTok{//\}}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)}
\NormalTok{    \{}
        \DataTypeTok{var}\NormalTok{ v = }\KeywordTok{new}\NormalTok{ \{text = }\StringTok{"Das ist ein Text"}\NormalTok{, zahl = }\DecValTok{1}\NormalTok{\};}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"text = \{v.text\}, zahl = \{v.zahl\}"}\NormalTok{);}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(v);}
        \CommentTok{//v.text = "asfsa";}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"type = \{v.GetType().Name\}"}\NormalTok{);}
        \DataTypeTok{var}\NormalTok{ myPropertyInfo = v.}\FunctionTok{GetType}\NormalTok{().}\FunctionTok{GetProperties}\NormalTok{();}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{Properties:"}\NormalTok{);}
        \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < myPropertyInfo.}\FunctionTok{Length}\NormalTok{; i++)}
\NormalTok{        \{}
\NormalTok{            Console.}\FunctionTok{WriteLine}\NormalTok{(myPropertyInfo[i].}\FunctionTok{ToString}\NormalTok{());}
\NormalTok{        \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Vorteil anonymer Typen liegt in ihrer Flexibilität. Die eigentlichen
Daten werden entsprechend den Ergebnissen einer Funktion erzeugt.

\hypertarget{exkurs-enumarables}{%
\subsection{Exkurs ``Enumarables''}\label{exkurs-enumarables}}

\includegraphics{https://www.plantuml.com/plantuml/png/VP5FIyD04CNlyoaMl8afVe0GAlw1OZr8nVjsCzeXcrsPp1uKFxma4tN9jhqDx_VcCRnP3s9PKkzXw2XyMBQzSTuEmuq8qpu9RbmCE_f2Smq7Qj4uOkTHvoUKGsnrVY3qBS2qR3Rt8VN8LYAR-gKnTKr1aD-imwOn2zFUOsdwzTn6xz49nN3QiwL19deStz6qR_dJr8zNvdMPCll-KYxU6J7CwdF2XAMy4-kwKjvIwB0zdbIUiOYCBBfxZeyfImvvavTLazSFUODLzQrmDaFMZSBC3Tfh8KEsirgDy5-0xCWJR0mjMQQE8sYHIrMVeK9saJwZaDSOsjJx7m00}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IEnumerable<}\KeywordTok{out}\NormalTok{ T> : System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{IEnumerable}\NormalTok{\{}
  \KeywordTok{public}\NormalTok{ IEnumerator<T> = }\FunctionTok{GetEnumerator}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IEnumerator<}\KeywordTok{out}\NormalTok{ T> : IDisposable,}
\NormalTok{                                      System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{IEnumerator}\NormalTok{\{}
  \KeywordTok{public} \DataTypeTok{object}\NormalTok{ Current \{ }\KeywordTok{get}\NormalTok{; \}}
  \KeywordTok{public} \DataTypeTok{bool} \FunctionTok{MoveNext}\NormalTok{ ();}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Reset}\NormalTok{ ();}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Zur Wiederholung soll nochmals ein kurzes Implementierungsbeispiel
gezeigt werden. An dieser Stelle wird eine Klasse myStrings umgesetzt,
die als Enumerationstyp realisiert werden soll. Entsprechend
implementiert die Klasse \texttt{IEnumerable} das Interface
\texttt{IEnumerable\textless{}string\textgreater{}} und referenziert
einen Enumeratortyp \texttt{StringEnumerator}, der wiederum das
Interface generische Interface
\texttt{IEnumerator\textless{}string\textgreater{}} umsetzt.

Transformieren Sie folgendes Codefragment in eine UML Darstellung.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}


\KeywordTok{class}\NormalTok{ myStrings : IEnumerable<}\DataTypeTok{string}\NormalTok{>\{}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{ []  str_arr = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{}\StringTok{"one"}\NormalTok{ , }\StringTok{"two"}\NormalTok{ ,}\StringTok{"three"}\NormalTok{, }\StringTok{"four"}\NormalTok{, }\StringTok{"five"}\NormalTok{\};}
   \KeywordTok{public}\NormalTok{ IEnumerator<}\DataTypeTok{string}\NormalTok{> }\FunctionTok{GetEnumerator}\NormalTok{()}
\NormalTok{   \{}
\NormalTok{       IEnumerator<}\DataTypeTok{string}\NormalTok{> r = }\KeywordTok{new} \FunctionTok{StringEnumerator}\NormalTok{(}\KeywordTok{this}\NormalTok{);}
       \KeywordTok{return}\NormalTok{ r ;}
\NormalTok{   \}}
\NormalTok{   IEnumerator IEnumerable.}\FunctionTok{GetEnumerator}\NormalTok{()}
\NormalTok{   \{}
       \KeywordTok{return} \FunctionTok{GetEnumerator}\NormalTok{() ;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ StringEnumerator : IEnumerator<}\DataTypeTok{string}\NormalTok{>\{}
    \DataTypeTok{int}\NormalTok{ index;}
\NormalTok{    myStrings sp;}
    \KeywordTok{public} \FunctionTok{StringEnumerator}\NormalTok{ (myStrings str_obj)\{}
\NormalTok{       index = }\DecValTok{-1}\NormalTok{ ;}
\NormalTok{       sp = str_obj ;}
\NormalTok{    \}}
    \DataTypeTok{object}\NormalTok{ IEnumerator.}\FunctionTok{Current}\NormalTok{\{}
\NormalTok{      get}
\NormalTok{        \{ }\KeywordTok{return}\NormalTok{ sp.}\FunctionTok{str_arr}\NormalTok{[ index ] ; \}}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Current\{}
\NormalTok{      get}
\NormalTok{        \{ }\KeywordTok{return}\NormalTok{ sp.}\FunctionTok{str_arr}\NormalTok{[ index ] ; \}}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{bool} \FunctionTok{MoveNext}\NormalTok{( )\{}
       \KeywordTok{if}\NormalTok{ ( index < sp.}\FunctionTok{str_arr}\NormalTok{.}\FunctionTok{Length}\NormalTok{ - }\DecValTok{1}\NormalTok{ )\{}
\NormalTok{           index++ ;}
           \KeywordTok{return} \KeywordTok{true}\NormalTok{ ;}
\NormalTok{       \}}
       \KeywordTok{return} \KeywordTok{false}\NormalTok{ ;}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Reset}\NormalTok{( )\{}
\NormalTok{       index = }\DecValTok{-1}\NormalTok{ ;}
\NormalTok{    \}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Dispose}\NormalTok{()\{}
      \CommentTok{// pass}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      myStrings spp = }\KeywordTok{new} \FunctionTok{myStrings}\NormalTok{();}
      \KeywordTok{foreach}\NormalTok{( }\DataTypeTok{string}\NormalTok{ i }\KeywordTok{in}\NormalTok{ spp)}
\NormalTok{              System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(i);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/bLBFIyCm5BxdhtZ7ZR7YkPGmKP4T9k9wKnbf-vpHDXb9EgPp_xjfkffWrE6fzFlo_NWlcMd3b6cRcZpp2g7aggmHY7xbOiCKQw2icTRdnYXUj0RdfHHB_evmHeXZe7bRMawizPx01BHHAwPK2jg1SFy87NoDvagq3Ifcf1gDKvZxtwm_Ie70z0ilQap-4f73aD-dUyRMi3vSLBXBxSU0-zURr3Vje4aaX94_q8qXYvUnqmQnoKMh50hJjR4ybiPP1MW_J5VFPgDwOYM6GsKvXIoR3nIbjkwf_UJqLxlLVyqYfu7uqMaXjtY3EpTO8MNjm3lKw92jv1Kuw9BhZTGuWDz2UhQh6sMSrFg2yUR2rQUG-oTng-IwUxhxuzN7Tx_NXXbU7W0MZ8imUz1EfzIBIB1oo3wI9F1BRQk2YuhI1m5PRcN7znoALhqgG4WmcYFZztZQsPuQd3r2WeN7f2-UsH6ZK393KRLD_Ga0}
\caption{Protected}
\end{figure}

Welchen Vorteil habe ich verglichen mit einer nicht-enumerate
Datenstruktur, zum Beispiel einem array? Im Hinblick auf eine konkrete
Implementierung ist zwischen dem Komfort der erweiterten API und den
Performance-Eigenschaften abzuwägen.

Einen Überblick dazu bietet unter anderem die Diskussion unter
https://stackoverflow.com/questions/169973/when-should-i-use-a-list-vs-a-linkedlist/29263914\#29263914

\hypertarget{linq---grundlagen}{%
\section{LINQ - Grundlagen}\label{linq---grundlagen}}

Sie können LINQ zur Abfrage beliebiger aufzählbarer Auflistungen wie
List, Array oder Dictionary\textless{}TKey,TValue\textgreater{}
verwenden. Die Auflistung kann entweder benutzerdefiniert sein oder von
einer .NET Framework-API zurückgegeben werden.

Alle LINQ-Abfrageoperationen bestehen aus drei unterschiedlichen
Aktionen:

\begin{itemize}
\tightlist
\item
  Abrufen der Datenquelle
\item
  Erstellen der Abfrage
\item
  Ausführen der Abfrage
\end{itemize}

Für ein einfaches Beispiel, das Filtern einer Liste von Zahlenwerten
realisiert sich dies wie folgt:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}


    \KeywordTok{class}\NormalTok{ Program \{}
        \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
          \CommentTok{// Spezifikation der Datenquelle}
          \DataTypeTok{int}\NormalTok{[] scores = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{ }\DecValTok{97}\NormalTok{, }\DecValTok{92}\NormalTok{, }\DecValTok{81}\NormalTok{, }\DecValTok{60}\NormalTok{ \};}

          \CommentTok{// Definition der Abfrage}
\NormalTok{          IEnumerable<}\DataTypeTok{int}\NormalTok{> scoreQuery =}
\NormalTok{              from score }\KeywordTok{in}\NormalTok{ scores    }\CommentTok{// Bezug zur Datenquelle}
\NormalTok{              where score > }\DecValTok{80}        \CommentTok{// Filterkriterium}
\NormalTok{              select score;           }\CommentTok{// "Projektion" des Rückgabewertes}

          \CommentTok{// Execute the query.}
          \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i }\KeywordTok{in}\NormalTok{ scoreQuery)}
\NormalTok{          \{}
\NormalTok{              Console.}\FunctionTok{Write}\NormalTok{(i + }\StringTok{" "}\NormalTok{);}
\NormalTok{          \}}
\NormalTok{        \}}
\NormalTok{    \}}
\end{Highlighting}
\end{Shaded}

\textbf{Datenquellen}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.20\columnwidth}\raggedright
Zugriff\strut
\end{minipage} & \begin{minipage}[b]{0.74\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to Objects\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Zugriff auf Objektlisten und -Hierarchien im Arbeitsspeicher\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to SQL\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Abfrage und Bearbeitung von Daten in MS-SQL-Datenbanken\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to Entities\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Abfrage und Bearbeitung von Daten im relationalen Modell von
ADO.NET\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to XML\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Zugriff auf XML-Inhalte\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to DataSet\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Zugriff auf ADO.NET-Datensammlungen und -Tabellen\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.20\columnwidth}\raggedright
LINQ to SharePoint\strut
\end{minipage} & \begin{minipage}[t]{0.74\columnwidth}\raggedright
Zugriff auf SharePoint-Daten\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Im Rahmen dieser Veranstaltung konzentrieren wir uns auf die LINQ to
Objects Variante.

\textbf{Query Ausdrücke}

Insgesamt sind 7 Query-Klauseln vorimplementiert, können aber durch
Erweiterungsmethoden ergänzt werden.

\begin{longtable}[]{@{}ll@{}}
\toprule
Ausdruck & Bedeutung\tabularnewline
\midrule
\endhead
from & definieren der Laufvariable und einer Datenquelle\tabularnewline
where & filtert die Daten nach bestimten Kriterien\tabularnewline
orderby & sortiert die Elemente\tabularnewline
select & projeziert die Laufvariable auf die
Ergebnisfolge\tabularnewline
group & bildet Gruppen innerhalb der Ergebnismenge\tabularnewline
join & vereinigt Elemente mehrere Datenquellen\tabularnewline
let & definiert eine Hilfsvariable\tabularnewline
\bottomrule
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ Student\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ Id;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject\{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{()\{\}}
\NormalTok{\}}

\CommentTok{// Collection Initialization}
\NormalTok{List<Student> students = }\KeywordTok{new}\NormalTok{ List<Student>\{}
  \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Max Müller")\{Subject = "}\NormalTok{Technische Informatik}\StringTok{", id = 1\},}
  \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Maria Maier"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{2}\NormalTok{\},}
  \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Martin Morawschek"}\NormalTok{)\{Subject = }\StringTok{"Höhere Mathematik I"}\NormalTok{, id = }\DecValTok{3}\NormalTok{\}}
\NormalTok{\}}

\CommentTok{// Implizite Typdefinition}
\DataTypeTok{var}\NormalTok{ result = from s }\KeywordTok{in}\NormalTok{ students         }\CommentTok{// Spezifikation der Datenquelle}
\NormalTok{             where s.}\FunctionTok{Subject}\NormalTok{ == }\StringTok{"Softwarentwicklung"}
\NormalTok{             orderby s.}\FunctionTok{Name}
\NormalTok{             select }\KeywordTok{new}\NormalTok{ (s.}\FunctionTok{Name}\NormalTok{, s.}\FunctionTok{Id}\NormalTok{)  }\CommentTok{// Projektion der Ausgabe}

\CommentTok{// explizite Typdefinition}
\NormalTok{IEnumerable<Student> result = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{                              ...}
\end{Highlighting}
\end{Shaded}

Im vorangehenden Beispiel ist \texttt{students} die Datenquelle, über
der die Abfrage bearbeitet wird. Der List-Datentyp implementiert das
Interface \texttt{IEnumerable\textless{}T\textgreater{}}. Die letzte
Zeile bildet das Ergebnis auf die Rückgabe ab, dem Interface entsprechen
auf ein \texttt{IEnumerable\textless{}Student\textgreater{}} mit den
Feldern Name und Id.

Die Berechnung der Folge wird nicht als Ganzes realisiert sondern bei
einer Iteration durch den Datentyp
\texttt{List\textless{}Student\textgreater{}}.

Für nicht-generische Typen (die also \texttt{IEnumerable} anstatt
\texttt{IEnumerable\textless{}T\textgreater{}} unmittelbar)
implementieren, muss zusätzlich der Typ der Laufvariable angegeben
werden, da diese nicht aus der Datenquelle ermittelt werden kann.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}


\KeywordTok{public} \KeywordTok{class}\NormalTok{ Student}
\NormalTok{\{}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ FirstName \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ LastName \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
    \KeywordTok{public} \DataTypeTok{int}\NormalTok{[] Scores \{ }\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{; \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{//ArrayList StudentList = new ArrayList();  <-- Nicht mehr benutzen}
\NormalTok{    List<Student> StudentList = }\KeywordTok{new}\NormalTok{ List<Student>();}
\NormalTok{    StudentList.}\FunctionTok{Add}\NormalTok{(}
        \KeywordTok{new}\NormalTok{ Student\{}
\NormalTok{            FirstName = }\StringTok{"Svetlana"}\NormalTok{, LastName = }\StringTok{"Müller", Scores = new int[] \{ 98, 92, 81, 60 \}}
\NormalTok{            \});}
\NormalTok{    StudentList.}\FunctionTok{Add}\NormalTok{(}
        \KeywordTok{new}\NormalTok{ Student \{}
\NormalTok{            FirstName = }\StringTok{"Claire"}\NormalTok{, LastName = }\StringTok{"O’Donnell"}\NormalTok{, Scores = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{ }\DecValTok{75}\NormalTok{, }\DecValTok{84}\NormalTok{, }\DecValTok{91}\NormalTok{, }\DecValTok{39}\NormalTok{ \}}
\NormalTok{            \});}
    \DataTypeTok{var}\NormalTok{ query = from student }\KeywordTok{in}\NormalTok{ StudentList}
\NormalTok{                where student.}\FunctionTok{Scores}\NormalTok{[}\DecValTok{0}\NormalTok{] > }\DecValTok{95}
\NormalTok{                select student;}
    \KeywordTok{foreach}\NormalTok{ (Student s }\KeywordTok{in}\NormalTok{ query)}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(s.}\FunctionTok{LastName}\NormalTok{ + }\StringTok{": "}\NormalTok{ + s.}\FunctionTok{Scores}\NormalTok{[}\DecValTok{0}\NormalTok{]);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Welche Struktur ergibt sich dabei generell für eine LINQ-Abfrage? Ein
Query beginnt immer mit einer \texttt{from}-Klausel und endet mit einer
\texttt{select} oder \texttt{group}-Klausel.

Allgemeingültig lässt sich, entsprechend den Ausführungen in
\protect\hyperlink{12}{Mössenböck} folgende Syntax ableiten:

\begin{verbatim}
QueryExpr =
   "from" [Type] variable "in" SrcExpr
   QueryBody
QueryBody =
   { "from" [Type] variable "in" SrcExpr
   | "where" BoolExpr
   | "orderby" Expr ["ascending" | "descending"] {"," Expr ["ascending" | "descending"]}
   | "join" [Type] variable "in" SrcExpr "on" Expr "equals" Expr ["into" variable]
   | "let" variable "=" Expr
   }
   ( "select" ProjectionExpr ["into" variable QueryBody]
   | "group" ProjectionExpr "by" Expr ["into" variable QueryBody]
   ).
\end{verbatim}

Mit der isolierten Definition der Abfragen können diese mehrfach auf die
Daten angewandt werden. Man spricht dabei von einer ``verzögerten
Ausführung'' - jeder Aufruf der Ausgabe generiert eine neue Abfrage.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program}
\NormalTok{\{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
      \DataTypeTok{var}\NormalTok{ numbers = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{int}\NormalTok{>() \{}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{\};}
      \CommentTok{// Spezifikation der Anfrage}
      \DataTypeTok{var}\NormalTok{ query = from x }\KeywordTok{in}\NormalTok{ numbers}
\NormalTok{                  select x;}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(query.}\FunctionTok{GetType}\NormalTok{());}
      \CommentTok{// Manipulation der Daten}
\NormalTok{      numbers.}\FunctionTok{Add}\NormalTok{(}\DecValTok{5}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(query.}\FunctionTok{Count}\NormalTok{());}
      \CommentTok{// Manipulation und erneute Anwendung der Abfrage}
\NormalTok{      numbers.}\FunctionTok{Add}\NormalTok{(}\DecValTok{6}\NormalTok{);}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(query.}\FunctionTok{Count}\NormalTok{()); }\CommentTok{// 6}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{hinter-den-kulissen}{%
\subsection{Hinter den Kulissen}\label{hinter-den-kulissen}}

Der Compiler transformiert LINQ-Anfragen in der Abfragesyntax in
Lambda-Ausdrücke, Erweiterungsmethoden, Objektinitializer und anonyme
Typen. Dabei sprechen wir von der Methodensyntax. Abfragesyntax und
Methodensyntax sind semantisch identisch, aber viele Benutzer finden die
Abfragesyntax einfacher und leichter zu lesen. Da aber einige Abfragen
nur in der Methodensyntax möglich sind, müssen sie diese bisweilen
nutzen. Beispiele dafür sind \texttt{Max()}, \texttt{Min()}, oder
\texttt{Take()}.

Nehmen wir also nochmals eine Anzahl von Studenten an, die in einer
generischen Liste erfasst wurden:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{List<Student> students = }\KeywordTok{new}\NormalTok{ List<Student>(\{}
  \KeywordTok{new}\NormalTok{ Student\{}
\NormalTok{      Id = }\StringTok{"123sdf234"}
\NormalTok{      FirstName = }\StringTok{"Svetlana"}\NormalTok{,}
\NormalTok{      LastName = }\StringTok{"Omelchenko"}\NormalTok{,}
\NormalTok{      Field = }\StringTok{"Computer Science"}\NormalTok{,}
\NormalTok{      Scores = }\KeywordTok{new} \DataTypeTok{int}\NormalTok{[] \{ }\DecValTok{98}\NormalTok{, }\DecValTok{92}\NormalTok{, }\DecValTok{81}\NormalTok{, }\DecValTok{60}\NormalTok{ \}}
\NormalTok{  \};}
  \CommentTok{//...}
\NormalTok{  \});}

\DataTypeTok{var}\NormalTok{ result = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{             where s.}\FunctionTok{Field}\NormalTok{ == }\StringTok{"Computer Science"}
\NormalTok{             orderby s.}\FunctionTok{LastName}
\NormalTok{             select }\KeywordTok{new}\NormalTok{ \{s.}\FunctionTok{LastName}\NormalTok{, s.}\FunctionTok{Id}\NormalTok{\};}
\end{Highlighting}
\end{Shaded}

Der Compiler generiert daraus folgenden Code:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{IEnumerable<Student> result = students}
\NormalTok{                              .}\FunctionTok{Where}\NormalTok{(s => s.}\FunctionTok{Field}\NormalTok{ == }\StringTok{"Computer Science"}\NormalTok{ )}
\NormalTok{                              .}\FunctionTok{OrderBy}\NormalTok{(s => s.}\FunctionTok{LastName}\NormalTok{)}
\NormalTok{                              .}\FunctionTok{Select}\NormalTok{(s => }\KeywordTok{new}\NormalTok{ \{s.}\FunctionTok{LastName}\NormalTok{, s.}\FunctionTok{Id}\NormalTok{\});}
\end{Highlighting}
\end{Shaded}

Wieso hat meine Klasse \texttt{Student} plötzlich eine Methode
\texttt{where}? Hier nutzen wir eine automatisch generierte
Erweiterungsmethoden.

Dabei wird die eigentliche Filterfunktion als Delegat übergeben, dies
wiederum kann durch eine Lambdafunktion ausgedrückt werden.
https://docs.microsoft.com/de-de/dotnet/api/system.linq.enumerable.where?view=netframework-4.8

Dabei beschreiben die Lambdafunktionen sogenannten Prädikate,
Funktionen, die eine bestimmte Bedingung prüfen und einen boolschen Wert
zurückgeben.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \FunctionTok{filterme}\NormalTok{(}\DataTypeTok{int}\NormalTok{ num)\{}
        \DataTypeTok{bool}\NormalTok{ result = }\KeywordTok{false}\NormalTok{;}
        \KeywordTok{if}\NormalTok{ (num > }\DecValTok{10}\NormalTok{) result = }\KeywordTok{true}\NormalTok{;}
        \KeywordTok{return}\NormalTok{ result;}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
      \DataTypeTok{int}\NormalTok{[] numbers = \{ }\DecValTok{0}\NormalTok{, }\DecValTok{30}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{15}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{85}\NormalTok{, }\DecValTok{40}\NormalTok{, }\DecValTok{75}\NormalTok{ \};}
      \CommentTok{//Func<int, bool> filter = delegate(int num) \{ return num > 10; \};}
\NormalTok{      Func<}\DataTypeTok{int}\NormalTok{, }\DataTypeTok{bool}\NormalTok{> filter = filterme;}
\NormalTok{      IEnumerable<}\DataTypeTok{int}\NormalTok{> query =}
\NormalTok{          numbers.}\FunctionTok{Where}\NormalTok{(filter);}
      \CommentTok{//IEnumerable<int> query =}
      \CommentTok{//      numbers.Where(s => s > 10);}
      \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ number }\KeywordTok{in}\NormalTok{ query)}
\NormalTok{      \{}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(number);}
\NormalTok{      \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{basisfunktionen-von-linq}{%
\section{Basisfunktionen von LINQ}\label{basisfunktionen-von-linq}}

Mit LINQ lassen sich Elementaroperationen definieren, die dann im Ganzen
die Mächtigkeit des Konzeptes ausmachen.

\hypertarget{filtern}{%
\subsection{Filtern}\label{filtern}}

Das Beispiel zur Filterung einer Customer-Tabelle wurde der C\#
Dokumentation unter
https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/concepts/linq/basic-linq-query-operations
entnommen.

Die üblichste Abfrageoperation ist das Anwenden eines Filters in Form
eines booleschen Ausdrucks. Das Filtern bewirkt, dass im Ergebnis nur
die Elemente enthalten sind, für die der Ausdruck eine wahre Aussage
liefert.

Das Ergebnis wird durch Verwendung der \texttt{where}-Klausel erzeugt.
Faktisch gibt der Filter an, welche Elemente nicht in die Quellsequenz
eingeschlossen werden sollen. In folgendem Beispiel werden nur die
customers zurückgegeben, die eine Londoner Adresse haben.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ queryLondonCustomers = from customer }\KeywordTok{in}\NormalTok{ customers}
\NormalTok{                           where customer.}\FunctionTok{City}\NormalTok{ == }\StringTok{"London"}
\NormalTok{                           select customer;}
\end{Highlighting}
\end{Shaded}

Sie können die logischen Operatoren \texttt{\&\&} und
\texttt{\textbar{}\textbar{}} verwenden, um so viele Filterausdrücke wie
benötigt in der \texttt{where}-Klausel anzuwenden.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}

\KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{bool} \FunctionTok{even}\NormalTok{(}\DataTypeTok{int}\NormalTok{ value)}
\NormalTok{  \{}
     \KeywordTok{return}\NormalTok{ value % }\DecValTok{2}\NormalTok{ == }\DecValTok{0}\NormalTok{;}
\NormalTok{  \}}

  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{var}\NormalTok{ numbers = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{int}\NormalTok{>() \{-}\DecValTok{1}\NormalTok{, }\DecValTok{7}\NormalTok{,}\DecValTok{11}\NormalTok{,}\DecValTok{21}\NormalTok{,}\DecValTok{32}\NormalTok{,}\DecValTok{42}\NormalTok{\};}
    \DataTypeTok{var}\NormalTok{ query = from i }\KeywordTok{in}\NormalTok{ numbers}
\NormalTok{                where i < }\DecValTok{40}\NormalTok{ && i > }\DecValTok{0}
\NormalTok{                select i;}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ x }\KeywordTok{in}\NormalTok{ query)}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{(x);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die entsprechenden Operatoren können aber auch um eigenständige Methoden
ergänzt werden. Versuchen Sie zum Beispiel die Bereichsabfrage um eine
Prüfung zu erweitern, ob der Zahlenwert gerade ist.

\hypertarget{gruppieren}{%
\subsection{Gruppieren}\label{gruppieren}}

Die group-Klausel ermöglicht es, die Ergebnisse auf der Basis eines
Merkmals zusammenzufassen. Die group-Klausel gibt entsprechend eine
Sequenz von
\texttt{IGrouping\textless{}TKey,TElement\textgreater{}}-Objekten
zurück, die null oder mehr Elemente enthalten, die mit dem Schlüsselwert
\texttt{TKey} für die Gruppe übereinstimmen. Der Compiler leiten den Typ
des Schlüssels anhand der Parameter von \texttt{group} her. IGrouping
selbst implementiert das Interface \texttt{IEnumerable} und kann damit
iteriert werden.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ queryCustomersByCity =}
\NormalTok{    from customer }\KeywordTok{in}\NormalTok{ customers}
\NormalTok{    group customer by customer.}\FunctionTok{City}\NormalTok{;}

\CommentTok{// customerGroup is an IGrouping<string, Customer> now!}
\KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ customerGroup }\KeywordTok{in}\NormalTok{ queryCustomersByCity)   }\CommentTok{// Iteration 1}
\NormalTok{\{}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(customerGroup.}\FunctionTok{Key}\NormalTok{);}
    \KeywordTok{foreach}\NormalTok{ (Customer customer }\KeywordTok{in}\NormalTok{ customerGroup)      }\CommentTok{// Iteration 2}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"    \{0\}"}\NormalTok{, customer.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Dabei können die Ergebnisse einer Gruppierung wiederum Ausgangsbasis für
eine weitere Abfrage sein, wenn das Resultat mit \texttt{into} in einem
Zwischenergebnis gespeichert wird.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}


\KeywordTok{class}\NormalTok{ Student\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ id;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject\{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{()\{\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{Name}\NormalTok{ = name;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      List<Student> students = }\KeywordTok{new}\NormalTok{ List<Student>\{}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Max Müller")\{Subject = "}\NormalTok{Technische Informatik}\StringTok{", id = 1\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Maria Maier"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{2}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Martin Morawschek"}\NormalTok{)\{Subject = }\StringTok{"Höhere Mathematik I"}\NormalTok{, id = }\DecValTok{3}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Katja Schulz"}\NormalTok{)\{Subject = }\StringTok{"Technische Informatik"}\NormalTok{, id = }\DecValTok{4}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Karl Tischer"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{5}\NormalTok{\},}
\NormalTok{      \};}
      \DataTypeTok{var}\NormalTok{ query = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{                  group s by s.}\FunctionTok{Subject}\NormalTok{;}
      \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ studentGroup }\KeywordTok{in}\NormalTok{ query)}
\NormalTok{      \{}
\NormalTok{          Console.}\FunctionTok{WriteLine}\NormalTok{(studentGroup.}\FunctionTok{Key}\NormalTok{);}
          \KeywordTok{foreach}\NormalTok{ (Student student }\KeywordTok{in}\NormalTok{ studentGroup)}
\NormalTok{          \{}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"    \{0\}"}\NormalTok{, student.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{          \}}
\NormalTok{       \}}
       \DataTypeTok{var}\NormalTok{ query2 = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{                    group s by s.}\FunctionTok{Subject}\NormalTok{ into sg}
\NormalTok{                    select }\KeywordTok{new}\NormalTok{ \{Subject = sg.}\FunctionTok{Key}\NormalTok{, Count = sg.}\FunctionTok{Count}\NormalTok{()\};}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{();}
       \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ group }\KeywordTok{in}\NormalTok{ query2)\{}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(group.}\FunctionTok{Count}\NormalTok{ + }\StringTok{" students attend in "}\NormalTok{ + group.}\FunctionTok{Subject}\NormalTok{);}
\NormalTok{       \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{sortieren}{%
\subsection{Sortieren}\label{sortieren}}

Bei einem Sortiervorgang werden die Elemente einer Sequenz auf Grundlage
eines oder mehrerer Attribute sortiert. Mit dem ersten Sortierkriterium
wird eine primäre Sortierung der Elemente ausgeführt. Sie können die
Elemente innerhalb jeder primären Sortiergruppe sortieren, indem Sie ein
zweites Sortierkriterium angeben.

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{var}\NormalTok{ queryLondonCustomers = from customer }\KeywordTok{in}\NormalTok{ customers}
\NormalTok{                           orderby customer.}\FunctionTok{City}\NormalTok{, customer.}\FunctionTok{Street}\NormalTok{ descending}
\NormalTok{                           select customer;}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}


\KeywordTok{class}\NormalTok{ Student\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ id;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject\{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{()\{\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{Name}\NormalTok{ = name;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      List<Student> students = }\KeywordTok{new}\NormalTok{ List<Student>\{}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Max Müller")\{Subject = "}\NormalTok{Technische Informatik}\StringTok{", id = 1\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Maria Maier"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{2}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Martin Morawschek"}\NormalTok{)\{Subject = }\StringTok{"Höhere Mathematik I"}\NormalTok{, id = }\DecValTok{3}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Katja Schulz"}\NormalTok{)\{Subject = }\StringTok{"Technische Informatik"}\NormalTok{, id = }\DecValTok{4}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Karl Tischer"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{5}\NormalTok{\},}
\NormalTok{      \};}
       \DataTypeTok{var}\NormalTok{ query = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{                   orderby s.}\FunctionTok{Subject}\NormalTok{ descending}
\NormalTok{                   select s;}
       \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ student }\KeywordTok{in}\NormalTok{ query)\{}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0,-22\} - \{1\}"}\NormalTok{, student.}\FunctionTok{Subject}\NormalTok{, student.}\FunctionTok{Name}\NormalTok{);}
\NormalTok{       \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{ausgaben}{%
\subsection{Ausgaben}\label{ausgaben}}

Die select-Klausel generiert aus den Ergebnissen der Abfrage das
Resultat und definiert damit das Format jedes zurückgegebenen Elements.
Dies kann

\begin{itemize}
\tightlist
\item
  den vollständigen Datensatz umfassen,
\item
  lediglich eine Teilmenge der Member oder
\item
  einen völlig neuen Datentypen.
\end{itemize}

Wenn die select-Klausel etwas anderes als eine Kopie des Quellelements
erzeugt, wird dieser Vorgang als Projektion bezeichnet.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Linq}\NormalTok{;}


\KeywordTok{class}\NormalTok{ Student\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Name;}
  \KeywordTok{public} \DataTypeTok{int}\NormalTok{ id;}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{ Subject\{}\KeywordTok{get}\NormalTok{; }\KeywordTok{set}\NormalTok{;\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{()\{\}}
  \KeywordTok{public} \FunctionTok{Student}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
     \KeywordTok{this}\NormalTok{.}\FunctionTok{Name}\NormalTok{ = name;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{      List<Student> students = }\KeywordTok{new}\NormalTok{ List<Student>\{}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Max Müller")\{Subject = "}\NormalTok{Technische Informatik}\StringTok{", id = 1\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Maria Maier"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{2}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Martin Morawschek"}\NormalTok{)\{Subject = }\StringTok{"Höhere Mathematik I"}\NormalTok{, id = }\DecValTok{3}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Katja Schulz"}\NormalTok{)\{Subject = }\StringTok{"Technische Informatik"}\NormalTok{, id = }\DecValTok{4}\NormalTok{\},}
        \KeywordTok{new} \FunctionTok{Student}\NormalTok{(}\StringTok{"Karl Tischer"}\NormalTok{)\{Subject = }\StringTok{"Softwareentwicklung"}\NormalTok{, id = }\DecValTok{5}\NormalTok{\},}
\NormalTok{      \};}
       \DataTypeTok{var}\NormalTok{ query = from s }\KeywordTok{in}\NormalTok{ students}
\NormalTok{                   select }\KeywordTok{new}\NormalTok{ \{Surname = s.}\FunctionTok{Name}\NormalTok{.}\FunctionTok{Split}\NormalTok{(}\CharTok{' '}\NormalTok{)[}\DecValTok{0}\NormalTok{]\};}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(query.}\FunctionTok{GetType}\NormalTok{());}
       \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ student }\KeywordTok{in}\NormalTok{ query)\{}
\NormalTok{         Console.}\FunctionTok{WriteLine}\NormalTok{(student.}\FunctionTok{Surname}\NormalTok{);}
\NormalTok{       \}}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Einen guten Überblick zu den Konzequenzen einer Projektion gibt die
Webseite
https://docs.microsoft.com/de-de/dotnet/csharp/programming-guide/concepts/linq/type-relationships-in-linq-query-operations

\hypertarget{aufgabe-der-woche}{%
\section{Aufgabe der Woche}\label{aufgabe-der-woche}}

Für die Vereinigten Staaten liegen umfangreiche Datensätze zur
Namensgebung von Neugeborenen seit 1880 vor. Eine entsprechende
csv-Datei (comma separated file) findet sich im Projektordner und /data,
sie umfasst 258.000 Einträge. Diese sind wie folgt gegliedert

\begin{verbatim}
1880,"John",0.081541,"boy"
1880,"William",0.080511,"boy"
1880,"James",0.050057,"boy"
\end{verbatim}

Die erste Spalte gibt das Geburtsjahr, die zweite den Vornamen, die
Dritte den Anteil der mit diesem Vornamen benannten Kinder und die
vierte das Geschlecht an.

Der Datensatz steht zum Download unter https://osf.io/d2vyg/ bereit.

Lesen Sie aus den Daten die jeweils am häufigsten vergebenen Vornamen
aus und bestimmen Sie deren Anteil innerhalb des Jahrganges.

https://github.com/liaScript/CsharpCourse/tree/master/code/25\_LINQII

Welche Möglichkeiten der Analyse sehen Sie?

\hypertarget{entwurfsmuster}{%
\chapter{Entwurfsmuster}\label{entwurfsmuster}}

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.11\columnwidth}\raggedright
Parameter\strut
\end{minipage} & \begin{minipage}[b]{0.83\columnwidth}\raggedright
Kursinformationen\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Veranstaltung:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Vorlesung\ Softwareentwicklung}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Semester}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Sommersemester\ 2021}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Hochschule:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Technische\ Universität\ Freiberg}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Inhalte:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\texttt{Überblick\ Entwurfsmuster}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Link auf den GitHub:}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
\url{https://github.com/TUBAF-IfI-LiaScript/VL_Softwareentwicklung/blob/master/26_DesignPattern.md}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.11\columnwidth}\raggedright
\textbf{Autoren}\strut
\end{minipage} & \begin{minipage}[t]{0.83\columnwidth}\raggedright
@author\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{wiederholung---polymorphie}{%
\section{Wiederholung - Polymorphie}\label{wiederholung---polymorphie}}

Polymorphie ist ein Konzept in der objektorientierten Programmierung,
das ermöglicht, dass ein Bezeichner abhängig von seiner Verwendung
Objekte unterschiedlichen Datentyps annimmt.

\begin{quote}
Polymorphie ``Vielgestaltigkeit'' bezeichnet die Situation, dass ein und
das gleiche ``Etwas'' je nach ``Situation'' verschiedene ``Gestalt''
annehmen kann.
\end{quote}

\begin{longtable}[]{@{}ll@{}}
\toprule
Bezeichnung & Bedeutung im Kontext der Objektorierung\tabularnewline
\midrule
\endhead
Etwas & Instanz einer Objektinstanz aus einer
Vererbungshierachie\tabularnewline
Situation & Typ der Instanz beim Aufruf\tabularnewline
Gestalt & ausgeführter Code\tabularnewline
\bottomrule
\end{longtable}

Voraussetzung ist, dass Methoden gleichen Namens für die Basisklasse und
die erbende Klasse besteht. Im Beispiel ist dies \texttt{Object} und
\texttt{Shape} bzw \texttt{int}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{ A \{...\}}
\KeywordTok{class}\NormalTok{ B: A \{...\}}
\KeywordTok{class}\NormalTok{ C: A \{...\}}

\NormalTok{A a = }\KeywordTok{new} \FunctionTok{A}\NormalTok{();}
\NormalTok{a = }\KeywordTok{new} \FunctionTok{B}\NormalTok{();}
\NormalTok{a = }\KeywordTok{new} \FunctionTok{C}\NormalTok{();}

\CommentTok{//B b = new A();    verboten}
\end{Highlighting}
\end{Shaded}

Wir unterscheiden entsprechend den dynamischen und den statischen Typ
der Variablen A. Eine Referenz des Typs \texttt{A} zeigt auf eine
Instanz von \texttt{B} oder \texttt{C}.

Der dynamische Typ kann zur Laufzeit geprüft (\texttt{is}) durch
Cast-Operationen (\texttt{as}) angepasst werden.

Dieser Mechanismus wird beim sogenannten Boxing und Unboxing deutlich:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Shape\{}
    \KeywordTok{protected} \DataTypeTok{int}\NormalTok{ m_xpos;}
    \KeywordTok{protected} \DataTypeTok{int}\NormalTok{ m_ypos;}
    \KeywordTok{public} \FunctionTok{Shape}\NormalTok{()\{\}}
    \KeywordTok{public} \FunctionTok{Shape}\NormalTok{(}\DataTypeTok{int}\NormalTok{ x, }\DataTypeTok{int}\NormalTok{ y)\{}
\NormalTok{        m_xpos = x;}
\NormalTok{        m_ypos = y;}
\NormalTok{    \}}
    \KeywordTok{public} \KeywordTok{virtual} \DataTypeTok{void} \FunctionTok{Draw}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Drawing a SHAPE at \{0\},\{1\}"}\NormalTok{, m_xpos, m_ypos);}
\NormalTok{    \}}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{string} \FunctionTok{ToString}\NormalTok{()\{}
        \KeywordTok{return}\NormalTok{ String.}\FunctionTok{Format}\NormalTok{(}\StringTok{"Shape at [x,y] \{0\},\{1\}"}\NormalTok{, m_xpos, m_ypos);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{int}\NormalTok{ i = }\DecValTok{123}\NormalTok{;}
    \DataTypeTok{object}\NormalTok{ o = i;}
    \CommentTok{//object o = (object)i;  // identisches explizites boxing}
    \CommentTok{//+-- Statischer Typ von obj}
    \CommentTok{//|                +-- Dynamischer Typ von obj}
    \CommentTok{//|                |}
\NormalTok{    Object obj = }\KeywordTok{new} \FunctionTok{Shape}\NormalTok{();}
    \KeywordTok{if}\NormalTok{ (obj }\KeywordTok{is}\NormalTok{ Object) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Objekt Typ"}\NormalTok{);}
    \KeywordTok{if}\NormalTok{ (obj }\KeywordTok{is}\NormalTok{ Shape) Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Shape Typ"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{quote}
Merke: Boxing und Unboxing sind Cast-Operationen die eine Variable in
eine Instanz von \texttt{object} konvertieren und umgekehrt.
\end{quote}

\begin{quote}
Merke: \texttt{(Shape)\ obj} generiert eine Exception, wenn die
Umwandlung fehlschlägt. Bei der Verwendung des Schlüsselwortes
\texttt{as} in \texttt{obj\ as\ Shape} wird in diesem Fall ein
\texttt{null} zurückgegeben.
\end{quote}

\emph{Wie wende ich das Ganze an?}

Anwendungsbeispiel:

\includegraphics{https://www.plantuml.com/plantuml/png/fP0nJmCn38Lt_mfBBAsW4dC7L0GBy_q0vEQC6f7a3iU1bkF-EoGMugGRcVByylG-ouUi95fYW9Fl6PqN5nZogqyZ2KLqWNA-LnL_BCfFRaYT_sIy1MW_s9rev0dm2i_Fuv3tw9FMwRAOhYsrsVx97n_FDrYVIxCdEcOLSZhZez37Phl7zy7tCF-27jfcKysQj3hJwxvbISjHS3LRuWiB9yThGlTMI8nWqWYc_qcmDN6t-xgp2u3LBXquSEfB3Dy0}

In folgendem Beispiel wurde allein die Klasse \texttt{Circle}
implementiert. Es exisitiert eine Methode \texttt{Draw()}, die auf der
Ebene der Basisklasse und der erbenden Klasse besteht.

\begin{quote}
Merke: Polymorphie bezieht sich auf Methoden mit einer gleichen
Signatur. Unterscheidet sich diese sprechen wir von Überladen. Die
Signatur wird durch die Parameterzahl, -typ, art (\texttt{ref},
\texttt{out}) und die Sichtbarkeitsattribute bestimmt.
\end{quote}

Die Implementierung in \texttt{Square} kann die aus \texttt{Shape}
ignorieren, verdecken oder überschreiben.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Shape\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Draw}\NormalTok{()}
\NormalTok{    \{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"Drawing a SHAPE"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Square : Shape\{}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Draw}\NormalTok{(}\DataTypeTok{string}\NormalTok{ output)}
\NormalTok{    \{}
\NormalTok{      Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{"Drawing a SQUARE with \{output\}"}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{ \}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    Shape sh = }\KeywordTok{new} \FunctionTok{Shape}\NormalTok{();}
\NormalTok{    sh.}\FunctionTok{Draw}\NormalTok{();}
\NormalTok{    Square sq = }\KeywordTok{new} \FunctionTok{Square}\NormalTok{();}
\NormalTok{    sq.}\FunctionTok{Draw}\NormalTok{(}\StringTok{"Tralla"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{<Project}\OtherTok{ Sdk=}\StringTok{"Microsoft.NET.Sdk"}\KeywordTok{>}
  \KeywordTok{<PropertyGroup>}
    \KeywordTok{<OutputType>}\NormalTok{Exe}\KeywordTok{</OutputType>}
    \KeywordTok{<TargetFramework>}\NormalTok{net5.0}\KeywordTok{</TargetFramework>}
  \KeywordTok{</PropertyGroup>}
\KeywordTok{</Project>}
\end{Highlighting}
\end{Shaded}

Erklären Sie die Bedeutung der Schlüsselworte \texttt{virtual} und
\texttt{override}.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\textbar{} \textbf{Virtuelle
Member} \textbar{}\\
Schlüsselwort \textbar{} \texttt{virtual} \textbar{}\\
Implementierung in der Basisklasse \textbar{} muss implementiert werden
\textbar{}\\
Überschreiben in der abgeleiteten Klasse \textbar{} \texttt{override}
\textbar{}

In Bezug auf die Polymorphie bestimmen die Schlüsselworte \texttt{new}
und \texttt{override} das Verhalten:

\begin{itemize}
\tightlist
\item
  \texttt{override} realisiert eine ``angepasste'' Implementierung der
  Methode der Basisklasse
\item
  \texttt{new} implmentiert eine völlig neue Methode, die keinen Bezug
  mehr zur Basisklassenfunktion hat
\end{itemize}

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\textbar{} \textbf{Virtuelle
Member} \textbar{} \textbf{Abstrakte Member} \textbar{}\\
Schlüsselwort \textbar{} \texttt{virtual} \textbar{} \texttt{abstract}
\textbar{}\\
Implementierung in der Basisklasse \textbar{} muss implementiert werden
\textbar{} keine Implementierung \textbar{}\\
Überschreiben in der abgeleiteten Klasse \textbar{} \texttt{override}
\textbar{} muss überschrieben werden \textbar{}

Beide Konzepte können auf Methoden (hier vorrangig betrachtet),
Eigenschaften, Ereignisse und Indexer angewandt werden

Und wie war das noch mal mit den abstrakten Klassen, wie hängt deren
Konzept mit abstrakten Elementen zusammen?

\begin{itemize}
\tightlist
\item
  Sie können keine Instanzen einer abstrakten Klasse erstellen.
\item
  Eine abstrakte Klasse kann abstrakte oder normale, nicht abstrakte
  Mitglieder enthalten.
\item
  Eine abstrakte Klasse kann selbst von einer anderen abstrakten Klasse
  abgeleitet werden
\item
  Jede von einer abstrakten Klasse abgeleitete Klasse muss alle
  abstrakten Mitglieder der Klasse mithilfe des Schlüsselworts
  \texttt{override} implementieren, es sei denn, die abgeleitete Klasse
  ist selbst abstrakt.
\end{itemize}

\hypertarget{design-pattern}{%
\section{Design Pattern}\label{design-pattern}}

Design Pattern sind spezielle Muster für Interaktionen und Zusammenhänge
der Bestandteile einer Softwarelösung. Sie präsentieren
Implementierungsmodelle, die für häufig wiederkehrende Abläufe
(Generierung und Maskierung von Objekten) eine flexible und gut wartbare
Realisierung sicherstellen. Dafür werden die Abläufe abstrahiert und auf
generisch anwendbare Muster reduziert, die dann mit domänenspezifische
Bezeichnern versehen nicht nur für die vereinfachte Umsetzung sondern
auch für die Kommunikation dazu genutzt werden. Dies vereinfacht die
Interaktion zwischen Softwarearchitekten, Programmierer und andere
Projektmitglieder.

\begin{quote}
Design Pattern sind Strukturen, Modelle, Schablonen und Muster, die sich
zur Entwicklung stabiler Softwaremodelle nutzen lassen.
\end{quote}

Entwurfsmuster für Software orientieren sich eng an den grundlegenden
Prinzipien der objektorientierten Programmierung:

\begin{itemize}
\tightlist
\item
  Vererbung
\item
  Kapselung
\item
  Polymorphie
\end{itemize}

Dabei sollte ein Muster:

\begin{itemize}
\tightlist
\item
  ein oder mehrere Standardprobleme lösen,
\item
  die Lesbarkeit und Wartbarkeit des Codes erhöhen
\item
  auf die Nutzung sprachspezifischer Feature verzichten, um eine
  Übertragbarkeit sicherzustellen
\item
  ein eindeutiges Set von Begriffen definieren
\item
  Denkanstöße für den eigenen Entwurf liefern
\end{itemize}

\hypertarget{kategorien}{%
\subsection{Kategorien}\label{kategorien}}

In welchen Kategorien werden Design Pattern üblicherweise strukturiert:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Erzeugungsmuster (englisch creational patterns)

  Realisieren die Erzeugung von Objekten und entkoppeln die Konstruktion
  eines Objekts von seiner Repräsentation.
\item
  Strukturmuster (englisch structural patterns)

  Erleichtern den Entwurf von Software durch vorgefertigte Schablonen
  für Beziehungen zwischen Klassen.
\item
  Verhaltensmuster (englisch behavioral patterns)

  Modellieren komplexes Verhalten der Software und erhöhen damit die
  Flexibilität der Software hinsichtlich ihres Verhaltens.
\end{enumerate}

\begin{quote}
ACHTUNG: Entwurfsmuster sind keine Wunderwaffe und kein Garant für gutes
Design! Möglichst viele Design Pattern zu nutzen verbaut mitunter den
Blick auf elegantere Lösungen.
\end{quote}

\hypertarget{erzeugungsmuster---singleton-pattern}{%
\subsection{Erzeugungsmuster - Singleton
Pattern}\label{erzeugungsmuster---singleton-pattern}}

Das Singleton ist ein in der Softwareentwicklung eingesetztes
Entwurfsmuster und gehört zur Kategorie der Erzeugungsmuster. Es stellt
sicher, dass von einer Klasse genau ein Objekt existiert. Dieses
Singleton ist darüber hinaus üblicherweise global verfügbar. Es soll
sicher gestellt werden, dass ein Resourcenzugriff kanalisiert wird.

\begin{figure}
\centering
\includegraphics{https://www.plantuml.com/plantuml/png/JOwn3i9034FtV8N7LWY9cQcCdVi5HngLY6kABkb2rN_dX8JAQFlPSkUHIgnpfeUE0jR2MSYVQgzKqWpEoVqMKVI-XlIysA1lmONecs1GcxB4OXlXZAskXV8E_zdNWwZ08PgMSC8aqLlj64lJ_gCxKISsrbyV}
\caption{Singleton}
\end{figure}

\textbf{Beispiel}

Ausgangspunkt der Überlegungen ist die Implementierung einer Klasse
\texttt{PrinterDriver}. Über die entsprechenden Hashcodes kann gezeigt
werden, dass es sich um unterschiedliche Instanzen der Klasse handelt.

Welche Möglichkeiten sehen Sie diese Implementierung anzupassen, so dass
das Singleton-Pattern realisiert wird?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ PrinterDriver\{}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{print}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!PRINT \{0\}"}\NormalTok{, text);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \CommentTok{// zwei Instanzen von PrinterDriver}
\NormalTok{    PrinterDriver MyPrinter = }\KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{    PrinterDriver FaultyPrinterInstance = }\KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(MyPrinter.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(FaultyPrinterInstance.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Offenbar kann der Druckertreiber mehrfach instantiiert werden. Welche
Möglichkeiten sehen sie?

** Variante 1**

\begin{quote}
ACHTUNG: Auf den ersten Blick mag die folgende Lösung plausibel
erscheinen, sie hat aber einen zentralen Markel! Welche Einschränkung
sehen Sie?
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ PrinterDriver\{}
  \KeywordTok{private} \FunctionTok{PrinterDriver}\NormalTok{()\{\}}
  \KeywordTok{private} \KeywordTok{static}\NormalTok{ PrinterDriver printerDriverInstance;}

  \KeywordTok{public} \KeywordTok{static}\NormalTok{ PrinterDriver }\FunctionTok{getInstance}\NormalTok{()\{}
      \KeywordTok{if}\NormalTok{ (printerDriverInstance == }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{          printerDriverInstance = }\KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{      \}}
      \KeywordTok{return}\NormalTok{ printerDriverInstance;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{print}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!PRINT \{0\}"}\NormalTok{, text);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    PrinterDriver MyPrinter = PrinterDriver.}\FunctionTok{getInstance}\NormalTok{();}
\NormalTok{    PrinterDriver FaultyPrinterInstance = PrinterDriver.}\FunctionTok{getInstance}\NormalTok{();}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(MyPrinter.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(FaultyPrinterInstance.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Von \emph{Lazy Creation} spricht man, wenn das einzige Objekt der Klasse
erst erzeugt wird, wenn es benötigt wird. Ziel ist, dass der
Speicherbedarf und die Rechenzeit für die Instantiierung des Objektes
nur dann aufgewendet werden, wenn das Objekt wirklich benötigt wird.
Hierzu wird der Konstruktor ausschließlich beim ersten Aufruf der
Funktion \texttt{getInstance()} aufgerufen.

Unter Rextester gelingt es leider nicht die Threads so zu konfigurieren,
dass mehrere Instanzen der Klasse entstehen. Wenn Sie aber den
nachfolgenden Code in Ihre Entwicklungsumgebung kopieren, können Sie den
Effekt gut beobachten.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{public} \KeywordTok{sealed} \KeywordTok{class}\NormalTok{ PrinterDriver\{}
  \KeywordTok{private} \FunctionTok{PrinterDriver}\NormalTok{()\{\}}
  \KeywordTok{private} \KeywordTok{static}\NormalTok{ PrinterDriver printerDriverInstance;}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ InstanceCount = }\DecValTok{0}\NormalTok{;}
  \KeywordTok{public} \KeywordTok{static}\NormalTok{ PrinterDriver }\FunctionTok{getInstance}\NormalTok{()\{}
\NormalTok{      Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{10}\NormalTok{);}
      \KeywordTok{if}\NormalTok{ (printerDriverInstance == }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{          printerDriverInstance = }\KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{          InstanceCount ++;}
\NormalTok{          System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"New Driver instantiated!"}\NormalTok{);}
\NormalTok{      \}}
      \KeywordTok{return}\NormalTok{ printerDriverInstance;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{print}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!PRINT \{0\}"}\NormalTok{, text);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{CheckInitialization}\NormalTok{() \{}
\NormalTok{      PrinterDriver localInstance = PrinterDriver.}\FunctionTok{getInstance}\NormalTok{();}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < }\DecValTok{10}\NormalTok{; i++)\{}
        \KeywordTok{new} \FunctionTok{Thread}\NormalTok{(CheckInitialization).}\FunctionTok{Start}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1000}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} Instances of PrinterDriver established!"}\NormalTok{, arg0: PrinterDriver.}\FunctionTok{InstanceCount}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Welche Lösung sehen Sie?

Als Lösungsansatz können die Synchronisationsmethoden aus der
Laufzeitumgebung nutzen. \texttt{lock} garantiert, dass lediglich ein
Thread einen bestimmten Codeabschnitt betreten hat und blockiert alle
anderen. Eine mögliche Lösung könnte wie folgt aussehen:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Threading}\NormalTok{;}

\KeywordTok{public} \KeywordTok{sealed} \KeywordTok{class}\NormalTok{ PrinterDriver\{}
  \KeywordTok{private} \FunctionTok{PrinterDriver}\NormalTok{()\{\}}
  \KeywordTok{private} \KeywordTok{static}\NormalTok{ PrinterDriver printerDriverInstance;}
  \CommentTok{// Zusätzliches Feld "padlock"}
  \KeywordTok{private} \KeywordTok{static} \KeywordTok{readonly} \DataTypeTok{object}\NormalTok{ padlock = }\KeywordTok{new} \DataTypeTok{object}\NormalTok{();}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{int}\NormalTok{ InstanceCount = }\DecValTok{0}\NormalTok{;}
  \KeywordTok{public} \KeywordTok{static}\NormalTok{ PrinterDriver }\FunctionTok{getInstance}\NormalTok{()\{}
\NormalTok{      Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{100}\NormalTok{);}
      \KeywordTok{lock}\NormalTok{ (padlock)}
\NormalTok{      \{}
         \KeywordTok{if}\NormalTok{ (printerDriverInstance == }\KeywordTok{null}\NormalTok{)\{}
\NormalTok{            printerDriverInstance = }\KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{            InstanceCount ++;}
\NormalTok{            System.}\FunctionTok{Console}\NormalTok{.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"New Driver instantiated!"}\NormalTok{);}
\NormalTok{          \}}
\NormalTok{      \}}
      \KeywordTok{return}\NormalTok{ printerDriverInstance;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{print}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)\{}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!PRINT \{0\}"}\NormalTok{, text);}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{CheckInitialization}\NormalTok{() \{}
\NormalTok{      PrinterDriver localInstance = PrinterDriver.}\FunctionTok{getInstance}\NormalTok{();}
\NormalTok{  \}}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \KeywordTok{for}\NormalTok{ (}\DataTypeTok{int}\NormalTok{ i = }\DecValTok{0}\NormalTok{; i < }\DecValTok{10}\NormalTok{; i++)\{}
        \KeywordTok{new} \FunctionTok{Thread}\NormalTok{(CheckInitialization).}\FunctionTok{Start}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{    Thread.}\FunctionTok{Sleep}\NormalTok{(}\DecValTok{1000}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} Instances of PrinterDriver established!"}\NormalTok{, arg0: PrinterDriver.}\FunctionTok{InstanceCount}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Die einfachste Form der Realisierung kann aber mit
\texttt{System.Lazy\textless{}T\textgreater{}} ab .NET 4 umgesetzt
werden. Alles was man dabei braucht ist ein Delegate auf den Konstruktor
des Singletons.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{sealed} \KeywordTok{class}\NormalTok{ PrinterDriver\{}
    \CommentTok{//private static readonly Lazy<PrinterDriver> lazy = new Lazy<PrinterDriver> (() => new PrinterDriver());}
    \KeywordTok{private} \KeywordTok{static} \KeywordTok{readonly}\NormalTok{ Lazy<PrinterDriver> lazy = }\KeywordTok{new}\NormalTok{ Lazy<PrinterDriver> (getInstance);}
    \KeywordTok{static}\NormalTok{ PrinterDriver }\FunctionTok{getInstance}\NormalTok{()\{}
      \KeywordTok{return} \KeywordTok{new} \FunctionTok{PrinterDriver}\NormalTok{();}
\NormalTok{    \}}
    \KeywordTok{public} \KeywordTok{static}\NormalTok{ PrinterDriver Instance \{}
      \KeywordTok{get}\NormalTok{ \{ }\KeywordTok{return}\NormalTok{ lazy.}\FunctionTok{Value}\NormalTok{; \}}
\NormalTok{    \}}
    \KeywordTok{private} \FunctionTok{PrinterDriver}\NormalTok{()\{\}}
    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{print}\NormalTok{(}\DataTypeTok{string}\NormalTok{ text)\{}
\NormalTok{       Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"!PRINT \{0\}"}\NormalTok{, text);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{     PrinterDriver MyPrinter = PrinterDriver.}\FunctionTok{Instance}\NormalTok{;}
\NormalTok{     PrinterDriver FaultyPrinterInstance = PrinterDriver.}\FunctionTok{Instance}\NormalTok{;}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(MyPrinter.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{     Console.}\FunctionTok{WriteLine}\NormalTok{(FaultyPrinterInstance.}\FunctionTok{GetHashCode}\NormalTok{());}
\NormalTok{     MyPrinter.}\FunctionTok{print}\NormalTok{(}\StringTok{"Singleton - Aus die Maus"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{strukturmuster-adapter-pattern}{%
\subsection{Strukturmuster Adapter
Pattern}\label{strukturmuster-adapter-pattern}}

Ausgangspunkt für das Beispiel ist die Notwendigkeit eine externes
Buchungssystem mit einer Mitarbeiterdatenbank zu verknüpfen. Dabei sind
Sie als Entwickler mit zwei Formen der Datenhaltung konfrontiert.
Während Ihr Managementsystem für die Mitarbeiter \texttt{HRSystem} auf
ein Array von strings setzt, erwartet das einzubindende Buchungssystem
eine (generische) Liste von strings.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{public} \KeywordTok{class}\NormalTok{ HRSystem\{}
   \KeywordTok{public} \DataTypeTok{string}\NormalTok{[][] }\FunctionTok{GetEmployees}\NormalTok{()\{}
     \DataTypeTok{string}\NormalTok{[][] employees = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[}\DecValTok{4}\NormalTok{][];}
\NormalTok{     employees[}\DecValTok{0}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"100"}\NormalTok{, }\StringTok{"Deepak"}\NormalTok{, }\StringTok{"Team Leader"}\NormalTok{ \};}
\NormalTok{     employees[}\DecValTok{1}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"101"}\NormalTok{, }\StringTok{"Rohit"}\NormalTok{, }\StringTok{"Developer"}\NormalTok{ \};}
\NormalTok{     employees[}\DecValTok{2}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"102"}\NormalTok{, }\StringTok{"Gautam"}\NormalTok{, }\StringTok{"Developer"}\NormalTok{ \};}
\NormalTok{     employees[}\DecValTok{3}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"103"}\NormalTok{, }\StringTok{"Dev"}\NormalTok{, }\StringTok{"Tester"}\NormalTok{ \};}

     \KeywordTok{return}\NormalTok{ employees;}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ ThirdPartyBillingSystem}
\NormalTok{\{}
\NormalTok{   ...}
   \KeywordTok{public} \DataTypeTok{void} \FunctionTok{ShowEmployeeList}\NormalTok{()\{}
\NormalTok{     List<}\DataTypeTok{string}\NormalTok{> employee = employeeSource.}\FunctionTok{GetEmployeeList}\NormalTok{();}
\NormalTok{     ...}
\NormalTok{   \}}
\NormalTok{   ...}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Der Adapter (englisch adapter pattern) -- auch als Wrapper bezeichnet --
ist ein Entwurfsmuster das zur Übersetzung einer Schnittstelle in eine
andere dient. Dadurch wird die Kommunikation von Klassen mit zueinander
inkompatiblen Schnittstellen ermöglich.

\begin{figure}
\centering
\includegraphics{./img/26_Pattern/ObjektAdapter.png}
\caption{Adapter}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Das Beispiel ist motiviert durch den Code auf der Seite}
\CommentTok{// https://www.dotnettricks.com/learn/designpatterns/adapter-design-pattern-dotnet}

\KeywordTok{using}\NormalTok{ System;}
\KeywordTok{using}\NormalTok{ System.}\FunctionTok{Collections}\NormalTok{.}\FunctionTok{Generic}\NormalTok{;}

\KeywordTok{public} \KeywordTok{interface}\NormalTok{ ITarget\{}
\NormalTok{  List<}\DataTypeTok{string}\NormalTok{> }\FunctionTok{GetEmployeeList}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ ThirdPartyBillingSystem}
\NormalTok{\{}
  \KeywordTok{private}\NormalTok{ ITarget employeeSource;}
  \KeywordTok{public} \FunctionTok{ThirdPartyBillingSystem}\NormalTok{(ITarget employeeSource)\{}
   \KeywordTok{this}\NormalTok{.}\FunctionTok{employeeSource}\NormalTok{ = employeeSource;}
\NormalTok{  \}}
  \KeywordTok{public} \DataTypeTok{void} \FunctionTok{ShowEmployeeList}\NormalTok{()\{}
\NormalTok{   List<}\DataTypeTok{string}\NormalTok{> employee = employeeSource.}\FunctionTok{GetEmployeeList}\NormalTok{();}
   \CommentTok{//To DO: Implement you business logic}
\NormalTok{   Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"######### Employee List ##########"}\NormalTok{);}
   \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{var}\NormalTok{ item }\KeywordTok{in}\NormalTok{ employee)\{}
\NormalTok{     Console.}\FunctionTok{Write}\NormalTok{(item);}
\NormalTok{   \}}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ HRSystem\{}
  \KeywordTok{public} \DataTypeTok{string}\NormalTok{[][] }\FunctionTok{GetEmployees}\NormalTok{()\{}
    \DataTypeTok{string}\NormalTok{[][] employees = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[}\DecValTok{4}\NormalTok{][];}
\NormalTok{    employees[}\DecValTok{0}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"100"}\NormalTok{, }\StringTok{"Deepak"}\NormalTok{, }\StringTok{"Team Leader"}\NormalTok{ \};}
\NormalTok{    employees[}\DecValTok{1}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"101"}\NormalTok{, }\StringTok{"Rohit"}\NormalTok{, }\StringTok{"Developer"}\NormalTok{ \};}
\NormalTok{    employees[}\DecValTok{2}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"102"}\NormalTok{, }\StringTok{"Gautam"}\NormalTok{, }\StringTok{"Developer"}\NormalTok{ \};}
\NormalTok{    employees[}\DecValTok{3}\NormalTok{] = }\KeywordTok{new} \DataTypeTok{string}\NormalTok{[] \{ }\StringTok{"103"}\NormalTok{, }\StringTok{"Dev"}\NormalTok{, }\StringTok{"Tester"}\NormalTok{ \};}
    \KeywordTok{return}\NormalTok{ employees;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ EmployeeAdapter : HRSystem, ITarget\{}
  \KeywordTok{public}\NormalTok{ List<}\DataTypeTok{string}\NormalTok{> }\FunctionTok{GetEmployeeList}\NormalTok{()\{}
\NormalTok{    List<}\DataTypeTok{string}\NormalTok{> employeeList = }\KeywordTok{new}\NormalTok{ List<}\DataTypeTok{string}\NormalTok{>();}
    \DataTypeTok{string}\NormalTok{[][] employees = }\FunctionTok{GetEmployees}\NormalTok{();}
    \KeywordTok{foreach}\NormalTok{ (}\DataTypeTok{string}\NormalTok{[] employee }\KeywordTok{in}\NormalTok{ employees)}
\NormalTok{    \{}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(employee[}\DecValTok{0}\NormalTok{]);}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(}\StringTok{","}\NormalTok{);}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(employee[}\DecValTok{1}\NormalTok{]);}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(}\StringTok{","}\NormalTok{);}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(employee[}\DecValTok{2}\NormalTok{]);}
\NormalTok{      employeeList.}\FunctionTok{Add}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{return}\NormalTok{ employeeList;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{    ITarget Itarget = }\KeywordTok{new} \FunctionTok{EmployeeAdapter}\NormalTok{();}
\NormalTok{    ThirdPartyBillingSystem client = }\KeywordTok{new} \FunctionTok{ThirdPartyBillingSystem}\NormalTok{(Itarget);}
\NormalTok{    client.}\FunctionTok{ShowEmployeeList}\NormalTok{();}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{erzeugungsmuster-abstract-factory-pattern}{%
\subsection{Erzeugungsmuster (Abstract) Factory
Pattern}\label{erzeugungsmuster-abstract-factory-pattern}}

Der Begriff Factory Pattern bezeichnet ein Entwurfsmuster, das
beschreibt, wie ein Objekt durch Aufruf einer Methode anstatt durch
direkten Aufruf eines Konstruktors erzeugt wird.

Eine abstrakte ``Fabrikmethode'' dient dabei als Schnittstelle zur
Erstellung eines Objektes. Die konkrete Implementierung der Erzeugung
neuer Objekte findet jedoch nicht in der Oberklasse statt, sondern in
von ihr abgeleiteten Unterklassen, die die besagte abstrakte Methode
implementieren.

Das Muster beschreibt somit die Erzeugung von Produktobjekten, deren
konkreter Typ ein Untertyp einer abstrakten Produktklasse ist, welcher
von Unterklassen einer Erzeugerklasse bestimmt wird. Es wird manchmal
auch als „virtueller Konstruktor`` bezeichnet.

\begin{figure}
\centering
\includegraphics{./img/26_Pattern/Fabrikmethode.png}
\caption{Adapter}
\end{figure}

Der Begriff Fabrikmethode wird in der Praxis auch oft einfach nur für
eine statische Methode verwendet, die ein neues Objekt erzeugt,
vergleichbar einem Konstruktor.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// SomeObject o = new SomeObject();}
\CommentTok{// Aufruf einer Fabrikmethode statt des Konstruktors}
\NormalTok{SomeObject o = SomeObjectFactory.}\FunctionTok{createNewInstance}\NormalTok{();}
\end{Highlighting}
\end{Shaded}

Fabrikmethoden entkoppeln ihre Aufrufer von Implementierungen konkreter
Produkt-Klassen:

\begin{itemize}
\tightlist
\item
  leichtere Anpassbarkeit bei Veränderungen
\item
  der fest definierte Name des Konstruktors kann durch eine
  aussagekräftigere Methode ersetzt werden.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{interface}\NormalTok{ IVehicle \{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ MonoWheel : IVehicle \{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Car : IVehicle \{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Motorbike : IVehicle \{\}}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Truck : IVehicle \{\}}

\KeywordTok{public} \KeywordTok{static} \KeywordTok{class}\NormalTok{ VehicleFactory}
\NormalTok{\{}
   \KeywordTok{public} \KeywordTok{static}\NormalTok{ IVehicle }\FunctionTok{Build}\NormalTok{(}\DataTypeTok{int}\NormalTok{ numberOfWheels)}
\NormalTok{   \{}
      \KeywordTok{switch}\NormalTok{ (numberOfWheels)}
\NormalTok{      \{}
         \KeywordTok{case} \DecValTok{1}\NormalTok{:}
             \KeywordTok{return} \KeywordTok{new} \FunctionTok{MonoWheel}\NormalTok{();}
         \KeywordTok{case} \DecValTok{2}\NormalTok{:}
         \KeywordTok{case} \DecValTok{3}\NormalTok{:}
             \KeywordTok{return} \KeywordTok{new} \FunctionTok{Motorbike}\NormalTok{();}
         \KeywordTok{case} \DecValTok{4}\NormalTok{:}
             \KeywordTok{return} \KeywordTok{new} \FunctionTok{Car}\NormalTok{();}
         \KeywordTok{default}\NormalTok{ :}
             \KeywordTok{return} \KeywordTok{new} \FunctionTok{Truck}\NormalTok{();}
\NormalTok{       \}}
\NormalTok{   \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
  \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
    \DataTypeTok{var}\NormalTok{ vehicle = VehicleFactory.}\FunctionTok{Build}\NormalTok{(}\DecValTok{2}\NormalTok{);}
\NormalTok{    Console.}\FunctionTok{WriteLine}\NormalTok{($}\StringTok{" You built a \{vehicle.GetType().Name\}"}\NormalTok{);}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Dabei können zwei grundsätzliche Varianten unterschieden werden:

\begin{longtable}[]{@{}ll@{}}
\toprule
\begin{minipage}[b]{0.19\columnwidth}\raggedright
Pattern\strut
\end{minipage} & \begin{minipage}[b]{0.75\columnwidth}\raggedright
Bedeutung\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.19\columnwidth}\raggedright
Factory pattern\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
Implementiert den Zugriff auf eine Familie von Produkten über einen
Konkreten Erzeuger.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.19\columnwidth}\raggedright
Abstract Factory pattern\strut
\end{minipage} & \begin{minipage}[t]{0.75\columnwidth}\raggedright
Implementiert den Zugriff auf unterschiedliche Produktklassen über eine
Familie von Erzeugern.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\begin{figure}
\centering
\includegraphics{./img/26_Pattern/AbstractFactory.png}
\caption{Adapter}
\end{figure}

\hypertarget{verhaltensmuster-state-pattern}{%
\subsection{Verhaltensmuster State
Pattern}\label{verhaltensmuster-state-pattern}}

Die Abbildung von Zustandsmaschinen ist ein häufig wiederkehrendes
Motiv. Nehmen wir an, das wir eine Rollenspielfigur modellieren wollen.
Dabei bestehen lediglich drei emotionale Zustände, die Figur kann eine
neutrale, eine aggressive oder eine freundliche Position einnehmen.
Üblicherweise würde sich diese Einschätzung auf den Gegenüber beziehen.
Bei komplexeren Sozialstrukturen müsste eine Zuordnung zu einzelnen
Charakteren gewährleistet sein.

In einer tabellarischen State-Maschine Darstellung ergibt sich dann
folgendes Bild:

\begin{longtable}[]{@{}llll@{}}
\toprule
& Happy & Neutral & Aggressive\tabularnewline
\midrule
\endhead
Happy & DealingWith, Addressed & &\tabularnewline
Neutral & & Addressed & DealingWith, Addresssed\tabularnewline
Aggressive & Provoked & Provoked & Provoked\tabularnewline
\bottomrule
\end{longtable}

Und wie implementieren wir das Ganze? Zunächst intuitiv mittels einer
einzigen Klasse und switch-case Statements.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{enum}\NormalTok{ Feeling \{Happy, Aggressive, Neutral\};}
\KeywordTok{public} \KeywordTok{class}\NormalTok{ Character\{}
    \KeywordTok{public} \DataTypeTok{byte}\NormalTok{ state;}
    \KeywordTok{private} \DataTypeTok{string}\NormalTok{ name;}
    \KeywordTok{public} \FunctionTok{Character}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name,}
                     \DataTypeTok{byte}\NormalTok{ state =(}\DataTypeTok{byte}\NormalTok{)Feeling.}\FunctionTok{Happy}\NormalTok{ )}
\NormalTok{    \{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{ = state;}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{PrintState}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} "}\NormalTok{, (Feeling)state);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{()\{}
        \KeywordTok{switch}\NormalTok{ ((Feeling)}\KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{)}
\NormalTok{        \{}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Happy}\NormalTok{:}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Neutral}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Jetzt hast Du meine Laune verdorben!"}\NormalTok{, name);}
                \KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{ = (}\DataTypeTok{byte}\NormalTok{)Feeling.}\FunctionTok{Aggressive}\NormalTok{;}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Aggressive}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Mich kannst Du nicht wütender machen"}\NormalTok{, name);}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{default}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"NOT IMPLEMENTED!"}\NormalTok{);}
                \KeywordTok{break}\NormalTok{;}
\NormalTok{        \}}
        \FunctionTok{PrintState}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{()\{}
        \KeywordTok{switch}\NormalTok{ ((Feeling)}\KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{)}
\NormalTok{        \{}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Happy}\NormalTok{:}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Neutral}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Dein Geschnack ändert meine Stimmung nicht"}\NormalTok{, name);}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Aggressive}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Na gut, bin Dir nicht mehr böse!"}\NormalTok{, name);}
                \KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{ = (}\DataTypeTok{byte}\NormalTok{)Feeling.}\FunctionTok{Neutral}\NormalTok{;}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{default}\NormalTok{:}
\NormalTok{                 Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"NOT IMPLEMENTED!"}\NormalTok{);}
                \KeywordTok{break}\NormalTok{;}
\NormalTok{        \}}
        \FunctionTok{PrintState}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{()\{}
        \KeywordTok{switch}\NormalTok{ ((Feeling)}\KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{)}
\NormalTok{        \{}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Happy}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Nett mit Dir Geschäfte zu machen!"}\NormalTok{, name);}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Aggressive}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Jup, ein gutes Geschäft, fühle mich besser!"}\NormalTok{, name);}
                \KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{ = (}\DataTypeTok{byte}\NormalTok{)Feeling.}\FunctionTok{Neutral}\NormalTok{;}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{case}\NormalTok{ Feeling.}\FunctionTok{Neutral}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\}: Super Deal, wir sind jetzt dicke Kumpels!"}\NormalTok{, name);}
                \KeywordTok{this}\NormalTok{.}\FunctionTok{state}\NormalTok{ = (}\DataTypeTok{byte}\NormalTok{)Feeling.}\FunctionTok{Happy}\NormalTok{;}
                \KeywordTok{break}\NormalTok{;}
            \KeywordTok{default}\NormalTok{:}
\NormalTok{                Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"NOT IMPLEMENTED!"}\NormalTok{);}
                \KeywordTok{break}\NormalTok{;}
\NormalTok{        \}}
        \FunctionTok{PrintState}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Character Golum = }\KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Golum"}\NormalTok{);}
\NormalTok{        Golum.}\FunctionTok{Provoked}\NormalTok{();}
\NormalTok{        Golum.}\FunctionTok{DealingWith}\NormalTok{();}
\NormalTok{        Golum.}\FunctionTok{Addressed}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Welche Probleme sehen Sie?

Wie wäre es mit folgender neuen Anforderung: Um die Modellierung
``spielbar'' zu sollen Wahrscheinlichkeiten beim Übergang eingeführt
werden. Damit muss jeder Transition eine eigene Zahl zugeordnet werden,
die vom aktuellen Zustand, der Transition und einer Zufallsvariablen
abhängt.

\begin{itemize}
\item
  Unleserlichkeit und Unübersichtlichkeit.

  Der Code bildet den Zustandsautomaten nicht aus Zustands- sondern aus
  Transitionssicht ab. Entsprechend ist das Verhalten für jeden Zustand
  über die Methoden \texttt{DealingWith}, \texttt{Àddressed} und
  \texttt{Provoked} verteilt. Man stelle sich nur den Entwurf mit 10
  oder mehr Zuständen und 15 Methoden vor.
\item
  Schlechte Wartbarkeit und Erweiterbarkeit.

  Sollen neue Zustände eingeführt werden, so muss umständlich JEDE
  Operation um einen weiteren Fall erweitert werden. Die
  Fehlerträchtigkeit hierbei ist enorm.
\item
  In jedem Zustand sind alle Transitionsfunktionen möglich

  Wenn wir annehmen, dass nur im \texttt{Feeling.Happy} Fall eine
  bestimmte Interaktion stattfinden kann, sollten wir in allen anderen
  Zuständen deren Aufruf auch nicht ermöglichen.
\end{itemize}

Der State Pattern ist ein Entwurfsmuster, das zur Kapselung
unterschiedlicher, zustandsabhängiger Verhaltensweisen eines Objektes
eingesetzt. Grundsätzlich gilt, dass das Verhalten eines Objekts
abhängig von seinem Zustand dargestellt wird. Entsprechend wird hier
jeder Fall der switch-Anweisung in einer eigenen Klasse implementiert,
so dass der Zustand des Objektes selbst wieder ein Objekt ist, das
unabhängig von anderen Objekten ist. Gleichzeitig realisieren wir eine
Abstraktionsebene durch ein Interface oder eine Basisklasse. Gegen diese
wird die Anwendung, hier die Klasse \texttt{Character} entwickelt.

\includegraphics{https://www.plantuml.com/plantuml/png/jL9DQyCm3BtxL-ZOCW8xbp4QjiDs6OCSTbPjBJ5rd23BWNtilwzEIho67fUZtdlIUqZQ1q6Ms3hLM4EWBMj7AXojxv6n1UqmX5A4xI4AFUlEL_QJu5OfF0HXr399e3oNbQ3GbmAuWNTRHwOTF3IO6EA4NWetCtTMRqVDAtT3ToIpsUvWwAoP6erX2Y6ZCCAFXCxw-irACyj_b9fIFM7VV-H8Sxs-SrdNgSSEbEsNuDePNYWAe_iJ82Fhky_ZatK1EZAJdyw-k_o2aVVOdl1A-3Gm3S_zcmbCYl_Bk3W55CNt_I9LVfPhR5xbTJvlzwuebkIUl8cj-mK0}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{using}\NormalTok{ System;}

\KeywordTok{public} \KeywordTok{abstract} \KeywordTok{class}\NormalTok{ AbstractState\{}
    \KeywordTok{public}\NormalTok{ Character figure;}
    \KeywordTok{public} \FunctionTok{AbstractState}\NormalTok{(Character figure)\{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{figure}\NormalTok{ = figure;}
\NormalTok{    \}}
    \KeywordTok{public} \KeywordTok{abstract} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{();}
    \KeywordTok{public} \KeywordTok{abstract} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{();}
    \KeywordTok{public} \KeywordTok{abstract} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{();}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ HappyState : AbstractState\{}
    \KeywordTok{public} \FunctionTok{HappyState}\NormalTok{(Character figure): }\KeywordTok{base}\NormalTok{(figure) \{\}}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Happy but switches to Aggressive"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        figure.}\FunctionTok{setState}\NormalTok{(}\KeywordTok{new} \FunctionTok{AggressiveState}\NormalTok{(figure));}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Happy"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is DealingWith"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ AggressiveState : AbstractState\{}
    \KeywordTok{public} \FunctionTok{AggressiveState}\NormalTok{(Character figure): }\KeywordTok{base}\NormalTok{(figure) \{\}}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Agrgessive"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Aggressive but switches to Neutral"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        figure.}\FunctionTok{setState}\NormalTok{(}\KeywordTok{new} \FunctionTok{NeutralState}\NormalTok{(figure));}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Aggressive but switches to Neutral"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        figure.}\FunctionTok{setState}\NormalTok{(}\KeywordTok{new} \FunctionTok{NeutralState}\NormalTok{(figure));}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ NeutralState : AbstractState\{}
    \KeywordTok{public} \FunctionTok{NeutralState}\NormalTok{(Character figure): }\KeywordTok{base}\NormalTok{(figure) \{\}}
    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Neutral but swiches to Agrgessive"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        figure.}\FunctionTok{setState}\NormalTok{(}\KeywordTok{new} \FunctionTok{AggressiveState}\NormalTok{(figure));}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Neutral"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \KeywordTok{override} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{()\{}
\NormalTok{        Console.}\FunctionTok{WriteLine}\NormalTok{(}\StringTok{"\{0\} is Aggressive but switches to Neutral"}\NormalTok{, figure.}\FunctionTok{name}\NormalTok{);}
\NormalTok{        figure.}\FunctionTok{setState}\NormalTok{(}\KeywordTok{new} \FunctionTok{HappyState}\NormalTok{(figure));}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Character\{}
    \KeywordTok{private}\NormalTok{ AbstractState currentState;}
    \KeywordTok{public} \DataTypeTok{string}\NormalTok{ name;}
    \KeywordTok{public} \FunctionTok{Character}\NormalTok{(}\DataTypeTok{string}\NormalTok{ name)\{}
        \KeywordTok{this}\NormalTok{.}\FunctionTok{name}\NormalTok{ = name;}
\NormalTok{        currentState = }\KeywordTok{new} \FunctionTok{HappyState}\NormalTok{(}\KeywordTok{this}\NormalTok{);}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{setState}\NormalTok{(AbstractState newState)\{}
\NormalTok{        currentState = newState;}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Addressed}\NormalTok{()\{}
\NormalTok{        currentState.}\FunctionTok{Addressed}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{Provoked}\NormalTok{()\{}
\NormalTok{        currentState.}\FunctionTok{Provoked}\NormalTok{();}
\NormalTok{    \}}

    \KeywordTok{public} \DataTypeTok{void} \FunctionTok{DealingWith}\NormalTok{()\{}
\NormalTok{        currentState.}\FunctionTok{DealingWith}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}

\KeywordTok{public} \KeywordTok{class}\NormalTok{ Program \{}
    \KeywordTok{public} \KeywordTok{static} \DataTypeTok{void} \FunctionTok{Main}\NormalTok{(}\DataTypeTok{string}\NormalTok{[] args)\{}
\NormalTok{        Character Golum = }\KeywordTok{new} \FunctionTok{Character}\NormalTok{(}\StringTok{"Golum"}\NormalTok{);}
\NormalTok{        Golum.}\FunctionTok{Provoked}\NormalTok{();}
\NormalTok{        Golum.}\FunctionTok{DealingWith}\NormalTok{();}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Was müssen Sie tuen, um einen weitere Zustand hinzuzufügen?
\item
  Wie können wir eine zusätzliche Transition integrieren?
\item
  Wie lassen sich Methoden einbetten, die nur von bestimmten Zuständen
  realisiert werden?
\end{enumerate}

\hypertarget{aufgabe-der-woche-1}{%
\section{Aufgabe der Woche}\label{aufgabe-der-woche-1}}

Bitte geben Sie uns ein Feedback!

https://panel.ovgu.de/s/c9845e6d/de.html

\hypertarget{ausblick}{%
\section{Ausblick}\label{ausblick}}

Und nun \ldots{} Wie geht es weiter?

Im nächsten Semester mit der Veranstaltung Robotikprojekt bestehend aus
zwei Teilen:

\begin{itemize}
\tightlist
\item
  theoretische Vorbereitung im Wintersemester (abstrakte Einführung in
  C++ mit der Perspektive Softwareentwurf, Einführung in ROS,
  Robotikanwendungen)
\item
  praktische Umsetzung im Sommersemester 2022
\end{itemize}

\begin{figure}
\centering
\includegraphics{https://raw.githubusercontent.com/ComputerScienceLecturesTUBAF/RobotikProjekt-SoSe21/main/imgs/Husky03.jpeg}
\caption{Husky}
\end{figure}
